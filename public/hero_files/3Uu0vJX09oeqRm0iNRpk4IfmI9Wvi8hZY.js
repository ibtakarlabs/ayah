;/*FB_PKG_DELIM*/

__d("ACSCipherSuiteModule",[],(function(t,n,r,o,a,i){"use strict";var e={hash:"SHA-512",name:"HMAC"},l={curveName:"RISTRETTO",macAlgorithm:e,value:1},s=new Map([[l.value,l]]);function u(e){return s.has(e)?s.get(e):null}i.VOPRF_RISTRETTO_HMACSHA512=l,i.getACSCipherSuiteByValue=u}),66);
__d("XPlatReactCrypto",["err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=self.crypto)==null?void 0:e.subtle;function u(e){var t;if(typeof((t=self.crypto)==null?void 0:t.getRandomValues)!="function")throw r("err")("crypto.getRandomValues: Not implemented");return self.crypto.getRandomValues(e),e}function c(){var e;if(typeof((e=self.crypto)==null?void 0:e.randomUUID)!="function")return null;var t=self.crypto.randomUUID();return typeof t=="string"?t:null}function d(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.importKey: Not implemented");return s.importKey(e,t,n,o,a)}function m(e,t){if(s==null)throw r("err")("crypto.subtle.exportKey: Not implemented");return s.exportKey(e,t)}function p(e,t,n){if(s==null)throw r("err")("crypto.subtle.generateKey: Not implemented");return s.generateKey(e,t,n)}function _(e,t,n){if(s==null)throw r("err")("crypto.subtle.encrypt: Not implemented");return s.encrypt(e,t,n)}function f(e,t,n){if(s==null)throw r("err")("crypto.subtle.decrypt: Not implemented");return s.decrypt(e,t,n)}function g(e,t,n){if(s==null)throw r("err")("crypto.subtle.sign: Not implemented");return s.sign(e,t,n)}function h(e,t){if(s==null)throw r("err")("crypto.subtle.digest: Not implemented");return s.digest(e,t)}function y(e,t,n){if(s==null)throw r("err")("crypto.subtle.deriveBits: Not implemented");return s.deriveBits(e,t,n)}function C(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.deriveKey: Not implemented");return s.deriveKey(e,t,n,o,a)}l.getRandomValues=u,l.randomUUID=c,l.subtleImportKey=d,l.subtleExportKey=m,l.subtleGenerateKey=p,l.subtleEncrypt=_,l.subtleDecrypt=f,l.subtleSign=g,l.subtleDigest=h,l.subtleDeriveBits=y,l.subtleDeriveKey=C}),98);
__d("ACSTokenHmacUtil",["XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return s(e,t).then(function(e){return c(e,n)})}function s(e,t){return o("XPlatReactCrypto").subtleImportKey("raw",t,e,!1,["sign"]).then(function(t){return{algo:e,key:t}})}function u(e){return typeof e.hash=="string"?e.hash:e.hash.name}function c(e,t){var n=e.algo,r=e.key,a={hash:u(n),name:"HMAC"};return o("XPlatReactCrypto").subtleSign(a,r,t).then(function(e){return new Uint8Array(e)})}l.hmac=e}),98);
__d("ArmadilloDataTraceType",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("13");l.armadilloMessageSend=s}),98);
__d("XPlatReactTextEncoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextEncoder;i.TextEncoder=e}),66);
__d("base64Binary",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){for(var t="",n=0;n<e.byteLength;n+=3){var r=e.subarray(n,n+3);t+=m(r)}var o=(e.byteLength+2)%3;return t.slice(0,t.length+o-2)+"==".slice(o)}function u(e){var t,n;e.length%4===0||s(0,51156);for(var r=e.length/4,o=(t=(n=e.match(/={0,2}$/))==null?void 0:n[0].length)!=null?t:0,a=new Uint8Array(r*3-o),i=0;i<r;i++){var l=p(e.slice(i*4,i*4+4));a.set(l.subarray(0,a.byteLength-i*3),i*3)}return a}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=">___?456789:;<=___\0___\0\x07\b	\n\v\f\r______\x1B !\"#$%&'()*+,-./0123";function m(e){var t,n,r=e[0]<<16|((t=e[1])!=null?t:0)<<8|((n=e[2])!=null?n:0);return String.fromCharCode(c.charCodeAt(r>>>18),c.charCodeAt(r>>>12&63),c.charCodeAt(r>>>6&63),c.charCodeAt(r&63))}function p(e){var t=d.charCodeAt(e.charCodeAt(0)-43)<<18|d.charCodeAt(e.charCodeAt(1)-43)<<12|d.charCodeAt(e.charCodeAt(2)-43)<<6|d.charCodeAt(e.charCodeAt(3)-43);return new Uint8Array([t>>>16,t>>>8&255,t&255])}l.encode=e,l.decode=u}),98);
__d("Base64Utils",["XPlatReactTextEncoder","base64Binary"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("base64Binary").encode(new(o("XPlatReactTextEncoder")).TextEncoder().encode(e))}function s(e){return o("base64Binary").encode(new Uint8Array(e))}function u(e){return o("base64Binary").decode(e).buffer}l.encodeUnicode=e,l.fromArrayBuffer=s,l.toArrayBuffer=u}),98);
__d("CryptoLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("FBLogger")("labyrinth_web","crypto."+e)}function s(e,t){return t instanceof Error?e.catching(t):e}l.CryptoLogger=e,l.captureError=s}),98);
__d("LSMaxInt32",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_int32(2147483647);l.default=s}),98);
__d("LSResult",[],(function(t,n,r,o,a,i){"use strict";function e(e){return[e]}i.default=e}),66);
__d("RetUtil",["LSResult"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("LSResult")(e)}l.getNullableRetResult=e}),98);
__d("CreateDerivedKeys",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i,l){var u=o("CryptoLogger").CryptoLogger("create_derived_keys");if(l.length<1||l.some(function(e){return(s||(s=o("I64"))).gt(e,r("LSMaxInt32"))}))return u.mustfix("Invalid key lengths for derive keys"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(void 0));var c=l.map((s||(s=o("I64"))).to_int32),d=l.map(s.to_int32).reduce(function(e,t){return e+t},0),m=function(t){for(var e=[],n=0,a=0,i=c.length;a<i;++a){var l=n+c[a];e.push(t.slice(n,l).buffer),n=l}return o("RetUtil").getNullableRetResult(r("LSVec").ofArray(e))};return o("XPlatReactCrypto").subtleImportKey("raw",i,"HKDF",!1,["deriveBits"]).then(function(e){return o("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:t,name:"HKDF",salt:a!=null?a:new Uint8Array(10).buffer},e,d*8)}).then(function(e){var t=new Uint8Array(e);return m(t)}).catch(function(e){return u.catching(e).mustfix("Failed to create derived keys"),o("RetUtil").getNullableRetResult()})}l.CreateDerivedKeys=u}),98);
__d("DoubleKeyMap",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.set=function(t,n,r){var e=this.$1.get(t);e||this.$1.set(t,e=new Map),e.set(n,r)},t.get=function(t,n){var e;return(e=this.$1.get(t))==null?void 0:e.get(n)},t.delete=function(t,n){var e=this.$1.get(t);e&&(e.delete(n),e.size===0&&this.$1.delete(t))},t.getAll=function(t){return this.$1.get(t)},t.deleteAll=function(t){this.$1.delete(t)},e})();i.DoubleKeyMap=e}),66);
__d("EBBase64Encode",["Base64Utils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("Base64Utils").fromArrayBuffer(e)}l.default=e}),98);
__d("EBMarkerIdToQPLEvent",["I64","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=(e||(e=o("I64"))).to_int32(t);switch(n){case 1021646192:return r("qpl")._(1021646192,"3099");case 1021656232:return r("qpl")._(1021656232,"3100");case 1021647318:return r("qpl")._(1021647318,"3101");case 1021651622:return r("qpl")._(1021651622,"3102");case 1021655799:return r("qpl")._(1021655799,"3103");case 1021648929:return r("qpl")._(1021648929,"3104");case 1021647593:return r("qpl")._(1021647593,"3105");case 1021653744:return r("qpl")._(1021653744,"3106");case 1021655355:return r("qpl")._(1021655355,"3107");case 1021648240:return r("qpl")._(1021648240,"3108");case 1021651939:return r("qpl")._(1021651939,"3109");case 1021656851:return r("qpl")._(1021656851,"3110");case 1021652813:return r("qpl")._(1021652813,"3111");case 1021653501:return r("qpl")._(1021653501,"3112");case 1021655710:return r("qpl")._(1021655710,"3114");case 1021655643:return r("qpl")._(1021655643,"3115");case 1021646076:return r("qpl")._(1021646076,"3116");case 1021642512:return r("qpl")._(1021642512,"3117");case 1021654781:return r("qpl")._(1021654781,"3118");case 1021649468:return r("qpl")._(1021649468,"3120");case 1021652080:return r("qpl")._(1021652080,"3121");case 1021652512:return r("qpl")._(1021652512,"3122");case 1021655828:return r("qpl")._(1021655828,"3124");case 1021642298:return r("qpl")._(1021642298,"3126");case 1021652377:return r("qpl")._(1021652377,"3127");case 521471316:return r("qpl")._(521471316,"2831");case 521478596:return r("qpl")._(521478596,"1329");case 521479468:return r("qpl")._(521479468,"3128");case 521473151:return r("qpl")._(521473151,"2593");case 521482563:return r("qpl")._(521482563,"3129");case 521482912:return r("qpl")._(521482912,"3131");case 521481876:return r("qpl")._(521481876,"1407");case 521471732:return r("qpl")._(521471732,"1454");case 521477507:return r("qpl")._(521477507,"1406");case 521478817:return r("qpl")._(521478817,"2806");case 521476801:return r("qpl")._(521476801,"3132");case 521484724:return r("qpl")._(521484724,"141");case 521473756:return r("qpl")._(521473756,"2768");case 521477113:return r("qpl")._(521477113,"2698");case 521478750:return r("qpl")._(521478750,"2850");case 521479165:return r("qpl")._(521479165,"3055");case 521484370:return r("qpl")._(521484370,"2995");case 521473213:return r("qpl")._(521473213,"27");case 521482281:return r("qpl")._(521482281,"2703");case 521476771:return r("qpl")._(521476771,"2454");case 521474469:return r("qpl")._(521474469,"2612");case 521471755:return r("qpl")._(521471755,"2586");case 521476367:return r("qpl")._(521476367,"2704");case 521473850:return r("qpl")._(521473850,"2910");case 521482558:return r("qpl")._(521482558,"2558");case 521482880:return r("qpl")._(521482880,"16");case 521473150:return r("qpl")._(521473150,"2143");case 521473369:return r("qpl")._(521473369,"2834");case 521485893:return r("qpl")._(521485893,"2835");case 521473922:return r("qpl")._(521473922,"2832");case 521479146:return r("qpl")._(521479146,"3133");case 521471468:return r("qpl")._(521471468,"2968");case 521480391:return r("qpl")._(521480391,"1167");case 521480745:return r("qpl")._(521480745,"3134");case 521481602:return r("qpl")._(521481602,"829");case 521475102:return r("qpl")._(521475102,"3135");case 521484676:return r("qpl")._(521484676,"2684");case 521485625:return r("qpl")._(521485625,"1876");case 521482085:return r("qpl")._(521482085,"409");case 521471024:return r("qpl")._(521471024,"2275");case 521474385:return r("qpl")._(521474385,"263");case 521479842:return r("qpl")._(521479842,"2163");case 521485383:return r("qpl")._(521485383,"2200");case 521478580:return r("qpl")._(521478580,"3136");case 521485815:return r("qpl")._(521485815,"3137");case 521482969:return r("qpl")._(521482969,"1519");case 521485406:return r("qpl")._(521485406,"272");case 521479972:return r("qpl")._(521479972,"3138");case 521484777:return r("qpl")._(521484777,"2715");case 521483076:return r("qpl")._(521483076,"3140");case 521482858:return r("qpl")._(521482858,"1290");case 521472542:return r("qpl")._(521472542,"295");case 521472456:return r("qpl")._(521472456,"1646");case 521476140:return r("qpl")._(521476140,"378");case 521473194:return r("qpl")._(521473194,"1331");case 521482763:return r("qpl")._(521482763,"296");case 521484295:return r("qpl")._(521484295,"1460");case 521476165:return r("qpl")._(521476165,"2432");case 521477947:return r("qpl")._(521477947,"2395");case 521486220:return r("qpl")._(521486220,"827");case 521482576:return r("qpl")._(521482576,"1069");case 521479124:return r("qpl")._(521479124,"1939");case 521476098:return r("qpl")._(521476098,"504");case 521472095:return r("qpl")._(521472095,"2859")}return null}l.markerIdToQPLEvent=s}),98);
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(t,n,r,o,a,i){"use strict";var e=16,l=28,s=16,u=128;i.hChaCha20SubKeyNonceLengthInBytes=e,i.totalNonceLengthInBytes=l,i.aesGcmTagLengthInBytes=s,i.aesGcmTagLength=u}),66);
__d("ErrorBrowserConsole",["fb-error"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("fb-error").ErrorBrowserConsole}),98);
__d("GetBlobFromInt64BE",["I64","LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=new Uint8Array(8);return a.reduceRight(function(e,t,n){var r=(s||(s=o("I64"))).to_int32(s.mod_(e,s.of_string("256")));return a[n]=r,s.div(e,s.of_string("256"))},t),(e||(e=n("Promise"))).resolve(r("LSResult")(a.buffer))}l.GetBlobFromInt64BE=u}),98);
__d("HChaCha20",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}e.fromHexString=function(t){var e=t.match(/[A-Fa-f0-9]{1,2}/g);if(t.length===0||t.length%2!==0||e==null)throw r("err")('The string "'+t+'" is not valid hex.');return new Uint8Array(e.map(function(e){return parseInt(e,16)}))},e.bufferToUint32Array=function(t){for(var e=new DataView(t),n=[],r=t.byteLength/4,o=0;o<r;o++)n.push(new DataView(e.buffer.slice(o*4,o*4+4)).getInt32(0));return Uint32Array.from(n)},e.rotate=function(t,n){var e=t&4294967295,r=n&31;return(e<<r|e>>>32-r)>>>0},e.quarterRound=function(n,r,o,a){var t=n,i=r,l=o,s=a;return t=t+i&4294967295,s=e.rotate(s^t,16),l=l+s&4294967295,i=e.rotate(i^l,12),t=t+i&4294967295,s=e.rotate(s^t,8),l=l+s&4294967295,i=e.rotate(i^l,7),[t>>>0,i>>>0,l>>>0,s>>>0]};var t=e.prototype;return t.createHCtx=function(n,o){var t=new Uint32Array(16),a=e.fromHexString("657870616e642033322d62797465206b");if(a.byteLength!==16)throw r("err")("Could not create context. Invalid constant buffer length of "+a.byteLength+". Expected a length of 16");if(n.byteLength!==32)throw r("err")("Could not create context. Invalid key buffer length of "+n.byteLength+". Expected a length of 32");if(o.byteLength!==16)throw r("err")("Could not create context. Invalid nonce buffer length of "+o.byteLength+". Expected a length of 16");var i=e.bufferToUint32Array(a.buffer),l=e.bufferToUint32Array(n),s=e.bufferToUint32Array(o);return t.set(i),t.set(l,i.length),t.set(s,i.length+l.length),t.buffer},t.hChaCha20Bytes=function(n,r){for(var t=new DataView(this.createHCtx(r,n)),o=t.getInt32(0),a=t.getInt32(4),i=t.getInt32(8),l=t.getInt32(12),s=t.getInt32(16),u=t.getInt32(20),c=t.getInt32(24),d=t.getInt32(28),m=t.getInt32(32),p=t.getInt32(36),_=t.getInt32(40),f=t.getInt32(44),g=t.getInt32(48),h=t.getInt32(52),y=t.getInt32(56),C=t.getInt32(60),b=0;b<10;b++){var v=e.quarterRound(o,s,m,g);o=v[0],s=v[1],m=v[2],g=v[3];var S=e.quarterRound(a,u,p,h);a=S[0],u=S[1],p=S[2],h=S[3];var R=e.quarterRound(i,c,_,y);i=R[0],c=R[1],_=R[2],y=R[3];var L=e.quarterRound(l,d,f,C);l=L[0],d=L[1],f=L[2],C=L[3];var E=e.quarterRound(o,u,_,C);o=E[0],u=E[1],_=E[2],C=E[3];var k=e.quarterRound(a,c,f,g);a=k[0],c=k[1],f=k[2],g=k[3];var I=e.quarterRound(i,d,m,h);i=I[0],d=I[1],m=I[2],h=I[3];var T=e.quarterRound(l,s,p,y);l=T[0],s=T[1],p=T[2],y=T[3]}return Uint32Array.from([o,a,i,l,g,h,y,C]).buffer},e})();l.HChaCha20=e}),98);
__d("PakeCpaceUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function l(e,t){var n=new e.VectorInt;return t.forEach(function(e){n.push_back(e)}),n}i.typedArrayToBuffer=e,i.uint8ArrayToVectorInt=l}),66);
__d("Hmac_v2",["CryptoLogger","LSResult","PakeCpaceUtils","Promise","WACryptoSha256HmacBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i){try{var t=new(o("WACryptoSha256HmacBuilder")).Sha256HMacBuilder(new Uint8Array(a)).update(new Uint8Array(i)).finish();return(e||(e=n("Promise"))).resolve(r("LSResult")(o("PakeCpaceUtils").typedArrayToBuffer(t)))}catch(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("hmac_v2"),e).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",i==null?void 0:i.byteLength,!1),e}};l.default=s}),98);
__d("MAWBridge",["WABridge"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("WABridge").getBridge()}l.getBridge=e}),98);
__d("IIGDAPI",["MAWBridge"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o("MAWBridge").getBridge().sendAndReceive("backend","igdapi",{args:n,type:e})}}l.makeBridgedApi=e}),98);
__d("IGDBridgedAPI",["IIGDAPI"],(function(t,n,r,o,a,i,l){"use strict";var e,s={33:(e=o("IIGDAPI")).makeBridgedApi("33"),46:e.makeBridgedApi("46"),sendEditMessage:e.makeBridgedApi("sendEditMessage"),sendMediaMessage:e.makeBridgedApi("sendMediaMessage"),sendOrRemoveReaction:e.makeBridgedApi("sendOrRemoveReaction"),sendXmaReceiverFetch:e.makeBridgedApi("sendXmaReceiverFetch")},u=s;l.default=u}),98);
__d("IGDRouteProvider.react",["react","react-compiler-runtime","useCurrentRoute"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext;function m(e){var t,n=e==null||(t=e.params)==null?void 0:t.thread_key;return n!=null&&typeof n=="string"?n:null}var p=c();function _(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=r("useCurrentRoute")(),i;t[0]!==a?(i=m(a),t[0]=a,t[1]=i):i=t[1];var l=i,u;return t[2]!==n||t[3]!==l?(u=s.jsx(p.Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=u):u=t[4],u}function f(){return d(p)}l.IGDRouteContextProvider=_,l.useThreadKeyFromCurrentRoute=f}),98);
__d("MAWUnsafeCoerce",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.unsafeCoerce=e}),66);
__d("WAAssertUnreachable",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw r("err")("Impossible value, the default statement should never be reached for value: "+e)}l.default=e}),98);
__d("WAJids",["WAAssertUnreachable","err"],(function(t,n,r,o,a,i,l){"use strict";var e=0,s="@me",u="@system",c="status@broadcast",d="0@s.whatsapp.net",m="call",p="@g.us",_=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,f="@call",g="@msgr",h="msgr",y="@interop",C="interop",b=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,v=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,S=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,R=/^([1-9][0-9]{0,19})@msgr$/,L=/^([1-9][0-9]{0,19})(:0)?@msgr$/,E="@s.whatsapp.net",k="s.whatsapp.net",I="@s.whatsapp.net",T="s.whatsapp.net",D="lid",x="@newsletter",$=/^([1-9][0-9]{0,19})@newsletter$/,P=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,N=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,M="@lid",w="lid",A=/^([1-9][0-9]{0,14})@lid$/,F=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,O="@broadcast",B=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,W=/^([0-9a-fA-F]{18,32})@call$/,q="@hosted",U="hosted",V=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,H="@hosted.lid",G="hosted.lid",z=/^([1-9][0-9]{0,14}):99@hosted.lid$/,j="@bot",K=/^[1-9][0-9]{0,19}(:0)?@bot$/,Q="16505361212"+I,X=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function Y(e){return""+e+I}function J(e){return""+e+M}function Z(e){return""+e+g}function ee(e){return e.endsWith(p)?e:""+e+p}function te(e){return e.endsWith(x)?e:""+e+x}function ne(e){return e.endsWith(q)?e:""+e+q}function re(e){return e.endsWith(H)?e:""+e+H}function oe(){return p}function ae(e){if(e.endsWith(I))return e.slice(0,-I.length);if(e.endsWith(g))return e.slice(0,-g.length);if(e.endsWith(y))return e.slice(0,-y.length);if(e.endsWith(M))return e.slice(0,-M.length);if(e.endsWith(j))return e.slice(0,-j.length);throw r("err")('userIdFromJid called with non-user jid "'+e+'"')}function ie(e,t){return ae(e)+":"+t+I}function le(e,t){return ae(e)+":"+t+g}function se(e,t){return Ee(e)+":"+t+M}function ue(e,t){return ae(e)+":"+t+Ct(e)}function ce(e){return""+e+O}function de(e){return e.split("@")[0]}function me(e){return e.split("@")[0]}function pe(e){var t=e.split("@")[0],n=t.split(":"),r=n[0],o=n[1],a=parseInt(o,10);return{userId:r,deviceID:a}}function _e(e){var t=pe(e);return t.deviceID}function fe(e,t){return e===s||e===u?t:de(e)}function ge(e){return e===s||e===u?null:e}function he(e){return e===s||e===u||!e.endsWith(I)?null:e}function ye(e){if(!e.endsWith(I))throw r("err")('phoneNumberFromJid called with non-user jid "'+e+'"');return e.slice(0,-I.length)}function Ce(e){if(e.endsWith(I))return ye(e);if(e.endsWith(M))return Ee(e);throw r("err")('lidOrPhoneFromUserJid called with non phone or lid jid "'+e+'"')}function be(e){return e.endsWith(I)||e.endsWith(y)||e.endsWith(g)||e.endsWith(M)?e:null}function ve(e){return e.endsWith(I)?e:null}function Se(e){return e===c?null:e}function Re(e){return e===c?null:e}function Le(e){return e===c?c:null}function Ee(e){if(!e.endsWith(M))throw r("err")('lidFromLidUserJid called with non-LidUserJid "'+e+'"');return e.slice(0,-M.length)}function ke(e){var t=e.split("@"),n=t[0],r=t[1];return n=n.split(":")[0],n=n.split(".")[0],r===U&&(r=T),r===G&&(r=D),n+"@"+r}function Ie(e){return ke(e)}function Te(e){return ke(e)}function De(e){return e.jidType==="phoneDevice"||e.jidType==="interopDevice"||e.jidType==="lidDevice"||e.jidType==="msgrDevice"?e.deviceJid:e.jidType==="lidUser"||e.jidType==="interopUser"||e.jidType==="msgrUser"||e.jidType==="phoneUser"?e.userJid:e.jidType==="group"?e.groupJid:e.jidType==="status"?e.statusJid:e.jidType==="call"?e.callJid:e.jidType==="newsletter"?e.newsletterJid:e.jidType==="hosted"?e.hostedDeviceJid:e.jidType==="hostedLid"?e.hostedLidDeviceJid:e.jidType==="bot"?e.botJid:(e.jidType,e.broadcastJid)}function xe(t){return ae(t)+":"+e+I}function $e(t){return ae(t)+":"+e+g}function Pe(t){return se(t,e)}function Ne(t){return _e(t)===e}function Me(e){return e}function we(e){return e}function Ae(e){var t=e.split("@"),n=t[0],r=t[1],o=n.split(":"),a=o[0],i=o[1],l=a.split("."),s=l[0],u=l[1];return{user:s,device:i,agent:u,server:r}}function Fe(e){var t=Ae(e),n=t.user,r=t.agent,o=r===void 0?"0":r,a=t.device,i=a===void 0?"0":a,l=t.server;return n+"."+o+":"+i+"@"+l}function Oe(e){switch(e.jidType){case"interopUser":return e.userJid;case"lidUser":return e.userJid;case"msgrUser":return e.userJid;case"phoneUser":return e.userJid;case"group":return e.groupJid;case"status":return e.statusJid;case"interopDevice":return e.deviceJid;case"lidDevice":return e.deviceJid;case"msgrDevice":return e.deviceJid;case"phoneDevice":return e.deviceJid;case"broadcast":return e.broadcastJid;case"call":return e.callJid;case"newsletter":return e.newsletterJid;case"hosted":return e.hostedDeviceJid;case"hostedLid":return e.hostedLidDeviceJid;case"bot":return e.botJid;default:return r("WAAssertUnreachable")(e.jidType)}}function Be(e){if(e===m)return{jidType:"call",callJid:m};if(e===c)return{jidType:"status",statusJid:c};if(N.test(e))return{jidType:"phoneUser",userJid:e};if(v.test(e))return{jidType:"interopUser",userJid:e};if(R.test(e))return{jidType:"msgrUser",userJid:e};if(L.test(e)){var t=e.substr(0,e.indexOf(":"));return{jidType:"msgrUser",userJid:Z(t)}}else return P.test(e)?{jidType:"phoneDevice",deviceJid:e}:b.test(e)?{jidType:"interopDevice",deviceJid:e}:S.test(e)?{jidType:"msgrDevice",deviceJid:e}:_.test(e)?{jidType:"group",groupJid:e.endsWith(p)?e:""+e+p}:B.test(e)?{jidType:"broadcast",broadcastJid:e}:W.test(e)?{jidType:"call",callJid:e}:A.test(e)?{jidType:"lidUser",userJid:e}:F.test(e)?{jidType:"lidDevice",deviceJid:e}:$.test(e)?{jidType:"newsletter",newsletterJid:e}:V.test(e)?{jidType:"hosted",hostedDeviceJid:e}:z.test(e)?{jidType:"hostedLid",hostedLidDeviceJid:e}:K.test(e)?{jidType:"bot",botJid:e}:{jidType:"unknown"}}function We(e){return e==="status@broadcast"?e:null}function qe(e){if(N.test(e)||v.test(e)||R.test(e)||A.test(e))return e;if(L.test(e)){var t=e.substr(0,e.indexOf(":"));return Z(t)}else return null}function Ue(e){return A.test(e)?e:null}function Ve(e){return B.test(e)?e:null}function He(e){return P.test(e)||S.test(e)||b.test(e)||F.test(e)||V.test(e)||z.test(e)?e:N.test(e)?bt(e):K.test(e)?vt(e):null}function Ge(e){return b.test(e)?e:null}function ze(e){return _.test(e)?e:null}function je(e){return We(e)||ze(e)||Ve(e)?e:null}function Ke(e){return W.test(e)?e:null}function Qe(e){return e==="s.whatsapp.net"||e==="g.us"||e==="call"?e:null}function Xe(e){return qe(e)||ze(e)}function Ye(e){return $.test(e)?e:null}function Je(e){return V.test(e)?e:null}function Ze(e){return z.test(e)?e:null}function et(e){return be(e)==null?e:null}function tt(e){var t=Ae(e),n=t.user,r=t.device,o=r===void 0?"0":r,a=t.server;return n+":"+o+"@"+a}function nt(e){if(e.endsWith(p))return e.slice(0,-p.length);throw r("err")('groupId called with non-group jid "'+e+'"')}function rt(e){var t=Be(e);return t.jidType==="unknown"?e:t.jidType==="status"?t.statusJid:(t.jidType,Oe(t).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3"))}function ot(e){return e.includes("@")?e.replace(X,rt):e}function at(e){return e.endsWith(p)?e:null}function it(e,t){if(e.endsWith(I))return t.phoneUser(e);if(e.endsWith(g))return t.msgrUser(e);if(e.endsWith(y))return t.interopUser(e);if(e.endsWith(M))return t.lidUser(e);if(at(e)!=null)return t.group(e);throw r("err")("Can not switch on chat jid "+e)}function lt(e,t){if(e.endsWith(g))return t.user(e);if(at(e)!=null)return t.group(e);throw r("err")("Can not switch on chat jid "+e)}function st(e,t){if(e.endsWith(I))return t.user(e);if(at(e)!=null)return t.group(e);throw r("err")("Can not switch on chat jid "+e)}function ut(e,t){return it(e,{lidUser:function(n){return t.user(n)},interopUser:function(n){return t.user(n)},msgrUser:function(n){return t.user(n)},phoneUser:function(n){return t.user(n)},group:function(n){return t.group(n)}})}function ct(e,t){return e===c?t.status():st(e,{user:t.user,group:t.group})}function dt(e,t){return e===c?t.status():it(e,{interopUser:t.interopUser,phoneUser:t.phoneUser,msgrUser:t.msgrUser,lidUser:t.lidUser,group:t.group})}function mt(e,t){return e===c?t.multicast(c):st(e,{user:t.user,group:t.multicast})}function pt(e){return e.endsWith(M)}function _t(e){return e==="@me"}function ft(e){return e==="@system"}function gt(){return g}function ht(){return I}function yt(){return E}function Ct(e){if(e.endsWith(I))return I;if(e.endsWith(g))return g;if(e.endsWith(M))return M;if(e.endsWith(j))return j;throw r("err")('userDomainFromJid called with non-user jid "'+e+'"')}function bt(t){return ae(t)+":"+e+Ct(t)}function vt(e){return""+ae(e)+Ct(e)}function St(e){var t=e.platform,n=t==="msgr"?g:I;function r(e){return""+e+n}function o(){return n}return{toUserJid:r,getUserDomain:o}}function Rt(e){return e}function Lt(e){return e}function Et(e){return e}function kt(e){return e}function It(e){return e}function Tt(e){return e}function Dt(e){return e}function xt(e){return e}function $t(e){return e}function Pt(e){return e}function Nt(e){return e}function Mt(e){return e}function wt(e){return e}function At(e){return e}function Ft(e){return e}function Ot(e){return e}function Bt(e){return it(e,{group:function(t){return nt(t)},lidUser:function(t){return ae(t)},interopUser:function(t){return ae(t)},phoneUser:function(t){return ae(t)},msgrUser:function(t){return ae(t)}})}function Wt(){return f}l.DEFAULT_DEVICE_ID=e,l.AUTHOR_ME=s,l.AUTHOR_SYSTEM=u,l.STATUS_JID=c,l.PSA_JID=d,l.CALL_LINK_JID=m,l.MSGR_USER_DOMAIN=g,l.MSGR_USER_JID_SUFFIX=h,l.INTEROP_DOMAIN=y,l.INTEROP_USER_JID_SUFFIX=C,l.WA_SERVER_JID_SUFFIX=k,l.WA_USER_DOMAIN=I,l.WA_USER_JID_SUFFIX=T,l.WA_LID_SUFFIX=D,l.WA_NEWSLETTER_JID_DOMAIN=x,l.LID_DOMAIN=M,l.LID_SUFFIX=w,l.HOSTED_DOMAIN=q,l.HOSTED_SUFFIX=U,l.HOSTED_LID_DOMAIN=H,l.HOSTED_LID_SUFFIX=G,l.BOT_DOMAIN=j,l.SURVEY_USER_JID=Q,l.toPhoneUserJid=Y,l.toLidUserJid=J,l.toMsgrUserJid=Z,l.toGroupJid=ee,l.toNewsletterJid=te,l.toHostedDeviceJid=ne,l.toHostedLidDeviceJid=re,l.getGroupDomain=oe,l.userIdFromJid=ae,l.toPhoneDeviceJid=ie,l.toMsgrDeviceJid=le,l.toLidDeviceJid=se,l.toDeviceJid=ue,l.toBroadcastJid=ce,l.extractUserId=de,l.extractChatId__DANGEROUS=me,l.extractDeviceIDParts=pe,l.extractDeviceId=_e,l.authorToUserId=fe,l.authorAsUserJid=ge,l.authorAsPhoneUserJid=he,l.phoneNumberFromJid=ye,l.lidOrPhoneFromUserJid=Ce,l.interpretAsUserJid=be,l.interpretAsPhoneUserJid=ve,l.asChatJid=Se,l.asPhoneChatJid=Re,l.asStatusJid=Le,l.lidFromLidUserJid=Ee,l.extractUserJid=ke,l.extractPhoneUserJid=Ie,l.extractLidUserJid=Te,l.extractJidFromJidWithType=De,l.defaultPhoneDeviceJidForUser=xe,l.defaultMsgrDeviceJidForUser=$e,l.defaultLidDeviceJidForLidUserJid=Pe,l.isPrimaryDevice=Ne,l.interpretAsDeviceId=Me,l.interpretAsNumber=we,l.parseJidParts=Ae,l.fullFormDeviceJidString=Fe,l.extractFromJid=Oe,l.interpretAndValidateJid=Be,l.validateStatusJid=We,l.validateUserJid=qe,l.validateLidUserJid=Ue,l.validateBroadcastJid=Ve,l.validateDeviceJid=He,l.validateInteropDeviceJid=Ge,l.validateGroupJid=ze,l.validateMulticastJid=je,l.validateCallJid=Ke,l.validateDomainJid=Qe,l.validateChatJid=Xe,l.validateNewsletterJid=Ye,l.validateHostedDeviceJid=Je,l.validateHostedLidDeviceJid=Ze,l.asMulticastJid=et,l.stripAgentIdFromPhoneDeviceJid=tt,l.groupIdFromJid=nt,l.sanitizeJidForLogging=rt,l.maybeSanitizeLogLineText=ot,l.interpretAsGroupJid=at,l.switchOnChatJidType=it,l.switchOnMsgrChatJidType=lt,l.switchOnPhoneChatJidType=st,l.switchOnUserChatJidType=ut,l.switchOnPhoneJidType=ct,l.switchOnJidType=dt,l.switchOnMulticastJidType=mt,l.isLidUser=pt,l.isAuthorMe=_t,l.isAuthorSystem=ft,l.getMsgrUserDomain=gt,l.getWhatsappUserDomain=ht,l.getServerDomain=yt,l.defaultDeviceJidForUser=bt,l.defaultDeviceJidForBot=vt,l.createJidUtils=St,l.unsafeCoerceToChatJid=Rt,l.unsafeCoerceToDeviceJid=Lt,l.unsafeCoerceToPhoneDeviceJid=Et,l.unsafeCoerceToMsgrDeviceJid=kt,l.unsafeCoerceToInteropDeviceJid=It,l.unsafeCoerceToLidDeviceJid=Tt,l.unsafeCoerceToUserJid=Dt,l.unsafeCoerceToLidUserJid=xt,l.unsafeCoerceToPhoneUserJid=$t,l.unsafeCoerceToInteropUserJid=Pt,l.unsafeCoerceToMsgrUserJid=Nt,l.unsafeCoerceToGroupJid=Mt,l.unsafeCoerceToDeviceId=wt,l.unsafeCoerceToNewsletterJid=At,l.unsafeCoerceToHostedDeviceJid=Ft,l.unsafeCoerceToHostedLidDeviceJid=Ot,l.threadIdForChatJid=Bt,l.getGroupCallDomain=Wt}),98);
__d("InstamadilloMessageIdUtils",["FBLogger","I64","MAWUnsafeCoerce","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r;return(e||(e=o("I64"))).isI64(t)?r=(e||(e=o("I64"))).to_string(t):r=t,r+":"+n}function u(e){var t=e.split(":");if(t.length!==2)throw r("FBLogger")("igd_web").mustfixThrow("Invalid instamadillo message id format. Format is <threadKey>:<stanzaId>.");return{stanzaId:t[1],threadKey:t[0]}}function c(e){var t=e.split(":");return t.length!==2?(r("FBLogger")("igd_web").warn("Invalid instamadillo message id format. Format is <threadKey>:<stanzaId>."),null):{stanzaId:t[1],threadKey:t[0]}}function d(e){var t=e.message.decrypted.id;return m(t)}function m(e){var t=e.externalId,n=o("WAJids").threadIdForChatJid(e.chat);return s(n,t)}function p(t,n,r){return{author:o("WAJids").toMsgrUserJid(r),chat:o("WAJids").toMsgrUserJid((e||(e=o("I64"))).to_string(t)),externalId:o("MAWUnsafeCoerce").unsafeCoerce(n)}}l.toInstamadilloMessageId=s,l.fromInstamadilloMessageId=u,l.maybeFromInstamadilloMessageId=c,l.getInstamadilloMessageIdFromStanza=d,l.getInstamadilloMessageIdFromProtocolMsgId=m,l.toProtocolMsgId=p}),98);
__d("LSDatascriptRuntimeTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UI","BROKER"]);i.TopLevelCallOrigin=e}),66);
__d("LSClientDependencies",[],(function(t,n,r,o,a,i){}),null);
__d("LSDynamicDependencies",["Bootloader","LSDynamicDependenciesEventEmitter","ODS","Promise","SiteData","asyncToGeneratorRuntime","clearTimeout","cr:19620","err","justknobx","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=babelHelpers.extends({},n("cr:19620"));function c(e){Object.assign(u,e)}var d={_tombstone:!0};function m(t){var a=new Map;for(var i of t){var l=i.name;l!=null&&!f(l)&&a.set(l,r("nullthrows")(i.value))}if(a.size===0)return(s||(s=n("Promise"))).resolve();var c=new(s||(s=n("Promise")))(function(t){var i={},l=[],s=function(){var t=d[0],r=d[1],a=r==null?void 0:r.__dr;i[a]={be:1,r:[]},l.push(a),(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",a),u[t]={load:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield c,u[t]});function r(){return e.apply(this,arguments)}return r})()}};for(var d of a)s();r("Bootloader").handlePayload({compMap:i,consistency:{rev:r("SiteData").client_revision}}),p(r("Bootloader"),l,function(e){Array.from(a.entries()).forEach(function(t,n){var r=t[0],o=t[1];u[r]=e[n]}),t()})});return c}function p(e,t,n){return e.loadModules.call(e,t,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t)})}function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}function f(e){return e in u&&u[e]!==d}var g=r("justknobx")._("2800");function h(t,a,i){var l=new Map;for(var c of t!=null?t:[])f(c)||l.set(c,"LS"+_(c));for(var m of a!=null?a:[])f(m+".bs")?m+".nop"in u||l.set(m+".nop","LS"+_(m)+".nop"):l.set(m+".bs","LS"+_(m)+".nop");for(var h of i!=null?i:[])h in u||l.set(h,"LS"+_(h));if(l.size===0)return(s||(s=n("Promise"))).resolve();var y=new(s||(s=n("Promise")))(function(t,a){var i={},s=[],c=function(){var t=m[0],r=m[1];(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",r),o("LSDynamicDependenciesEventEmitter").emitLoadModuleEvent(r),i[r]={be:1,r:[]},s.push(r),u[t]={load:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield y}catch(e){throw u[t]=d,e}return u[t]});function r(){return e.apply(this,arguments)}return r})()}};for(var m of l)c();r("Bootloader").handlePayload({compMap:i,consistency:{rev:r("SiteData").client_revision}});var _=p(r("Bootloader"),s,function(e){r("clearTimeout")(f),Array.from(l.entries()).forEach(function(t,n){var r=t[0],o=t[1];u[r]=e[n]}),t()}),f=r("setTimeout")(function(){_.remove();var e=r("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",g,Array.from(l.keys()));e.name="dynamic_sproc_loading_timeout",a(e)},g)});return y}l.cachedModules=u,l.addToCachedModules=c,l.TOMBSTONE=d,l.downloadRelayDependencies=m,l.downloadBootloaderDependencies=h}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s={add:(e||(e=o("I64"))).add,and_:e.and_,asr_:e.asr_,cast:function(n){return(e||(e=o("I64"))).mk(n[1],n[0])},div:e.div,eq:function(n,r){return n==null&&r==null||n!=null&&r!=null&&(e||(e=o("I64"))).equal(n,r)},from_string:function(n){try{return(e||(e=o("I64"))).of_string(n)}catch(e){throw r("FBLogger")("messenger_web").mustfixThrow('Unable to cast "%s" to int64',n)}},ge:e.ge,gt:e.gt,le:e.le,lsl_:e.lsl_,lsr_:e.lsr_,lt:e.lt,max:e.max,min:e.min,mod_:e.mod_,mul:e.mul,neq:function(n,r){return n==null&&r!=null||n!=null&&r==null||n!=null&&r!=null&&!(e||(e=o("I64"))).equal(n,r)},of_float:e.of_float,of_int32:e.of_int32,or_:e.or_,random:function(){var t=Array.from(o("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));return t[0]>>>=1,(e||(e=o("I64"))).add(e.lsl_(e.of_float(t[0]),32),e.of_float(t[1]))},sub:e.sub,to_float:e.to_float,to_int32:e.to_int32,to_string:function(n){return n==null?n:(e||(e=o("I64"))).to_string(n)},xor:e.xor};l.default=s}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s={__val__:"__stop_iteration__"};function u(e){return{__val__:"__next_value__",next:e}}function c(e){return e!=null&&typeof e=="object"&&e.__val__==="__next_value__"}function d(t,n,a){for(var i=m(t,a);!(e||(e=r("isPromise")))(i);){if(i.done)return o("LSSynchronousPromise").makeSynchronousPromise(i);var l=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(n(i));if((e||(e=r("isPromise")))(l))return l.then(function(e){if(e===s)return i;var r=c(e)?e.next:void 0;return d(t,n,r)});if(l===s)return o("LSSynchronousPromise").makeSynchronousPromise(i);var u=c(l)?l.next:void 0;i=m(t,u)}var _=p(n);return i.then(function(e){return e.done?e:_(e).then(function(r){if(r===s)return e;var o=c(r)?r.next:void 0;return d(t,n,o)})})}function m(t,n){var a=t.next(n);return(e||(e=r("isPromise")))(a)?o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a):a}function p(e){return function(t){var n=e(t);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(n)}}l.STOP_ITERATION=s,l.wrapNextValue=u,l.iteratorLoop=d}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return u(e,t)},n.next=function(){var n={done:!0},r=function(r){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t(r.value.item)).then(function(e){if(e)return n=r,o("LSMaybeSyncIteration").STOP_ITERATION})};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){return n})},n}function c(e,t,n){var r,a=0;return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return c(e,t,n)},r.next=function(){if(a>=n)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});var r={done:!0},i=function(n){if(!(a++<t))return r=n,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,i).then(function(){return r})},r}function d(e,t){return m(e).then(function(e){return e.reduce(function(e,n){return e.then(function(){return t(n)})},o("LSSynchronousPromise").makeSynchronousPromise(void 0))})}function m(e){var t=[],n=function(n){t.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return t})}function p(t,n,r){var a;r===void 0&&(r=[]);var i={ASC:1,DESC:-1},l=function(r,a){for(var t=r.item,l=a.item,s=0;s<n.length;s++){var u=n[s],c=u[0],d=t[c],m=l[c],p=0;if(d==null&&m==null?p=0:d==null&&m!=null?p=-1:d!=null&&m==null?p=1:p=(e||(e=o("ReStoreKeyComparer"))).compareValue(d,m),p!==0)return p*i[n[s][1]]}return 0},s,u=[],c=[],d=function(t){for(var e=[],n=r.length-1;n>=0;n--)e.push(t[r[n]]);return e},m=function(){c=u,c.sort(l),u=[]};return a={},a[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return p(t,n,r)},a.next=function(){if(c.length)return o("LSSynchronousPromise").makeSynchronousPromise({done:!1,value:c.shift()});var n=function(n){var t=d(n.value.item);if(s!=null&&(e||(e=o("ReStoreKeyComparer"))).compareKey(s,t)!==0)return m(),u.push(n.value),s=t,o("LSMaybeSyncIteration").STOP_ITERATION;s=t,u.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(t,n).then(function(){return!c.length&&u.length&&m(),c.length?{done:!1,value:c.shift()}:{done:!0}})},a}function _(e){var t=0,n=function(){t++};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return(s||(s=o("I64"))).of_int32(t)})}function f(e,t){return{forEach:function(a){return m(e).then(function(e){var n=e.reduce(function(e,n){var r=n.item[t],o=(e.get(r)||0)+1;return e.set(r,o)},new(r("LSDict"))),i=o("LSSynchronousPromise").makeSynchronousPromise(void 0),l=function(){var e=u[0],n=u[1];i=i.then(function(){var r;return a((r={},r[t]=e,r.group_count=(s||(s=o("I64"))).of_int32(n),r))})};for(var u of n.entries())l();return i})}}}l.filter=u,l.slice=c,l.forEach=d,l.toArray=m,l.sortBy=p,l.count=_,l.groupBy=f}),98);
__d("LSJson",["FBLogger","I64","LSDict","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e,s=512,u={useLSTypes:!1};function c(t,n){var a=n===void 0?u:n,i=a.useLSTypes;function l(e,t){return function(){return function(n){var r=e()(n);if(r!=null){var o=r[0],a=r[1];return[t(o),a]}}}}function s(e){return JSON.parse('"'+e+'"')}function c(e){return function(){return function(t){var n=s(e);if(t.startsWith(n))return[n,t.substr(n.length)]}}}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){return function(e){var n=[],r=e;for(var o of t){var a=o()(r);if(a==null)return;r=a[1],n.push(a[0])}return[n,r]}}}function m(e){return function(){return function(t){var n=e.exec(t);return n!=null?[n,t.substr(n[0].length)]:void 0}}}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){return function(e){for(var n of t){var r=n()(e);if(r!=null)return r}}}}function _(e){return function(){return function(t){var n=e()(t);return n!=null?n:[void 0,t]}}}function f(e){return function(){return function(t){for(var n=e()(t),r=[],o=t;n!=null;)o=n[1],r.push(n[0]),n=e()(o);return[r,o]}}}var g=m(/^[\n\r\s]*/),h=l(m(/^\"((?:[^\"\\]|\\.)*)\"/),function(e){var t=e[1];return s(t)}),y=l(m(/^-?\d+(?:(?:\.\d+)?[eE][-\+]?\d+|\.\d+)/),function(e){var t=e[0];return Number(t)}),C=l(m(/^-?\d+/),function(t){var n=t[0];return(e||(e=o("I64"))).of_string(n)}),b=l(c("null"),function(e){return null}),v=l(c("true"),function(e){return!0}),S=l(c("false"),function(e){return!1}),R=l(d(g,h,g,c(":"),function(){return T()}),function(e){var t=e[1],n=e[4];return[t,n]}),L=l(d(R,f(d(g,c(","),R))),function(e){var t=e[0],n=e[1];return[t].concat(n.map(function(e){var t=e[2];return t}))}),E=l(d(c("{"),_(L),g,c("}")),function(e){var t=e[1],n=t===void 0?[]:t;return i?new(r("LSDict"))(n):Object.fromEntries(n)}),k=l(d(function(){return T()},f(d(g,c(","),function(){return T()}))),function(e){var t=e[0],n=e[1];return[t].concat(n.map(function(e){var t=e[2];return t}))}),I=l(d(c("["),g,_(k),g,c("]")),function(e){var t=e[2],n=t===void 0?[]:t;return i?r("LSVec").ofArray(n):n}),T=l(d(g,p(E,h,y,C,I,b,v,S),g),function(e){var t=e[1];return t}),D=T()(t);if(D==null)throw r("FBLogger")("messenger_web").mustfixThrow("error parsing string");if(D[1]!=="")throw r("FBLogger")("messenger_web").mustfixThrow("unexpected %s",D[1]);return D[0]}function d(t,n,a){if(n===void 0&&(n=0),a===void 0&&(a=""),n>s)throw r("FBLogger")("messenger_web").mustfixThrow("recursion limit exceeded");if(typeof t=="string"||typeof t=="number")return JSON.stringify(t);if(typeof t=="boolean")return t?"1":"0";if(t==null)return"null";if(typeof t=="object"){if(Array.isArray(t))return t.tag==="ls-array"?"["+t.map(function(e,t){return d(e,n+1,a+"/"+t.toString())}).join(",")+"]":(t._tag!=="i64"&&r("FBLogger")("messenger_web").warn("LSJson payload contains untagged i64: %s",a),(e||(e=o("I64"))).to_string(t));if(t instanceof r("LSDict"))return"{"+Array.from(t.entries()).map(function(e){var t=e[0],o=e[1];if(typeof t=="string")return JSON.stringify(t)+":"+d(o,n+1,a+"/"+t);throw r("FBLogger")("messenger_web").mustfixThrow("key must be a string")}).join(",")+"}"}throw r("FBLogger")("messenger_web").mustfixThrow("type not supported: %s, path: %s",t===null?"null":typeof t,a)}l.parse=c,l.stringify=d}),98);
__d("LSPendingTasksPluginType",[],(function(t,n,r,o,a,i){var e=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});i.default=e}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(t,n,r,o,a,i,l){"use strict";var e,s="4",u="16",c=new Set([r("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function d(t){var n=c.has((e||(e=o("I64"))).to_float(t.pluginType)),r=t.context===u||t.context===s;return n||r}l.default=d}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","isNativeTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set(["messages","attachments","reactions"]);function c(e){return u.has(e)}function d(e,t,n){return e&&t.name==="pending_tasks"&&n!=null&&r("isNativeTask")(n)}function m(e){for(var t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function p(e,t,n){n===void 0&&(n="asc");var r=e.entries(new WeakMap,n);function a(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,e.next=function(){var e={done:!0},a=0,i="start",l=[],u=function(u){for(var r=function(){var e=a,r=t[e]||{},c=r.end,d=r.start,m=u.value[0];if(d&&i==="start"){var p=(s||(s=o("ReStoreKeyComparer"))).compareValue(m[e],d[0]),_=p*(n==="asc"?1:-1)<d[1];if(_){if(i="start_verify",l=m.slice(0,e),e===m.length-1&&p===0)return{v:void 0};var f=[].concat(l,[d[0]],d[1]&&n==="asc"||!d[1]&&n==="desc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:o("LSMaybeSyncIteration").wrapNextValue(f)}}else i="check_end"}if(d&&i==="start_verify"&&!l.every(function(e,t){return(s||(s=o("ReStoreKeyComparer"))).compareValue(e,m[t])===0}))return a=0,i="start",{v:void 0};if(c&&(s||(s=o("ReStoreKeyComparer"))).compareValue(c[0],m[e])*(n==="asc"?1:-1)<c[1])return a=0,i="start",{v:o("LSMaybeSyncIteration").wrapNextValue([].concat(m.slice(0,e),n==="asc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]))};a++,i="start"},c;a<t.length;)if(c=r(),c)return c.v;return e=u,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(r,u).then(function(){return e})},e}return a()}function _(e,t,n,o,a){return{delete:function(){return n.delete.apply(n,e)},item:t,update:function(l){var i=a&&c(o.name)?{transportKey:"FBBroker"}:{},s=babelHelpers.extends({},t,l,i);if(d(a,o,s))throw r("FBLogger")("messenger_web").mustfixThrow("cannot insert native task in dynamic mode");return n.upsert(e,m(s))}}}function f(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return f(e,t)},n.next=function(){var n={done:!0},r=function(t){return n=t,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){if(n.done)return o("LSMaybeSyncIteration").iteratorLoop(t,r)}).then(function(){return n})},n}function g(e,t,n){var r,a=[{done:!0},{done:!0}],i=function(t){var e=a[t];return a[t]={done:!0},e};return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return g(e,t,n)},r.next=function(){var r=function(t){return function(e){return t==="a"?a[0]=e:a[1]=e,o("LSMaybeSyncIteration").STOP_ITERATION}},l=o("LSSynchronousPromise").makeSynchronousPromise();return a[0].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(e,r("a"))})),a[1].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(t,r("b"))})),l.then(function(){if(a[0].done&&a[1].done)return{done:!0};if(a[0].done)return i(1);if(a[1].done)return i(0);var e=(s||(s=o("ReStoreKeyComparer"))).compareKey(a[0].value[0],a[1].value[0]);return e===0||e*(n==="asc"?1:-1)<0?i(0):i(1)})},r}var h=(e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return h},e.next=function(){return o("LSSynchronousPromise").makeSynchronousPromise({done:!0})},e);function y(e,t,n,a,i,l,s,u){var m=new Set,y=e.length>1,C=e.length===1&&e[0][1]==null,b=e.map(function(e){var r=e[0],s=e[1];return r.map(function(e){a.key_lookup===!0&&e.length!==0&&(s==null?"primary":"index "+s)+""+n.name+(JSON.stringify(e)||""),a.table_scan===!0&&e.length===0&&""+n.name;var r=e.map(function(e){return l(e,t)}),u=r.length===(s==null?n.primaryKeyIds:n.indexes[s]).length&&r.every(function(e){var t=e.end,n=e.start;return n&&t&&n[0]===t[0]&&n[1]===0&&t[1]===0});if(u){var c=function(){var e,t=!1;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=c,e.next=function(){var e;if(t)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});t=!0;var a=r.map(function(e){var t=e.start;return t[0]});return(e=s==null?i:i.index(s)).get.apply(e,a).then(function(e){if(!e)return{done:!0};var t=o("ReStoreVaulting").maybeUnvaultDbRow(e,n.name);return{done:!1,value:[a,t]}})},e};return c()}return p(s==null?i:i.index(s),r,t)})}).flat().reduce(function(n,r,o){var a=o===0&&n==null?h:n;return e.length>1?f(a,r):g(a,r,t)});function v(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=v,e.next=function(){var e=!0,t,a,l,p,f=function(i){e=!1;var r=i.value;if(a=r[0],l=r[1],t=C?a:n.primaryKeyIds.map(function(e){return l[e]}),d(s,n,l)){p=i,e=!0;return}if(c(n.name)&&s&&l!=null&&l.transportKey!=="FBBroker"){p=i,e=!0;return}if(y){var u=JSON.stringify(t);if(m.has(u)){e=!0;return}m.add(u)}return o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(b,f).then(function(){if(p!=null){var o=p.value[1].transportKey;r("FBLogger")("messenger_web").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',u,o)}return e||t==null||l==null?{done:!0}:{done:!1,value:_(t,l,i,n,s)}})},e}return v()}l.isTranportKeyEnforcedTable=c,l.isNativePendingTaskViolation=d,l.stripUndefinedProperties=m,l.unionIterators=f,l.mergeIterators=g,l.fetch=y}),98);
__d("LSRuntimeDb",["FBLogger","LSIterationHelpers","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.name.match(/secure_|inbox(?!_)/i)}function s(t,n,o,a,i,l,s){return{metadata:o,table:function(d){var c=o.tableNames[o.tableIds[d]];if(n===0&&e(c))throw r("FBLogger")("messenger_web").mustfixThrow("cannot access secure table from dynamic mode");return u(t,c,a,i,l,s)},transactionId:t.__internal__transaction_id}}function u(e,t,n,a,i,l){var s=e.transactionTable(t.name,a[a.length-1]);return{add:function(n){l==null||l.logTableOperation(t.name,"add"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker");var e=s.add(n);return r("gkx")("6636")?e:Promise.resolve(e)},fetch:function(){l==null||l.logTableOperation(t.name,"fetch"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"asc",t,n,s,c,i,a.join(", "))},fetchDesc:function(){l==null||l.logTableOperation(t.name,"fetchDesc"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"desc",t,n,s,c,i,a.join(", "))},peekNextAutoIncrementId:function(){return l==null||l.logTableOperation(t.name,"peekNextAutoIncrementId"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),s.peekNextAutoIncrementId()},put:function(n){if(l==null||l.logTableOperation(t.name,"put"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker"),o("LSIterationHelpers").isNativePendingTaskViolation(i,t,n))throw r("FBLogger")("messenger_web").mustfixThrow("cannot put native task via LS transport");var e=t.primaryKeyIds.map(function(e){if(n[e]!==void 0)return n[e];throw r("FBLogger")("messenger_web").mustfixThrow("primary key must be defined on object")}),a=s.delete.apply(s,e).then(function(){return s.add(o("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},n)))});return r("gkx")("6636")?a:Promise.resolve(a)}}}function c(e,t){if(typeof e=="object"&&!Array.isArray(e)){var n,o;if(t==="asc"){if(Object.prototype.hasOwnProperty.call(e,"gt")&&(n=[e.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");n=[e.gte,0]}if(Object.prototype.hasOwnProperty.call(e,"lt")&&(o=[e.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");o=[e.lte,0]}}else{if(Object.prototype.hasOwnProperty.call(e,"lt")&&(n=[e.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");n=[e.lte,0]}if(Object.prototype.hasOwnProperty.call(e,"gt")&&(o=[e.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");o=[e.gte,0]}}return{end:o,start:n}}return{end:[e,0],start:[e,0]}}l.LSRuntimeDb=s,l.parseConstraint=c}),98);
__d("MWFBLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("messenger_web",t)},s=function(t){return r("FBLogger")("messenger_web_media",t)},u=function(t){return r("FBLogger")("messenger_web_sharing",t)},c=function(t){return r("FBLogger")("messenger_web_calling",t)},d=function(t){return r("FBLogger")("mps",t)};l.MWLogger=e,l.MWMediaLogger=s,l.MWSharingLogger=u,l.MWCallingLogger=c,l.MPSLogger=d}),98);
__d("XPlatReactTextDecoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextDecoder;i.TextDecoder=e}),66);
__d("LS",["ExecutionEnvironment","FBLogger","I64","LSDatascriptRuntimeTypes","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MWFBLogger","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","isPromise","justknobx","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h="LS_WEB",y=o("MessengerLogHistory").getInstance("ls");function C(e){return o("base64Binary").decode(e).buffer}var b={compareTo:function(t,n){for(var e=new Uint8Array(t),r=new Uint8Array(n),o=Math.min(e.length,r.length),a=0;a<o;a++){var i=e[a]-r[a];if(i!==0)return i}return e.length===r.length?0:e.length-r.length},eq:function(t,n){if(t==null&&n==null)return!0;if(t==null||n==null)return!1;var e=new Uint8Array(t),r=new Uint8Array(n);if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==r[o])return!1;return!0},ge:function(t,n){return b.compareTo(t,n)>=0},gt:function(t,n){return b.compareTo(t,n)>0},le:function(t,n){return b.compareTo(t,n)<=0},lt:function(t,n){return b.compareTo(t,n)<0},neq:function(t,n){return!b.eq(t,n)},of_string:function(t){if(t!=null){var e=new(o("XPlatReactTextEncoder")).TextEncoder;return e.encode(t).buffer}},to_string:function(t){if(t!=null){var e=new(o("XPlatReactTextDecoder")).TextDecoder;return e.decode(t)}}};function v(e){if(e.length!==1)throw r("FBLogger")("messenger_web").mustfixThrow("only literal strings supported");var t=e[0],n=parseInt(t.substr(-8),16),a=parseInt(t.substr(0,t.length-8),16);return(g||(g=o("I64"))).mk((n>>>1)+(a&1)*2147483648^-(n&1),a>>>1^-(n&1))}function S(e){var t,n;return(t=(n=e.__sproc_name__)!=null?n:e.__debugModuleSource)!=null?t:"<unknown_sproc>"}var R=(function(){var e=0;function t(t){var o=t.args,a=t.shouldLog,i=t.sprocName;if(n("cr:1088")==null||n("cr:1088").logStoredProcedureCall(i,o),!(!a||!n("cr:4790"))){var l=++e;return n("cr:4790").markerStart(r("qpl")._(25302991,"143"),l),n("cr:4790").markerAnnotate(r("qpl")._(25302991,"143"),{string:{name:i}},{instanceKey:l}),l}}function o(e,t,o){var a=e.shouldLog;!a||t==null||n("cr:4790")==null||n("cr:4790").markerEnd(r("qpl")._(25302991,"143"),o,t)}function a(e){return Math.random()*r("MetaConfig")._("10")<1}return{call:t,logSprocDone:o,shouldLogSproc:a}})(),L="Native operation timeout; transaction blocked",E=30*1e3;function k(t,n,a,i,l,g,I,T){l===void 0&&(l={}),g===void 0&&(g=void 0);var D=[],x=o("LSRuntimeDb").LSRuntimeDb(i,t,n,l,D,I,T),$=function(n,l){for(var e=arguments.length,s=new Array(e>2?e-2:0),u=2;u<e;u++)s[u-2]=arguments[u];var c;if(typeof l=="string"){if(c=a[l.toString()],c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native type op with type: %s and id: %s",n,l);if(c===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",l);c.load&&(c=c.load())}else c=l;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(c).then(function(e){return e.call.apply(e,[i,t].concat(s))})},P=function(n){for(var e=arguments.length,l=new Array(e>1?e-1:0),s=1;s<e;s++)l[s-1]=arguments[s];var u;if(typeof n=="string"){if(u=a[n+".bs"]||a[n+".nop"],u==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native op with id: %s",n);if(u===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",n);u.load&&(u=u.load())}else u=n;var c,d;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(u).then(function(e){var n,a;c=(n=(a=e.__nop_name__)!=null?a:e==null?void 0:e.toString().slice(0,250))!=null?n:"<unknown nop name>",d=T==null?void 0:T.logNativeOperationStart(c);var s=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e.apply(void 0,[i,t].concat(l)));return(m||(m=r("isPromise")))(s)&&r("justknobx")._("3895")&&(f||(f=r("ExecutionEnvironment"))).isInBrowser?Promise.race([s,new Promise(function(e,t){return r("setTimeout")(function(){return t(r("err")(L))},E)})]):s}).then(function(e){var t;return(t=d)==null||t.end(),e},function(e){var t;(t=d)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"NATIVE_OP_ID",c).mustfixThrow("Native operation %s failed: was_timeout: %s, is_in_worker: %s",c,(e==null?void 0:e.message)===L,(f||(f=r("ExecutionEnvironment"))).isInWorker)})},N=function(t){return t.slice(1).reduce(function(e,n){return typeof n!="function"?(r("FBLogger")("messenger_web").mustfix("Non-function passed (%s, type %s) in sequence (%s)",n,typeof n,JSON.stringify(t.map(function(e){return typeof e}))),e):e.then(n)},t[0]())},M=function(t,n){return t.slice(n)};return{Map:r("LSDict"),blob:C,blobs:b,constructor:{n:v},count:o("LSIterationOperations").count,createArray:function(){return r("LSVec").ofArray([])},createArrayWithElements:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("LSVec").ofArray(t)},db:x,filter:o("LSIterationOperations").filter,forEach:o("LSIterationOperations").forEach,groupBy:o("LSIterationOperations").groupBy,i64:r("LSInt64Lite"),islc:o("LSIterationOperations").slice,like:function(t,n){var e=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(e).test(t)},logger:function(t){if(g)return{debug:g,info:g,mustfix:g,warn:g};var e=o("MWFBLogger").MWLogger(),n=t.startsWith("epoch mismatch"),a=t.startsWith("cursor mismatch");if(n||a){var i=function(t){y.error(t,"error");var e=(function(){return n?"epoch_mismatch":a?"cursor_mismatch":"fixme_could_not_produce_key"})();(p||(p=o("ODS"))).bumpEntityKey(3185,"lsplatform",e)};return{debug:function(t){return y.debug(t)},info:function(t){return y.debug(t)},mustfix:i,warn:i}}else return r("gkx")("26382")||(e.info=r("emptyFunction")),e},loopAsync:function(n,a){function t(i){if(r("LSInt64Lite").lt(i,n)){for(var l=i,u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l));!(m||(m=r("isPromise")))(u);){if(l=r("LSInt64Lite").add(l,v(e||(e=babelHelpers.taggedTemplateLiteralLoose(["2"])))),!r("LSInt64Lite").lt(l,n))return o("LSSynchronousPromise").makeSynchronousPromise(void 0);u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l))}return u.then(function(){return t(r("LSInt64Lite").add(l,v(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))})}return o("LSSynchronousPromise").makeSynchronousPromise(void 0)}return t(v(u||(u=babelHelpers.taggedTemplateLiteralLoose(["0"]))))},loopSync:function(t,n){for(var e=v(c||(c=babelHelpers.taggedTemplateLiteralLoose(["0"])));r("LSInt64Lite").lt(e,t);e=r("LSInt64Lite").add(e,v(d||(d=babelHelpers.taggedTemplateLiteralLoose(["2"])))))n(e)},merge:function(){function e(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue(e,t)>0?e:t}function t(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue([e[0],-e[1]],[t[0],-t[1]])<0?e:t}for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.reduce(function(n,r){var a=o("LSRuntimeDb").parseConstraint(r,"asc");return{end:n.end&&a.end?t(a.end,n.end):a.end||n.end,start:n.start&&a.start?e(a.start,n.start):a.start||n.start}},{});return babelHelpers.extends({},i.start?i.start[1]?{gt:i.start[0]}:{gte:i.start[0]}:null,i.end?i.end[1]?{lt:i.end[0]}:{lte:i.end[0]}:null)},n:v,nativeOperation:P,nativeTypeOperation:$,notnull:function(t){if(t===null)throw r("FBLogger")("messenger_web").mustfixThrow("value should not be null");return t},print:function(t){},resolve:function(t){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t)},resolveGuaranteeAsync:function(t){var e;return((e=self.Promise)!=null?e:Promise).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(t))},rm:r("LSInt64Lite").of_int32(t),sequence:N,slice:M,sortBy:o("LSIterationOperations").sortBy,storedProcedure:function(s){for(var e=arguments.length,u=new Array(e>1?e-1:0),c=1;c<e;c++)u[c-1]=arguments[c];var d;if(typeof s=="string"){if(d=a[s],d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented stored procedure with id: %s",s);if(d===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent sproc loading failed for: %s (retryable)",s);d.load&&(d=d.load())}else d=s;var m=this;switch(t){case 0:m=k(2,n,a,i,l,g,I);break;case 2:m=k(1,n,a,i,l,g,I);break}var p,_,f,y;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(d).then(function(e){return _=S(e),f=R.shouldLogSproc(_),D.push(_),p=R.call({args:u,shouldLog:f,sprocName:_}),y=T==null?void 0:T.logSprocCallStart(_,o("LSDatascriptRuntimeTypes").TopLevelCallOrigin.UI),i.reportUsedTablesForSyncAccess(e.__tables__),e.apply(void 0,u.concat([m]))}).then(function(e){var t;return D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,2),(t=y)==null||t.end(),e},function(e){var t;throw D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,3),(t=y)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"SPROC_STACK",D.join(`
`)).warn("Sproc %s failed",_),e})},throw:function(t){throw r("FBLogger")("messenger_web").mustfixThrow(t)},toArray:o("LSIterationOperations").toArray,toJSON:function(t){return o("LSJson").stringify(t)}}}k.n=v,l.default=k}),98);
__d("LSACSExperimentCapability",[],(function(t,n,r,o,a,i){var e=Object.freeze({RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:0,BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:1,INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:2});i.default=e}),66);
__d("LSAuthorityLevel",[],(function(t,n,r,o,a,i){var e=Object.freeze({OPTIMISTIC:20,CLIENT_PARTIAL:40,SERVER_PARTIAL:60,AUTHORITATIVE_PENDING_REPLACEMENT:75,AUTHORITATIVE:80,CLIENT_AUTHORITATIVE_DELETE:100});i.default=e}),66);
__d("LSBase64Encode.nop",["EBBase64Encode","LSResult","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(a?r("EBBase64Encode")(a):void 0))};e.__nop_name__="LSBase64Encode",l.default=e}),98);
__d("LSBeginHandlingFireForgetTasksForQueue",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return n[0]=t.createArray(),t.forEach(t.filter(t.db.table(5).fetch(),function(t){return t.queueName===e[0]}),function(e){var r=e.item;return n[3]=new t.Map,n[3].set("label",r.context),n[3].set("payload",r.taskValue),n[3].set("queue_name",r.queueName),n[3].set("task_id",r.taskId),n[3].set("failure_count",t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))?void 0:t.i64.cast([0,0])),n[4]=(n[0].push(n[3]),n[0])})},function(o){return n[1]=new t.Map,n[1].set("tasks",n[0]),n[1].set("epoch_id",void 0),n[2]=new t.Map,n[2].set("queue_name",e[0]),n[2].set("next_sync_ms",void 0),n[2].set("work_item_type",t.i64.cast([0,5])),n[2].set("network_payload",n[1]),n[2].set("http_url_override",void 0),n[2].set("skip_realtime_gateway",!1),r[0]=n[2]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreBeginHandlingFireForgetTasksForQueueStoredProcedure",e.__tables__=["pending_fire_and_forget_tasks"],a.exports=e}),null);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingFireForgetTasksForQueue"),a.queueName);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSFactory",["ExecutionEnvironment","LS","LSDynamicDependencies","LSMetadata","cr:8709"],(function(t,n,r,o,a,i,l){"use strict";var e,s={dynamic:!1};function u(t,a){a===void 0&&(a=s);var i=r("LS")(1,o("LSMetadata").schema,o("LSDynamicDependencies").cachedModules,t,void 0,void 0,a.dynamic,a.lsRuntimeLogger);return n("cr:8709")!=null&&(e||(e=r("ExecutionEnvironment"))).isInBrowser?n("cr:8709").wrapSprocInvocationWithProfiler(i):i}l.default=u}),98);
__d("LSForceTaskExecutionImmediately",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?0:(o=i.item,n[1]=t.i64.of_float(Date.now()),t.i64.lt(n[1],o.minTimeToSyncTimestampMs)?t.forEach(t.db.table(2).fetch([[[e[0]]]]),function(e){var n=e.update,r=e.item;return n({minTimeToSyncTimestampMs:t.i64.cast([0,0]),failureCount:t.i64.add(r.failureCount,t.i64.cast([0,1]))})}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreForceTaskExecutionImmediatelyStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3226"),s=o("FalcoLoggerInternal").create("meb_client_logs",e),u=s;l.default=u}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c,d){return r("MebClientLogsFalcoEvent").log(function(){return{calling_class:l,device_family_id:void 0,device_registration_id:void 0,log_level:(s||(s=o("I64"))).to_string(d),msg:u,trace_ids:r("LSVec").toArray(c)}}),(e||(e=n("Promise"))).resolve()};u.__nop_name__="LSLogMebClientEvent",l.default=u}),98);
__d("LSRemoveBlindedTokens",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(308).fetch(),function(t){return t.configId===e[0]}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSAnonymousCredentialsRemoveBlindedTokensStoredProcedure",e.__tables__=["secure_acs_blinded_tokens"],a.exports=e}),null);
__d("LSRemoveUsedTokens",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(309).fetch(),function(e){return t.i64.le(e.redeemLimit,t.i64.cast([0,0]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSAnonymousCredentialsRemoveUsedTokensStoredProcedure",e.__tables__=["secure_acs_tokens"],a.exports=e}),null);
__d("LSGetCurrentTokenPoolState",["LSArrayGetObjectAt","LSRemoveBlindedTokens","LSRemoveUsedTokens"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),r[1]=t.createArray(),t.count(t.filter(t.db.table(307).fetch(),function(t){return t.projectName===e[0]})).then(function(e){return r[2]=e})},function(n){return t.forEach(t.filter(t.db.table(307).fetch(),function(t){return t.projectName===e[0]}),function(e){var n=e.item;return r[7]=n.configId,t.i64.gt(r[0],n.expirationTimestampMs)?t.forEach(t.db.table(307).fetch([[[r[7]]]]),function(e){return e.delete()}):t.resolve(r[8]=(r[1].push(r[7]),r[1]))})},function(e){return t.storedProcedure(n("LSRemoveUsedTokens"))},function(e){return r[3]=t.i64.cast([0,0]),r[4]=t.i64.of_int32(r[1].length),t.i64.gt(r[4],t.i64.cast([0,0]))?t.loopAsync(r[4],function(e){return r[7]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[1],r[7]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(e){return t.count(t.filter(t.db.table(309).fetch(),function(e){return e.configId===r[8]})).then(function(e){return r[10]=e})},function(e){return r[3]=t.i64.add(r[10],r[3]),t.storedProcedure(n("LSRemoveBlindedTokens"),r[8])}])}):t.resolve()},function(e){var n;return t.i64.gt(r[2],t.i64.cast([0,0]))?(r[7]=t.i64.of_int32(r[1].length),r[5]=t.i64.ge(r[7],t.i64.cast([0,1]))):r[5]=void 0,r[5]!==void 0?(r[5]?(t.i64.gt(r[3],t.i64.cast([0,0]))?r[8]=t.i64.cast([0,3]):r[8]=t.i64.cast([0,2]),r[7]=r[8]):r[7]=t.i64.cast([0,1]),r[6]=r[7]):r[6]=t.i64.cast([0,0]),n=[r[6],r[3]],o[0]=n[0],o[1]=n[1]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsGetCurrentTokenPoolStateStoredProcedure",e.__tables__=["secure_acs_configurations","secure_acs_tokens"],a.exports=e}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.count(t.filter(t.db.table(310).fetch(),function(t){return t.projectName===e[1]})).then(function(e){return r[0]=e})},function(o){return t.i64.gt(r[0],t.i64.cast([0,0]))&&e[3]===!0?t.resolve(0):t.sequence([function(n){return t.forEach(t.filter(t.db.table(310).fetch(),function(t){return t.projectName===e[1]}),function(e){return e.delete()})},function(o){return t.i64.gt(e[2],t.i64.cast([0,0]))?(r[3]=t.i64.of_float(Date.now()),r[1]=t.i64.add(r[3],e[2])):r[1]=t.i64.cast([0,0]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",e[1]].join(""),t.i64.cast([0,362]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[1],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.db.table(310).add({taskId:r[2],projectName:e[1],maxClientTokenPoolSize:e[0]})}])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsIssueNextSyncStoredProcedure",e.__tables__=["acs_request_context"],a.exports=e}),null);
__d("XPlatReactVoprf",["Promise","WAWasmModuleCache","asyncToGeneratorRuntime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf");function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield s.load(),t=e.LSVoprfWasm,n=e.locateFile,r=yield t({getWasmModule:function(){return o("WAWasmModuleCache").loadWasmModule(n())}}),a,i;try{a=r.createCurveRistretto(),i=r.createVoprfExpTwohashdh(a);var l={voprfInfo:{curvePtr:a,voprfPtr:i},voprfWasm:r};return{voprfInstance:l}}catch(e){throw a!=null&&r.freeCurve(a),i!=null&&r.freeVoprf(i),e}}),c.apply(this,arguments)}function d(){return(e||(e=n("Promise"))).resolve(u())}function m(e){var t=e.voprfInfo,n=e.voprfWasm,r=t.curvePtr,o=t.voprfPtr;n.freeCurve(r),n.freeVoprf(o)}l.loadXPlatReactVoprf=d,l.freeVoprfInstance=m}),98);
__d("LSVoprfBlind.nop",["XPlatReactVoprf","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("XPlatReactVoprf").loadXPlatReactVoprf(),a=r.voprfInstance,i=a.voprfInfo,l=a.voprfWasm;try{var s=l.blind(i,new Uint8Array(n));return[s.blindedElement.buffer,s.blindingFactor.buffer]}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(a)}});function t(t,n,r){return e.apply(this,arguments)}return t})();e.__nop_name__="LSVoprfBlind",l.default=e}),98);
__d("LSVoprfCreateNonce.nop",["LSSynchronousPromise","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e=32,s=function(n,r){var t=e,a=new Uint8Array(t);return o("XPlatReactCrypto").getRandomValues(a),o("LSSynchronousPromise").makeSynchronousPromise([a.buffer])};s.__nop_name__="LSVoprfCreateNonce",l.default=s}),98);
__d("LSTaskSerializerAcsIssueNextSync",["LSBase64Encode.nop","LSGetCurrentTokenPoolState","LSIssueNextSync","LSVoprfBlind.nop","LSVoprfCreateNonce.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(310).fetch([[[e[0]]]]).next().then(function(e,o){var a,i=e.done,l=e.value;return i?((function(e){t.logger(e).mustfix(e)})("Request context for the passed task_id was not found"),a=[void 0,void 0,void 0],r[0]=a[0],r[1]=a[1],r[2]=a[2]):(o=l.item,t.sequence([function(e){return r[9]=o.projectName,r[10]=o.maxClientTokenPoolSize,t.storedProcedure(n("LSGetCurrentTokenPoolState"),r[9]).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(e){var o;return t.i64.eq(r[4],t.i64.cast([0,0]))||t.i64.eq(r[4],t.i64.cast([0,1]))?t.resolve((r[11]=new t.Map,r[11].set("project_name",r[9]),r[12]=t.toJSON(r[11]),o=[r[12],t.i64.cast([0,351]),void 0],r[6]=o[0],r[7]=o[1],r[8]=o[2])):t.sequence([function(e){return r[11]=t.i64.of_float(Date.now()),t.islc(t.sortBy(t.filter(t.db.table(307).fetch(),function(e){return e.projectName===r[9]&&t.i64.gt(e.expirationTimestampMs,r[11])}),[["expirationTimestampMs","DESC"]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?((function(e){t.logger(e).mustfix(e)})("A config for the passed project name was not found"),r[16]=new t.Map,r[16].set("project_name",r[9]),r[16].set("max_client_token_pool_size",r[10]),r[17]=t.toJSON(r[16]),a=[r[17],t.i64.cast([0,362]),void 0],r[12]=a[0],r[13]=a[1],r[14]=a[2]):(o=l.item,t.sequence([function(e){return r[24]=o.configId,r[16]=o.maxEvals,r[26]=o.tokenPollFrequencyMs,r[25]=o.maxClientTokenPoolSize,r[17]=t.i64.sub(r[10],r[5]),r[23]=t.i64.lt(r[16],r[17])?r[16]:r[17],r[18]=t.createArray(),t.i64.gt(r[23],t.i64.cast([0,0]))?t.loopAsync(r[23],function(e){return r[27]=e,t.sequence([function(e){return t.nativeOperation(n("LSVoprfCreateNonce.nop")).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return t.blobs.neq(r[28],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSVoprfBlind.nop"),r[28]).then(function(e){var t;return t=e,r[29]=t[0],r[30]=t[1],t})},function(e){return t.blobs.neq(r[29],void 0)&&t.blobs.neq(r[30],void 0)?t.sequence([function(e){return r[31]=t.i64.cast([-1,4294967295]),t.db.table(308).peekNextAutoIncrementId().then(function(e){return r[31]=e})},function(e){return t.db.table(308).add({tokenId:void 0,blindedNonce:r[29],blindingFactor:r[30],nonce:r[28],configId:r[24]})},function(e){return t.db.table(308).fetch([[[r[31]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[32]=t.i64.cast([-1,4294967295]):(n=a.item,r[32]=n.tokenId)})},function(e){return t.i64.eq(r[32],t.i64.cast([-1,4294967295]))?t.sequence([function(e){return t.islc(t.db.table(308).fetchDesc([[[{gt:t.i64.cast([0,0])}]]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?r[37]=t.i64.cast([-1,4294967295]):(n=a.item,r[37]=n.tokenId)})},function(e){return r[34]=r[37]}]):t.resolve(r[34]=r[32])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[29]).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[36]=new t.Map,r[36].set("id",r[34]),r[36].set("data",r[35]==null?"":r[35]),r[37]=(r[18].push(r[36]),r[18])}]):t.resolve()}]):t.resolve()}])}):t.resolve()},function(e){var o;return r[19]=t.i64.of_int32(r[18].length),t.i64.gt(r[19],t.i64.cast([0,0]))?t.resolve((r[27]=new t.Map,r[27].set("project_name",r[9]),r[27].set("config_id",r[24]),r[27].set("blinded_nonces",r[18]),r[28]=t.toJSON(r[27]),o=[r[28],t.i64.cast([0,354]),void 0],r[20]=o[0],r[21]=o[1],r[22]=o[2])):t.sequence([function(e){var o;return t.i64.neq(r[26],void 0)?t.sequence([function(e){var o;return t.i64.neq(r[25],void 0)?t.sequence([function(e){return(function(e){t.logger(e).info(e)})(["Already have the max number of tokens. Scheduling next ACS token sync locally for project: ",r[9]].join("")),t.storedProcedure(n("LSIssueNextSync"),r[25],r[9],r[26],!1)},function(e){var t;return t=[void 0,void 0,void 0],r[30]=t[0],r[31]=t[1],r[32]=t[2],t}]):t.resolve(((function(e){t.logger(e).info(e)})(["token_poll_frequency is nonnull but max_client_token_pool_size is null. Already have the max number of tokens. Scheduling the next ACS token sync for project: ",r[9]].join("")),r[33]=new t.Map,r[33].set("project_name",r[9]),r[33].set("max_client_token_pool_size",r[10]),r[34]=t.toJSON(r[33]),o=[r[34],t.i64.cast([0,362]),void 0],r[30]=o[0],r[31]=o[1],r[32]=o[2]))},function(e){var t;return t=[r[30],r[31],r[32]],r[27]=t[0],r[28]=t[1],r[29]=t[2],t}]):t.resolve(((function(e){t.logger(e).info(e)})(["Already have the max number of tokens. Scheduling the next ACS token sync for project: ",r[9]].join("")),r[30]=new t.Map,r[30].set("project_name",r[9]),r[30].set("max_client_token_pool_size",r[10]),r[31]=t.toJSON(r[30]),o=[r[31],t.i64.cast([0,362]),void 0],r[27]=o[0],r[28]=o[1],r[29]=o[2]))},function(e){var t;return t=[r[27],r[28],r[29]],r[20]=t[0],r[21]=t[1],r[22]=t[2],t}])},function(e){var t;return t=[r[20],r[21],r[22]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]))})},function(e){var t;return t=[r[12],r[13],r[14]],r[6]=t[0],r[7]=t[1],r[8]=t[2],t}])},function(e){var t;return t=[r[6],r[7],r[8]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}]))})},function(e){var t;return t=[r[0],r[1],r[2]],o[0]=t[0],o[1]=t[1],o[2]=t[2],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsTaskSerializerAcsIssueNextSyncStoredProcedure",e.__tables__=["acs_request_context","secure_acs_configurations","secure_acs_blinded_tokens"],a.exports=e}),null);
__d("LSTaskSerializerDeleteChatHistory",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("taskSerializerDeleteChatHistory: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("taskSerializerDeleteChatHistory: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var r;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),r=[n[12],t.i64.cast([0,903]),void 0],n[4]=r[0],n[5]=r[1],n[6]=r[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1],n[2]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerDeleteChatHistoryStoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSTaskSerializerE2eeMessageIntegrityCheckV2",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,705]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerE2eeMessageIntegrityCheckV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerE2eeMetadataThreadIntegrityCheck",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,700]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTaskSerializerE2eeMetadataThreadIntegrityCheckStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupAction",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,n.i64.cast([0,319]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupActionStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsLoopingUpload",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] LSEncryptedBackupsLoopingUploadPayloadsTable table not found"),r[3]="LSEncryptedBackupsLoopingUploadPayloadsTable table not found",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] ","",r[3]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",r[3],r[2],t.i64.cast([0,3]))},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsLoopingUpload",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=['{"request_id":"unknown","upload_type":"FBN","payload":{"error_code":2,"operation":"","error_message":"","__typename":"MPSUploadFailurePayload"}}',t.i64.cast([0,50043]),void 0],o[0]=n[0],o[1]=n[1],o[2]=n[2],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeserializeFromJsonIntoDictionaryV2.nop",["FBLogger","LSDict","LSJson","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l){var t=o("LSJson").parse(l,{useLSTypes:!0});if(t instanceof r("LSDict"))return(e||(e=n("Promise"))).resolve([t]);throw r("FBLogger")("messenger_web").mustfixThrow("unexpected Dictionary type")};s.__nop_name__="LSDeserializeFromJsonIntoDictionary",l.default=s}),98);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","LSSynchronousPromise","XPlatReactTextEncoder","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){var e=new(o("XPlatReactTextEncoder")).TextEncoder;try{var i=e.encode(a).buffer;return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(i))}catch(e){var l=r("getErrorSafe")(e),s=o("CryptoLogger").CryptoLogger("get_blob_from_string");throw s.catching(l).mustfix(l.message),l}};e.__nop_name__="LSGetBlobFromString",l.default=e}),98);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store).filter(function(e){var t=e.offlineThreadingId,n=e.threadId;return n===a&&i===t}));if(l.length===0)return(e||(e=n("Promise"))).resolve([void 0,void 0,!1]);var s=l[0];return(e||(e=n("Promise"))).resolve([s.messagePayload,s.messageTimestampMs,!1])});function r(e,n,r,o){return t.apply(this,arguments)}return r})();s.__nop_name__="LSQueryLocalPersistenceStoreForBackup",l.default=s}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l){var s=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store_supplemental).filter(function(e){var t=e.supplementalKey,n=e.threadId,r=e.toplevelOfflineThreadingId;return n===a&&r===i&&t===l}));return s==null?(e||(e=n("Promise"))).resolve([void 0,void 0]):(e||(e=n("Promise"))).resolve([s.messagePayload,s.messageTimestampMs])});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})();s.__nop_name__="LSQueryLocalPersistenceStoreSupplementalForBackup",l.default=s}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","Promise","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=":",u=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l){var u=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.local_message_persistence_store_tag_index.index("offlineThreadingId")).getKeyRange(l,i));if(u==null)return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray([])]);var c=u.tag;return(e||(e=n("Promise"))).resolve([r("LSVec").ofArray(c.split(s))])});function a(e,n,r,o){return t.apply(this,arguments)}return a})();u.__nop_name__="LSQueryLocalPersistenceStoreTagsForBackup",l.default=u}),98);
__d("LSLoadUnencryptedProtobufWithInputs",["LSBase64Encode.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadUnencryptedProtobufWithInputs] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.i64.eq(e[0],t.i64.cast([0,1]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[10]=t[0],r[11]=t[1],r[12]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(o){var a,i,l;return t.blobs.neq(r[10],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[10]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(n){var o,a,i;return r[16]!==void 0?(r[13]!==void 0?(r[21]=new t.Map,r[21].set("message_tags",r[13]),r[22]=t.toJSON(r[21]),r[19]=r[22]):r[19]=void 0,r[20]=new t.Map,r[20].set("backup_action",e[0]),r[20].set("protobuf_encrypted",r[16]),r[20].set("supplemental_data_encrypted",void 0),r[20].set("timestamp_ms",e[4]),r[20].set("message_tags",r[19]),o=[r[20],void 0],r[17]=o[0],r[18]=o[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,68])),r[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[19].set("error_message",""),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]),i=[r[17],r[18]],r[14]=i[0],r[15]=i[1]}]):t.resolve((r[12]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[18]=new t.Map,r[18].set("error_code",t.i64.cast([0,70])),r[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[18].set("error_message",""),a=[void 0,r[18]],r[16]=a[0],r[17]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[18]=new t.Map,r[18].set("error_code",t.i64.cast([0,63])),r[18].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[18].set("error_message",""),i=[void 0,r[18]],r[16]=i[0],r[17]=i[1]),l=[r[16],r[17]],r[14]=l[0],r[15]=l[1]))},function(e){var t;return t=[r[14],r[15]],r[2]=t[0],r[3]=t[1],t}]):t.sequence([function(o){var a,i,l;return t.i64.eq(e[0],t.i64.cast([0,2]))?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),e[1],e[2],e[3]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){var a;return t.blobs.neq(r[14],void 0)?t.sequence([function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(o){var a;return t.blobs.neq(r[19],void 0)?t.sequence([function(e){return r[22]=new t.Map,r[22].set("sk_ciphertext",r[19]),r[22].set("sk_hash",r[19]),t.nativeOperation(n("LSBase64Encode.nop"),r[14]).then(function(e){var t;return t=e,r[23]=t[0],t})},function(n){var o,a,i;return r[23]!==void 0?(r[16]!==void 0?(r[28]=new t.Map,r[28].set("message_tags",r[16]),r[29]=t.toJSON(r[28]),r[26]=r[29]):r[26]=void 0,r[27]=new t.Map,r[27].set("backup_action",e[0]),r[27].set("protobuf_encrypted",r[23]),r[27].set("supplemental_data_encrypted",r[22]),r[27].set("timestamp_ms",e[4]),r[27].set("message_tags",r[26]),o=[r[27],void 0],r[24]=o[0],r[25]=o[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),r[26]=new t.Map,r[26].set("error_code",t.i64.cast([0,68])),r[26].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[26].set("error_message",""),a=[void 0,r[26]],r[24]=a[0],r[25]=a[1]),i=[r[24],r[25]],r[20]=i[0],r[21]=i[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_FORMATTING_FAILED"),r[22]=new t.Map,r[22].set("error_code",t.i64.cast([0,69])),r[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[22].set("error_message",""),a=[void 0,r[22]],r[20]=a[0],r[21]=a[1]))},function(e){var t;return t=[r[20],r[21]],r[17]=t[0],r[18]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,64])),r[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[19].set("error_message",""),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]))},function(e){var t;return t=[r[17],r[18]],r[12]=t[0],r[13]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([0,65])),r[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[14].set("error_message",""),a=[void 0,r[14]],r[12]=a[0],r[13]=a[1]))},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}]):t.resolve((t.i64.eq(e[0],t.i64.cast([0,3]))?(r[14]=new t.Map,r[14].set("backup_action",e[0]),r[14].set("protobuf_encrypted",void 0),r[14].set("supplemental_data_encrypted",void 0),r[14].set("timestamp_ms",e[4]),r[14].set("message_tags",void 0),a=[r[14],void 0],r[12]=a[0],r[13]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error INVALID_BACKUP_OPERATION"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([-1,4294967289])),r[14].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),r[14].set("error_message",""),i=[void 0,r[14]],r[12]=i[0],r[13]=i[1]),l=[r[12],r[13]],r[10]=l[0],r[11]=l[1]))},function(e){var t;return t=[r[10],r[11]],r[2]=t[0],r[3]=t[1],t}])},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadUnencryptedProtobufWithInputs] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufWithInputs",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLoadUnencryptedProtobufBackupSerializedPayloadData",["LSLoadUnencryptedProtobufWithInputs","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){var o;return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[18]=t.i64.mul(r[1],t.i64.cast([0,1e6])),t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(r[30]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(r[30],t.i64.cast([0,1e6])),r[18]),void 0],r[22]=a[0],r[23]=a[1],r[24]=a[2],r[25]=a[3],r[26]=a[4],r[27]=a[5],r[28]=a[6]):(o=s.item,r[30]=t.i64.of_float(Date.now()),i=[e[0],o.queueName,o.enqueueTimestampMs,o.priority,o.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(r[30],t.i64.cast([0,1e6])),r[18]),void 0],r[22]=i[0],r[23]=i[1],r[24]=i[2],r[25]=i[3],r[26]=i[4],r[27]=i[5],r[28]=i[6])})},function(e){var t;return t=[r[22],r[23],r[24],r[25],r[26],r[27],r[28]],r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],r[6]=t[4],r[7]=t[5],r[8]=t[6],t}])},function(o){return r[9]=new t.Map,r[9].set("task_id",r[2]),r[9].set("queue_name",r[3]),r[9].set("enqueue_timestamp_ms",r[4]),r[9].set("priority",r[5]),r[9].set("first_executed_timestamp_ms",r[6]),r[9].set("execution_time_ns",r[7]),r[9].set("echo_encoding_execution_time_ns",r[8]),r[10]=new t.Map,r[10].set("task_metadata",r[9]),r[10].set("action_type",void 0),r[10].set("content_type",void 0),r[10].set("identifiers",void 0),r[10].set("identifiers_v2",void 0),r[10].set("task_creation_source",void 0),r[10].set("message_payload_source",t.i64.cast([0,2])),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[22]=new t.Map,r[22].set("error_code",t.i64.cast([0,5])),r[22].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure"),r[22].set("error_message",""),i=[void 0,r[22],r[10]],r[11]=i[0],r[12]=i[1],r[13]=i[2]):(a=s.item,t.sequence([function(n){var o;return r[39]=a.actThreadId,r[40]=a.toplevelOfflineThreadingId,r[23]=a.messageTimestampMs,r[22]=new t.Map,r[22].set("backup_id","openEbUploadGenericBackupId"),r[22].set("act_thread_id",r[39]),r[22].set("server_thread_id",r[39]),r[22].set("timestamp",t.i64.to_string(r[23])),r[22].set("otid",r[40]),r[24]=new t.Map,r[24].set("backup_id","openEbUploadGenericBackupId"),r[24].set("act_thread_id",r[39]),r[24].set("timestamp",t.i64.to_string(r[23])),r[24].set("otid",r[40]),t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(r[49]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(r[49],t.i64.cast([0,1e6])),r[18]),void 0],r[41]=a[0],r[42]=a[1],r[43]=a[2],r[44]=a[3],r[45]=a[4],r[46]=a[5],r[47]=a[6]):(o=s.item,r[49]=t.i64.of_float(Date.now()),i=[e[0],o.queueName,o.enqueueTimestampMs,o.priority,o.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(r[49],t.i64.cast([0,1e6])),r[18]),void 0],r[41]=i[0],r[42]=i[1],r[43]=i[2],r[44]=i[3],r[45]=i[4],r[46]=i[5],r[47]=i[6])})},function(e){var t;return t=[r[41],r[42],r[43],r[44],r[45],r[46],r[47]],r[25]=t[0],r[26]=t[1],r[27]=t[2],r[28]=t[3],r[29]=t[4],r[30]=t[5],r[31]=t[6],t}])},function(e){return r[32]=new t.Map,r[32].set("task_id",r[25]),r[32].set("queue_name",r[26]),r[32].set("enqueue_timestamp_ms",r[27]),r[32].set("priority",r[28]),r[32].set("first_executed_timestamp_ms",r[29]),r[32].set("execution_time_ns",r[30]),r[32].set("echo_encoding_execution_time_ns",r[31]),r[33]=new t.Map,r[33].set("task_metadata",r[32]),r[33].set("action_type",void 0),r[33].set("content_type",void 0),r[33].set("identifiers",void 0),r[33].set("identifiers_v2",r[24]),r[33].set("task_creation_source",void 0),r[33].set("message_payload_source",t.i64.cast([0,2])),t.storedProcedure(n("LSLoadUnencryptedProtobufWithInputs"),a.backupAction,r[39],r[40],a.supplementalKey,r[23],r[22]).then(function(e){var t;return t=e,r[34]=t[0],r[35]=t[1],t})},function(e){var n,o,i;return r[34]!==void 0?(r[41]=new t.Map,r[41].set("unencrypted_protobuf_backup_payload",r[34]),r[41].set("message_identifiers",r[22]),r[41].set("attachment_backup_payload",a.attachmentPayload),r[41].set("sender_id",a.senderId),r[41].set("extra_data_for_eb_upload",void 0),n=[r[41],void 0,r[33]],r[36]=n[0],r[37]=n[1],r[38]=n[2]):(o=[void 0,r[35],r[33]],r[36]=o[0],r[37]=o[1],r[38]=o[2]),i=[r[36],r[37],r[38]],r[11]=i[0],r[12]=i[1],r[13]=i[2]}]))})},function(e){return r[15]=t.i64.of_float(Date.now()),r[16]=t.i64.random(),r[19]="Finishing execution. Execution time: ",r[20]=t.i64.to_string(t.i64.sub(r[15],r[0])),r[21]=" ms",r[17]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] ",r[17],r[19],r[17],r[20],r[17],r[21]].join("")),t.i64.eq(t.i64.mod_(r[16],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[22]=",",r[23]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufBackupSerializedPayloadData",[r[19],r[22],r[20],r[22],r[21]].join(""),r[23],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[11],r[12],r[13]],o[0]=t[0],o[1]=t[1],o[2]=t[2],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure",e.__tables__=["pending_tasks","pending_protobuf_backups_context"],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsOpenUpload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSLoadUnencryptedProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSLoadUnencryptedProtobufBackupSerializedPayloadData"),e[0]).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],r[4]=t[2],t})},function(e){var o,a,i;return r[2]!==void 0?t.sequence([function(e){return r[15]=r[2].get("message_identifiers"),r[16]=r[2].get("unencrypted_protobuf_backup_payload"),r[17]=r[15].get("server_thread_id"),r[18]=r[15].get("timestamp"),r[19]=r[15].get("otid"),r[20]=r[15].get("act_thread_id"),r[21]=new t.Map,r[21].set("server_thread_key",r[17]),r[21].set("timestamp",r[18]),r[21].set("otid",r[19]),r[21].set("wa_thread_id",t.i64.from_string(r[20])),r[22]=new t.Map,r[22].set("message_identifiers",r[21]),r[23]=r[2].get("extra_data_for_eb_upload"),r[23]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[23]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[33]=new t.Map,r[34]=r[32].keys(),r[35]=t.i64.of_int32(r[34].length),t.i64.gt(r[35],t.i64.cast([0,0]))?t.loopAsync(r[35],function(e){return r[36]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[34],r[36]).then(function(e){var t;return t=e,r[37]=t[0],r[38]=t[1],t})},function(e){return r[39]=r[32].get(r[37]),r[33].set(r[37],r[39])}])}):t.resolve()},function(e){return r[24]=r[33]}]):t.resolve(r[24]=void 0)},function(e){return r[24]!==void 0?t.sequence([function(e){return r[32]=r[24].get("mt"),r[32]?r[33]=!1:r[33]=!0,r[33]?t.resolve(r[34]=void 0):t.sequence([function(e){return r[36]=new t.Map,r[37]=r[32].keys(),r[38]=t.i64.of_int32(r[37].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[39]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[39]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],t})},function(e){return r[42]=r[32].get(r[40]),r[36].set(r[40],r[42])}])}):t.resolve()},function(e){return r[34]=r[36]}])},function(e){return r[34]!==void 0?(r[36]=t.toJSON(r[34]),r[35]=r[36]):r[35]=void 0,r[25]=r[35]}]):t.resolve(r[25]=void 0)},function(e){return r[26]=r[16].get("supplemental_data_encrypted"),r[26]!==void 0?t.sequence([function(e){return r[32]=r[16].get("protobuf_encrypted"),r[33]=r[16].get("backup_action"),r[34]=r[16].get("timestamp_ms"),r[35]=r[26].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[37]=r[26].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),r[37]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[39].set("supplementary_data_key",void 0),r[39].set("encrypted_protobuf",r[32]),r[39].set("key_value_backup_action",r[33]),r[39].set("protobuf_ts_ms",r[34]),r[39].set("supplemental_key_ciphertext",r[36]),r[39].set("supplemental_key_hash",r[38]),r[39].set("message_tags",r[25]),r[27]=r[39]}]):t.resolve((r[32]=r[16].get("protobuf_encrypted"),r[33]=r[16].get("backup_action"),r[34]=r[16].get("timestamp_ms"),r[35]=new t.Map,r[35].set("supplementary_data_key",void 0),r[35].set("encrypted_protobuf",r[32]),r[35].set("key_value_backup_action",r[33]),r[35].set("protobuf_ts_ms",r[34]),r[35].set("message_tags",r[25]),r[27]=r[35]))},function(e){return r[22].set("key_value_backup_unencrypted_payload",r[27]),r[28]=r[2].get("sender_id"),r[22].set("sender_id",r[28]),r[29]=r[2].get("attachment_backup_payload"),r[29]!==void 0&&r[22].set("attachment_backup_payload",r[29]),r[24]!==void 0?t.sequence([function(e){return r[32]=r[24].get("ttd"),r[32]?r[33]=!1:r[33]=!0,r[33]?t.resolve(r[34]=void 0):t.sequence([function(e){return r[36]=new t.Map,r[37]=r[32].keys(),r[38]=t.i64.of_int32(r[37].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[39]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[37],r[39]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],t})},function(e){return r[42]=r[32].get(r[40]),r[36].set(r[40],r[42])}])}):t.resolve()},function(e){return r[34]=r[36]}])},function(e){return r[34]!==void 0?(r[36]=t.toJSON(r[34]),r[35]=r[36]):r[35]=void 0,r[30]=r[35]}]):t.resolve(r[30]=void 0)},function(e){var n;return r[30]!==void 0&&r[22].set("tags_to_delete",r[30]),r[31]=t.toJSON(r[22]),n=[r[31],void 0,r[4]],r[5]=n[0],r[6]=n[1],r[7]=n[2]}]):t.resolve((r[3]?r[15]=!1:r[15]=!0,r[15]?(a=[void 0,void 0,r[4]],r[16]=a[0],r[17]=a[1],r[18]=a[2]):(o=[void 0,r[3],r[4]],r[16]=o[0],r[17]=o[1],r[18]=o[2]),i=[r[16],r[17],r[18]],r[5]=i[0],r[6]=i[1],r[7]=i[2]))},function(e){return r[15]=new t.Map,r[16]=r[15].set("success",r[5]),r[17]=r[15].set("failure",r[6]),r[18]=r[15].set("context",r[7]),r[19]=t.toJSON(r[15]),r[8]=r[19],r[9]=t.i64.of_float(Date.now()),r[10]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[9],r[0])),r[14]=" ms",r[11]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] ",r[11],r[12],r[11],r[13],r[11],r[14]].join("")),t.i64.eq(t.i64.mod_(r[10],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsOpenUpload",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[8],t.i64.cast([0,50048])],o[0]=n[0],o[1]=n[1],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsOpenUploadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsRestoreWithSerializer",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,void 0,void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSCreateDerivedKeys.nop",["CreateDerivedKeys","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a,i,l,s){return o("CreateDerivedKeys").CreateDerivedKeys(a,i,l,r("LSVec").toArray(s))};e.__nop_name__="LSCreateDerivedKeys",l.default=e}),98);
__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[2].get("message_payload_encryption_keys"),r[3]=r[2].get("encryption_version"),r[4]=r[2].get("epoch_anon_id"),r[5]=r[2].get("epoch_root_key"),r[6]=r[2].get("payload_key"),r[7]=t.createArray(),r[41]=(r[7].push(t.i64.cast([0,6])),r[7]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(e){var t;return t=e,r[8]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[8],void 0,r[4],r[7]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[9]?r[10]=!1:r[10]=!0,r[10]?t.resolve(r[11]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[9],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[11]=r[43]==null?"":r[43]}])},function(e){return r[12]=t.createArray(),r[41]=(r[12].push(t.i64.cast([0,6])),r[12]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[13],void 0,r[5],r[12]).then(function(e){var t;return t=e,r[14]=t[0],t})},function(e){return r[14]?r[15]=!1:r[15]=!0,r[15]?t.resolve(r[16]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[14],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[16]=r[43]==null?"":r[43]}])},function(e){return r[17]=t.createArray(),r[41]=(r[17].push(t.i64.cast([0,6])),r[17]),t.nativeOperation(n("LSGetBlobFromString.nop"),"message_key_debug").then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[18],void 0,r[6],r[17]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[19]?r[20]=!1:r[20]=!0,r[20]?t.resolve(r[21]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[21]=r[43]==null?"":r[43]}])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),[r[22]==null?"":r[22],e[0]].join("")).then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return r[24]=t.createArray(),r[41]=(r[24].push(t.i64.cast([0,6])),r[24]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(e){var t;return t=e,r[25]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[25],void 0,r[23],r[24]).then(function(e){var t;return t=e,r[26]=t[0],t})},function(e){return r[26]?r[27]=!1:r[27]=!0,r[27]?t.resolve(r[28]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[26],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[41]).then(function(e){var t;return t=e,r[43]=t[0],t})},function(e){return r[28]=r[43]==null?"":r[43]}])},function(e){return r[29]=":",t.blobs.neq(r[5],void 0)?t.sequence([function(e){return r[41]=t.createArray(),r[47]=(r[41].push(t.i64.cast([0,18])),r[41]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,r[5],r[41]).then(function(e){var t;return t=e,r[42]=t[0],t})},function(e){return r[42]!==void 0?t.sequence([function(e){return r[47]=t.i64.of_int32(r[42].length),t.i64.ge(r[47],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[42],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[49]=t[0],r[50]=t[1],t})},function(e){return r[48]=r[49]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[50]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[50]].join("")),r[49]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[50],r[49],t.i64.cast([0,3]))},function(e){return r[48]=void 0}])},function(e){return r[43]=r[48]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[48]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[48]].join("")),r[47]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[48],r[47],t.i64.cast([0,3]))},function(e){return r[43]=void 0}])},function(e){return t.blobs.neq(r[43],void 0)?r[44]=!0:r[44]=!1,r[44]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSBase64Encode.nop"),r[43]).then(function(e){var t;return t=e,r[45]=t[0],t})},function(e){return r[45]!==void 0?r[46]=r[45]:r[46]="encodingfailed",r[30]=r[46]}]):t.resolve(r[30]="null")},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[4]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(o){return r[32]=new t.Map,r[32].set("encryption_version",r[3]),r[32].set("epoch_anon_id",r[31]==null?"":r[31]),r[32].set("message_encryption_values",[r[11],r[29],r[16],r[29],r[21],r[29],r[28]].join("")),r[32].set("root_key_fingerprint",r[30]),r[32].set("backup_id",e[1]),r[33]=t.toJSON(r[32]),r[34]=new t.Map,r[34].set("value_secret_ref",r[33]),r[35]=t.i64.of_float(Date.now()),r[36]=t.i64.random(),r[38]="Finishing execution. Execution time: ",r[39]=t.i64.to_string(t.i64.sub(r[35],r[0])),r[40]=" ms",r[37]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deriveValueSecretRefV2] ",r[37],r[38],r[37],r[39],r[37],r[40]].join("")),t.i64.eq(t.i64.mod_(r[36],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[41]=",",r[42]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[r[38],r[41],r[39],r[41],r[40]].join(""),r[42],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[34],void 0],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeriveValueSecretRefV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(o,a,i){var t=Array.from(new Uint8Array(i)),l=t.map(function(e){return e.toString(16).padStart(2,"0")}),s=l.join("").toUpperCase();return(e||(e=n("Promise"))).resolve(r("LSResult")(s))};s.__nop_name__="LSBinaryToHex",l.default=s}),98);
__d("LSGetBlobFromInt64BE.nop",["GetBlobFromInt64BE"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("GetBlobFromInt64BE").GetBlobFromInt64BE(r)};e.__nop_name__="LSGetBlobFromInt64BE",l.default=e}),98);
__d("LSHmac_v2.nop",["Hmac_v2"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a){return r("Hmac_v2")(o,a)};e.__nop_name__="LSHmac_v2",l.default=e}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return new Uint8Array(e)}function s(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder;return t.encode(e)}function u(e){var t=new(o("XPlatReactTextDecoder")).TextDecoder;return t.decode(e)}function c(e){return u(new Uint8Array(e))}function d(e){return s(e).buffer}function m(e,t){var n=e.byteLength,o=t.byteLength;if(n!==o)throw r("FBLogger")("messenger_web").mustfixThrow("[LS] Mismatched lengths for modAdd, %d != %d",n,o);var a=new Uint8Array(n);return new Uint8Array(n).reduceRight(function(n,r,o){var i=e[o],l=t[o],s=i+l+n,u=s>255?[s-256,1]:[s,0];return a[o]=u[0],u[1]},0),a}l.bufToUint8=e,l.strToUint8=s,l.uint8ToStr=u,l.bufToStr=c,l.strToBuf=d,l.modAddBytes=m}),98);
__d("OcmfClientMap",["CryptoLogger","LSCryptoUtils","Promise","requireDeferred","tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("ristretto255").__setRef("OcmfClientMap"),u=function(r,a){var t=o("tweetnacl").hash(o("LSCryptoUtils").bufToUint8(a));return(e||(e=n("Promise"))).all([t,s.load()]).then(function(e){var t=e[0],n=e[1],o=n.fromHash(new Uint8Array(t)),a=n.scalarMult(new Uint8Array(r),o);return a.buffer}).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("ocmf_client_map"),e).mustfix("Failed OcmfClientMap."),e})};l.default=u}),98);
__d("LSOcmfClientMap.nop",["LSResult","OcmfClientMap"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a){return r("OcmfClientMap")(o,a).then(function(e){return r("LSResult")(e)})};e.__nop_name__="LSOcmfClientMap",l.default=e}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.length;if(t>0&&t%2===0&&/^[\da-f]+$/gi.test(e)){for(var n=[],r=0,o=t/2|0;r<o;++r){var a=parseInt(e.substring(r<<1,(r<<1)+2|0),16);n.push(a)}return new Uint8Array(n)}}function s(e){return o("XPlatReactCrypto").getRandomValues(new Uint8Array(e)).buffer}function u(e){var t=e.filter(function(e){return e.byteLength!==0}),n=t.reduce(function(e,t){return e+t.byteLength|0},0),r=new Uint8Array(n);return t.reduce(function(e,t){return r.set(t,e),e+t.byteLength|0},0),r}l.fromHexString=e,l.getBufferWithRandomValuesFromLength=s,l.concatBytes=u}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","Promise","UInt8Array","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return o("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function u(e){var t=e.length;return t%2!==0?"0"+e:e}function c(e){for(var t=BigInt(e),n=u(t.toString(16)),r=n.length,o=r/2,a=[],i=0;i<o;++i)a.push(i*2);return new Uint8Array(a.map(function(e){var t=e+2;return n.slice(e,t)}).map(function(e){return parseInt(e,16)}))}function d(e){var t=e.map(function(e){return e._0});return{_0:o("UInt8Array").concatBytes(t)}}function m(e){return"OPE key has length "+String(e)+", expected  "+String(32)}function p(e,t,n){var r=new ArrayBuffer(0);return o("XPlatReactCrypto").subtleImportKey("raw",e.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(e){return o("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:t.buffer,name:"HKDF",salt:r},e,n*8)}).then(function(e){return{_0:new Uint8Array(e)}})}function _(e,t){return{_0:o("LSCryptoUtils").modAddBytes(e._0,t)}}function f(t,a,i,l){var s=i.byteLength;if(s!==32)throw r("FBLogger")("wmi_eb").mustfixThrow(m(s));var u=l.byteLength,c=function(t,n){var e=new Uint8Array(1+u),r=new Uint8Array(u-n).fill(0);return e.set([n]),e.set(t.subarray(0,n),1),e.set(r,n+1),e};if(u>=255)throw r("FBLogger")("wmi_eb").mustfixThrow("Input is too large");var f=Array.from(l).map(function(e,n){var r=c(l,n),o=new Uint8Array(t);o[t-1]=e;var a=new Uint8Array(i);return p(a,r,t).then(function(e){return _(e,o)})});return(e||(e=n("Promise"))).all(f).then(function(e){return o("UInt8Array").concatBytes([new Uint8Array([a]),d(e)._0])})}function g(e,t,n,r){var o=c(r);return f(e,t,n,o)}l.keyGen=s,l.intStringToBEBytes=c,l.buildKeyLengthErrorMsg=m,l.encryptBigEndianBytes=f,l.encryptIntString=g}),98);
__d("OpeEncrypt",["CryptoLogger","I64","LSResult","OrderPreservingEncryption"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("CryptoLogger").CryptoLogger("ope_encrypt");return o("OrderPreservingEncryption").encryptBigEndianBytes((e||(e=o("I64"))).to_int32(a),1,t,new Uint8Array(n)).then(function(e){return r("LSResult")(e.buffer)},function(e){throw o("CryptoLogger").captureError(i,e).mustfix("OpeEncrypt_impl failed"),e})}l.OpeEncrypt=s}),98);
__d("LSOpeEncrypt.nop",["OpeEncrypt"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r,a,i){return o("OpeEncrypt").OpeEncrypt(r,a,i)};e.__nop_name__="LSOpeEncrypt",l.default=e}),98);
__d("TruncateSortKey",["CryptoLogger","LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("CryptoLogger").CryptoLogger("truncate_sort_key");function u(t){if(t.byteLength!==8)throw s.mustfixThrow("Bad length on sort key for truncation");var o=new Uint8Array(t),a=o.subarray(0,2);if(a.some(function(e){return e!==0}))throw s.mustfixThrow("Bad prefix on sort key for truncation");return(e||(e=n("Promise"))).resolve(r("LSResult")(t.slice(2)))}l.TruncateSortKey=u}),98);
__d("LSTruncateSortKey.nop",["TruncateSortKey"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("TruncateSortKey").TruncateSortKey(r)};e.__nop_name__="LSTruncateSortKey",l.default=e}),98);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),e[2]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWFpbGJveF9pZF9zY29wZQ=="),r[3]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[2],r[4]).then(function(e){var t;return t=e,r[5]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[5]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(o){return t.i64.eq(e[0],t.i64.cast([0,2]))&&t.i64.eq(e[1],t.i64.cast([0,2]))?r[7]=e[5]:r[7]=e[3],r[8]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),r[7]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("dGhyZWFkX2lkX3Njb3Bl"),r[9]).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[8],r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[11]).then(function(e){var t;return t=e,r[12]=t[0],t})},function(o){return r[13]=e[6].get("ope_key"),t.nativeOperation(n("LSGetBlobFromInt64BE.nop"),e[4]).then(function(e){var t;return t=e,r[14]=t[0],t})},function(e){return t.nativeOperation(n("LSTruncateSortKey.nop"),r[14]).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.nativeOperation(n("LSOpeEncrypt.nop"),r[13],r[15],t.i64.cast([0,16])).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.nativeOperation(n("LSBinaryToHex.nop"),r[16]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(o){return r[18]=e[6].get("ocmf_shared_key"),t.nativeOperation(n("LSGetBlobFromString.nop"),e[5]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),t.blob("bWVzc2FnZV9pZF9zY29wZQ=="),r[19]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.nativeOperation(n("LSOcmfClientMap.nop"),r[18],r[20]).then(function(e){var t;return t=e,r[21]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[21]).then(function(e){var t;return t=e,r[22]=t[0],t})},function(e){return r[23]=new t.Map,r[23].set("backup_id_ocmf_partial",r[6]==null?"":r[6]),r[23].set("act_thread_id_ocmf_partial",r[12]==null?"":r[12]),r[23].set("timestamp_encrypted",r[17]==null?"":r[17]),r[23].set("otid_ocmf_partial",r[22]==null?"":r[22]),r[24]=t.i64.of_float(Date.now()),r[25]=t.i64.random(),r[27]="Finishing execution. Execution time: ",r[28]=t.i64.to_string(t.i64.sub(r[24],r[0])),r[29]=" ms",r[26]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][encryptIdentifiersV2] ",r[26],r[27],r[26],r[28],r[26],r[29]].join("")),t.i64.eq(t.i64.mod_(r[25],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[30]=",",r[31]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[r[27],r[30],r[28],r[30],r[29]].join(""),r[31],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[23],void 0],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsEncryptIdentifiersV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e<10)return 10-e;var t=Math.floor(Math.log2(e)),n=Math.floor(Math.log2(t))+1,r=t-n,o=(1<<r)-1,a=e+o&(o^-1);return a-e}function s(t){var n=Uint32Array.BYTES_PER_ELEMENT,r=t.byteLength,o=e(r),a=n+r+o,i=new DataView(new ArrayBuffer(a));i.setUint32(0,r);var l=new Uint8Array(i.buffer);return l.set(new Uint8Array(t),n),l.buffer}function u(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder,n=t.encode(e).buffer;return s(n)}function c(e){var t=Uint32Array.BYTES_PER_ELEMENT,n=new DataView(e);if(!(n.byteLength<t)){var r=e.byteLength,o=n.getUint32(0),a=r-t;if(o>=0&&o<=a)return e.slice(t,t+o)}}l.getPaddingLength=e,l.padData=s,l.pad=u,l.stripPadding=c}),98);
__d("SymmetricEncryptionCreateEncryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),l=o("SymmetricEncryptionPaddingUtils").padData(i),s=o("XPlatReactCrypto").getRandomValues(new Uint8Array(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes)),u=new(o("HChaCha20")).HChaCha20,c=u.hChaCha20Bytes(s.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,r);return o("XPlatReactCrypto").subtleImportKey("raw",c,"AES-GCM",!1,["encrypt"]).then(function(e){return o("XPlatReactCrypto").subtleEncrypt({additionalData:a,iv:new Uint8Array(s.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,l)}).then(function(t){var r=s.byteLength+t.byteLength,a=new Uint8Array(r);return a.set(s),a.set(new Uint8Array(t),o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(a.buffer))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric data encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};l.default=s}),98);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["SymmetricEncryptionCreateEncryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a,i){return r("SymmetricEncryptionCreateEncryptedData")(o,a,i)};e.__nop_name__="LSSymmetricEncryptionCreateEncryptedData",l.default=e}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return r("LSSymmetricEncryptionCreateEncryptedData.nop")(a,i,l,s,o("LSCryptoUtils").strToBuf(u)).then(function(e){return e[0]}).then(function(t){return(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(t?o("Base64Utils").fromArrayBuffer(t):void 0))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric string encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};s.__nop_name__="LSSymmetricEncryptionCreateEncryptedString",l.default=s}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]=e[2].get("message_payload_encryption_keys"),r[3]=r[2].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedString.nop"),r[3],t.blobs.of_string(["message_thread","_",e[1]].join("")),e[3]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(o){var a;return r[4]!==void 0?t.sequence([function(e){return r[13]=r[2].get("encryption_version"),r[14]=r[2].get("epoch_anon_id"),r[15]=r[2].get("epoch_root_key"),r[16]=r[2].get("payload_key"),r[17]=t.createArray(),r[45]=(r[17].push(t.i64.cast([0,6])),r[17]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[18],void 0,r[14],r[17]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[19]?r[20]=!1:r[20]=!0,r[20]?t.resolve(r[21]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[21]=r[47]==null?"":r[47]}])},function(e){return r[22]=t.createArray(),r[45]=(r[22].push(t.i64.cast([0,6])),r[22]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(e){var t;return t=e,r[23]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[23],void 0,r[15],r[22]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return r[24]?r[25]=!1:r[25]=!0,r[25]?t.resolve(r[26]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[24],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[26]=r[47]==null?"":r[47]}])},function(e){return r[27]=t.createArray(),r[45]=(r[27].push(t.i64.cast([0,6])),r[27]),t.nativeOperation(n("LSGetBlobFromString.nop"),"message_key_debug").then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[28],void 0,r[16],r[27]).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]?r[30]=!1:r[30]=!0,r[30]?t.resolve(r[31]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[29],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[31]=r[47]==null?"":r[47]}])},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[15]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(o){return t.nativeOperation(n("LSGetBlobFromString.nop"),[r[32]==null?"":r[32],e[1]].join("")).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return r[34]=t.createArray(),r[45]=(r[34].push(t.i64.cast([0,6])),r[34]),t.nativeOperation(n("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),r[35],void 0,r[33],r[34]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]?r[37]=!1:r[37]=!0,r[37]?t.resolve(r[38]=""):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[36],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[45]=t[0],r[46]=t[1],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[45]).then(function(e){var t;return t=e,r[47]=t[0],t})},function(e){return r[38]=r[47]==null?"":r[47]}])},function(e){return r[39]=":",t.blobs.neq(r[15],void 0)?t.sequence([function(e){return r[45]=t.createArray(),r[51]=(r[45].push(t.i64.cast([0,18])),r[45]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,r[15],r[45]).then(function(e){var t;return t=e,r[46]=t[0],t})},function(e){return r[46]!==void 0?t.sequence([function(e){return r[51]=t.i64.of_int32(r[46].length),t.i64.ge(r[51],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[46],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[53]=t[0],r[54]=t[1],t})},function(e){return r[52]=r[53]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[54]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[54]].join("")),r[53]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[54],r[53],t.i64.cast([0,3]))},function(e){return r[52]=void 0}])},function(e){return r[47]=r[52]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[52]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBFingerprint] ","",r[52]].join("")),r[51]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBFingerprint",r[52],r[51],t.i64.cast([0,3]))},function(e){return r[47]=void 0}])},function(e){return t.blobs.neq(r[47],void 0)?r[48]=!0:r[48]=!1,r[48]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSBase64Encode.nop"),r[47]).then(function(e){var t;return t=e,r[49]=t[0],t})},function(e){return r[49]!==void 0?r[50]=r[49]:r[50]="encodingfailed",r[40]=r[50]}]):t.resolve(r[40]="null")},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[14]).then(function(e){var t;return t=e,r[41]=t[0],t})},function(n){var o;return r[42]=new t.Map,r[42].set("encryption_version",r[13]),r[42].set("epoch_anon_id",r[41]==null?"":r[41]),r[42].set("message_encryption_values",[r[21],r[39],r[26],r[39],r[31],r[39],r[38]].join("")),r[42].set("root_key_fingerprint",r[40]),r[42].set("backup_id",e[0]),r[43]=t.toJSON(r[42]),r[44]=new t.Map,r[44].set("encrypted_message_payload",r[4]),r[44].set("value_secret_ref",r[43]),o=[r[44],void 0],r[5]=o[0],r[6]=o[1]}]):t.resolve((r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,40])),r[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),r[13].set("error_message",""),a=[void 0,r[13]],r[5]=a[0],r[6]=a[1]))},function(e){return r[7]=t.i64.of_float(Date.now()),r[8]=t.i64.random(),r[10]="Finishing execution. Execution time: ",r[11]=t.i64.to_string(t.i64.sub(r[7],r[0])),r[12]=" ms",r[9]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][encryptMessagePayloadV2] ",r[9],r[10],r[9],r[11],r[9],r[12]].join("")),t.i64.eq(t.i64.mod_(r[8],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[13]=",",r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[r[10],r[13],r[11],r[13],r[12]].join(""),r[14],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[5],r[6]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]="",r[3]=void 0,r[4]=void 0,r[5]=void 0,e[0]?t.resolve(0):(r[15]=void 0,t.i64.neq(r[15],void 0)?t.sequence([function(e){return t.count(t.db.table(169).fetch([[[r[15]]]])).then(function(e){return r[16]=e})},function(e){return t.i64.le(r[16],t.i64.cast([0,1]))?t.sequence([function(e){return t.db.table(169).fetch([[[r[15]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[26]=new t.Map,r[26].set("error_msg","Expected a nonempty query result"),r[26].set("code",t.i64.cast([0,3])),r[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[27]=t.createArray(),r[28]=(r[27].push(r[26]),r[27]),o=[void 0,r[27]],r[22]=o[0],r[23]=o[1]):(n=l.item,r[26]=new t.Map,r[26].set("epoch_id",n.epochId),r[26].set("backup_id",n.backupId),r[26].set("epoch_anon_id_blob",n.epochAnonIdBlob),r[26].set("epoch_root_key_blob",n.epochRootKeyBlob),r[26].set("epoch_status",n.epochStatus),r[26].set("epoch_head",n.epochHead),r[26].set("authority_level",n.authorityLevel),a=[r[26],void 0],r[22]=a[0],r[23]=a[1])})},function(e){return r[25]=new t.Map,r[25].set("value",r[22]),r[25].set("errors",r[23]),r[17]=r[25]}]):t.resolve((r[22]=new t.Map,r[22].set("error_msg","Expected at most one result"),r[22].set("code",t.i64.cast([0,4])),r[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[23]=t.createArray(),r[25]=(r[23].push(r[22]),r[23]),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[23]),r[17]=r[24]))},function(e){return r[18]=r[17].get("value"),r[18]!==void 0?(r[22]=r[18].get("epoch_id"),r[23]=r[18].get("backup_id"),r[24]=r[18].get("epoch_anon_id_blob"),r[25]=r[18].get("epoch_root_key_blob"),r[26]=r[18].get("epoch_status"),r[27]=r[18].get("epoch_head"),r[28]=r[18].get("authority_level"),r[29]=r[17],r[19]=r[29]):(r[22]=r[17].get("errors"),r[23]=r[17].get("errors"),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[22]),r[19]=r[24]),r[20]=r[19].get("value"),r[20]!==void 0?(r[22]=r[20].get("epoch_id"),r[23]=r[20].get("backup_id"),r[24]=r[20].get("epoch_anon_id_blob"),r[25]=r[20].get("epoch_root_key_blob"),r[26]=r[20].get("epoch_status"),r[27]=r[20].get("epoch_head"),r[28]=r[20].get("authority_level"),r[2]=t.blobs.to_string(r[24]),r[3]=r[22],r[4]=r[25],t.blobs.neq(r[27],void 0)&&(r[5]=r[27]),r[21]=!0):(r[22]=r[19].get("errors"),r[23]=r[19].get("errors"),r[21]=!1)}]):t.resolve())},function(n){return t.i64.neq(r[3],void 0)?t.resolve(0):t.sequence([function(n){return r[15]=void 0,r[16]="",r[17]=void 0,r[18]=void 0,t.forEach(t.filter(t.db.table(169).fetch(),function(n){return e[0]||t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}),function(e){var n=e.item;return r[20]=t.blobs.to_string(n.epochAnonIdBlob),t.i64.eq([0,r[20].length],[0,r[16].length])?r[19]=r[20]>r[16]:r[19]=t.i64.gt([0,r[20].length],[0,r[16].length]),r[19]?(r[15]=n.epochId,r[16]=r[20],r[17]=n.epochRootKeyBlob,r[18]=n.epochHead):0})},function(e){return t.i64.neq(r[15],void 0)&&(r[2]=r[16],r[3]=r[15],r[4]=r[17],t.blobs.neq(r[18],void 0)&&(r[5]=r[18]),r[19]=t.i64.of_float(Date.now())),0}])},function(e){var o,a,i,l,s,u;return r[11]=t.blobs.of_string(r[2]),t.i64.neq(r[3],void 0)?(t.blobs.neq(r[11],void 0)?(t.blobs.neq(r[4],void 0)?(r[19]=new t.Map,r[19].set("epoch_id",r[3]),r[19].set("epoch_root_key",r[4]),r[19].set("epoch_anon_id",r[11]),r[19].set("epoch_head",r[5]),r[20]=new t.Map,r[20].set("epoch_keys",r[19]),o=[r[20],void 0],r[17]=o[0],r[18]=o[1]):(r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,402])),r[19].set("error_message","failed to query latest epoch"),r[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]),i=[r[17],r[18]],r[15]=i[0],r[16]=i[1]):(r[17]=new t.Map,r[17].set("error_code",t.i64.cast([0,403])),r[17].set("error_message","failed to query latest epoch"),r[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),l=[void 0,r[17]],r[15]=l[0],r[16]=l[1]),s=[r[15],r[16]],r[6]=s[0],r[7]=s[1]):(r[15]=new t.Map,r[15].set("error_code",t.i64.cast([0,400])),r[15].set("error_message","failed to query latest epoch"),r[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),u=[void 0,r[15]],r[6]=u[0],r[7]=u[1]),r[8]=t.i64.of_float(Date.now()),r[9]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[8],r[0])),r[14]=" ms",r[10]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][getLatestEpochKeys] ",r[10],r[12],r[10],r[13],r[10],r[14]].join("")),t.i64.eq(t.i64.mod_(r[9],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[6],r[7]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure",e.__tables__=["secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LSIsEncryptionVersionSecure",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.i64.eq(e[0],t.i64.cast([0,4]))?n[0]=!1:(t.i64.eq(e[0],t.i64.cast([0,3]))?n[1]=!0:(t.i64.eq(e[0],t.i64.cast([0,2]))?n[2]=!0:(t.i64.eq(e[0],t.i64.cast([0,0]))?n[3]=!0:(t.i64.eq(e[0],t.i64.cast([0,99])),n[4]=!1,n[3]=n[4]),n[2]=n[3]),n[1]=n[2]),n[0]=n[1]),r[0]=n[0],t.resolve(r)}e.__sproc_name__="LSEncryptedBackupsVersioningIsEncryptionVersionSecureStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.i64.eq(e[0],t.i64.cast([0,1]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[10]=t[0],r[11]=t[1],r[12]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(o){var a,i,l;return r[14]=new t.Map,r[14].set("message_tags",r[13]),r[15]=new t.Map,r[15].set("mt",r[14]),t.blobs.neq(r[10],void 0)?t.sequence([function(o){return r[18]=e[5].get("message_payload_encryption_keys"),r[19]=r[18].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[19],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[10]).then(function(e){var t;return t=e,r[20]=t[0],t})},function(e){return t.blobs.neq(r[20],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[20]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return r[21]=r[24]}]):t.resolve(r[21]=void 0)},function(o){var a;return r[21]!==void 0?t.sequence([function(e){return r[15]!==void 0?t.sequence([function(e){return r[27]=r[15].get("mt"),r[27]?r[28]=!1:r[28]=!0,r[28]?t.resolve(r[29]=void 0):t.sequence([function(e){return r[31]=new t.Map,r[32]=r[27].keys(),r[33]=t.i64.of_int32(r[32].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[34]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],r[34]).then(function(e){var t;return t=e,r[35]=t[0],r[36]=t[1],t})},function(e){return r[37]=r[27].get(r[35]),r[31].set(r[35],r[37])}])}):t.resolve()},function(e){return r[29]=r[31]}])},function(e){return r[29]!==void 0?(r[31]=t.toJSON(r[29]),r[30]=r[31]):r[30]=void 0,r[24]=r[30]}]):t.resolve(r[24]=void 0)},function(n){var o;return r[15]!==void 0?(r[27]=r[15].get("mooos"),r[25]=r[27]):r[25]=void 0,r[26]=new t.Map,r[26].set("backup_action",e[0]),r[26].set("protobuf_encrypted",r[21]),r[26].set("supplemental_data_encrypted",void 0),r[26].set("timestamp_ms",e[4]),r[26].set("message_tags",r[24]),r[26].set("serialized_attachment_backup_payload",void 0),r[26].set("maybe_ooo_supplemental_upload",r[25]),o=[r[26],void 0],r[22]=o[0],r[23]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,62])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),a=[void 0,r[24]],r[22]=a[0],r[23]=a[1]))},function(e){var t;return t=[r[22],r[23]],r[16]=t[0],r[17]=t[1],t}]):t.resolve((r[12]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[20]=new t.Map,r[20].set("error_code",t.i64.cast([0,70])),r[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[20].set("error_message",""),a=[void 0,r[20]],r[18]=a[0],r[19]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[20]=new t.Map,r[20].set("error_code",t.i64.cast([0,63])),r[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[20].set("error_message",""),i=[void 0,r[20]],r[18]=i[0],r[19]=i[1]),l=[r[18],r[19]],r[16]=l[0],r[17]=l[1]))},function(e){var t;return t=[r[16],r[17]],r[2]=t[0],r[3]=t[1],t}]):t.sequence([function(o){return t.i64.eq(e[0],t.i64.cast([0,2]))?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),e[1],e[2],e[3]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){var a;return r[17]=new t.Map,r[17].set("message_tags",r[16]),r[18]=new t.Map,r[18].set("mt",r[17]),t.blobs.neq(r[14],void 0)?t.sequence([function(o){var a;return e[3]!==void 0?t.sequence([function(o){var a;return r[23]=e[5].get("mailbox_root_key_v2"),t.blobs.neq(r[23],void 0)?t.sequence([function(o){return r[26]=e[5].get("message_payload_encryption_keys"),r[27]=r[26].get("epoch_root_key"),r[28]=t.createArray(),r[41]=(r[28].push(t.i64.cast([0,32])),r[28]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,r[23],r[28]).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]!==void 0?t.sequence([function(e){return r[41]=t.i64.of_int32(r[29].length),t.i64.ge(r[41],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[29],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[43]=t[0],r[44]=t[1],t})},function(e){return r[42]=r[43]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[44]].join("")),r[43]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[44],r[43],t.i64.cast([0,3]))},function(e){return r[42]=void 0}])},function(e){return r[30]=r[42]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[42]].join("")),r[41]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[42],r[41],t.i64.cast([0,3]))},function(e){return r[30]=void 0}])},function(e){return t.blobs.neq(r[30],void 0)?r[31]=!0:r[31]=!1,r[31]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),r[32]=t.createArray(),r[41]=(r[32].push(t.i64.cast([0,32])),r[32]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,r[27],r[32]).then(function(e){var t;return t=e,r[33]=t[0],t})},function(e){return r[33]!==void 0?t.sequence([function(e){return r[41]=t.i64.of_int32(r[33].length),t.i64.ge(r[41],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[33],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[43]=t[0],r[44]=t[1],t})},function(e){return r[42]=r[43]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),r[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[44]].join("")),r[43]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[44],r[43],t.i64.cast([0,3]))},function(e){return r[42]=void 0}])},function(e){return r[34]=r[42]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),r[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",r[42]].join("")),r[41]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",r[42],r[41],t.i64.cast([0,3]))},function(e){return r[34]=void 0}])},function(o){return t.blobs.neq(r[34],void 0)?r[35]=!0:r[35]=!1,r[35]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),t.nativeOperation(n("LSGetBlobFromString.nop"),e[3]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return t.nativeOperation(n("LSHmac_v2.nop"),r[30],r[36]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[34],t.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),r[36]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(o){var a;return t.blobs.neq(r[38],void 0)?t.sequence([function(o){return r[41]=new t.Map,r[41].set("sk_ciphertext",r[38]),r[41].set("sk_hash",r[37]),r[42]=e[5].get("message_payload_encryption_keys"),r[43]=r[42].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[43],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[14]).then(function(e){var t;return t=e,r[44]=t[0],t})},function(e){return t.blobs.neq(r[44],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[44]).then(function(e){var t;return t=e,r[48]=t[0],t})},function(e){return r[45]=r[48]}]):t.resolve(r[45]=void 0)},function(o){var a;return r[45]!==void 0?t.sequence([function(e){return r[18]!==void 0?t.sequence([function(e){return r[51]=r[18].get("mt"),r[51]?r[52]=!1:r[52]=!0,r[52]?t.resolve(r[53]=void 0):t.sequence([function(e){return r[55]=new t.Map,r[56]=r[51].keys(),r[57]=t.i64.of_int32(r[56].length),t.i64.gt(r[57],t.i64.cast([0,0]))?t.loopAsync(r[57],function(e){return r[58]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[56],r[58]).then(function(e){var t;return t=e,r[59]=t[0],r[60]=t[1],t})},function(e){return r[61]=r[51].get(r[59]),r[55].set(r[59],r[61])}])}):t.resolve()},function(e){return r[53]=r[55]}])},function(e){return r[53]!==void 0?(r[55]=t.toJSON(r[53]),r[54]=r[55]):r[54]=void 0,r[48]=r[54]}]):t.resolve(r[48]=void 0)},function(n){var o;return r[18]!==void 0?(r[51]=r[18].get("mooos"),r[49]=r[51]):r[49]=void 0,r[50]=new t.Map,r[50].set("backup_action",e[0]),r[50].set("protobuf_encrypted",r[45]),r[50].set("supplemental_data_encrypted",r[41]),r[50].set("timestamp_ms",e[4]),r[50].set("message_tags",r[48]),r[50].set("serialized_attachment_backup_payload",void 0),r[50].set("maybe_ooo_supplemental_upload",r[49]),o=[r[50],void 0],r[46]=o[0],r[47]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[48]=new t.Map,r[48].set("error_code",t.i64.cast([0,62])),r[48].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[48].set("error_message",""),a=[void 0,r[48]],r[46]=a[0],r[47]=a[1]))},function(e){var t;return t=[r[46],r[47]],r[39]=t[0],r[40]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),r[41]=new t.Map,r[41].set("error_code",t.i64.cast([0,66])),r[41].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[41].set("error_message",""),a=[void 0,r[41]],r[39]=a[0],r[40]=a[1]))},function(e){var t;return t=[r[39],r[40]],r[24]=t[0],r[25]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),r[26]=new t.Map,r[26].set("error_code",t.i64.cast([0,27])),r[26].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[26].set("error_message",""),a=[void 0,r[26]],r[24]=a[0],r[25]=a[1]))},function(e){var t;return t=[r[24],r[25]],r[21]=t[0],r[22]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[23]=new t.Map,r[23].set("error_code",t.i64.cast([0,65])),r[23].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[23].set("error_message",""),a=[void 0,r[23]],r[21]=a[0],r[22]=a[1]))},function(e){var t;return t=[r[21],r[22]],r[19]=t[0],r[20]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),r[21]=new t.Map,r[21].set("error_code",t.i64.cast([0,64])),r[21].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[21].set("error_message",""),a=[void 0,r[21]],r[19]=a[0],r[20]=a[1]))},function(e){var t;return t=[r[19],r[20]],r[12]=t[0],r[13]=t[1],t}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),r[14]=new t.Map,r[14].set("error_code",t.i64.cast([0,65])),r[14].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[14].set("error_message",""),a=[void 0,r[14]],r[12]=a[0],r[13]=a[1]))},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}]):t.sequence([function(o){return t.i64.eq(e[0],t.i64.cast([0,4]))?t.sequence([function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],r[16]=t[2],t})},function(o){return t.nativeOperation(n("LSQueryLocalPersistenceStoreTagsForBackup.nop"),e[1],e[2]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(o){var a,i,l;return r[18]=new t.Map,r[18].set("message_tags",r[17]),r[19]=new t.Map,r[19].set("mt",r[18]),t.blobs.neq(r[14],void 0)?t.sequence([function(o){return r[22]=e[5].get("message_payload_encryption_keys"),r[23]=r[22].get("payload_key"),t.nativeOperation(n("LSSymmetricEncryptionCreateEncryptedData.nop"),r[23],t.blobs.of_string(["message_thread","_",e[1]].join("")),r[14]).then(function(e){var t;return t=e,r[24]=t[0],t})},function(e){return t.blobs.neq(r[24],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[24]).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return r[25]=r[28]}]):t.resolve(r[25]=void 0)},function(o){var a;return r[25]!==void 0?t.sequence([function(e){return r[19]!==void 0?t.sequence([function(e){return r[31]=r[19].get("mt"),r[31]?r[32]=!1:r[32]=!0,r[32]?t.resolve(r[33]=void 0):t.sequence([function(e){return r[35]=new t.Map,r[36]=r[31].keys(),r[37]=t.i64.of_int32(r[36].length),t.i64.gt(r[37],t.i64.cast([0,0]))?t.loopAsync(r[37],function(e){return r[38]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[36],r[38]).then(function(e){var t;return t=e,r[39]=t[0],r[40]=t[1],t})},function(e){return r[41]=r[31].get(r[39]),r[35].set(r[39],r[41])}])}):t.resolve()},function(e){return r[33]=r[35]}])},function(e){return r[33]!==void 0?(r[35]=t.toJSON(r[33]),r[34]=r[35]):r[34]=void 0,r[28]=r[34]}]):t.resolve(r[28]=void 0)},function(n){var o;return r[19]!==void 0?(r[31]=r[19].get("mooos"),r[29]=r[31]):r[29]=void 0,r[30]=new t.Map,r[30].set("backup_action",e[0]),r[30].set("protobuf_encrypted",r[25]),r[30].set("supplemental_data_encrypted",void 0),r[30].set("timestamp_ms",e[4]),r[30].set("message_tags",r[28]),r[30].set("serialized_attachment_backup_payload",void 0),r[30].set("maybe_ooo_supplemental_upload",r[29]),o=[r[30],void 0],r[26]=o[0],r[27]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),r[28]=new t.Map,r[28].set("error_code",t.i64.cast([0,62])),r[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[28].set("error_message",""),a=[void 0,r[28]],r[26]=a[0],r[27]=a[1]))},function(e){var t;return t=[r[26],r[27]],r[20]=t[0],r[21]=t[1],t}]):t.resolve((r[16]?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,70])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),a=[void 0,r[24]],r[22]=a[0],r[23]=a[1]):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),r[24]=new t.Map,r[24].set("error_code",t.i64.cast([0,63])),r[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[24].set("error_message",""),i=[void 0,r[24]],r[22]=i[0],r[23]=i[1]),l=[r[22],r[23]],r[20]=l[0],r[21]=l[1]))},function(e){var t;return t=[r[20],r[21]],r[12]=t[0],r[13]=t[1],t}]):t.sequence([function(n){var o;return t.i64.eq(e[0],t.i64.cast([0,3]))?t.sequence([function(e){return t.resolve(r[16]=void 0)},function(n){var o;return r[17]=void 0,r[18]=new t.Map,r[18].set("backup_action",e[0]),r[18].set("protobuf_encrypted",void 0),r[18].set("supplemental_data_encrypted",void 0),r[18].set("timestamp_ms",e[4]),r[18].set("message_tags",r[16]),r[18].set("serialized_attachment_backup_payload",void 0),r[18].set("maybe_ooo_supplemental_upload",r[17]),o=[r[18],void 0],r[14]=o[0],r[15]=o[1]}]):t.resolve(((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN_PROTOBUF_TYPE"),r[16]=new t.Map,r[16].set("error_code",t.i64.cast([0,60])),r[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),r[16].set("error_message",""),o=[void 0,r[16]],r[14]=o[0],r[15]=o[1]))},function(e){var t;return t=[r[14],r[15]],r[12]=t[0],r[13]=t[1],t}])},function(e){var t;return t=[r[12],r[13]],r[10]=t[0],r[11]=t[1],t}])},function(e){var t;return t=[r[10],r[11]],r[2]=t[0],r[3]=t[1],t}])},function(e){return r[4]=t.i64.of_float(Date.now()),r[5]=t.i64.random(),r[7]="Finishing execution. Execution time: ",r[8]=t.i64.to_string(t.i64.sub(r[4],r[0])),r[9]=" ms",r[6]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",r[6],r[7],r[6],r[8],r[6],r[9]].join("")),t.i64.eq(t.i64.mod_(r[5],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[10]=",",r[11]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[r[7],r[10],r[8],r[10],r[9]].join(""),r[11],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),r[11]=new t.Map,r[11].set("error_code",t.i64.cast([0,67])),r[11].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),r[11].set("error_message",""),i=[void 0,r[11]],r[2]=i[0],r[3]=i[1]):(a=s.item,t.sequence([function(o){return t.storedProcedure(n("LSLoadAndEncryptProtobufWithInputsV2"),a.backupAction,e[2],a.toplevelOfflineThreadingId,a.supplementalKey,a.messageTimestampMs,e[1]).then(function(e){var t;return t=e,r[11]=t[0],r[12]=t[1],t})},function(e){var t;return t=[r[11],r[12]],r[2]=t[0],r[3]=t[1],t}]))})},function(e){return r[5]=t.i64.of_float(Date.now()),r[6]=t.i64.random(),r[8]="Finishing execution. Execution time: ",r[9]=t.i64.to_string(t.i64.sub(r[5],r[0])),r[10]=" ms",r[7]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadAndEncryptProtobufV2] ",r[7],r[8],r[7],r[9],r[7],r[10]].join("")),t.i64.eq(t.i64.mod_(r[6],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[11]=",",r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[r[8],r[11],r[9],r[11],r[10]].join(""),r[12],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[2],r[3]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure",e.__tables__=["pending_protobuf_backups_context"],a.exports=e}),null);
__d("LSLogWebQpl.nop",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LogWebQplNOP").__setRef("LSLogWebQpl.nop"),s=function(n,r,o,a,i,l,s,u){return e.load().then(function(e){return e.call(o,a,i,l,s,u)})};s.__nop_name__="LSLogWebQpl",l.default=s}),98);
__d("WAHashStringToNumber",[],(function(t,n,r,o,a,i){"use strict";function e(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return Math.abs(t)}i.hashStringToNumber=e}),66);
__d("LSQplAnnotateBool.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{bool:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateBool",l.default=s}),98);
__d("LSQplAnnotateString.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{string:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateString",l.default=s}),98);
__d("LSQplMarkEnd.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),c=o("WAHashStringToNumber").hashStringToNumber(s);return u?r("QPLUserFlow").endSuccess(t,{instanceKey:c}):r("QPLUserFlow").endFailure(t,"failure",{instanceKey:c}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplMarkEnd",l.default=s}),98);
__d("LSQplMarkPoint.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),c=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addPoint(t,u,{instanceKey:c}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplMarkPoint",l.default=s}),98);
__d("LSQplStartTrace.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),d=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").start(t,{instanceKey:d}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplStartTrace",l.default=s}),98);
__d("LSSerializeBackupPayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDeriveValueSecretRefV2","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","LSLogWebQpl.nop","LSQplAnnotateBool.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(i){return t.sequence([function(n){return o[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),o[1]=t.i64.of_float(Date.now()),o[19]=t.i64.mul(o[1],t.i64.cast([0,1e6])),o[2]=t.i64.random(),o[6]=t.i64.to_string(o[2]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(e,t){var n=e.done,r=e.value;return n?o[3]=void 0:(t=r.item,o[3]=t.dataTraceId)})},function(e){return o[3]!==void 0?o[5]=o[3]:o[5]=void 0,o[6]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,637746317]),o[6],!0,o[5]):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,637746317]),o[6],"LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure_start"):t.resolve()},function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!1}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var r,a,i=e.done,l=e.value;return i?(o[23]=new t.Map,o[23].set("error_msg","Expected a nonempty query result"),o[23].set("code",t.i64.cast([0,3])),o[23].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),o[24]=t.createArray(),o[25]=(o[24].push(o[23]),o[24]),r=[void 0,o[24]],o[7]=r[0],o[8]=r[1]):(n=l.item,o[23]=new t.Map,o[23].set("backup_id",n.backupId),o[23].set("device_public_key_blob",n.devicePublicKeyBlob),o[23].set("device_private_key_blob",n.devicePrivateKeyBlob),o[23].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),o[23].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),o[23].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),o[23].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),o[23].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),o[23].set("ocmf_client_state_blob",n.ocmfClientStateBlob),o[23].set("orf_client_state_v2_blob",void 0),o[23].set("orf_v2_authority_level",void 0),o[23].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),o[23].set("device_id",n.deviceId),o[23].set("backup_tenancy",n.backupTenancy),o[23].set("encryption_version",n.encryptionVersion),o[23].set("revision_version",n.revisionVersion),o[23].set("initialize_restore_result",void 0),o[23].set("device_creation_timestamp_sec",void 0),o[23].set("authority_level",n.authorityLevel),a=[o[23],void 0],o[7]=a[0],o[8]=a[1])})},function(a){return o[10]=new t.Map,o[10].set("value",o[7]),o[10].set("errors",o[8]),o[11]=o[10].get("value"),o[11]!==void 0?t.sequence([function(a){return o[23]=o[11].get("backup_id"),o[24]=o[11].get("device_public_key_blob"),o[25]=o[11].get("device_private_key_blob"),o[26]=o[11].get("epoch_storage_public_key_blob"),o[27]=o[11].get("epoch_storage_private_key_blob"),o[28]=o[11].get("epoch_auth_public_key_blob"),o[29]=o[11].get("epoch_auth_private_key_blob"),o[30]=o[11].get("mailbox_root_key_blob"),o[31]=o[11].get("ocmf_client_state_blob"),o[32]=o[11].get("orf_client_state_v2_blob"),o[33]=o[11].get("orf_v2_authority_level"),o[34]=o[11].get("oblivious_validation_token_blob"),o[35]=o[11].get("device_id"),o[36]=o[11].get("backup_tenancy"),o[37]=o[11].get("encryption_version"),o[38]=o[11].get("revision_version"),o[39]=o[11].get("initialize_restore_result"),o[40]=o[11].get("device_creation_timestamp_sec"),o[41]=o[11].get("authority_level"),t.i64.neq(o[35],void 0)?t.sequence([function(e){return o[46]=void 0,t.i64.neq(o[46],void 0)?t.resolve(o[47]=o[46]):t.sequence([function(e){return o[55]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,o[56]=t[0],t})},function(e){return o[56]&&(o[65]=(o[55].push(t.i64.cast([0,0])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,o[57]=t[0],t})},function(e){return o[57]&&(o[65]=(o[55].push(t.i64.cast([0,2])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,o[58]=t[0],t})},function(e){return o[58]&&(o[65]=(o[55].push(t.i64.cast([0,3])),o[55])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,o[59]=t[0],t})},function(e){return o[59]&&(o[65]=(o[55].push(t.i64.cast([0,4])),o[55])),o[60]=t.createArray(),o[61]=t.i64.of_int32(o[55].length),t.i64.gt(o[61],t.i64.cast([0,0]))?t.loopAsync(o[61],function(e){return o[65]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[55],o[65]).then(function(e){var t;return t=e,o[66]=t[0],o[67]=t[1],t})},function(e){return o[68]=(o[60].push(o[66]),o[60])}])}):t.resolve()},function(e){return t.sequence([function(e){return o[65]=t.createArray(),o[66]=t.i64.of_int32(o[60].length),t.i64.gt(o[66],t.i64.cast([0,0]))?t.loopAsync(o[66],function(e){return o[68]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[60],o[68]).then(function(e){var t;return t=e,o[69]=t[0],o[70]=t[1],t})},function(e){return o[71]=(o[65].push(t.i64.to_string(o[69])),o[65])}])}):t.resolve()},function(e){return o[67]=o[65].join(","),o[62]=o[67]}])},function(e){return o[60].some(function(e){return t.i64.eq(o[37],e)})?o[63]=o[37]:o[63]=void 0,t.i64.neq(o[63],void 0)?o[64]=o[63]:o[64]=void 0,o[47]=o[64]}])},function(a){return t.i64.neq(o[47],void 0)?o[48]=o[47]:o[48]=t.i64.cast([0,0]),t.i64.neq(o[36],void 0)?o[49]=o[36]:o[49]=t.i64.cast([0,1]),t.db.table(177).fetch([[[e[0]]],"fk_pending_tasks"]).next().then(function(a,i){var l=a.done,s=a.value;return l?t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[67]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[67],t.i64.cast([0,1e6])),o[19]),void 0],o[55]=a[0],o[56]=a[1],o[57]=a[2],o[58]=a[3],o[59]=a[4],o[60]=a[5],o[61]=a[6]):(r=s.item,o[67]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[67],t.i64.cast([0,1e6])),o[19]),void 0],o[55]=i[0],o[56]=i[1],o[57]=i[2],o[58]=i[3],o[59]=i[4],o[60]=i[5],o[61]=i[6])})},function(e){return o[63]=new t.Map,o[63].set("task_id",o[55]),o[63].set("queue_name",o[56]),o[63].set("enqueue_timestamp_ms",o[57]),o[63].set("priority",o[58]),o[63].set("first_executed_timestamp_ms",o[59]),o[63].set("execution_time_ns",o[60]),o[63].set("echo_encoding_execution_time_ns",o[61]),o[64]=new t.Map,o[64].set("task_metadata",o[63]),o[64].set("action_type",void 0),o[64].set("content_type",void 0),o[64].set("identifiers",void 0),o[64].set("identifiers_v2",void 0),o[64].set("task_creation_source",void 0),o[64].set("message_payload_source",t.i64.cast([0,2])),o[65]=new t.Map,o[65].set("error_code",t.i64.cast([0,5])),o[65].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[65].set("error_message","Pending backup context row not found"),o[65]!==void 0?(o[67]=o[65].get("stored_procedure"),o[68]=o[65].get("error_code"),o[69]=o[65].get("error_message"),o[70]=".",o[71]=[o[67],o[70],t.i64.to_string(o[68]),o[70],o[69]].join(""),o[6]!==void 0&&o[71]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[71]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[66]=t.createArray(),n=[void 0,o[65],o[64],o[66]],o[50]=n[0],o[51]=n[1],o[52]=n[2],o[53]=n[3]}]):(i=s.item,t.sequence([function(n){return o[62]=i.actionType,o[63]=i.contentType,o[68]=i.echoContent,o[69]=i.lsTraceId,o[67]=i.echoEncodingLatencyNs,o[66]=i.attachmentPayload,o[70]=i.tamThreadSubtype,o[71]=i.isInstamadillo,o[55]=new t.Map,o[55].set("backup_id",t.i64.to_string(o[23])),o[55].set("act_thread_id",i.listKey),o[55].set("timestamp",i.sortKey),o[55].set("otid",i.uniqueKey),t.filter(t.db.table(305).fetch(),function(n){return t.i64.eq(n.pendingBackupTaskId,e[0])}).next().then(function(e,t){var n=e.done,r=e.value;return n?o[56]=!1:(t=r.item,o[55].set("supplemental_otid",t.supplementalOfflineThreadingId),o[55].set("deletion_otid",t.deletionOfflineThreadingId),o[56]=!0)})},function(e){return o[65]=t.i64.eq(void 0,void 0),o[6]!==void 0?t.nativeOperation(n("LSQplAnnotateBool.nop"),t.i64.cast([0,637746317]),o[6],"should_run_device_timestamp_sync",o[65]):t.resolve()},function(a){return o[64]=i.error==null?t.i64.cast([0,0]):i.error,[t.i64.cast([0,0]),t.i64.cast([0,32])].some(function(e){return t.i64.eq(o[64],e)})?t.sequence([function(e){return o[72]=o[55].get("act_thread_id"),o[73]=o[55].get("otid"),t.storedProcedure(n("LSGetLatestEpochKeys"),!1).then(function(e){var t;return t=e,o[74]=t[0],o[75]=t[1],t})},function(e){var r;return o[74]!==void 0?t.sequence([function(e){return t.i64.eq(o[63],t.i64.cast([0,1]))?t.sequence([function(e){return o[85]=t.createArray(),o[90]=(o[85].push(t.i64.cast([0,32])),o[85]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",o[72]].join("")).then(function(e){var t;return t=e,o[86]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[86],void 0,o[30],o[85]).then(function(e){var t;return t=e,o[87]=t[0],t})},function(e){return o[87]?o[88]=!1:o[88]=!0,o[88]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),o[91]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[91]].join("")),o[90]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[91],o[90],t.i64.cast([0,3]))},function(e){return o[89]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[87],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[90]=t[0],o[91]=t[1],t})},function(e){return o[89]=o[90]}])},function(e){return o[82]=o[89]}]):t.sequence([function(e){return t.i64.eq(o[62],t.i64.cast([0,2]))?t.sequence([function(e){return o[86]=t.createArray(),o[91]=(o[86].push(t.i64.cast([0,32])),o[86]),t.nativeOperation(n("LSGetBlobFromString.nop"),["thread_ope_key","_",o[73]].join("")).then(function(e){var t;return t=e,o[87]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[87],void 0,o[30],o[86]).then(function(e){var t;return t=e,o[88]=t[0],t})},function(e){return o[88]?o[89]=!1:o[89]=!0,o[89]?t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),o[92]="Got null keys while deriving message list OPE key. Returning null blobish",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[92]].join("")),o[91]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[92],o[91],t.i64.cast([0,3]))},function(e){return o[90]=void 0}]):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[88],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[91]=t[0],o[92]=t[1],t})},function(e){return o[90]=o[91]}])},function(e){return o[85]=o[90]}]):t.resolve(o[85]=void 0)},function(e){return o[82]=o[85]}])},function(e){var r;return t.blobs.neq(o[82],void 0)?t.sequence([function(e){return o[85]=o[74].get("epoch_keys"),o[86]=o[85].get("epoch_anon_id"),o[87]=o[85].get("epoch_root_key"),o[88]=t.createArray(),o[103]=(o[88].push(t.i64.cast([0,32])),o[88]),t.i64.ge(o[48],t.i64.cast([0,3]))?t.resolve(o[89]=void 0):t.sequence([function(e){return t.nativeOperation(n("LSGetBlobFromString.nop"),o[72]).then(function(e){var t;return t=e,o[103]=t[0],t})},function(e){return o[89]=o[103]}])},function(e){return t.i64.ge(o[48],t.i64.cast([0,4]))?(o[103]="_",o[90]=["message_key_in_epoch",o[103],t.blobs.to_string(o[86]),o[103],"cipher_version",o[103],t.i64.to_string(o[48]),o[103],"thread",o[103],o[72]==null?"":o[72]].join("")):(t.i64.ge(o[48],t.i64.cast([0,3]))?(o[104]="_",o[103]=["message_key_in_epoch",o[104],t.blobs.to_string(o[86]),o[104],"cipher_version",o[104],t.i64.to_string(o[48]),o[104],"thread",o[104],o[72]==null?"":o[72]].join("")):(t.i64.ge(o[48],t.i64.cast([0,2]))?(o[105]="_",o[104]=["message_key_in_epoch",o[105],t.blobs.to_string(o[86]),o[105],"cipher_version",o[105],t.i64.to_string(o[48])].join("")):o[104]=["message_key_in_epoch","_",t.blobs.to_string(o[86])].join(""),o[103]=o[104]),o[90]=o[103]),t.nativeOperation(n("LSGetBlobFromString.nop"),o[90]).then(function(e){var t;return t=e,o[91]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateDerivedKeys.nop"),o[91],o[89],o[87],o[88]).then(function(e){var t;return t=e,o[92]=t[0],t})},function(e){return o[92]?o[93]=!1:o[93]=!0,o[93]?t.resolve(o[94]=void 0):t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[92],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[103]=t[0],o[104]=t[1],t})},function(e){return o[94]=o[103]}])},function(e){return t.filter(t.db.table(169).fetch(),function(e){return t.blobs.eq(e.epochAnonIdBlob,t.blob("MA=="))}).next().then(function(e,n){var r,a,i=e.done,l=e.value;return i?(o[103]=new t.Map,o[103].set("error_msg","Expected a nonempty query result"),o[103].set("code",t.i64.cast([0,3])),o[103].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),o[104]=t.createArray(),o[105]=(o[104].push(o[103]),o[104]),r=[void 0,o[104]],o[95]=r[0],o[96]=r[1]):(n=l.item,o[103]=new t.Map,o[103].set("epoch_id",n.epochId),o[103].set("backup_id",n.backupId),o[103].set("epoch_anon_id_blob",n.epochAnonIdBlob),o[103].set("epoch_root_key_blob",n.epochRootKeyBlob),o[103].set("epoch_status",n.epochStatus),o[103].set("epoch_head",n.epochHead),o[103].set("authority_level",n.authorityLevel),a=[o[103],void 0],o[95]=a[0],o[96]=a[1])})},function(e){return o[98]=new t.Map,o[98].set("value",o[95]),o[98].set("errors",o[96]),o[99]=o[98].get("value"),o[99]!==void 0?t.sequence([function(e){return o[103]=o[99].get("epoch_id"),o[104]=o[99].get("backup_id"),o[105]=o[99].get("epoch_anon_id_blob"),o[106]=o[99].get("epoch_root_key_blob"),o[107]=o[99].get("epoch_status"),o[108]=o[99].get("epoch_head"),o[109]=o[99].get("authority_level"),o[110]=t.createArray(),o[118]=(o[110].push(t.i64.cast([0,32])),o[110]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,o[30],o[110]).then(function(e){var t;return t=e,o[111]=t[0],t})},function(e){return o[111]!==void 0?t.sequence([function(e){return o[118]=t.i64.of_int32(o[111].length),t.i64.ge(o[118],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[111],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[120]=t[0],o[121]=t[1],t})},function(e){return o[119]=o[120]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[121]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[121]].join("")),o[120]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[121],o[120],t.i64.cast([0,3]))},function(e){return o[119]=void 0}])},function(e){return o[112]=o[119]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[119]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[119]].join("")),o[118]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[119],o[118],t.i64.cast([0,3]))},function(e){return o[112]=void 0}])},function(e){return t.blobs.neq(o[112],void 0)?o[113]=!0:o[113]=!1,o[113]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[114]=t.createArray(),o[118]=(o[114].push(t.i64.cast([0,32])),o[114]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),o[112],o[106],o[114]).then(function(e){var t;return t=e,o[115]=t[0],t})},function(e){return o[115]!==void 0?t.sequence([function(e){return o[118]=t.i64.of_int32(o[115].length),t.i64.ge(o[118],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[115],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[120]=t[0],o[121]=t[1],t})},function(e){return o[119]=o[120]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[121]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[121]].join("")),o[120]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[121],o[120],t.i64.cast([0,3]))},function(e){return o[119]=void 0}])},function(e){return o[116]=o[119]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[119]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[119]].join("")),o[118]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[119],o[118],t.i64.cast([0,3]))},function(e){return o[116]=void 0}])},function(e){return t.blobs.neq(o[116],void 0)?o[117]=!0:o[117]=!1,o[117]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[100]=o[116]}]):t.sequence([function(e){return o[103]=o[98].get("errors"),o[104]=o[98].get("errors"),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBEpochClientUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),o[106]="Failed to get mailbox_root_key_v2: epoch 0 is not available.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBEpochClientUtils] ","",o[106]].join("")),o[105]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBEpochClientUtils",o[106],o[105],t.i64.cast([0,3]))},function(e){return o[100]=void 0}])},function(e){var r;return t.blobs.neq(o[94],void 0)?t.sequence([function(e){return t.blobs.neq(o[100],void 0)?t.sequence([function(e){return o[109]=t.createArray(),o[113]=(o[109].push(t.i64.cast([0,32])),o[109]),t.nativeOperation(n("LSCreateDerivedKeys.nop"),t.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,o[100],o[109]).then(function(e){var t;return t=e,o[110]=t[0],t})},function(e){return o[110]!==void 0?t.sequence([function(e){return o[113]=t.i64.of_int32(o[110].length),t.i64.ge(o[113],t.i64.cast([0,1]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[110],t.i64.cast([0,0])).then(function(e){var t;return t=e,o[115]=t[0],o[116]=t[1],t})},function(e){return o[114]=o[115]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),o[116]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[116]].join("")),o[115]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[116],o[115],t.i64.cast([0,3]))},function(e){return o[114]=void 0}])},function(e){return o[111]=o[114]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),o[114]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBCryptoUtils] ","",o[114]].join("")),o[113]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBCryptoUtils",o[114],o[113],t.i64.cast([0,3]))},function(e){return o[111]=void 0}])},function(e){return t.blobs.neq(o[111],void 0)?o[112]=!0:o[112]=!1,o[112]||((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Attempting to coerce a null value to nonnull."),t.throw("LS::assert is failed. Attempting to coerce a null value to nonnull.")),o[103]=o[111]}]):t.resolve(o[103]=void 0)},function(e){var n;return o[104]=o[85].get("epoch_root_key"),o[105]=o[85].get("epoch_anon_id"),o[106]=o[85].get("epoch_id"),o[107]=new t.Map,o[107].set("payload_key",o[94]),o[107].set("payload_fallback_key",o[103]),o[107].set("encryption_version",o[48]),o[107].set("epoch_root_key",o[104]),o[107].set("epoch_anon_id",o[105]),o[107].set("epoch_id",o[106]),o[108]=new t.Map,o[108].set("ope_key",o[82]),o[108].set("message_payload_encryption_keys",o[107]),o[108].set("ocmf_shared_key",o[31]),o[108].set("mailbox_base_salt",o[30]),o[108].set("mailbox_root_key_v2",o[100]),n=[o[108],void 0],o[101]=n[0],o[102]=n[1]}]):t.resolve((o[103]=new t.Map,o[103].set("error_code",t.i64.cast([0,26])),o[103].set("stored_procedure","MEBKeyDeriver"),o[103].set("error_message",""),r=[void 0,o[103]],o[101]=r[0],o[102]=r[1]))},function(e){var t;return t=[o[101],o[102]],o[83]=t[0],o[84]=t[1],t}]):t.resolve((o[85]=new t.Map,o[85].set("error_code",t.i64.cast([0,25])),o[85].set("stored_procedure","MEBKeyDeriver"),o[85].set("error_message",""),r=[void 0,o[85]],o[83]=r[0],o[84]=r[1]))},function(e){var t;return t=[o[83],o[84]],o[76]=t[0],o[77]=t[1],t}]):t.resolve((r=[void 0,o[75]],o[76]=r[0],o[77]=r[1],r))},function(a){return o[76]!==void 0?t.sequence([function(e){return o[82]=o[55].get("backup_id"),o[83]=o[55].get("act_thread_id"),o[84]=o[55].get("timestamp"),o[85]=o[55].get("otid"),t.storedProcedure(n("LSEncryptIdentifiersV2"),o[62],o[63],o[82],o[83],t.i64.from_string(o[84]),o[85],o[76]).then(function(e){var t;return t=e,o[86]=t[0],o[87]=t[1],t})},function(a){return o[86]!==void 0?t.sequence([function(r){return o[92]=o[55].get("act_thread_id"),t.storedProcedure(n("LSLoadAndEncryptProtobufV2"),e[0],o[76],o[92]).then(function(e){var t;return t=e,o[93]=t[0],o[94]=t[1],t})},function(a){return o[99]=t.i64.eq(o[64],t.i64.cast([0,32]))||!1||r("gkx")("12541")||!1,o[100]=o[93]!==void 0,o[99]&&o[100]?t.sequence([function(e){return o[101]=o[55].get("act_thread_id"),o[102]=o[55].get("backup_id"),t.storedProcedure(n("LSDeriveValueSecretRefV2"),o[101],o[102],o[76]).then(function(e){var t;return t=e,o[103]=t[0],o[104]=t[1],t})},function(r){return o[93]!==void 0?t.sequence([function(r){return o[103]!==void 0?t.sequence([function(e){return o[113]=o[103].get("value_secret_ref"),o[114]=o[86].get("act_thread_id_ocmf_partial"),o[115]=o[86].get("otid_ocmf_partial"),o[116]=o[86].get("timestamp_encrypted"),o[117]=new t.Map,o[117].set("list_key",o[114]),o[117].set("unique_key",o[115]),o[117].set("sort_key",o[116]),o[118]=void 0,o[119]=new t.Map,o[119].set("list_item_id",o[117]),o[119].set("list_item",o[118]),o[119].set("action_type",o[62]),o[120]=o[55].get("timestamp"),o[121]=o[55].get("otid"),o[122]=o[55].get("act_thread_id"),o[123]=o[55].get("supplemental_otid"),o[124]=o[55].get("deletion_otid"),o[125]=new t.Map,o[125].set("timestamp",o[120]),o[125].set("otid",o[121]),o[125].set("wa_thread_id",t.i64.from_string(o[122])),o[125].set("supplemental_otid",o[123]),o[125].set("deletion_otid",o[124]),o[126]=o[76].get("mailbox_base_salt"),t.nativeOperation(n("LSBase64Encode.nop"),o[126]).then(function(e){var t;return t=e,o[127]=t[0],t})},function(e){return o[128]=o[76].get("ocmf_shared_key"),t.nativeOperation(n("LSBase64Encode.nop"),o[128]).then(function(e){var t;return t=e,o[129]=t[0],t})},function(e){return o[130]=new t.Map,o[130].set("mailbox_root_key",o[127]==null?"":o[127]),o[130].set("ocmf_client_state_blob",o[129]==null?"":o[129]),o[131]=o[86].get("backup_id_ocmf_partial"),o[132]=o[76].get("message_payload_encryption_keys"),o[133]=o[132].get("epoch_id"),o[134]=o[76].get("message_payload_encryption_keys"),o[135]=o[134].get("encryption_version"),o[150]=o[69]==null?"":o[69],o[136]=new t.Map,o[136].set("mailbox_partial_id",o[131]),o[136].set("action",o[119]),o[136].set("device_id",o[35]),o[136].set("echo_version",t.i64.cast([0,0])),o[136].set("epoch_id",o[133]),o[136].set("trace_id",void 0),o[136].set("encryption_version",o[135]),o[136].set("is_thread",t.i64.eq(o[63],t.i64.cast([0,2]))),o[136].set("raw_identifiers",o[125]),o[136].set("raw_tokens",o[130]),o[136].set("request_id",o[150]),o[136].set("tam_thread_subtype",o[70]==null?t.i64.cast([0,0]):o[70]),o[136].set("is_instamadillo",o[71]==null?!1:o[71]),o[136].set("should_run_device_creation_timestamp_sync",o[65]),o[136].set("value_secret_ref",o[113]),o[136].set("empty_echo_payload_reason",t.i64.cast([0,1])),o[93]!==void 0?t.sequence([function(e){return o[151]=o[93].get("supplemental_data_encrypted"),o[151]!==void 0?t.sequence([function(e){return o[153]=o[93].get("protobuf_encrypted"),o[154]=o[93].get("backup_action"),o[155]=o[93].get("timestamp_ms"),o[156]=o[151].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),o[156]).then(function(e){var t;return t=e,o[157]=t[0],t})},function(e){return o[158]=o[151].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),o[158]).then(function(e){var t;return t=e,o[159]=t[0],t})},function(e){return o[160]=o[93].get("message_tags"),o[161]=o[93].get("maybe_ooo_supplemental_upload"),o[162]=new t.Map,o[162].set("supplementary_data_key",void 0),o[162].set("encrypted_protobuf",o[153]),o[162].set("key_value_backup_action",o[154]),o[162].set("protobuf_ts_ms",o[155]),o[162].set("supplemental_key_ciphertext",o[157]),o[162].set("supplemental_key_hash",o[159]),o[162].set("message_tags",o[160]),o[162].set("maybe_ooo_supplemental_upload",o[161]),o[152]=o[162]}]):t.resolve((o[153]=o[93].get("protobuf_encrypted"),o[154]=o[93].get("backup_action"),o[155]=o[93].get("timestamp_ms"),o[156]=o[93].get("message_tags"),o[157]=new t.Map,o[157].set("supplementary_data_key",void 0),o[157].set("encrypted_protobuf",o[153]),o[157].set("key_value_backup_action",o[154]),o[157].set("protobuf_ts_ms",o[155]),o[157].set("message_tags",o[156]),o[152]=o[157]))},function(e){return o[136].set("key_value_backup_payload",o[152])}]):t.resolve()},function(e){return o[66]!==void 0?t.resolve(o[136].set("attachment_backup_payload",o[66])):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),o[151]="payload_null",o[6]!==void 0&&o[151]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"attachment_info",o[151]):t.resolve())},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplAnnotateBool.nop"),t.i64.cast([0,637746317]),o[6],"process_attachments_via_message_upload",!0):t.resolve()},function(e){return o[150]!==void 0?t.nativeOperation(n("LSLogWebQpl.nop"),o[150],t.i64.cast([0,521481602]),"upload_start",t.i64.cast([0,0]),void 0,void 0):t.resolve()},function(n){return o[137]=t.toJSON(o[136]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[151]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[152]=void 0:o[152]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[151],t.i64.cast([0,1e6])),o[19]),o[152]],o[138]=a[0],o[139]=a[1],o[140]=a[2],o[141]=a[3],o[142]=a[4],o[143]=a[5],o[144]=a[6]):(r=s.item,o[151]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[152]=void 0:o[152]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[151],t.i64.cast([0,1e6])),o[19]),o[152]],o[138]=i[0],o[139]=i[1],o[140]=i[2],o[141]=i[3],o[142]=i[4],o[143]=i[5],o[144]=i[6])})},function(e){return o[146]=new t.Map,o[146].set("task_id",o[138]),o[146].set("queue_name",o[139]),o[146].set("enqueue_timestamp_ms",o[140]),o[146].set("priority",o[141]),o[146].set("first_executed_timestamp_ms",o[142]),o[146].set("execution_time_ns",o[143]),o[146].set("echo_encoding_execution_time_ns",o[144]),o[147]=new t.Map,o[147].set("task_metadata",o[146]),o[147].set("action_type",o[62]),o[147].set("content_type",o[63]),o[147].set("identifiers",void 0),o[147].set("identifiers_v2",o[55]),o[147].set("task_creation_source",void 0),o[147].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!0):t.resolve()},function(e){var n;return o[148]=new t.Map,o[148].set("payload",o[137]),o[149]=t.createArray(),o[151]=(o[149].push(void 0),o[149]),n=[o[148],void 0,o[147],o[149]],o[109]=n[0],o[110]=n[1],o[111]=n[2],o[112]=n[3]}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[124]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[125]=void 0:o[125]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[124],t.i64.cast([0,1e6])),o[19]),o[125]],o[113]=a[0],o[114]=a[1],o[115]=a[2],o[116]=a[3],o[117]=a[4],o[118]=a[5],o[119]=a[6]):(r=s.item,o[124]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[125]=void 0:o[125]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[124],t.i64.cast([0,1e6])),o[19]),o[125]],o[113]=i[0],o[114]=i[1],o[115]=i[2],o[116]=i[3],o[117]=i[4],o[118]=i[5],o[119]=i[6])})},function(e){return o[121]=new t.Map,o[121].set("task_id",o[113]),o[121].set("queue_name",o[114]),o[121].set("enqueue_timestamp_ms",o[115]),o[121].set("priority",o[116]),o[121].set("first_executed_timestamp_ms",o[117]),o[121].set("execution_time_ns",o[118]),o[121].set("echo_encoding_execution_time_ns",o[119]),o[122]=new t.Map,o[122].set("task_metadata",o[121]),o[122].set("action_type",o[62]),o[122].set("content_type",o[63]),o[122].set("identifiers",void 0),o[122].set("identifiers_v2",o[55]),o[122].set("task_creation_source",void 0),o[122].set("message_payload_source",t.i64.cast([0,2])),o[104]!==void 0?(o[124]=o[104].get("stored_procedure"),o[125]=o[104].get("error_code"),o[126]=o[104].get("error_message"),o[127]=".",o[128]=[o[124],o[127],t.i64.to_string(o[125]),o[127],o[126]].join(""),o[6]!==void 0&&o[128]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[128]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[123]=t.createArray(),o[124]=(o[123].push(void 0),o[123]),n=[void 0,o[104],o[122],o[123]],o[109]=n[0],o[110]=n[1],o[111]=n[2],o[112]=n[3]}])},function(e){var t;return t=[o[109],o[110],o[111],o[112]],o[105]=t[0],o[106]=t[1],o[107]=t[2],o[108]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[120]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[121]=void 0:o[121]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[120],t.i64.cast([0,1e6])),o[19]),o[121]],o[109]=a[0],o[110]=a[1],o[111]=a[2],o[112]=a[3],o[113]=a[4],o[114]=a[5],o[115]=a[6]):(r=s.item,o[120]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[121]=void 0:o[121]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[120],t.i64.cast([0,1e6])),o[19]),o[121]],o[109]=i[0],o[110]=i[1],o[111]=i[2],o[112]=i[3],o[113]=i[4],o[114]=i[5],o[115]=i[6])})},function(e){return o[117]=new t.Map,o[117].set("task_id",o[109]),o[117].set("queue_name",o[110]),o[117].set("enqueue_timestamp_ms",o[111]),o[117].set("priority",o[112]),o[117].set("first_executed_timestamp_ms",o[113]),o[117].set("execution_time_ns",o[114]),o[117].set("echo_encoding_execution_time_ns",o[115]),o[118]=new t.Map,o[118].set("task_metadata",o[117]),o[118].set("action_type",o[62]),o[118].set("content_type",o[63]),o[118].set("identifiers",void 0),o[118].set("identifiers_v2",o[55]),o[118].set("task_creation_source",void 0),o[118].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[94]!==void 0?(o[120]=o[94].get("stored_procedure"),o[121]=o[94].get("error_code"),o[122]=o[94].get("error_message"),o[123]=".",o[124]=[o[120],o[123],t.i64.to_string(o[121]),o[123],o[122]].join(""),o[6]!==void 0&&o[124]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[124]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[119]=t.createArray(),o[120]=(o[119].push(o[94]),o[119]),n=[void 0,void 0,o[118],o[119]],o[105]=n[0],o[106]=n[1],o[107]=n[2],o[108]=n[3]}])},function(e){var t;return t=[o[105],o[106],o[107],o[108]],o[95]=t[0],o[96]=t[1],o[97]=t[2],o[98]=t[3],t}]):t.sequence([function(r){return o[99]===!0&&o[100]===!1?t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[116]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[117]=void 0:o[117]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[116],t.i64.cast([0,1e6])),o[19]),o[117]],o[105]=a[0],o[106]=a[1],o[107]=a[2],o[108]=a[3],o[109]=a[4],o[110]=a[5],o[111]=a[6]):(r=s.item,o[116]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[117]=void 0:o[117]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[116],t.i64.cast([0,1e6])),o[19]),o[117]],o[105]=i[0],o[106]=i[1],o[107]=i[2],o[108]=i[3],o[109]=i[4],o[110]=i[5],o[111]=i[6])})},function(e){return o[113]=new t.Map,o[113].set("task_id",o[105]),o[113].set("queue_name",o[106]),o[113].set("enqueue_timestamp_ms",o[107]),o[113].set("priority",o[108]),o[113].set("first_executed_timestamp_ms",o[109]),o[113].set("execution_time_ns",o[110]),o[113].set("echo_encoding_execution_time_ns",o[111]),o[114]=new t.Map,o[114].set("task_metadata",o[113]),o[114].set("action_type",o[62]),o[114].set("content_type",o[63]),o[114].set("identifiers",void 0),o[114].set("identifiers_v2",o[55]),o[114].set("task_creation_source",void 0),o[114].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[94]!==void 0?(o[116]=o[94].get("stored_procedure"),o[117]=o[94].get("error_code"),o[118]=o[94].get("error_message"),o[119]=".",o[120]=[o[116],o[119],t.i64.to_string(o[117]),o[119],o[118]].join(""),o[6]!==void 0&&o[120]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[120]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[115]=t.createArray(),o[116]=(o[115].push(o[94]),o[115]),n=[void 0,void 0,o[114],o[115]],o[101]=n[0],o[102]=n[1],o[103]=n[2],o[104]=n[3]}]):t.sequence([function(r){var a,i,l,s;return t.i64.eq(o[62],t.i64.cast([0,1]))?(o[113]=o[68]===""?void 0:o[68],o[113]!==void 0?(a=[o[113],void 0],o[111]=a[0],o[112]=a[1]):(o[114]=new t.Map,o[114].set("error_code",t.i64.cast([0,30])),o[114].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[114].set("error_message",""),i=[void 0,o[114]],o[111]=i[0],o[112]=i[1]),l=[o[111],o[112]],o[105]=l[0],o[106]=l[1]):(s=["",void 0],o[105]=s[0],o[106]=s[1]),o[105]!==void 0?t.sequence([function(e){var r;return t.i64.eq(o[62],t.i64.cast([0,1]))?t.sequence([function(e){return o[117]=o[55].get("backup_id"),o[118]=o[55].get("act_thread_id"),t.storedProcedure(n("LSEncryptMessagePayloadV2"),o[117],o[118],o[76],o[105]).then(function(e){var t;return t=e,o[119]=t[0],o[120]=t[1],t})},function(e){var t;return t=[o[119],o[120]],o[111]=t[0],o[112]=t[1],t}]):t.resolve((o[117]=new t.Map,o[117].set("encrypted_message_payload",""),o[117].set("value_secret_ref",""),r=[o[117],void 0],o[111]=r[0],o[112]=r[1]))},function(r){return o[111]!==void 0?t.sequence([function(e){return o[93]!==void 0&&t.i64.eq(o[62],t.i64.cast([0,2]))?t.sequence([function(e){return o[155]=o[55].get("act_thread_id"),o[156]=o[55].get("backup_id"),t.storedProcedure(n("LSDeriveValueSecretRefV2"),o[155],o[156],o[76]).then(function(e){var t;return t=e,o[157]=t[0],o[158]=t[1],t})},function(e){return o[157]!==void 0?(o[160]=o[157].get("value_secret_ref"),o[159]=o[160]):o[159]="",o[117]=o[159]}]):t.resolve(o[117]="")},function(e){return o[118]=o[86].get("act_thread_id_ocmf_partial"),o[119]=o[86].get("otid_ocmf_partial"),o[120]=o[86].get("timestamp_encrypted"),o[121]=new t.Map,o[121].set("list_key",o[118]),o[121].set("unique_key",o[119]),o[121].set("sort_key",o[120]),o[111]!==void 0?(o[155]=o[111].get("encrypted_message_payload"),o[156]=o[111].get("value_secret_ref"),o[157]=new t.Map,o[157].set("value",o[155]),o[157].set("value_secret_ref",o[156]),o[122]=o[157]):o[122]=void 0,o[123]=new t.Map,o[123].set("list_item_id",o[121]),o[123].set("list_item",o[122]),o[123].set("action_type",o[62]),o[124]=o[55].get("timestamp"),o[125]=o[55].get("otid"),o[126]=o[55].get("act_thread_id"),o[127]=o[55].get("supplemental_otid"),o[128]=o[55].get("deletion_otid"),o[129]=new t.Map,o[129].set("timestamp",o[124]),o[129].set("otid",o[125]),o[129].set("wa_thread_id",t.i64.from_string(o[126])),o[129].set("supplemental_otid",o[127]),o[129].set("deletion_otid",o[128]),o[130]=o[76].get("mailbox_base_salt"),t.nativeOperation(n("LSBase64Encode.nop"),o[130]).then(function(e){var t;return t=e,o[131]=t[0],t})},function(e){return o[132]=o[76].get("ocmf_shared_key"),t.nativeOperation(n("LSBase64Encode.nop"),o[132]).then(function(e){var t;return t=e,o[133]=t[0],t})},function(e){return o[134]=new t.Map,o[134].set("mailbox_root_key",o[131]==null?"":o[131]),o[134].set("ocmf_client_state_blob",o[133]==null?"":o[133]),o[135]=o[86].get("backup_id_ocmf_partial"),o[136]=o[76].get("message_payload_encryption_keys"),o[137]=o[136].get("epoch_id"),o[138]=o[76].get("message_payload_encryption_keys"),o[139]=o[138].get("encryption_version"),o[154]=o[69]==null?"":o[69],o[140]=new t.Map,o[140].set("mailbox_partial_id",o[135]),o[140].set("action",o[123]),o[140].set("device_id",o[35]),o[140].set("echo_version",t.i64.cast([0,0])),o[140].set("epoch_id",o[137]),o[140].set("trace_id",void 0),o[140].set("encryption_version",o[139]),o[140].set("is_thread",t.i64.eq(o[63],t.i64.cast([0,2]))),o[140].set("raw_identifiers",o[129]),o[140].set("raw_tokens",o[134]),o[140].set("request_id",o[154]),o[140].set("tam_thread_subtype",o[70]==null?t.i64.cast([0,0]):o[70]),o[140].set("is_instamadillo",o[71]==null?!1:o[71]),o[140].set("should_run_device_creation_timestamp_sync",o[65]),o[140].set("value_secret_ref",o[117]),o[93]!==void 0?t.sequence([function(e){return o[155]=o[93].get("supplemental_data_encrypted"),o[155]!==void 0?t.sequence([function(e){return o[157]=o[93].get("protobuf_encrypted"),o[158]=o[93].get("backup_action"),o[159]=o[93].get("timestamp_ms"),o[160]=o[155].get("sk_ciphertext"),t.nativeOperation(n("LSBase64Encode.nop"),o[160]).then(function(e){var t;return t=e,o[161]=t[0],t})},function(e){return o[162]=o[155].get("sk_hash"),t.nativeOperation(n("LSBase64Encode.nop"),o[162]).then(function(e){var t;return t=e,o[163]=t[0],t})},function(e){return o[164]=o[93].get("message_tags"),o[165]=o[93].get("maybe_ooo_supplemental_upload"),o[166]=new t.Map,o[166].set("supplementary_data_key",void 0),o[166].set("encrypted_protobuf",o[157]),o[166].set("key_value_backup_action",o[158]),o[166].set("protobuf_ts_ms",o[159]),o[166].set("supplemental_key_ciphertext",o[161]),o[166].set("supplemental_key_hash",o[163]),o[166].set("message_tags",o[164]),o[166].set("maybe_ooo_supplemental_upload",o[165]),o[156]=o[166]}]):t.resolve((o[157]=o[93].get("protobuf_encrypted"),o[158]=o[93].get("backup_action"),o[159]=o[93].get("timestamp_ms"),o[160]=o[93].get("message_tags"),o[161]=new t.Map,o[161].set("supplementary_data_key",void 0),o[161].set("encrypted_protobuf",o[157]),o[161].set("key_value_backup_action",o[158]),o[161].set("protobuf_ts_ms",o[159]),o[161].set("message_tags",o[160]),o[156]=o[161]))},function(e){return o[140].set("key_value_backup_payload",o[156])}]):t.resolve()},function(e){return o[66]!==void 0?t.resolve(o[140].set("attachment_backup_payload",o[66])):((function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),o[155]="payload_null",o[6]!==void 0&&o[155]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"attachment_info",o[155]):t.resolve())},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplAnnotateBool.nop"),t.i64.cast([0,637746317]),o[6],"process_attachments_via_message_upload",!0):t.resolve()},function(e){return o[154]!==void 0?t.nativeOperation(n("LSLogWebQpl.nop"),o[154],t.i64.cast([0,521481602]),"upload_start",t.i64.cast([0,0]),void 0,void 0):t.resolve()},function(n){return o[141]=t.toJSON(o[140]),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[155]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[156]=void 0:o[156]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[155],t.i64.cast([0,1e6])),o[19]),o[156]],o[142]=a[0],o[143]=a[1],o[144]=a[2],o[145]=a[3],o[146]=a[4],o[147]=a[5],o[148]=a[6]):(r=s.item,o[155]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[156]=void 0:o[156]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[155],t.i64.cast([0,1e6])),o[19]),o[156]],o[142]=i[0],o[143]=i[1],o[144]=i[2],o[145]=i[3],o[146]=i[4],o[147]=i[5],o[148]=i[6])})},function(e){return o[150]=new t.Map,o[150].set("task_id",o[142]),o[150].set("queue_name",o[143]),o[150].set("enqueue_timestamp_ms",o[144]),o[150].set("priority",o[145]),o[150].set("first_executed_timestamp_ms",o[146]),o[150].set("execution_time_ns",o[147]),o[150].set("echo_encoding_execution_time_ns",o[148]),o[151]=new t.Map,o[151].set("task_metadata",o[150]),o[151].set("action_type",o[62]),o[151].set("content_type",o[63]),o[151].set("identifiers",void 0),o[151].set("identifiers_v2",o[55]),o[151].set("task_creation_source",void 0),o[151].set("message_payload_source",t.i64.cast([0,2])),t.resolve()},function(e){return o[94]!==void 0?(o[155]=o[94].get("stored_procedure"),o[156]=o[94].get("error_code"),o[157]=o[94].get("error_message"),o[158]=".",o[159]=[o[155],o[158],t.i64.to_string(o[156]),o[158],o[157]].join(""),o[6]!==void 0&&o[159]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[159]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!0):t.resolve()},function(e){var n;return o[152]=new t.Map,o[152].set("payload",o[141]),o[153]=t.createArray(),o[155]=(o[153].push(o[94]),o[153]),n=[o[152],void 0,o[151],o[153]],o[113]=n[0],o[114]=n[1],o[115]=n[2],o[116]=n[3]}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[128]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[129]=void 0:o[129]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[128],t.i64.cast([0,1e6])),o[19]),o[129]],o[117]=a[0],o[118]=a[1],o[119]=a[2],o[120]=a[3],o[121]=a[4],o[122]=a[5],o[123]=a[6]):(r=s.item,o[128]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[129]=void 0:o[129]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[128],t.i64.cast([0,1e6])),o[19]),o[129]],o[117]=i[0],o[118]=i[1],o[119]=i[2],o[120]=i[3],o[121]=i[4],o[122]=i[5],o[123]=i[6])})},function(e){return o[125]=new t.Map,o[125].set("task_id",o[117]),o[125].set("queue_name",o[118]),o[125].set("enqueue_timestamp_ms",o[119]),o[125].set("priority",o[120]),o[125].set("first_executed_timestamp_ms",o[121]),o[125].set("execution_time_ns",o[122]),o[125].set("echo_encoding_execution_time_ns",o[123]),o[126]=new t.Map,o[126].set("task_metadata",o[125]),o[126].set("action_type",o[62]),o[126].set("content_type",o[63]),o[126].set("identifiers",void 0),o[126].set("identifiers_v2",o[55]),o[126].set("task_creation_source",void 0),o[126].set("message_payload_source",t.i64.cast([0,2])),o[112]!==void 0?(o[128]=o[112].get("stored_procedure"),o[129]=o[112].get("error_code"),o[130]=o[112].get("error_message"),o[131]=".",o[132]=[o[128],o[131],t.i64.to_string(o[129]),o[131],o[130]].join(""),o[6]!==void 0&&o[132]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[132]):t.resolve()):t.resolve()},function(e){return o[94]!==void 0?(o[128]=o[94].get("stored_procedure"),o[129]=o[94].get("error_code"),o[130]=o[94].get("error_message"),o[131]=".",o[132]=[o[128],o[131],t.i64.to_string(o[129]),o[131],o[130]].join(""),o[6]!==void 0&&o[132]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[132]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[127]=t.createArray(),o[128]=(o[127].push(o[94]),o[127]),n=[void 0,o[112],o[126],o[127]],o[113]=n[0],o[114]=n[1],o[115]=n[2],o[116]=n[3]}])},function(e){var t;return t=[o[113],o[114],o[115],o[116]],o[107]=t[0],o[108]=t[1],o[109]=t[2],o[110]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[122]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[123]=void 0:o[123]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[122],t.i64.cast([0,1e6])),o[19]),o[123]],o[111]=a[0],o[112]=a[1],o[113]=a[2],o[114]=a[3],o[115]=a[4],o[116]=a[5],o[117]=a[6]):(r=s.item,o[122]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[123]=void 0:o[123]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[122],t.i64.cast([0,1e6])),o[19]),o[123]],o[111]=i[0],o[112]=i[1],o[113]=i[2],o[114]=i[3],o[115]=i[4],o[116]=i[5],o[117]=i[6])})},function(e){return o[119]=new t.Map,o[119].set("task_id",o[111]),o[119].set("queue_name",o[112]),o[119].set("enqueue_timestamp_ms",o[113]),o[119].set("priority",o[114]),o[119].set("first_executed_timestamp_ms",o[115]),o[119].set("execution_time_ns",o[116]),o[119].set("echo_encoding_execution_time_ns",o[117]),o[120]=new t.Map,o[120].set("task_metadata",o[119]),o[120].set("action_type",o[62]),o[120].set("content_type",o[63]),o[120].set("identifiers",void 0),o[120].set("identifiers_v2",o[55]),o[120].set("task_creation_source",void 0),o[120].set("message_payload_source",t.i64.cast([0,2])),o[106]!==void 0?(o[122]=o[106].get("stored_procedure"),o[123]=o[106].get("error_code"),o[124]=o[106].get("error_message"),o[125]=".",o[126]=[o[122],o[125],t.i64.to_string(o[123]),o[125],o[124]].join(""),o[6]!==void 0&&o[126]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[126]):t.resolve()):t.resolve()},function(e){return o[94]!==void 0?(o[122]=o[94].get("stored_procedure"),o[123]=o[94].get("error_code"),o[124]=o[94].get("error_message"),o[125]=".",o[126]=[o[122],o[125],t.i64.to_string(o[123]),o[125],o[124]].join(""),o[6]!==void 0&&o[126]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[126]):t.resolve()):t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[121]=t.createArray(),o[122]=(o[121].push(o[94]),o[121]),n=[void 0,o[106],o[120],o[121]],o[107]=n[0],o[108]=n[1],o[109]=n[2],o[110]=n[3]}])},function(e){var t;return t=[o[107],o[108],o[109],o[110]],o[101]=t[0],o[102]=t[1],o[103]=t[2],o[104]=t[3],t}])},function(e){var t;return t=[o[101],o[102],o[103],o[104]],o[95]=t[0],o[96]=t[1],o[97]=t[2],o[98]=t[3],t}])},function(e){var t;return t=[o[95],o[96],o[97],o[98]],o[88]=t[0],o[89]=t[1],o[90]=t[2],o[91]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[103]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[104]=void 0:o[104]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[103],t.i64.cast([0,1e6])),o[19]),o[104]],o[92]=a[0],o[93]=a[1],o[94]=a[2],o[95]=a[3],o[96]=a[4],o[97]=a[5],o[98]=a[6]):(r=s.item,o[103]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[104]=void 0:o[104]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[103],t.i64.cast([0,1e6])),o[19]),o[104]],o[92]=i[0],o[93]=i[1],o[94]=i[2],o[95]=i[3],o[96]=i[4],o[97]=i[5],o[98]=i[6])})},function(e){return o[100]=new t.Map,o[100].set("task_id",o[92]),o[100].set("queue_name",o[93]),o[100].set("enqueue_timestamp_ms",o[94]),o[100].set("priority",o[95]),o[100].set("first_executed_timestamp_ms",o[96]),o[100].set("execution_time_ns",o[97]),o[100].set("echo_encoding_execution_time_ns",o[98]),o[101]=new t.Map,o[101].set("task_metadata",o[100]),o[101].set("action_type",o[62]),o[101].set("content_type",o[63]),o[101].set("identifiers",void 0),o[101].set("identifiers_v2",o[55]),o[101].set("task_creation_source",void 0),o[101].set("message_payload_source",t.i64.cast([0,2])),o[87]!==void 0?(o[103]=o[87].get("stored_procedure"),o[104]=o[87].get("error_code"),o[105]=o[87].get("error_message"),o[106]=".",o[107]=[o[103],o[106],t.i64.to_string(o[104]),o[106],o[105]].join(""),o[6]!==void 0&&o[107]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[107]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[102]=t.createArray(),o[103]=(o[102].push(void 0),o[102]),n=[void 0,o[87],o[101],o[102]],o[88]=n[0],o[89]=n[1],o[90]=n[2],o[91]=n[3]}])},function(e){var t;return t=[o[88],o[89],o[90],o[91]],o[78]=t[0],o[79]=t[1],o[80]=t[2],o[81]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[93]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[94]=void 0:o[94]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[93],t.i64.cast([0,1e6])),o[19]),o[94]],o[82]=a[0],o[83]=a[1],o[84]=a[2],o[85]=a[3],o[86]=a[4],o[87]=a[5],o[88]=a[6]):(r=s.item,o[93]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[94]=void 0:o[94]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[93],t.i64.cast([0,1e6])),o[19]),o[94]],o[82]=i[0],o[83]=i[1],o[84]=i[2],o[85]=i[3],o[86]=i[4],o[87]=i[5],o[88]=i[6])})},function(e){return o[90]=new t.Map,o[90].set("task_id",o[82]),o[90].set("queue_name",o[83]),o[90].set("enqueue_timestamp_ms",o[84]),o[90].set("priority",o[85]),o[90].set("first_executed_timestamp_ms",o[86]),o[90].set("execution_time_ns",o[87]),o[90].set("echo_encoding_execution_time_ns",o[88]),o[91]=new t.Map,o[91].set("task_metadata",o[90]),o[91].set("action_type",o[62]),o[91].set("content_type",o[63]),o[91].set("identifiers",void 0),o[91].set("identifiers_v2",o[55]),o[91].set("task_creation_source",void 0),o[91].set("message_payload_source",t.i64.cast([0,2])),o[77]!==void 0?(o[93]=o[77].get("stored_procedure"),o[94]=o[77].get("error_code"),o[95]=o[77].get("error_message"),o[96]=".",o[97]=[o[93],o[96],t.i64.to_string(o[94]),o[96],o[95]].join(""),o[6]!==void 0&&o[97]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[97]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[92]=t.createArray(),o[93]=(o[92].push(void 0),o[92]),n=[void 0,o[77],o[91],o[92]],o[78]=n[0],o[79]=n[1],o[80]=n[2],o[81]=n[3]}])},function(e){var t;return t=[o[78],o[79],o[80],o[81]],o[58]=t[0],o[59]=t[1],o[60]=t[2],o[61]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[84]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[85]=void 0:o[85]=o[67],a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[84],t.i64.cast([0,1e6])),o[19]),o[85]],o[72]=a[0],o[73]=a[1],o[74]=a[2],o[75]=a[3],o[76]=a[4],o[77]=a[5],o[78]=a[6]):(r=s.item,o[84]=t.i64.of_float(Date.now()),t.i64.eq(o[67],t.i64.cast([0,0]))||t.i64.eq(o[67],void 0)?o[85]=void 0:o[85]=o[67],i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[84],t.i64.cast([0,1e6])),o[19]),o[85]],o[72]=i[0],o[73]=i[1],o[74]=i[2],o[75]=i[3],o[76]=i[4],o[77]=i[5],o[78]=i[6])})},function(e){return o[80]=new t.Map,o[80].set("task_id",o[72]),o[80].set("queue_name",o[73]),o[80].set("enqueue_timestamp_ms",o[74]),o[80].set("priority",o[75]),o[80].set("first_executed_timestamp_ms",o[76]),o[80].set("execution_time_ns",o[77]),o[80].set("echo_encoding_execution_time_ns",o[78]),o[81]=new t.Map,o[81].set("task_metadata",o[80]),o[81].set("action_type",o[62]),o[81].set("content_type",o[63]),o[81].set("identifiers",void 0),o[81].set("identifiers_v2",o[55]),o[81].set("task_creation_source",void 0),o[81].set("message_payload_source",t.i64.cast([0,2])),o[82]=new t.Map,o[82].set("error_code",o[64]),o[82].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[82].set("error_message",""),o[82]!==void 0?(o[84]=o[82].get("stored_procedure"),o[85]=o[82].get("error_code"),o[86]=o[82].get("error_message"),o[87]=".",o[88]=[o[84],o[87],t.i64.to_string(o[85]),o[87],o[86]].join(""),o[6]!==void 0&&o[88]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[88]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[83]=t.createArray(),n=[void 0,o[82],o[81],o[83]],o[58]=n[0],o[59]=n[1],o[60]=n[2],o[61]=n[3]}])},function(e){var t;return t=[o[58],o[59],o[60],o[61]],o[50]=t[0],o[51]=t[1],o[52]=t[2],o[53]=t[3],t}]))})},function(e){var t;return t=[o[50],o[51],o[52],o[53]],o[42]=t[0],o[43]=t[1],o[44]=t[2],o[45]=t[3],t}]):t.sequence([function(n){return t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[58]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[58],t.i64.cast([0,1e6])),o[19]),void 0],o[46]=a[0],o[47]=a[1],o[48]=a[2],o[49]=a[3],o[50]=a[4],o[51]=a[5],o[52]=a[6]):(r=s.item,o[58]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[58],t.i64.cast([0,1e6])),o[19]),void 0],o[46]=i[0],o[47]=i[1],o[48]=i[2],o[49]=i[3],o[50]=i[4],o[51]=i[5],o[52]=i[6])})},function(e){return o[54]=new t.Map,o[54].set("task_id",o[46]),o[54].set("queue_name",o[47]),o[54].set("enqueue_timestamp_ms",o[48]),o[54].set("priority",o[49]),o[54].set("first_executed_timestamp_ms",o[50]),o[54].set("execution_time_ns",o[51]),o[54].set("echo_encoding_execution_time_ns",o[52]),o[55]=new t.Map,o[55].set("task_metadata",o[54]),o[55].set("action_type",void 0),o[55].set("content_type",void 0),o[55].set("identifiers",void 0),o[55].set("identifiers_v2",void 0),o[55].set("task_creation_source",void 0),o[55].set("message_payload_source",t.i64.cast([0,2])),o[56]=new t.Map,o[56].set("error_code",t.i64.cast([0,24])),o[56].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[56].set("error_message",""),o[56]!==void 0?(o[58]=o[56].get("stored_procedure"),o[59]=o[56].get("error_code"),o[60]=o[56].get("error_message"),o[61]=".",o[62]=[o[58],o[61],t.i64.to_string(o[59]),o[61],o[60]].join(""),o[6]!==void 0&&o[62]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[62]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[57]=t.createArray(),n=[void 0,o[56],o[55],o[57]],o[42]=n[0],o[43]=n[1],o[44]=n[2],o[45]=n[3]}])},function(e){var t;return t=[o[42],o[43],o[44],o[45]],o[12]=t[0],o[13]=t[1],o[14]=t[2],o[15]=t[3],t}]):t.sequence([function(n){return o[23]=o[10].get("errors"),o[24]=o[10].get("errors"),t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,r){var a,i,l=n.done,s=n.value;return l?(o[37]=t.i64.of_float(Date.now()),a=[e[0],void 0,void 0,void 0,void 0,t.i64.sub(t.i64.mul(o[37],t.i64.cast([0,1e6])),o[19]),void 0],o[25]=a[0],o[26]=a[1],o[27]=a[2],o[28]=a[3],o[29]=a[4],o[30]=a[5],o[31]=a[6]):(r=s.item,o[37]=t.i64.of_float(Date.now()),i=[e[0],r.queueName,r.enqueueTimestampMs,void 0,r.firstExecutedTimestampMs,t.i64.sub(t.i64.mul(o[37],t.i64.cast([0,1e6])),o[19]),void 0],o[25]=i[0],o[26]=i[1],o[27]=i[2],o[28]=i[3],o[29]=i[4],o[30]=i[5],o[31]=i[6])})},function(e){return o[33]=new t.Map,o[33].set("task_id",o[25]),o[33].set("queue_name",o[26]),o[33].set("enqueue_timestamp_ms",o[27]),o[33].set("priority",o[28]),o[33].set("first_executed_timestamp_ms",o[29]),o[33].set("execution_time_ns",o[30]),o[33].set("echo_encoding_execution_time_ns",o[31]),o[34]=new t.Map,o[34].set("task_metadata",o[33]),o[34].set("action_type",void 0),o[34].set("content_type",void 0),o[34].set("identifiers",void 0),o[34].set("identifiers_v2",void 0),o[34].set("task_creation_source",void 0),o[34].set("message_payload_source",t.i64.cast([0,2])),o[35]=new t.Map,o[35].set("error_code",t.i64.cast([0,1])),o[35].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),o[35].set("error_message",""),o[35]!==void 0?(o[37]=o[35].get("stored_procedure"),o[38]=o[35].get("error_code"),o[39]=o[35].get("error_message"),o[40]=".",o[41]=[o[37],o[40],t.i64.to_string(o[38]),o[40],o[39]].join(""),o[6]!==void 0&&o[41]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,637746317]),o[6],"exception_error",o[41]):t.resolve()):t.resolve()},function(e){return t.resolve()},function(e){return o[6]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,637746317]),o[6],!1):t.resolve()},function(e){var n;return o[36]=t.createArray(),n=[void 0,o[35],o[34],o[36]],o[12]=n[0],o[13]=n[1],o[14]=n[2],o[15]=n[3]}])},function(e){return o[16]=t.i64.of_float(Date.now()),o[17]=t.i64.random(),o[20]="Finishing execution. Execution time: ",o[21]=t.i64.to_string(t.i64.sub(o[16],o[0])),o[22]=" ms",o[18]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][serializeBackupPayloadV2] ",o[18],o[20],o[18],o[21],o[18],o[22]].join("")),t.i64.eq(t.i64.mod_(o[17],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(o[23]=",",o[24]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[o[20],o[23],o[21],o[23],o[22]].join(""),o[24],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[o[12],o[13],o[14],o[15]],a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],t}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure",e.__tables__=["pending_tasks","secure_encrypted_backups_client_state","pending_backups_context_v2","pending_protobuf_backups_context","secure_encrypted_backups_epochs"];var s=e;l.default=s}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.forEach(t.db.table(177).fetch([[[e[0]]],"fk_pending_tasks"]),function(e){var n=e.update,r=e.item;return n({backupStatus:t.i64.cast([0,2])})})},function(o){return t.storedProcedure(n("LSSerializeBackupPayloadV2"),e[0]).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],t})},function(e){return r[6]=t.createArray(),r[7]=t.i64.of_int32(r[5].length),t.i64.gt(r[7],t.i64.cast([0,0]))?t.loopAsync(r[7],function(e){return r[23]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[5],r[23]).then(function(e){var t;return t=e,r[24]=t[0],r[25]=t[1],t})},function(e){return r[24]!==void 0?r[26]=(r[6].push(r[24]),r[6]):0}])}):t.resolve()},function(e){return r[8]=t.i64.of_int32(r[6].length),t.i64.gt(r[8],t.i64.cast([0,0]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[6],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[23]=t[0],r[24]=t[1],t})},function(e){return r[9]=r[23]}]):t.resolve(r[9]=void 0)},function(e){var o,a,i,l;return r[2]?r[10]=!1:r[10]=!0,r[10]?(r[3]?r[23]=!1:r[23]=!0,r[23]?(i=[void 0,void 0,r[9],r[6],r[4]],r[24]=i[0],r[25]=i[1],r[26]=i[2],r[27]=i[3],r[28]=i[4]):(a=[void 0,r[3],r[9],r[6],r[4]],r[24]=a[0],r[25]=a[1],r[26]=a[2],r[27]=a[3],r[28]=a[4]),l=[r[24],r[25],r[26],r[27],r[28]],r[11]=l[0],r[12]=l[1],r[13]=l[2],r[14]=l[3],r[15]=l[4]):(r[23]=r[2].get("payload"),o=[r[23],r[3],r[9],r[6],r[4]],r[11]=o[0],r[12]=o[1],r[13]=o[2],r[14]=o[3],r[15]=o[4]),r[23]=new t.Map,r[24]=r[23].set("success",r[11]),r[25]=r[23].set("failure",r[12]),r[26]=r[23].set("protobuf_failure",r[13]),r[27]=r[23].set("protobuf_failures",r[14]),r[28]=r[23].set("context",r[15]),r[29]=t.toJSON(r[23]),r[16]=r[29],r[17]=t.i64.of_float(Date.now()),r[18]=t.i64.random(),r[20]="Finishing execution. Execution time: ",r[21]=t.i64.to_string(t.i64.sub(r[17],r[0])),r[22]=" ms",r[19]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",r[19],r[20],r[19],r[21],r[19],r[22]].join("")),t.i64.eq(t.i64.mod_(r[18],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[23]=",",r[24]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[r[20],r[23],r[21],r[23],r[22]].join(""),r[24],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[16],t.i64.cast([0,50026])],o[0]=n[0],o[1]=n[1],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadStoredProcedure",e.__tables__=["pending_backups_context_v2"],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsUploadProtobufOnly",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return r[0]=new n.Map,r[0].set("error_code",n.i64.cast([0,802])),r[0].set("stored_procedure","LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure"),r[0].set("error_message",""),r[2]=new n.Map,r[3]=r[2].set("success",void 0),r[4]=r[2].set("failure",r[0]),r[5]=r[2].set("context",void 0),r[6]=n.toJSON(r[2]),r[1]=r[6],e=[r[1],n.i64.cast([0,50042]),void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerEncryptedBackupsUploadSenderBackup",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] Beginning execution."),r[1]=t.i64.of_float(Date.now()),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] LSEncryptedBackupsMinosEncrypt native op not supported"),r[3]="LSEncryptedBackupsMinosEncrypt native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure] ","",r[3]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",r[3],r[2],t.i64.cast([0,3]))},function(e){return r[4]=new t.Map,r[4].set("error_code",t.i64.cast([0,3])),r[4].set("stored_procedure","taskSerializerEncryptedBackupsUploadSenderBackup"),r[4].set("error_message",""),r[12]=new t.Map,r[13]=r[12].set("success",void 0),r[14]=r[12].set("failure",r[4]),r[15]=r[12].set("context",void 0),r[16]=t.toJSON(r[12]),r[5]=r[16],r[6]=t.i64.of_float(Date.now()),r[7]=t.i64.random(),r[9]="Finishing execution. Execution time: ",r[10]=t.i64.to_string(t.i64.sub(r[6],r[0])),r[11]=" ms",r[8]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][taskSerializerEncryptedBackupsUploadSenderBackup] ",r[8],r[9],r[8],r[10],r[8],r[11]].join("")),t.i64.eq(t.i64.mod_(r[7],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[12]=",",r[13]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUploadSenderBackup",[r[9],r[12],r[10],r[12],r[11]].join(""),r[13],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[5],t.i64.cast([0,50057]),void 0],o[0]=n[0],o[1]=n[1],o[2]=n[2],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadSenderBackupStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTaskSerializerMuteThreadV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("TaskSerializerMuteThreadV2: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("TaskSerializerMuteThreadV2: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var o;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("mailbox_type",t.i64.cast([0,0])),n[11].set("mute_expire_time_ms",r.muteExpireTimeMs),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),o=[n[12],t.i64.cast([0,144]),void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1]],r[0]=t[0],r[1]=t[1],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerMuteThreadV2StoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSTaskSerializerRemoveThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i,l,s,u=r.done,c=r.value;return u?(n[4]=t.createArray(),n[5]=(n[4].push("TaskSerializerRemoveThreadV2: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=c.item,n[7]=o.removeType,t.i64.neq(n[7],void 0)?(n[8]=new t.Map,n[8].set("thread_key",o.threadKey),n[8].set("remove_type",n[7]),n[8].set("sync_group",o.syncGroup==null?t.i64.cast([0,1]):o.syncGroup),n[9]=t.toJSON(n[8]),i=[n[9],t.i64.cast([0,146]),void 0],n[4]=i[0],n[5]=i[1],n[6]=i[2]):(l=[void 0,void 0,void 0],n[4]=l[0],n[5]=l[1],n[6]=l[2]),s=[n[4],n[5],n[6]],n[0]=s[0],n[1]=s[1],n[2]=s[2])})},function(e){var t;return t=[n[0],n[1]],r[0]=t[0],r[1]=t[1],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerRemoveThreadStoredProcedure",e.__tables__=["threads_optimistic_context"],a.exports=e}),null);
__d("LSTaskSerializerSendMessageV2",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(31).fetch([[[e[0]]]]).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[4]=t.createArray(),r[5]=(r[4].push("task ID not found"),r[4]),r[6]=(r[4].push(e[0]),r[4]),r[7]=t.toJSON(r[4]),(function(e){t.logger(e).mustfix(e)})(r[7]),i=[void 0,void 0,void 0],r[0]=i[0],r[1]=i[1],r[2]=i[2]):(a=s.item,t.sequence([function(o){return r[11]=a.offlineThreadingId,r[12]=a.messageId,r[23]=a.threadAttributionSource,r[9]=a.platformRef,r[10]=a.platformToken,r[8]=a.replySourceId,r[13]=a.replySourceType,r[22]=a.sendType,r[25]=a.markThreadRead,r[15]=a.initiatingSource,r[16]=a.skipUrlPreviewGen,r[18]=a.textHasLinks,r[19]=a.dataclassParams,r[20]=a.multitabEnv,r[21]=a.metadataDataclass,r[17]=a.richTextFormatType,r[24]=a.subthreadParentMessageId,r[14]=a.isExclusiveToSubthread,t.db.table(12).fetch([[[r[11]]],"optimistic"]).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[26]=t.createArray(),r[27]=(r[26].push("OTID not found"),r[26]),r[28]=(r[26].push(r[11]),r[26]),r[29]=t.toJSON(r[26]),(function(e){t.logger(e).mustfix(e)})(r[29]),i=[void 0,void 0,void 0],r[4]=i[0],r[5]=i[1],r[6]=i[2]):(a=s.item,t.sequence([function(o){return r[34]=a.text,r[30]=a.threadKey,r[35]=a.messageId,r[43]=a.senderId,r[32]=a.stickerId,r[37]=a.mentionOffsets,r[38]=a.mentionLengths,r[31]=a.mentionIds,r[39]=a.mentionTypes,r[42]=a.replyType,r[40]=a.isForwarded,r[36]=a.forwardScore,r[41]=a.hotEmojiSize,r[33]=a.metadataDataclass,t.db.table(9).fetch([[[r[30]]]]).next().then(function(o,i){var l,s=o.done,u=o.value;return s?(r[44]=t.createArray(),r[45]=(r[44].push("thread not found"),r[44]),r[46]=(r[44].push(r[30]),r[44]),r[47]=t.toJSON(r[44]),(function(e){t.logger(e).mustfix(e)})(r[47]),l=[void 0,void 0,void 0],r[26]=l[0],r[27]=l[1],r[28]=l[2]):(i=u.item,t.sequence([function(n){return r[51]=i.threadName,r[49]=i.threadKey,r[52]=i.mailboxType,r[50]=i.threadType,r[53]=i.capabilities,r[54]=i.capabilities2,r[55]=i.capabilities3,r[56]=i.capabilities4,r[57]=i.capabilities5,t.db.table(2).fetch([[[e[0]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?r[44]=!1:(o=i.item,t.sequence([function(n){return t.islc(t.db.table(2).fetch([[[o.queueName]],"queueNameTaskId"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(n,o){var a=n.done,i=n.value;return a?r[58]=!1:(o=i.item,r[58]=t.i64.eq(o.taskId,e[0]))})},function(e){return r[44]=r[58]}]))})},function(e){return t.i64.eq(i.authorityLevel,t.i64.cast([0,20]))&&[t.i64.cast([0,2]),t.i64.cast([0,5]),t.i64.cast([0,205]),t.i64.cast([0,206]),t.i64.cast([0,26])].some(function(e){return t.i64.eq(r[50],e)})&&r[44]?t.sequence([function(e){return r[61]=r[22]==null?t.i64.cast([0,1]):r[22],t.db.table(9).fetch([[[r[30]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[58]=t.i64.cast([0,1]):(n=a.item,r[77]=n.syncGroup,t.i64.neq(r[77],void 0)?r[76]=r[77]:r[76]=t.i64.cast([0,1]),r[58]=r[76])})},function(e){return r[60]=new t.Map,r[60].set("thread_id",r[30]),r[60].set("otid",r[11]),r[60].set("source",r[23]==null?t.i64.cast([0,0]):r[23]),r[60].set("send_type",t.i64.cast([0,1])),r[60].set("sync_group",r[58]),r[60].set("mark_thread_read",r[25]),t.i64.eq(r[61],t.i64.cast([0,1]))?t.resolve(r[60].set("text",r[34])):t.i64.eq(r[61],t.i64.cast([0,2]))?(t.i64.neq(r[32],void 0)&&(r[60].set("sticker_id",r[32]),r[60].set("send_type",r[61])),r[33]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[33]).then(function(e){var t;return t=e,r[76]=t[0],t})},function(e){return r[77]=new t.Map,r[78]=r[76].keys(),r[79]=t.i64.of_int32(r[78].length),t.i64.gt(r[79],t.i64.cast([0,0]))?t.loopAsync(r[79],function(e){return r[83]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[78],r[83]).then(function(e){var t;return t=e,r[84]=t[0],r[85]=t[1],t})},function(e){return r[86]=r[76].get(r[84]),r[77].set(r[84],r[86])}])}):t.resolve()},function(e){return r[80]=r[77].get("xma_music_sticker_message_metadata"),r[80]?r[81]=!1:r[81]=!0,r[81]?t.resolve(r[82]=void 0):t.sequence([function(e){return r[83]=new t.Map,r[84]=r[80].keys(),r[85]=t.i64.of_int32(r[84].length),t.i64.gt(r[85],t.i64.cast([0,0]))?t.loopAsync(r[85],function(e){return r[86]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[84],r[86]).then(function(e){var t;return t=e,r[87]=t[0],r[88]=t[1],t})},function(e){return r[89]=r[80].get(r[87]),r[83].set(r[87],r[89])}])}):t.resolve()},function(e){return r[82]=r[83]}])},function(e){return r[82]!==void 0?r[60].set("send_type",r[61]):0}]):t.resolve()):t.i64.eq(r[61],t.i64.cast([0,7]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[76]=n[0],r[77]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[76]=o[0],r[77]=o[1])})},function(e){return r[76]!==void 0&&t.i64.neq(r[77],void 0)?(r[60].set("url",r[76]),r[60].set("attribution_app_id",r[77]),r[60].set("send_type",r[61]),r[33]!==void 0?r[60].set("metadata_dataclass",r[33]):0):0}]):t.i64.eq(r[61],t.i64.cast([0,3]))?t.sequence([function(e){return r[60].set("text",r[34]),r[76]=t.createArray(),r[77]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[78]=n.offlineAttachmentId,r[79]=(r[76].push(t.i64.from_string(n.attachmentFbid)),r[76]),r[78]!==void 0?r[79]=(r[77].push(r[78]),r[77]):0})},function(e){return r[60].set("attachment_fbids",r[76]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[77]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,9]))?t.sequence([function(e){return r[60].set("text",r[34]),r[76]=t.createArray(),r[77]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[78]=n.offlineAttachmentId,r[79]=(r[76].push(t.i64.from_string(n.attachmentFbid)),r[76]),r[78]!==void 0?r[79]=(r[77].push(r[78]),r[77]):0})},function(e){return r[60].set("attachment_fbids",r[76]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[77]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,4]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[76]=void 0:(t=o.item,r[76]=t.attachmentFbid)})},function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[78]=void 0:(t=o.item,r[78]=t.actionUrl)})},function(e){return r[76]!==void 0?(r[60].set("text",r[34]),r[78]!==void 0&&r[60].set("url",r[78]),r[60].set("forwarded_share_id",r[76]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,5]))?t.resolve(r[12]!==void 0?(r[60].set("forwarded_msg_id",r[12]),r[60].set("send_type",r[61]),t.i64.neq(r[36],void 0)&&r[60].set("forward_score",r[36]),r[60].set("strip_forwarded_msg_caption",!1)):0):t.i64.eq(r[61],t.i64.cast([0,6]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[76]=n[0],r[77]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[76]=o[0],r[77]=o[1])})},function(e){return r[76]!==void 0?(r[60].set("url",r[76]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,11]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[76]=n[0],r[77]=n[1],n):(t=i.item,o=[t.actionUrl,t.attributionAppId],r[76]=o[0],r[77]=o[1])})},function(e){return r[76]!==void 0?(r[60].set("url",r[76]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.resolve(t.i64.eq(r[61],t.i64.cast([0,12]))?r[60].set("send_type",r[61]):0)},function(e){return r[72]=r[24]==null?void 0:r[24],r[71]=r[8]===""?void 0:r[8],r[71]!==void 0&&t.i64.neq(r[13],void 0)&&(r[76]=new t.Map,r[76].set("reply_source_id",r[71]),r[76].set("reply_source_type",r[13]),r[76].set("reply_type",r[42]==null?t.i64.cast([0,0]):r[42]),r[76].set("reply_source_attachment_id",void 0),r[60].set("reply_metadata",r[76])),r[72]!==void 0&&r[14]!==void 0&&(r[76]=new t.Map,r[76].set("subthread_parent_message_id",r[72]),r[76].set("is_exclusive_to_subthread",r[14]),r[60].set("subthread_data",r[76])),r[73]=r[31]===""?void 0:r[31],r[73]!==void 0&&(r[76]=r[37]===""?void 0:r[37],r[76]!==void 0&&(r[77]=r[38]===""?void 0:r[38],r[77]!==void 0&&(r[78]=new t.Map,r[78].set("mention_ids",r[73]),r[78].set("mention_offsets",r[76]),r[78].set("mention_lengths",r[77]),r[78].set("mention_types",r[39]===""?void 0:r[39]),r[60].set("mention_data",r[78])))),r[40]!==void 0&&r[60].set("is_forwarded",r[40]),r[74]=r[9]===""?void 0:r[9],r[74]!==void 0&&r[60].set("platform_ref",r[74]),r[75]=r[10]===""?void 0:r[10],r[75]!==void 0&&r[60].set("platform_token",r[75]),[t.i64.cast([0,1]),t.i64.cast([0,2])].some(function(e){return t.i64.eq(r[61],e)})&&t.i64.neq(r[41],void 0)&&r[60].set("hot_emoji_size",r[41]),t.i64.neq(r[15],void 0)&&r[60].set("initiating_source",r[15]),r[16]!==void 0&&r[60].set("skip_url_preview_gen",r[16]),t.i64.neq(r[17],void 0)&&r[60].set("rich_text_format_type",r[17]),t.resolve()},function(e){return r[18]!==void 0&&r[60].set("text_has_links",r[18]),r[19]!==void 0&&r[60].set("dataclass_params",r[19]),r[20]!==void 0&&r[60].set("multitab_env",r[20]),r[21]!==void 0&&r[60].set("metadata_dataclass",r[21]),t.filter(t.db.table(14).fetch([[[r[49],r[43]]]]),function(e){return t.i64.eq(e.threadKey,r[49])&&t.i64.eq(t.i64.cast([0,0]),r[52])&&t.i64.eq(e.contactId,r[43])}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[62]=!1:(n=a.item,t.i64.eq(r[50],t.i64.cast([0,152]))?(r[77]=n.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,9]))?r[78]=!1:r[78]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[77]),t.i64.cast([0,0])),r[79]=r[53],r[80]=r[54],r[81]=r[55],r[82]=r[56],r[83]=r[57],r[85]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[86]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[85],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,300]))?r[84]=!1:(t.i64.eq(r[85],t.i64.cast([0,0]))?r[87]=!t.i64.eq(t.i64.and_(r[86],r[79]),t.i64.cast([0,0])):(t.i64.eq(r[85],t.i64.cast([0,1]))?r[88]=!t.i64.eq(t.i64.and_(r[86],r[80]),t.i64.cast([0,0])):(t.i64.eq(r[85],t.i64.cast([0,2]))?r[89]=!t.i64.eq(t.i64.and_(r[86],r[81]),t.i64.cast([0,0])):(t.i64.eq(r[85],t.i64.cast([0,3]))?r[90]=!t.i64.eq(t.i64.and_(r[86],r[82]),t.i64.cast([0,0])):(t.i64.eq(r[85],t.i64.cast([0,4]))?r[91]=!t.i64.eq(t.i64.and_(r[86],r[83]),t.i64.cast([0,0])):r[91]=!1,r[90]=r[91]),r[89]=r[90]),r[88]=r[89]),r[87]=r[88]),r[84]=r[87]),r[78]!==r[84]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[76]=r[78]):r[76]=!1,r[62]=r[76])})},function(e){return r[62]&&r[60].set("perform_action_as_page",!0),r[64]=t.createArray(),t.forEach(t.db.table(14).fetch([[[r[30]]]]),function(e){var t=e.item;return r[76]=(r[64].push(t.contactId),r[64])})},function(e){return r[65]=new t.Map,r[65].set("participants",r[64]),r[65].set("send_payload",r[60]),r[51]!==void 0&&r[65].set("thread_name",r[51]),t.db.table(312).fetch([[[r[30]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[66]=void 0:(t=o.item,r[66]=t.metadata)})},function(e){return r[65].set("thread_metadata",r[66]),t.forEach(t.db.table(9).fetch([[[r[49]]]]),function(e){var t=e.update,n=e.item;return t({otidOfFirstMessage:a.offlineThreadingId})})},function(e){var n,o,a,i,l,s,u,c,d;return r[66]===void 0?(t.i64.eq(r[50],t.i64.cast([0,5]))||t.i64.eq(r[50],t.i64.cast([0,26]))?((function(e){t.logger(e).mustfix(e)})("For Marketplace & community chat subthreads, thread metadata cannot be null"),n=[void 0,void 0,void 0],r[76]=n[0],r[77]=n[1],r[78]=n[2]):(r[79]=t.toJSON(r[65]),o=[r[79],t.i64.cast([0,130]),void 0],r[76]=o[0],r[77]=o[1],r[78]=o[2]),a=[r[76],r[77],r[78]],r[68]=a[0],r[69]=a[1],r[70]=a[2]):(t.i64.eq(r[50],t.i64.cast([0,5]))?(r[79]=t.toJSON(r[65]),i=[r[79],t.i64.cast([0,645]),void 0],r[76]=i[0],r[77]=i[1],r[78]=i[2]):(t.i64.eq(r[50],t.i64.cast([0,2]))?(r[82]=t.toJSON(r[65]),l=[r[82],t.i64.cast([0,787]),void 0],r[79]=l[0],r[80]=l[1],r[81]=l[2]):(r[82]=t.toJSON(r[65]),s=[r[82],t.i64.cast([0,645]),void 0],r[79]=s[0],r[80]=s[1],r[81]=s[2]),u=[r[79],r[80],r[81]],r[76]=u[0],r[77]=u[1],r[78]=u[2]),c=[r[76],r[77],r[78]],r[68]=c[0],r[69]=c[1],r[70]=c[2]),d=[r[68],r[69],r[70]],r[46]=d[0],r[47]=d[1],r[48]=d[2]}]):t.sequence([function(e){return r[61]=r[22]==null?t.i64.cast([0,1]):r[22],t.db.table(9).fetch([[[r[30]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[58]=t.i64.cast([0,1]):(n=a.item,r[71]=n.syncGroup,t.i64.neq(r[71],void 0)?r[70]=r[71]:r[70]=t.i64.cast([0,1]),r[58]=r[70])})},function(e){return r[60]=new t.Map,r[60].set("thread_id",r[30]),r[60].set("otid",r[11]),r[60].set("source",r[23]==null?t.i64.cast([0,0]):r[23]),r[60].set("send_type",t.i64.cast([0,1])),r[60].set("sync_group",r[58]),r[60].set("mark_thread_read",r[25]),t.i64.eq(r[61],t.i64.cast([0,1]))?t.resolve(r[60].set("text",r[34])):t.i64.eq(r[61],t.i64.cast([0,2]))?(t.i64.neq(r[32],void 0)&&(r[60].set("sticker_id",r[32]),r[60].set("send_type",r[61])),r[33]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[33]).then(function(e){var t;return t=e,r[70]=t[0],t})},function(e){return r[71]=new t.Map,r[72]=r[70].keys(),r[73]=t.i64.of_int32(r[72].length),t.i64.gt(r[73],t.i64.cast([0,0]))?t.loopAsync(r[73],function(e){return r[77]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[72],r[77]).then(function(e){var t;return t=e,r[78]=t[0],r[79]=t[1],t})},function(e){return r[80]=r[70].get(r[78]),r[71].set(r[78],r[80])}])}):t.resolve()},function(e){return r[74]=r[71].get("xma_music_sticker_message_metadata"),r[74]?r[75]=!1:r[75]=!0,r[75]?t.resolve(r[76]=void 0):t.sequence([function(e){return r[77]=new t.Map,r[78]=r[74].keys(),r[79]=t.i64.of_int32(r[78].length),t.i64.gt(r[79],t.i64.cast([0,0]))?t.loopAsync(r[79],function(e){return r[80]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[78],r[80]).then(function(e){var t;return t=e,r[81]=t[0],r[82]=t[1],t})},function(e){return r[83]=r[74].get(r[81]),r[77].set(r[81],r[83])}])}):t.resolve()},function(e){return r[76]=r[77]}])},function(e){return r[76]!==void 0?r[60].set("send_type",r[61]):0}]):t.resolve()):t.i64.eq(r[61],t.i64.cast([0,7]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0&&t.i64.neq(r[71],void 0)?(r[60].set("url",r[70]),r[60].set("attribution_app_id",r[71]),r[60].set("send_type",r[61]),r[33]!==void 0?r[60].set("metadata_dataclass",r[33]):0):0}]):t.i64.eq(r[61],t.i64.cast([0,3]))?t.sequence([function(e){return r[60].set("text",r[34]),r[70]=t.createArray(),r[71]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[72]=n.offlineAttachmentId,r[73]=(r[70].push(t.i64.from_string(n.attachmentFbid)),r[70]),r[72]!==void 0?r[73]=(r[71].push(r[72]),r[71]):0})},function(e){return r[60].set("attachment_fbids",r[70]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[71]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,9]))?t.sequence([function(e){return r[60].set("text",r[34]),r[70]=t.createArray(),r[71]=t.createArray(),t.forEach(t.sortBy(t.db.table(16).fetch([[[r[30],r[35]]]]),[["attachmentIndex","ASC"]]),function(e){var n=e.item;return r[72]=n.offlineAttachmentId,r[73]=(r[70].push(t.i64.from_string(n.attachmentFbid)),r[70]),r[72]!==void 0?r[73]=(r[71].push(r[72]),r[71]):0})},function(e){return r[60].set("attachment_fbids",r[70]),t.i64.eq(r[61],t.i64.cast([0,9]))&&r[60].set("offline_attachment_ids",r[71]),r[60].set("send_type",r[61])}]):t.i64.eq(r[61],t.i64.cast([0,4]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[70]=void 0:(t=o.item,r[70]=t.attachmentFbid)})},function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[72]=void 0:(t=o.item,r[72]=t.actionUrl)})},function(e){return r[70]!==void 0?(r[60].set("text",r[34]),r[72]!==void 0&&r[60].set("url",r[72]),r[60].set("forwarded_share_id",r[70]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,5]))?t.resolve(r[12]!==void 0?(r[60].set("forwarded_msg_id",r[12]),r[60].set("send_type",r[61]),t.i64.neq(r[36],void 0)&&r[60].set("forward_score",r[36]),r[60].set("strip_forwarded_msg_caption",!1)):0):t.i64.eq(r[61],t.i64.cast([0,6]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.filename,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0?(r[60].set("url",r[70]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.i64.eq(r[61],t.i64.cast([0,11]))?t.sequence([function(e){return t.db.table(16).fetch([[[r[30],r[35]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[70]=n[0],r[71]=n[1],n):(t=i.item,o=[t.actionUrl,t.attributionAppId],r[70]=o[0],r[71]=o[1])})},function(e){return r[70]!==void 0?(r[60].set("url",r[70]),r[60].set("text",r[34]),r[60].set("send_type",r[61])):0}]):t.resolve(t.i64.eq(r[61],t.i64.cast([0,12]))?r[60].set("send_type",r[61]):0)},function(e){return r[66]=r[24]==null?void 0:r[24],r[65]=r[8]===""?void 0:r[8],r[65]!==void 0&&t.i64.neq(r[13],void 0)&&(r[70]=new t.Map,r[70].set("reply_source_id",r[65]),r[70].set("reply_source_type",r[13]),r[70].set("reply_type",r[42]==null?t.i64.cast([0,0]):r[42]),r[70].set("reply_source_attachment_id",void 0),r[60].set("reply_metadata",r[70])),r[66]!==void 0&&r[14]!==void 0&&(r[70]=new t.Map,r[70].set("subthread_parent_message_id",r[66]),r[70].set("is_exclusive_to_subthread",r[14]),r[60].set("subthread_data",r[70])),r[67]=r[31]===""?void 0:r[31],r[67]!==void 0&&(r[70]=r[37]===""?void 0:r[37],r[70]!==void 0&&(r[71]=r[38]===""?void 0:r[38],r[71]!==void 0&&(r[72]=new t.Map,r[72].set("mention_ids",r[67]),r[72].set("mention_offsets",r[70]),r[72].set("mention_lengths",r[71]),r[72].set("mention_types",r[39]===""?void 0:r[39]),r[60].set("mention_data",r[72])))),r[40]!==void 0&&r[60].set("is_forwarded",r[40]),r[68]=r[9]===""?void 0:r[9],r[68]!==void 0&&r[60].set("platform_ref",r[68]),r[69]=r[10]===""?void 0:r[10],r[69]!==void 0&&r[60].set("platform_token",r[69]),[t.i64.cast([0,1]),t.i64.cast([0,2])].some(function(e){return t.i64.eq(r[61],e)})&&t.i64.neq(r[41],void 0)&&r[60].set("hot_emoji_size",r[41]),t.i64.neq(r[15],void 0)&&r[60].set("initiating_source",r[15]),r[16]!==void 0&&r[60].set("skip_url_preview_gen",r[16]),t.i64.neq(r[17],void 0)&&r[60].set("rich_text_format_type",r[17]),t.resolve()},function(e){return r[18]!==void 0&&r[60].set("text_has_links",r[18]),r[19]!==void 0&&r[60].set("dataclass_params",r[19]),r[20]!==void 0&&r[60].set("multitab_env",r[20]),r[21]!==void 0&&r[60].set("metadata_dataclass",r[21]),t.filter(t.db.table(14).fetch([[[r[49],r[43]]]]),function(e){return t.i64.eq(e.threadKey,r[49])&&t.i64.eq(t.i64.cast([0,0]),r[52])&&t.i64.eq(e.contactId,r[43])}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[62]=!1:(n=a.item,t.i64.eq(r[50],t.i64.cast([0,152]))?(r[71]=n.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,9]))?r[72]=!1:r[72]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[71]),t.i64.cast([0,0])),r[73]=r[53],r[74]=r[54],r[75]=r[55],r[76]=r[56],r[77]=r[57],r[79]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[80]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[79],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,300]))?r[78]=!1:(t.i64.eq(r[79],t.i64.cast([0,0]))?r[81]=!t.i64.eq(t.i64.and_(r[80],r[73]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,1]))?r[82]=!t.i64.eq(t.i64.and_(r[80],r[74]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,2]))?r[83]=!t.i64.eq(t.i64.and_(r[80],r[75]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,3]))?r[84]=!t.i64.eq(t.i64.and_(r[80],r[76]),t.i64.cast([0,0])):(t.i64.eq(r[79],t.i64.cast([0,4]))?r[85]=!t.i64.eq(t.i64.and_(r[80],r[77]),t.i64.cast([0,0])):r[85]=!1,r[84]=r[85]),r[83]=r[84]),r[82]=r[83]),r[81]=r[82]),r[78]=r[81]),r[72]!==r[78]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[70]=r[72]):r[70]=!1,r[62]=r[70])})},function(e){var n;return r[62]&&r[60].set("perform_action_as_page",!0),r[64]=t.toJSON(r[60]),n=[r[64],t.i64.cast([0,46]),void 0],r[46]=n[0],r[47]=n[1],r[48]=n[2]}])},function(e){var t;return t=[r[46],r[47],r[48]],r[26]=t[0],r[27]=t[1],r[28]=t[2],t}]))})},function(e){var t;return t=[r[26],r[27],r[28]],r[4]=t[0],r[5]=t[1],r[6]=t[2],t}]))})},function(e){var t;return t=[r[4],r[5],r[6]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}]))})},function(e){var t;return t=[r[0],r[1]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxTaskSerializerSendMessageV2StoredProcedure",e.__tables__=["messages_optimistic_context","messages","threads","pending_tasks","attachments","participants","threads_optimistic_metadata"],a.exports=e}),null);
__d("LSTaskSerializerSyncThreadCapabilities",[],(function(t,n,r,o,a,i){function e(){var e,t=arguments,n=t[t.length-1],r=[],o=[];return e=[void 0,void 0,void 0],o[0]=e[0],o[1]=e[1],o[2]=e[2],n.resolve(o)}e.__sproc_name__="LSMailboxTaskSerializerSyncThreadCapabilitiesStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIsExperimentCapabilityEnabled.nop",["LSACSExperimentCapability","LSIntEnum","MetaConfig","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("MetaConfig")._("87"),c=r("MetaConfig")._("156"),d=function(a,i,l,d){switch((s||(s=o("LSIntEnum"))).toNumber(l)){case r("LSACSExperimentCapability").BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:return(e||(e=n("Promise"))).resolve([c]);case r("LSACSExperimentCapability").INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:return(e||(e=n("Promise"))).resolve([!1]);case r("LSACSExperimentCapability").RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:return(e||(e=n("Promise"))).resolve([u])}return(e||(e=n("Promise"))).resolve([!1])};d.__nop_name__="LSIsExperimentCapabilityEnabled",l.default=d}),98);
__d("LSMailboxTaskCompletionApiOnTaskCompletion",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(233).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({success:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskCompletionStoredProcedure",e.__tables__=["mailbox_task_completion_api_tasks"],a.exports=e}),null);
__d("LSVoprfHmac.nop",["ACSCipherSuiteModule","ACSTokenHmacUtil","Promise","XPlatReactTextEncoder","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){var l=o("ACSCipherSuiteModule").getACSCipherSuiteByValue(o("ACSCipherSuiteModule").VOPRF_RISTRETTO_HMACSHA512.value);if(!l)return(e||(e=n("Promise"))).resolve([void 0]);var s=yield o("ACSTokenHmacUtil").hmac(l.macAlgorithm,new Uint8Array(i).slice(),new(o("XPlatReactTextEncoder")).TextEncoder().encode(a));return(e||(e=n("Promise"))).resolve([s.buffer])});function r(e,n,r,o){return t.apply(this,arguments)}return r})();s.__nop_name__="LSVoprfHmac",l.default=s}),98);
__d("LSTaskSerializerUnauthenticatedTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsExperimentCapabilityEnabled.nop","LSMailboxTaskCompletionApiOnTaskCompletion","LSRemoveUsedTokens","LSVoprfHmac.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return t.db.table(311).fetch([[[e[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=void 0:(t=o.item,r[0]=t.projectName)})},function(o){return r[0]!==void 0?t.sequence([function(o){return e[1]!==void 0?t.sequence([function(e){return r[9]=t.createArray(),r[10]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(307).fetch(),function(e){return r[0]===e.projectName&&t.i64.gt(e.expirationTimestampMs,r[10])}),function(e){var t=e.item;return r[16]=(r[9].push(t.configId),r[9])})},function(e){return t.sequence([function(e){return r[16]=t.createArray(),r[17]=t.i64.of_int32(r[9].length),t.i64.gt(r[17],t.i64.cast([0,0]))?t.loopAsync(r[17],function(e){return r[19]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[9],r[19]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],t})},function(e){return r[22]=(r[16].push(r[20]),r[16])}])}):t.resolve()},function(e){return r[18]=r[16].join(","),r[11]=r[18]}])},function(o){return t.filter(t.db.table(309).fetch(),function(e){return r[9].includes(e.configId)&&t.i64.gt(e.redeemLimit,t.i64.cast([0,0]))}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(e){return t.nativeOperation(n("LSIsExperimentCapabilityEnabled.nop"),t.i64.cast([0,0]),r[0]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return r[16]?t.sequence([function(n){return t.db.table(311).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[20]=t.i64.cast([0,0]):(n=a.item,r[20]=n.failureCount)})},function(n){return t.forEach(t.db.table(311).fetch([[[e[0]]]]),function(e){var n=e.item;return t.forEach(t.db.table(311).fetch([[[n.taskId]]]),function(e){var n=e.update,o=e.item;return n({failureCount:t.i64.add(r[20],t.i64.cast([0,1]))})})})},function(e){var n;return n=[void 0,void 0,t.i64.mul(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.mod_(r[20],t.i64.cast([0,7])))),t.i64.cast([0,500]))],r[17]=n[0],r[18]=n[1],r[19]=n[2],n}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[20]=t.createArray(),r[21]=(r[20].push("Unauthenticated Task Serializer: no valid tokens"),r[20]),r[22]=(r[20].push(e[0]),r[20]),r[23]=(r[20].push(r[0]),r[20]),r[24]=t.toJSON(r[20]),(function(e){t.logger(e).mustfix(e)})(r[24]),o=[void 0,void 0,void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}])},function(e){var t;return t=[r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]):(a=l.item,t.sequence([function(o){return r[20]=a.tokenId,t.nativeOperation(n("LSVoprfHmac.nop"),e[2]==null?"":e[2],a.sharedSecret).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return t.blobs.neq(r[16],void 0)?t.sequence([function(e){return t.forEach(t.db.table(309).fetch([[[r[20]]]]),function(e){var n=e.update,r=e.item;return n({redeemLimit:t.i64.sub(r.redeemLimit,t.i64.cast([0,1]))})})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),r[16]).then(function(e){var t;return t=e,r[21]=t[0],t})},function(e){return t.nativeOperation(n("LSBase64Encode.nop"),a.nonce).then(function(e){var t;return t=e,r[22]=t[0],t})},function(n){var o;return r[23]=new t.Map,r[23].set("config_id",a.configId),r[23].set("tag",r[21]==null?"":r[21]),r[23].set("aux",r[22]==null?"":r[22]),r[23].set("project_name",r[0]),r[24]=t.toJSON(r[23]),r[25]=new t.Map,r[25].set("payload",e[2]==null?"":e[2]),r[25].set("token",r[24]),r[26]=t.toJSON(r[25]),o=[r[26],t.i64.from_string(e[1]),void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}]):t.sequence([function(e){return t.forEach(t.db.table(309).fetch([[[r[20]]]]),function(e){return e.delete()})},function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[21]=t.createArray(),r[22]=(r[21].push("Unauthenticated Task Serializer: hmac failed"),r[21]),r[23]=(r[21].push(e[0]),r[21]),r[24]=t.toJSON(r[21]),(function(e){t.logger(e).mustfix(e)})(r[24]),o=[void 0,void 0,void 0],r[17]=o[0],r[18]=o[1],r[19]=o[2]}])},function(e){var t;return t=[r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],t}]))})},function(e){var t;return t=[r[12],r[13],r[14]],r[6]=t[0],r[7]=t[1],r[8]=t[2],t}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[9]=t.createArray(),r[10]=(r[9].push("Unauthenticated Task Serializer: task has no write label"),r[9]),r[11]=(r[9].push(e[0]),r[9]),r[12]=t.toJSON(r[9]),(function(e){t.logger(e).mustfix(e)})(r[12]),o=[void 0,void 0,void 0],r[6]=o[0],r[7]=o[1],r[8]=o[2]}])},function(e){var t;return t=[r[6],r[7],r[8]],r[2]=t[0],r[3]=t[1],r[4]=t[2],t}]):t.sequence([function(r){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskCompletion"),e[0],!1)},function(n){var o;return r[6]=t.createArray(),r[7]=(r[6].push("Unauthenticated Task Serializer: anonymous_task_context row not found"),r[6]),r[8]=(r[6].push(e[0]),r[6]),r[9]=t.toJSON(r[6]),(function(e){t.logger(e).mustfix(e)})(r[9]),o=[void 0,void 0,void 0],r[2]=o[0],r[3]=o[1],r[4]=o[2]}])},function(e){return t.storedProcedure(n("LSRemoveUsedTokens"))},function(e){return r[0]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSIsExperimentCapabilityEnabled.nop"),t.i64.cast([0,1]),r[0]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[6]?t.sequence([function(e){return t.i64.neq(r[4],void 0)?t.resolve(r[8]=!0):t.sequence([function(e){return r[10]=t.createArray(),r[11]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(307).fetch(),function(e){return r[0]===e.projectName&&t.i64.gt(e.expirationTimestampMs,r[11])}),function(e){var t=e.item;return r[15]=(r[10].push(t.configId),r[10])})},function(e){return t.sequence([function(e){return r[15]=t.createArray(),r[16]=t.i64.of_int32(r[10].length),t.i64.gt(r[16],t.i64.cast([0,0]))?t.loopAsync(r[16],function(e){return r[18]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[10],r[18]).then(function(e){var t;return t=e,r[19]=t[0],r[20]=t[1],t})},function(e){return r[21]=(r[15].push(r[19]),r[15])}])}):t.resolve()},function(e){return r[17]=r[15].join(","),r[12]=r[17]}])},function(e){return t.filter(t.db.table(309).fetch(),function(e){return r[10].includes(e.configId)&&t.i64.gt(e.redeemLimit,t.i64.cast([0,0]))}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[13]=!0:(t=o.item,r[13]=!1)})},function(e){return r[8]=r[13]}])},function(e){return r[8]?t.sequence([function(e){return t.filter(t.db.table(310).fetch(),function(e){return e.projectName===r[0]}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[10]=void 0:(t=o.item,r[10]=t.taskId)})},function(e){return r[9]=r[10]}]):t.resolve(r[9]=void 0)},function(e){return r[7]=r[9]}]):t.resolve(r[7]=void 0)},function(e){return r[5]=r[7]}]):t.resolve(r[5]=void 0)},function(e){var t;return t=[r[2],r[3],r[4],r[5]],o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsTaskSerializerUnauthenticatedTaskStoredProcedure",e.__tables__=["anonymous_task_context","secure_acs_configurations","secure_acs_tokens","acs_request_context"],a.exports=e}),null);
__d("LSTaskSerializerUpdateThreadName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(32).fetch([[[e[0]]]]).next().then(function(r,o){var a,i=r.done,l=r.value;return i?(n[4]=t.createArray(),n[5]=(n[4].push("taskSerializerUpdateThreadName: Task ID not found"),n[4]),n[6]=(n[4].push(e[0]),n[4]),n[7]=t.toJSON(n[4]),(function(e){t.logger(e).mustfix(e)})(n[7]),a=[void 0,void 0,void 0],n[0]=a[0],n[1]=a[1],n[2]=a[2]):(o=l.item,t.sequence([function(e){return n[8]=o.threadKey,t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o,a=e.done,i=e.value;return a?(n[9]=t.createArray(),n[10]=(n[9].push("taskSerializerUpdateThreadName: Thread not found"),n[9]),n[11]=(n[9].push(n[8]),n[9]),n[12]=t.toJSON(n[9]),(function(e){t.logger(e).mustfix(e)})(n[12]),o=[void 0,void 0,void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]):(r=i.item,t.sequence([function(e){return t.db.table(9).fetch([[[n[8]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[9]=t.i64.cast([0,1]):(r=a.item,n[14]=r.syncGroup,t.i64.neq(n[14],void 0)?n[13]=n[14]:n[13]=t.i64.cast([0,1]),n[9]=n[13])})},function(e){var o;return n[11]=new t.Map,n[11].set("thread_key",n[8]),n[11].set("thread_name",r.threadName==null?"":r.threadName),n[11].set("sync_group",n[9]),n[12]=t.toJSON(n[11]),o=[n[12],t.i64.cast([0,32]),void 0],n[4]=o[0],n[5]=o[1],n[6]=o[2]}]))})},function(e){var t;return t=[n[4],n[5],n[6]],n[0]=t[0],n[1]=t[1],n[2]=t[2],t}]))})},function(e){var t;return t=[n[0],n[1],n[2]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxTaskSerializerUpdateThreadNameStoredProcedure",e.__tables__=["threads_optimistic_context","threads"],a.exports=e}),null);
__d("LSSerializeTask",["LSForceTaskExecutionImmediately","LSLogMebClientEvent.nop","LSTaskSerializerAcsIssueNextSync","LSTaskSerializerDeleteChatHistory","LSTaskSerializerE2eeMessageIntegrityCheckV2","LSTaskSerializerE2eeMetadataThreadIntegrityCheck","LSTaskSerializerEncryptedBackupAction","LSTaskSerializerEncryptedBackupsLoopingUpload","LSTaskSerializerEncryptedBackupsOpenUpload","LSTaskSerializerEncryptedBackupsRestoreWithSerializer","LSTaskSerializerEncryptedBackupsUpload","LSTaskSerializerEncryptedBackupsUploadProtobufOnly","LSTaskSerializerEncryptedBackupsUploadSenderBackup","LSTaskSerializerMuteThreadV2","LSTaskSerializerRemoveThread","LSTaskSerializerSendMessageV2","LSTaskSerializerSyncThreadCapabilities","LSTaskSerializerUnauthenticatedTask","LSTaskSerializerUpdateThreadName"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return e[1]==="46"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerSendMessageV2"),e[0]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(e){var n;return n=[r[8],t.i64.to_string(r[9]),void 0,void 0],r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],n}]):t.sequence([function(o){return e[1]==="144"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerMuteThreadV2"),e[0]).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(e){var n;return n=[r[12],t.i64.to_string(r[13]),void 0,void 0],r[8]=n[0],r[9]=n[1],r[10]=n[2],r[11]=n[3],n}]):t.sequence([function(o){return e[1]==="146"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerRemoveThread"),e[0]).then(function(e){var t;return t=e,r[16]=t[0],r[17]=t[1],t})},function(e){var n;return n=[r[16],t.i64.to_string(r[17]),void 0,void 0],r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=n[3],n}]):t.sequence([function(o){return e[1]==="32"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerUpdateThreadName"),e[0]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],r[22]=t[2],t})},function(e){var n;return n=[r[20],t.i64.to_string(r[21]),void 0,r[22]],r[16]=n[0],r[17]=n[1],r[18]=n[2],r[19]=n[3],n}]):t.sequence([function(o){return e[1]==="362"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerAcsIssueNextSync"),e[0]).then(function(e){var t;return t=e,r[24]=t[0],r[25]=t[1],r[26]=t[2],t})},function(e){var n;return n=[r[24],t.i64.to_string(r[25]),void 0,r[26]],r[20]=n[0],r[21]=n[1],r[22]=n[2],r[23]=n[3],n}]):t.sequence([function(o){return e[1]==="50015"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsRestoreWithSerializer"),e[0]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],r[30]=t[2],t})},function(e){var n;return n=[r[28],t.i64.to_string(r[29]),void 0,r[30]],r[24]=n[0],r[25]=n[1],r[26]=n[2],r[27]=n[3],n}]):t.sequence([function(o){return e[1]==="319"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupAction"),e[0]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],r[34]=t[2],t})},function(e){var n;return n=[r[32],t.i64.to_string(r[33]),void 0,r[34]],r[28]=n[0],r[29]=n[1],r[30]=n[2],r[31]=n[3],n}]):t.sequence([function(o){return e[1]==="50026"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUpload"),e[0]).then(function(e){var t;return t=e,r[36]=t[0],r[37]=t[1],t})},function(e){var n;return n=[r[36],t.i64.to_string(r[37]),void 0,void 0],r[32]=n[0],r[33]=n[1],r[34]=n[2],r[35]=n[3],n}]):t.sequence([function(o){return e[1]==="50042"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUploadProtobufOnly"),e[0]).then(function(e){var t;return t=e,r[40]=t[0],r[41]=t[1],r[42]=t[2],t})},function(e){var n;return n=[r[40],t.i64.to_string(r[41]),void 0,r[42]],r[36]=n[0],r[37]=n[1],r[38]=n[2],r[39]=n[3],n}]):t.sequence([function(o){return e[1]==="700"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerE2eeMetadataThreadIntegrityCheck"),e[0]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],r[46]=t[2],t})},function(e){var n;return n=[r[44],t.i64.to_string(r[45]),void 0,r[46]],r[40]=n[0],r[41]=n[1],r[42]=n[2],r[43]=n[3],n}]):t.sequence([function(o){return e[1]==="705"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerE2eeMessageIntegrityCheckV2"),e[0]).then(function(e){var t;return t=e,r[48]=t[0],r[49]=t[1],r[50]=t[2],t})},function(e){var n;return n=[r[48],t.i64.to_string(r[49]),void 0,r[50]],r[44]=n[0],r[45]=n[1],r[46]=n[2],r[47]=n[3],n}]):t.sequence([function(o){return e[1]==="50043"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsLoopingUpload"),e[0]).then(function(e){var t;return t=e,r[52]=t[0],r[53]=t[1],r[54]=t[2],t})},function(e){var n;return n=[r[52],t.i64.to_string(r[53]),void 0,r[54]],r[48]=n[0],r[49]=n[1],r[50]=n[2],r[51]=n[3],n}]):t.sequence([function(o){return e[1]==="50048"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsOpenUpload"),e[0]).then(function(e){var t;return t=e,r[56]=t[0],r[57]=t[1],t})},function(e){var n;return n=[r[56],t.i64.to_string(r[57]),void 0,void 0],r[52]=n[0],r[53]=n[1],r[54]=n[2],r[55]=n[3],n}]):t.sequence([function(o){return e[1]==="160013"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerSyncThreadCapabilities"),e[0]).then(function(e){var t;return t=e,r[60]=t[0],r[61]=t[1],r[62]=t[2],t})},function(e){var n;return n=[r[60],t.i64.to_string(r[61]),void 0,r[62]],r[56]=n[0],r[57]=n[1],r[58]=n[2],r[59]=n[3],n}]):t.sequence([function(o){return e[1]==="903"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerDeleteChatHistory"),e[0]).then(function(e){var t;return t=e,r[64]=t[0],r[65]=t[1],r[66]=t[2],t})},function(e){var n;return n=[r[64],t.i64.to_string(r[65]),void 0,r[66]],r[60]=n[0],r[61]=n[1],r[62]=n[2],r[63]=n[3],n}]):t.sequence([function(o){var a;return e[1]==="50057"?t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerEncryptedBackupsUploadSenderBackup"),e[0]).then(function(e){var t;return t=e,r[68]=t[0],r[69]=t[1],r[70]=t[2],t})},function(e){var n;return n=[r[68],t.i64.to_string(r[69]),void 0,r[70]],r[64]=n[0],r[65]=n[1],r[66]=n[2],r[67]=n[3],n}]):t.resolve((a=[e[2],e[1],void 0,void 0],r[64]=a[0],r[65]=a[1],r[66]=a[2],r[67]=a[3],a))},function(e){var t;return t=[r[64],r[65],r[66],r[67]],r[60]=t[0],r[61]=t[1],r[62]=t[2],r[63]=t[3],t}])},function(e){var t;return t=[r[60],r[61],r[62],r[63]],r[56]=t[0],r[57]=t[1],r[58]=t[2],r[59]=t[3],t}])},function(e){var t;return t=[r[56],r[57],r[58],r[59]],r[52]=t[0],r[53]=t[1],r[54]=t[2],r[55]=t[3],t}])},function(e){var t;return t=[r[52],r[53],r[54],r[55]],r[48]=t[0],r[49]=t[1],r[50]=t[2],r[51]=t[3],t}])},function(e){var t;return t=[r[48],r[49],r[50],r[51]],r[44]=t[0],r[45]=t[1],r[46]=t[2],r[47]=t[3],t}])},function(e){var t;return t=[r[44],r[45],r[46],r[47]],r[40]=t[0],r[41]=t[1],r[42]=t[2],r[43]=t[3],t}])},function(e){var t;return t=[r[40],r[41],r[42],r[43]],r[36]=t[0],r[37]=t[1],r[38]=t[2],r[39]=t[3],t}])},function(e){var t;return t=[r[36],r[37],r[38],r[39]],r[32]=t[0],r[33]=t[1],r[34]=t[2],r[35]=t[3],t}])},function(e){var t;return t=[r[32],r[33],r[34],r[35]],r[28]=t[0],r[29]=t[1],r[30]=t[2],r[31]=t[3],t}])},function(e){var t;return t=[r[28],r[29],r[30],r[31]],r[24]=t[0],r[25]=t[1],r[26]=t[2],r[27]=t[3],t}])},function(e){var t;return t=[r[24],r[25],r[26],r[27]],r[20]=t[0],r[21]=t[1],r[22]=t[2],r[23]=t[3],t}])},function(e){var t;return t=[r[20],r[21],r[22],r[23]],r[16]=t[0],r[17]=t[1],r[18]=t[2],r[19]=t[3],t}])},function(e){var t;return t=[r[16],r[17],r[18],r[19]],r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=t[3],t}])},function(e){var t;return t=[r[12],r[13],r[14],r[15]],r[8]=t[0],r[9]=t[1],r[10]=t[2],r[11]=t[3],t}])},function(e){var t;return t=[r[8],r[9],r[10],r[11]],r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],t}])},function(o){return e[3]?t.sequence([function(e){return r[9]=r[1]==="60009"||r[1]==="60006"||r[1]==="60008"||r[1]==="60011"||r[1]==="765"||r[1]==="1006"||r[1]==="160009"||r[1]==="761"||r[1]==="1018"||r[1]==="632"||r[1]==="384"||r[1]==="384",r[9]&&r[1]!==void 0?(r[15]=["Deidentified task is being executed through the 'identified' path. Canceling task with label: ",r[1]].join(""),(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSCoreSerializeTaskStoredProcedure] ","",r[15]].join("")),r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSCoreSerializeTaskStoredProcedure",r[15],r[14],t.i64.cast([0,3]))):t.resolve()},function(e){return t.resolve(r[8]=!1)},function(e){var t,n,o;return r[9]||r[8]?(t=[void 0,void 0,void 0,void 0],r[10]=t[0],r[11]=t[1],r[12]=t[2],r[13]=t[3]):(n=[r[0],r[1],r[2],r[3]],r[10]=n[0],r[11]=n[1],r[12]=n[2],r[13]=n[3]),o=[r[10],r[11],r[12],r[13]],r[4]=o[0],r[5]=o[1],r[6]=o[2],r[7]=o[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSTaskSerializerUnauthenticatedTask"),e[0],r[1],r[0]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],r[10]=t[2],r[11]=t[3],t})},function(e){return t.i64.neq(r[11],void 0)?t.storedProcedure(n("LSForceTaskExecutionImmediately"),r[11]):t.resolve()},function(e){var n;return n=[r[8],t.i64.to_string(r[9]),void 0,r[10]],r[4]=n[0],r[5]=n[1],r[6]=n[2],r[7]=n[3],n}])},function(e){var t;return t=[r[4],r[5],r[6],r[7]],o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreSerializeTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSSerializeTaskStoredProcedure",["LSSerializeTask","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSerializeTask"),a.taskId,a.taskLabel,a.taskValue,a.requiresAuthentication);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSShape",["LSDict"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("LSDict").fromObject(e)}function s(e){return r("LSDict").shapeToRecord(e)}l.ofRecord=e,l.toRecord=s}),98);
__d("LSBeginHandlingPendingTasksForQueue2",["I64","LSFactory","LSIntEnum","LSPendingTasksPluginType","LSSerializeTaskStoredProcedure","LSShape","LSVec","Promise","ReQL","XPlatReactCrypto","asyncToGeneratorRuntime","gkx","isNativeTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=500,d=3e4,m=5,p=100,_=7;function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.lightspeed_task_context.get(t);return n==null||n.requiresAuthentication}),g.apply(this,arguments)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t));return n==null?{context:void 0,failureCount:(s||(s=o("I64"))).neg_one,httpUrlOverride:void 0,minTimeToSyncTimestampMs:s.neg_one,pluginType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSPendingTasksPluginType").LS_BROKER),queueName:""}:n}),y.apply(this,arguments)}function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange(t));return n==null?0:(s||(s=o("I64"))).to_float(n.lastSyncRequestTimestampMs)}),b.apply(this,arguments)}function v(e,t,n){var r=(s||(s=o("I64"))).equal(e.failureCount,(s||(s=o("I64"))).zero)||t;if(r)return 0;var a=(s||(s=o("I64"))).to_float(e.failureCount)>_?(s||(s=o("I64"))).to_float(e.failureCount)-_:(s||(s=o("I64"))).to_float(e.failureCount),i=Math.min((1<<Math.min(a-1,_))*c,d),l=n+i;return Math.max(l-Date.now(),0)}function S(){var e=Array.from(o("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));return e[0]>>>=1,(s||(s=o("I64"))).add(s.lsl_(s.of_float(e[0]),32),s.of_float(e[1]))}function R(){var e=(s||(s=o("I64"))).of_float(Date.now());return s.and_(s.or_(s.lsl_(e,22),s.and_(S(),s.castExn([0,4194303]))),s.castExn([2147483647,4294967295]))}function L(e,t){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=R(),r=yield e.network_requests.get(t,(s||(s=o("I64"))).neg_one);return r==null?yield e.network_requests.add({epochId:n,failureCount:(s||(s=o("I64"))).zero,lastSentTimestampMs:s.zero,lastSyncRequestTimestampMs:s.of_float(Date.now()),syncDatabaseId:s.neg_one,taskQueueName:t}):yield e.network_requests.put(babelHelpers.extends({},r,{epochId:n,lastSyncRequestTimestampMs:(s||(s=o("I64"))).of_float(Date.now())})),n}),E.apply(this,arguments)}function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return(yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange(t).filter(function(e){return e.epochId!=null})))!=null}),I.apply(this,arguments)}function T(e,t,n){var r=(s||(s=o("I64"))).to_float(e.minTimeToSyncTimestampMs),a=Date.now(),i=r-a,l=i<=0;return l?v(e,t,n):i}function D(e){return e.httpUrlOverride!=null||(s||(s=o("I64"))).to_float(e.failureCount)>_}function x(e){return e.timeoutTimestampMs!=null?(s||(s=o("I64"))).to_float(e.timeoutTimestampMs)<=Date.now():!1}function $(e){return e==="90"||e==="130"||e==="153"}function P(e,t,n,r,o){var a=o===0?void 0:o;return{failureCount:a,label:e,payload:t,queueName:n,taskId:r}}function N(e,t,n){return M.apply(this,arguments)}function M(){return M=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield r("LSSerializeTaskStoredProcedure")(r("LSFactory")(e),{requiresAuthentication:n,taskId:t.taskId,taskLabel:t.context,taskValue:t.taskValue}),i=a[0],l=a[1],u=a[2],c=a[3];return i==null?c!=null?{minRetryDelayMs:c}:void 0:P(l,i,t.queueName,t.taskId,(s||(s=o("I64"))).to_float(t.failureCount))}),M.apply(this,arguments)}function w(e,t,n){return A.apply(this,arguments)}function A(){return A=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(t.context==null){yield e.pending_tasks.delete(t.taskId);return}var r=x(t);if(r){yield e.pending_tasks.delete(t.taskId);return}return N(e,t,n)}),A.apply(this,arguments)}function F(e,t){var n=t>=(r("gkx")("26373")&&e===String(207)?p:m)||$(e);return!n}function O(e,t){return B.apply(this,arguments)}function B(){return B=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.pending_tasks.get(t.taskId);n!=null&&(s||(s=o("I64"))).equal(t.firstExecutedTimestampMs,(s||(s=o("I64"))).zero)&&(yield e.pending_tasks.put(babelHelpers.extends({},n,{firstExecutedTimestampMs:(s||(s=o("I64"))).of_float(Date.now())})))}),B.apply(this,arguments)}function W(e,t){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){if(r.length===0)return{epochId:void 0,tasks:[]};var a=[],i=r[0].httpUrlOverride,l=(yield(e||(e=n("Promise"))).all(r.map(function(e){return f(t,e.taskId)}))).some(Boolean);for(var u of r){var c=u.httpUrlOverride===i,d=(yield f(t,u.taskId))===l;if(yield O(t,u),!c||!d)break;var m=yield w(t,u,l);if(m!=null&&m.payload!=null)a.push(m);else if((m==null?void 0:m.minRetryDelayMs)!=null){var p=yield t.pending_tasks.get(u.taskId);if(p!=null){var _;yield t.pending_tasks.put(babelHelpers.extends({},p,{failureCount:(s||(s=o("I64"))).add((_=p.failureCount)!=null?_:(s||(s=o("I64"))).zero,s.one),minTimeToSyncTimestampMs:s.add(m.minRetryDelayMs,s.of_float(Date.now()))}))}}else yield t.pending_tasks.delete(u.taskId);if(!F(u.context,a.length))break}return{epochId:void 0,tasks:a}}),q.apply(this,arguments)}function U(e,t,n,r,o){return V.apply(this,arguments)}function V(){return V=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,o){o===void 0&&(o=!0);var a=yield W(e,t),i=a.tasks;if(i.length===0)return{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:n,skipRealtimeGateway:!1,workItemType:4};if(o===!0){var l=yield L(e,n);a.epochId=l}var s=yield h(e,n);return{httpUrlOverride:s.httpUrlOverride,networkPayload:a,nextSyncMs:void 0,queueName:n,skipRealtimeGateway:D(s),workItemType:r}}),V.apply(this,arguments)}function H(e,t,n){return G.apply(this,arguments)}function G(){return G=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield h(e,t),i=yield C(e,t),l=T(a,n,i),s=l!==0;if(s)return[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:l,queueName:t,skipRealtimeGateway:!1,workItemType:3}];var u=[],c=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t)),d=c.filter(r("isNativeTask"));if(d.length>0){var m=yield U(e,d,t,2,r("gkx")("4778")===!0);u.push(m)}var p=c.filter(function(e){return!r("isNativeTask")(e)});if(p.length>0){var _=yield U(e,p,t,1);u.push(_)}return u}),G.apply(this,arguments)}function z(e,t,n){return j.apply(this,arguments)}function j(){return j=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=!(yield k(e,t));return r?H(e,t,n):[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:t,skipRealtimeGateway:!1,workItemType:4}]}),j.apply(this,arguments)}function K(e,t){return Q.apply(this,arguments)}function Q(){return Q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.ignoreSoftDelay,a=t.queueName,i=yield z(e,a,n);return i.map(function(e){var t,n,a;return o("LSShape").ofRecord({network_payload:o("LSShape").ofRecord({epoch_id:(t=e.networkPayload)==null?void 0:t.epochId,tasks:r("LSVec").ofArray(((n=(a=e.networkPayload)==null?void 0:a.tasks)!=null?n:[]).map(function(e){var t;return o("LSShape").ofRecord({failure_count:e.failureCount!=null?(s||(s=o("I64"))).of_float(e.failureCount):void 0,label:(t=e.label)!=null?t:void 0,payload:e.payload,queue_name:e.queueName,task_id:e.taskId})}))}),next_sync_ms:e.nextSyncMs!=null?(s||(s=o("I64"))).of_float(e.nextSyncMs):void 0,queue_name:e.queueName,skip_realtime_gateway:e.skipRealtimeGateway,work_item_type:(u||(u=o("LSIntEnum"))).ofNumber(e.workItemType)})})}),Q.apply(this,arguments)}K._updateTaskIfNeeded=O,K._getHeadOfNormalQueue=h,K._lastSyncRequestTimestampForQueue=C,K._exponentialBackoffForNormalQueue=v,K._generateNewEpoch=R,K._openNewEpochForQueue=L,K._isEpochOpenForQueue=k,K._calculateDelayForNormalQueue=T,K._queueShouldSkipRealtimeGateway=D,K._isNativeTask=r("isNativeTask"),K._taskIsTimedOut=x,K._taskShouldStopBatching=$,K._buildTaskPayloadExpressionForNormalTaskWithParameters=P,K._buildTaskPayloadExpressionForValidatedNormalTask=N,K._buildTaskPayloadExpressionForUnvalidatedNormalTask=w,K._workForNormalQueueWithoutDelay=U,K._workForNormalQueueWithClosedEpoch=H,K._buildWorkForNormalQueue=z,K._buildNetworkPayloadShapeForTasks=W,K._canContinueBatchingForQueue=F,l.default=K}),98);
__d("LSBitOffset",["I64","LSBitFlag"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("LSBitFlag").set((e||(e=o("I64"))).lsl_(e.one,e.to_int32(t)),n)}function u(t,n){return o("LSBitFlag").clear((e||(e=o("I64"))).lsl_(e.one,e.to_int32(t)),n)}l.set=s,l.clear=u,l.empty=(e||(e=o("I64"))).zero}),98);
__d("LSContactBitOffset",["I64","LSBitFlag","LSBitOffset"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["capabilities","capabilities2"];function u(e,t){return c(e,t,!1)}function c(t,n,r){var a,i=n.capabilities,l=n.capabilities2;if(t>=64){var s;return l==null?r:o("LSBitFlag").has((e||(e=o("I64"))).lsl_(e.one,t-64),(s=n.capabilities2)!=null?s:o("LSBitOffset").empty)}return i==null?r:o("LSBitFlag").has((e||(e=o("I64"))).lsl_(e.one,t),(a=n.capabilities)!=null?a:o("LSBitOffset").empty)}function d(t,n){return o("LSBitFlag").has((e||(e=o("I64"))).lsl_(e.one,t-64),n!=null?n:o("LSBitOffset").empty)}l.contactCapabilityFields=s,l.has=u,l.hasWithDefault=c,l.contactCapabilitiesHas=d}),98);
__d("LSContactBlockedByViewerStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});i.default=e}),66);
__d("LSContactType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});i.default=e}),66);
__d("LSContactViewerRelationship",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});i.default=e}),66);
__d("LSCookie",["$InternalEnum","Cookie","CookieCore","CurrentEnvironment","CurrentMessengerUser","FBLogger","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","MessengerLogHistory","MqttWebDeviceID","ReQL","SortedAsyncIterable","getErrorSafe","isPromise","isStringNullOrEmpty","pageID","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=n("$InternalEnum")({SYNCING:"1",NOT_SYNCING:"0"}),d=o("MessengerLogHistory").getInstance("client_init"),m=r("CurrentEnvironment").instagramdotcom?"igd_ls":"m_ls",p={c:{},d:r("MqttWebDeviceID").clientID,s:c.NOT_SYNCING,u:r("pageID")};function _(e){function t(e){o("CookieCore").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(e),window.location.hostname)}var n=r("Cookie").get(m);if(n==null){var a;t((a={},a[o("CurrentMessengerUser").getIDorEIMU()]=e,a));return}var i=JSON.parse(n);if(i.u==null){var l;t(babelHelpers.extends({},i,(l={},l[o("CurrentMessengerUser").getIDorEIMU()]=e,l)))}else{var s;t((s={},s[o("CurrentMessengerUser").getIDorEIMU()]=e,s))}}function f(){r("Cookie").clear(m)}function g(e){if(typeof e!="object"||e==null)return null;var t=e.c,n=e.d,r=e.s,o=e.u,a=typeof r=="string"?c.cast(r):null,i=typeof t=="object"&&t!=null?Object.entries(t).reduce(function(e,t){var n=t[0],r=t[1];return e==null||typeof r!="string"?null:(e[n]=r,e)},{}):null;return typeof n!="string"||a==null||i==null||typeof o!="string"?null:{c:i,d:n,s:a,u:o}}function h(){var e,t=r("Cookie").get(m);if(r("isStringNullOrEmpty")(t))return p;var n=JSON.parse(t),a=o("CurrentMessengerUser").getIDorEIMU(),i=g(n),l=typeof n=="object"&&n!=null?g(n[a]):null;return(e=l!=null?l:i)!=null?e:p}function y(e){var t=h();if(t.u===r("pageID")){var n={};e.forEach(function(e){var t=e[0],r=e[1],a=r.currentCursor,i=r.groupId;a!=null&&(n[(s||(s=o("I64"))).to_string(i)]=a)}),d.debug("Updated sync cookie to set syncing=false, saving latest cursors"),_(babelHelpers.extends({},t,{c:n,s:c.NOT_SYNCING}))}}var C=[1,2,o("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()?null:95];function b(t){var n=o("SortedAsyncIterable").toArray(o("ReQL").union.apply(void 0,C.map(function(e){return e==null?o("ReQL").empty():o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(e))})));if((e||(e=r("isPromise")))(n)){r("promiseDone")(n.then(function(e){y(e)}));return}y(n)}function v(){try{var e=h();d.debug("Updated sync cookie to set syncing=true"),_(babelHelpers.extends({},e,{s:c.SYNCING,u:r("pageID")}))}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("[LS] Failed to sync cookie")}}l.Status=c,l.DEFAULT_COOKIE=p,l.clear=f,l.get=h,l.syncBeforeUnload=b,l.setSyncing=v}),98);
__d("LSDataTraceFlushDeferred",["MetaConfig","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("LSDataTraceFlush").__setRef("LSDataTraceFlushDeferred");function u(t){return r("MetaConfig")._("62")?s.load().then(function(e){return e.flushExpiredDataTraces(t)}):(e||(e=n("Promise"))).resolve(function(){})}l.watchForExpiredTraces=u}),98);
__d("LSDatabaseProviderType",[],(function(t,n,r,o,a,i){"use strict";function e(e){return l(e.persistenceTypes)}function l(e){return e.includes("indexeddb")}i.isProviderPersisted=e,i.hasPersistentType=l}),66);
__d("LSJSONOp",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127}),l=e;i.default=l}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return u(e)}function s(e){return u(e)}function u(e){var t=null;return{load:function(){return t==null?e.load().then(function(e){return t=e,t}):o("LSSynchronousPromise").makeSynchronousPromise(t)}}}l.wrapReqDeferredMaybeSync=e,l.wrapJSResourceForInteractionMaybeSync=s}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ASC","DESC"]),l=e;i.default=l}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","getErrorSafe","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(r("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function d(e,t,n){if((u||(u=r("isPromise")))(e))return e.then(t,n);try{return t(e)}catch(e){var o=r("getErrorSafe")(e);if(n)return n(o);throw o}}var m=(function(){function t(e,t,n,o){var a=this;o===void 0&&(o=[]),this.$4={},this.$5=[],this.$6=null,this.$7=function(e){return d(a.$8(e),function(e){return e},function(t){throw r("FBLogger")("messenger_web").catching(t).mustfix("Error evaluating step op: %s",Array.isArray(e)?e[0]:"<primitive value>"),t})},this.$1=t,this.$2=e,this.$3=n;for(var i=0;i<o.length;i++)this.$4[i]=o[i]}var o=t.prototype;return o.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))},o.$8=function(o){var t=this,a,i,l,u,m,p,_,f,g,h,y,C;if(!Array.isArray(o))return o;var b=o[0],v=babelHelpers.arrayLikeToArray(o).slice(1),S=v;switch(b){case 8:return S.map(this.$7);case 2:return this.$4[S[0]];case 3:return d(this.$7(S[1]),function(e){return t.$4[S[0]]=e});case 4:return d(this.$7(S[2]),function(e){for(var n=S[0],r=S[1],o=0;o<r;o++,n++)t.$4[n]=e[o];return e});case 12:{for(var R=S[0],L=S[1],E=[],k=R;k<L;k++)E[k]=this.$4[k];return E}case 1:{for(var I,T=function(n){I=d(I,function(){return t.$7(S[n])})},D=0;D<S.length;D++)T(D);return I}case 5:return(a=this.$1).storedProcedure.apply(a,S.map(this.$7));case 6:return(i=this.$1).nativeTypeOperation.apply(i,S.map(this.$7));case 7:return(l=this.$1).nativeOperation.apply(l,S.map(this.$7));case 9:return;case 10:return 1/0;case 11:return NaN;case 13:return this.$7(S[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(S[0]));case 15:return this.$1.blobs.of_string(this.$7(S[0]));case 16:return this.$1.blob(this.$7(S[0]));case 17:return this.$1.i64.of_float(this.$7(S[0]));case 18:{var x=this.$7(S[0]);return x!=null?this.$1.i64.to_float(x):void 0}case 19:return this.$1.i64.from_string(this.$7(S[0]));case 70:return this.$1.i64.cast(this.$7(S[0]));case 20:return this.$1.i64.to_string(this.$7(S[0]));case 21:return(u=this.$3)==null||(u=u.gk)==null?void 0:u[S[0]];case 22:{var $,P=S[0],N=S[1],M=S[2],w=S[3],A=($=this.$3)==null||($=$.qe)==null||($=$[P])==null||($=$[N])==null?void 0:$[M];if(A==null)return A;switch(w){case"BOOL":case"STR":return A;case"I64":{if(typeof A!="object")throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(A.toString())}}return}case 23:return this.$7(S[0])?this.$7(S[1]):S[2]!=null?this.$7(S[2]):void 0;case 24:return this.$7(S[0])||this.$7(S[1]);case 25:return this.$7(S[0])&&this.$7(S[1]);case 26:return!this.$7(S[0]);case 27:return this.$7(S[0])==null;case 28:return this.$1.notnull(this.$7(S[0]));case 29:return this.$7(S[0])===this.$7(S[1]);case 30:return this.$1.i64.eq(this.$7(S[0]),this.$7(S[1]));case 31:return this.$1.blobs.eq(this.$7(S[0]),this.$7(S[1]));case 32:return this.$7(S[0])!==this.$7(S[1]);case 33:return this.$1.i64.neq(this.$7(S[0]),this.$7(S[1]));case 34:return this.$1.blobs.neq(this.$7(S[0]),this.$7(S[1]));case 35:return this.$7(S[0])>this.$7(S[1]);case 36:return this.$1.i64.gt(this.$7(S[0]),this.$7(S[1]));case 37:return this.$1.blobs.gt(this.$7(S[0]),this.$7(S[1]));case 38:return this.$7(S[0])>=this.$7(S[1]);case 39:return this.$1.i64.ge(this.$7(S[0]),this.$7(S[1]));case 40:return this.$1.blobs.ge(this.$7(S[0]),this.$7(S[1]));case 41:return this.$7(S[0])<this.$7(S[1]);case 42:return this.$1.i64.lt(this.$7(S[0]),this.$7(S[1]));case 43:return this.$1.blobs.lt(this.$7(S[0]),this.$7(S[1]));case 44:return this.$7(S[0])<=this.$7(S[1]);case 45:return this.$1.i64.le(this.$7(S[0]),this.$7(S[1]));case 46:return this.$1.blobs.le(this.$7(S[0]),this.$7(S[1]));case 47:return this.$1.throw(S[0]);case 48:return this.$1.print(this.$7(S[0]));case 49:{var F=this.$7(S[0]),O=S[1],B=this.$1.logger(F);switch(O){case"mustfix":return B.mustfix(F);case"info":return B.info(F);case"warn":return B.warn(F);case"debug":return B.debug(F);default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",O)}}case 50:return S.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(S[0]));case 51:{var W=this.$7(S[0]);return W.push(this.$7(S[1])),W}case 52:return this.$1.i64.of_int32(this.$7(S[0]).length);case 53:return new this.$1.Map;case 54:return this.$7(S[0]).get(this.$7(S[1]));case 55:return this.$7(S[0]).set(this.$7(S[1]),this.$7(S[2]));case 56:return this.$7(S[0]).keys();case 57:return this.$7(S[0]).delete(this.$7(S[1]));case 58:return this.$7(S[0]).has(this.$7(S[1]));case 59:return this.$7(S[0]).join(this.$7(S[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(S[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return c.load().then(function(e){var n=e.localizeV1Async;return n(t.$7(S[0]),t.$7(S[1]))});case 66:return c.load().then(function(e){var n=e.localizeV2Async;return n(t.$7(S[0]),t.$7(S[1]))});case 68:return this.$7(S[0])+this.$7(S[1]);case 69:return this.$1.i64.add(this.$7(S[0]),this.$7(S[1]));case 71:return(p=this.$3)==null||(p=p.justknob)==null?void 0:p[S[0]];case 72:return(_=this.$3)==null||(_=_.iggk)==null?void 0:_[S[0]];case 100:return this.$5[S[0]][S[1]];case 101:{if(this.$6==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[S[0]]}case 102:return this.$5[this.$7(S[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(S[0]).trim();case 75:return this.$7(S[0]).split(this.$7(S[1])).join(this.$7(S[2]));case 76:return S.map(this.$7).join("");case 77:return this.$1.like(this.$7(S[0]),this.$7(S[1]));case 78:return[0,this.$7(S[0]).length];case 79:{var q=S.map(this.$7),U=q[0],V=babelHelpers.arrayLikeToArray(q).slice(1);return V.includes(U)}case 80:return this.$7(S[1]).includes(this.$7(S[0]));case 81:return this.$7(S[0])-this.$7(S[1]);case 82:return this.$7(S[0])*this.$7(S[1]);case 83:return this.$7(S[0])/this.$7(S[1]);case 84:return this.$7(S[0])%this.$7(S[1]);case 91:return this.$1.i64.lsl_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 92:return this.$1.i64.lsr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 93:return this.$1.i64.asr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 94:return this.$1.i64.and_(this.$7(S[0]),this.$7(S[1]));case 95:return this.$1.i64.or_(this.$7(S[0]),this.$7(S[1]));case 96:return this.$1.i64.xor(this.$7(S[0]),this.$7(S[1]));case 85:return this.$1.i64.sub(this.$7(S[0]),this.$7(S[1]));case 86:return this.$1.i64.mul(this.$7(S[0]),this.$7(S[1]));case 87:return this.$1.i64.div(this.$7(S[0]),this.$7(S[1]));case 88:return this.$1.i64.mod_(this.$7(S[0]),this.$7(S[1]));case 89:{var H=S.map(this.$7),G=H[0],z=babelHelpers.arrayLikeToArray(H).slice(1);return z.some(function(e){return t.$1.i64.eq(G,e)})}case 90:{var j=this.$7(S[0]);return this.$7(S[1]).some(function(e){return t.$1.i64.eq(j,e)})}case 97:return this.$7(S[0])?this.$7(S[1]):this.$7(S[2]);case 98:{var K=this.$7(S[0]),Q=this.$7(S[1]);return(K||Q)&&!(K&&Q)}case 99:return(f=this.$7(S[0]))!=null?f:this.$7(S[1]);case 103:return;case 104:return n.call(null,S[0]);case 105:{for(var X=this.$7(S[0]),Y=S[1],J=r("LS").n,Z,ee=function(n){Z=d(Z,function(){return t.$4[Y]=n,t.$7(S[2])})},te=J(e||(e=babelHelpers.taggedTemplateLiteralLoose(["0"])));this.$1.i64.lt(te,X);te=this.$1.i64.add(te,J(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))ee(te);return Z}case 106:return this.$7(S[0]);case 107:throw r("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(S[0])};case 109:return{gte:this.$7(S[0])};case 110:return{lt:this.$7(S[0])};case 111:return{lte:this.$7(S[0])};case 112:return S.length===1?this.$7(S[0]):(g=this.$1).merge.apply(g,S.map(this.$7));case 113:{var ne=S[0],re=S[1],oe=babelHelpers.arrayLikeToArray(S).slice(2),ae=oe.map(this.$7);switch(re){case"ASC":return(h=this.$1.db.table(ne)).fetch.apply(h,ae);case"DESC":return(y=this.$1.db.table(ne)).fetchDesc.apply(y,ae)}return}case 114:return this.$1.filter(this.$7(S[0]),function(e){t.$6=e;var n=t.$7(S[1]);return t.$6=null,n});case 115:return(C=this.$1).sortBy.apply(C,S.map(this.$7));case 116:return this.$1.forEach(this.$7(S[0]),function(e){return e.delete()});case 117:return this.$1.islc(this.$7(S[0]),0,this.$7(S[1]));case 118:return this.$1.count(this.$7(S[0]));case 119:return this.$1.db.table(S[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item,r=e.update,o={};t.$6=n;for(var a=1;a<S.length;a+=2)o[S[a]]=t.$7(S[a+1]);return t.$6=null,r(o)});case 121:{for(var ie=S[0],le={},se=1;se<S.length;se+=2)le[S[se]]=this.$7(S[se+1]);return this.$1.db.table(ie).add(le)}case 122:{for(var ue=S[0],ce={},de=1;de<S.length;de+=2)ce[S[de]]=this.$7(S[de+1]);return this.$1.db.table(ue).put(ce)}case 123:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item;return t.$5[S[1]]=n,t.$7(S[2])});case 124:return this.$7(S[0]).next().then(function(e){var n=e.done,r=e.value;if(n)return t.$7(S[3]);var o=S[1];return o!=null?(t.$5[o]=r.item,t.$7(S[2])):0});case 125:return this.$7(S[0]).slice(0,this.$7(S[1]));case 126:return this.$1.groupBy(this.$7(S[0]),S[1]).forEach(function(e){return t.$5[S[2]]=e,t.$7(S[3])});case 127:return this.$7(S[0]).substr(this.$1.i64.to_int32(this.$7(S[1])),this.$1.i64.to_int32(this.$7(S[2])))}},t})();l.default=m}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({DASM:1,JS:2,JSON:3}),l=e;i.default=l}),66);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={createScript:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];n.forEach(function(e){if(typeof window!="undefined"&&typeof window.trustedTypes!="undefined"&&!window.trustedTypes.isScript(e))throw r("err")("Trusted Function requires TrustedScripts args only.")});var a=n.slice(0,-1).join(","),i=n.pop().toString();return"(function anonymous(\n     "+a+"\n     ) {\n     "+i+"\n     })"}},u=r("TrustedTypes").createPolicy("unsafe-function-do-not-use",s);function c(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r("TrustedTypes").isSupportedNatively()&&(e||(e=r("Env"))).useTrustedTypes){var i=u.createScript.apply(u,[""].concat(o));return t.eval(i)}else return babelHelpers.construct(Function,o)}l.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=u,l.createTrustedFunction=c}),98);
__d("LSDatascriptEvaluator",["ExecutionEnvironment","FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE","cr:8018","getErrorSafe","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=function(n){return function(t,r){var o;return e==null||(o=e.qe)==null||(o=o[t])==null||(o=o[n])==null?void 0:o[r]}},a=new Proxy({getBool:n("fb"),getNumber:n("fb"),getString:n("fb")},{get:function(t,r){return r in t?t[r]:{getBool:n(r),getNumber:n(r),getString:n(r)}}}),i=function(n){var t;return e==null||(t=e.gk)==null?void 0:t[n]};i.ig=function(t){var n;return e==null||(n=e.iggk)==null?void 0:n[t]};var l={getBool:function(n){var t;return e==null||(t=e.justknob)==null?void 0:t[n]}};return function(e){var n,s=o("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((n=r("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),n.createScript("qex"),n.createScript("justknobx"),n.createScript("return "+t));return s(i,a,l)(r("LSFactory")(e,{dynamic:!0}))}}var u=function(t){return r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',t!=null?t:-1)};function c(t,o){var a=JSON.parse(o),i=t!=null?t:{gk:{},iggk:{},justknob:{},qe:{}};return function(t){var o=n("cr:8018")!=null?new(n("cr:8018")):void 0,l=o==null?void 0:o.start({bool:{isInWorker:(e||(e=r("ExecutionEnvironment"))).isInWorker},string:{dynamic:String(!0)}}),s=r("LSFactory")(t,{dynamic:!0,lsRuntimeLogger:o});return new(r("LSDatascriptJSONEval"))(a,s,i).eval().finally(function(){return l==null||l.end(),Promise.resolve()})}}function d(e,t,n){if(!r("justknobx")._("3078"))return m(e,t,n);if(n==null)throw u(n);switch(n){case 3:return c(e,t);default:throw u(n)}}function m(e,t,n){if(n==null)return r("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!"),s(e,t);switch(n){case 3:return c(e,t);case 2:return s(e,t);case 1:throw r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function p(e){return function(t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(n){var a=n.experiments,l=n.priority,s=n.syncScript,u=n.target,c=n.taskNames,m=a!=null?JSON.parse(a):null;try{var p=d(m,s,u);return t.runInTransaction(function(t){return e&&e(),p(t)},"readwrite",l,{taskNames:c,type:"sync_script"},i.id+":247")}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(_).mustfix("Error executing sync script"),e}}}}p.__debugModuleName="LSDatascriptEvaluator",l.default=p}),98);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:6542"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:6542")}),98);
__d("LSTruncateTableAndSetShowError",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(e){return t.forEach(t.db.table(115).fetch(),function(e){return e.delete()})},function(r){return n[0]=t.i64.of_float(Date.now()),t.db.table(115).add({statusId:t.i64.cast([0,0]),timestampMs:n[0],errorShouldBeShown:e[0]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSConnectivityTruncateTableAndSetShowErrorStoredProcedure",e.__tables__=["user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.forEach(t.db.table(114).fetch(),function(e){return e.delete()})},function(n){return r[0]=t.i64.of_float(Date.now()),t.db.table(114).add({statusId:void 0,timestampMs:r[0],internetConnectionState:e[0]})},function(r){return t.storedProcedure(n("LSTruncateTableAndSetShowError"),t.i64.neq(e[0],t.i64.cast([0,1])))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSConnectivityDeleteAllAndInsertConnectivityStatusStoredProcedure",e.__tables__=["connectivity_status"],a.exports=e}),null);
__d("LSDeleteAllAndInsertConnectivityStatusStoredProcedure",["LSDeleteAllAndInsertConnectivityStatus","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSDeleteAllAndInsertConnectivityStatus"),a.internetConnectionState);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSEagerlyLoadOnMessenger",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.eagerlyLoadOnMessenger=e}),66);
__d("LSGroupParticipantJoinState",[],(function(t,n,r,o,a,i){var e=Object.freeze({MEMBER:0,PENDING:1,INVITED:2});i.default=e}),66);
__d("LSSyncStoredProcedureUtils",["I64","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=r!=null?(e||(e=o("I64"))).of_float(Date.now()+r):n.minTimeToSyncTimestampMs;yield t.pending_tasks.put(babelHelpers.extends({},n,{failureCount:(e||(e=o("I64"))).add(n.failureCount,e.one),minTimeToSyncTimestampMs:a}))}),u.apply(this,arguments)}function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.pending_tasks.index("queueNameTaskId")).getKeyRange(t));if(r!=null)return s(e,r,n)}),d.apply(this,arguments)}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a=yield t.network_requests.get(n,r);a!=null&&(yield t.network_requests.put(babelHelpers.extends({},a,{failureCount:(e||(e=o("I64"))).add(a==null?void 0:a.failureCount,e.one)})))}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield e.network_requests.get(t,n);r!=null&&(yield e.network_requests.put(babelHelpers.extends({},r,{epochId:void 0,networkTaskIdentifier:void 0})))}),f.apply(this,arguments)}l.incrementPendingTaskFailureCount=s,l.incrementPendingTasksTaskFailureCount=c,l.incrementNetworkRequestsTaskFailureCount=m,l.closeEpoch=_}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){yield o("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(t,n,r),yield o("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(t,n,(e||(e=o("I64"))).neg_one),yield o("LSSyncStoredProcedureUtils").closeEpoch(t,n,e.neg_one)}),u.apply(this,arguments)}l.default=s}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield t.network_requests.get(n,(e||(e=o("I64"))).neg_one);r==null||r.epochId==null||(yield t.network_requests.delete(n,e.neg_one))}),u.apply(this,arguments)}l.default=s}),98);
__d("LSHandleTaskSuccessOpsDownloadFailureForQueue",["I64","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield t.network_requests.get(n,(e||(e=o("I64"))).neg_one);r!=null&&r.epochId!=null&&(yield t.network_requests.delete(n,(e||(e=o("I64"))).neg_one));var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.pending_tasks.index("queueNameTaskId")).getKeyRange(n));a!=null&&(yield t.pending_tasks.delete(a.taskId))}),u.apply(this,arguments)}l.default=s}),98);
__d("LSInternetConnectionState",[],(function(t,n,r,o,a,i){var e=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});i.default=e}),66);
__d("LSMessageReplySourceTypeV2",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28,IG_COLLAB_INVITE:29,FB_QUICKSNAP:30});i.default=e}),66);
__d("LSMessageSendStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});i.default=e}),66);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return r("emptyFunction")}function u(){return(e||(e=n("Promise"))).resolve()}var c={cleanup:r("emptyFunction"),logEvent:function(t){},onConnectionStatusChange:s,onReconnect:s,publish:u,subscribe:s};l.default=c}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("21118")?r("MqttWebDeviceID").clientID:r("ChannelClientID").getID()}var s=e();function u(t){return t==null&&r("FBLogger")("messenger_web").info("Missed provider type for deviceId"),t==="persisted"?o("LSCookie").get().d:e()}l.deviceId=s,l.getDeviceIdForProviderType=u}),98);
__d("LSStreamGroupRef",["I64","LSMailboxInitialSyncCursor"],(function(t,n,r,o,a,i,l){"use strict";var e,s={connectionStatusChangeHandler:null,current:null,currentStreamGroupId:null,publishBuffer:new Map,reconnectHandler:null,status:"Disconnected",subscribers:new Map};function u(){return(e||(e=o("I64"))).equal((e||(e=o("I64"))).of_int32(1),o("LSMailboxInitialSyncCursor").syncChannel)?"mqtt":s.current==null||s.current.streamGroupLoggingContext.sgTransportId==null?"null":s.current.streamGroupLoggingContext.sgTransportId}function c(){return s.status}l.streamGroupRef=s,l.getTransportId=u,l.getTransportStatus=c}),98);
__d("MessengerPWAVersionForUserAgent",["isMessengerPWA"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("isMessengerPWA")();if(t){var n=(e=new URL(window.location.href).searchParams.get("__pwa"))!=null?e:"1.0.0";return n}}l.default=e}),98);
__d("LSPlatformRealtimeTransport",["I64","LSDynamicDependencies","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSShape","LSStreamGroupRef","MessengerPWAVersionForUserAgent","NetworkStatus","Promise","QuickPerformanceLogger","Random","clearTimeout","promiseDone","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("qpl")._(701246226,"1285"),m="LSPlatformRealtimeTransport.NotConnected",p="LSPlatformRealtimeTransport.Timeout";function _(e){var t=new Map;return{getAll:function(){return Array.from(t.values())},getOrStart:function(r){var n=r.toString(),o=t.get(n);return o==null&&(o=e(r),t.set(n,o)),o}}}function f(e){}function g(t,a,i){var l=new Map,m={contents:f},g=new Set,h=new Map,y=[],C=_(function(e){var n=t(e,i);return y.push(n.subscribe(function(e){var t=JSON.parse(e),n=o("LSDynamicDependencies").downloadBootloaderDependencies(t.sp,t.nop,t.ntop),a=t.request_id,i;if(a!=null){var s=l.get(a);if(s==null)i=!1;else{r("clearTimeout")(s.timeoutId),s.resolve({downloadTask:n,payload:t,type:"taskresponse"}),l.delete(a);var u=s.instanceKey;(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:u}),c.markerEnd(d,2,u),i=!0}}else i=!1;if(!i){Array.from(h.entries()).forEach(function(e){return e[1](n,t)});return}})),y.push(n.onReconnect(function(e){return m.contents(e)})),y.push(n.onConnectionStatusChange(function(e){g.forEach(function(t){return t(e)})})),n});return C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(o("LSMailboxInitialSyncCursor").syncChannel)),{cleanup:function(){y.forEach(function(e){return e()}),C.getAll().forEach(function(e){return e.cleanup()})},logEvent:function(t){C.getAll().forEach(function(e){return e.logEvent(t)})},onConnectionStatusChange:function(t){return g.add(t),function(){g.delete(t)}},onReconnect:function(t){return m.contents=t,function(){m.contents=f}},publish:function(i){var t=i.databaseType,m=i.payload,_=i.queueName,f=i.requestId,g=i.syncChannel,h=i.type_;return new(e||(e=n("Promise")))(function(e,n){var i=C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(g)),y=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);if((s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3))){var b=r("setTimeout")(function(){i.logEvent("Timeout");var e=l.get(f);return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"timeout",{instanceKey:y}),c.markerEnd(d,3,y),e!=null&&(l.delete(f),e.reject({RE_EXN_ID:p})),n({RE_EXN_ID:p})},3e4);l.set(f,{instanceKey:y,queueName:_,reject:n,resolve:e,timeoutId:b,timestamp:Date.now()})}(c||(c=r("QuickPerformanceLogger"))).markerStart(d,y),c.markerPoint(d,"publish",{instanceKey:y}),c.markerAnnotate(d,{string:{networkStatus:String(r("NetworkStatus").isOnline()),streamGroupId:o("LSStreamGroupRef").getTransportId(),streamGroupStatus:o("LSStreamGroupRef").getTransportStatus()}},{instanceKey:y}),c.markerAnnotate(d,{int:{databaseType:t,requestType:u.toNumber(h)}},{instanceKey:y});var v=r("MessengerPWAVersionForUserAgent")();r("promiseDone")(i.publish(o("LSJson").stringify(o("LSShape").ofRecord(babelHelpers.extends({app_id:a,payload:m},v!=null?{pwa_version:v}:{},{request_id:f,type:h}))),h,t),function(){if(!(s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3)))return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:y}),c.markerEnd(d,2,y),e({type:"noresponseexpected"})},function(e){(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"fail",{instanceKey:y}),c.markerEnd(d,3,y),n(e)})})},subscribeToNonTaskResponses:function(t){var e={};return h.set(e,t),function(){h.delete(e)}}}}l.NotConnected=m,l.Timeout=p,l.LSPlatformRealtimeTransport=g}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return!(e||(e=r("ExecutionEnvironment"))).canUseDOM&&!(e||(e=r("ExecutionEnvironment"))).isInWorker}l.default=s}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:e}),qos:1,topic:"/ls_app_settings"}]}function d(t){var a={contents:t.getConnectionState()},i={contents:function(){}},l={contents:new(u||(u=n("Promise")))(function(e,t){i.contents=e})},c={onMQTTStateChanged:function(t){t==="Connected"?i.contents():t==="Disconnected"&&a.contents==="Connected"&&(l.contents=new(u||(u=n("Promise")))(function(e,t){i.contents=e})),a.contents=t}};return a.contents==="Connected"&&i.contents(),t.subscribeChannelEvents(c),[function(){t.unsubscribeChannelEvents(c)},function(a,i,c){return l.contents.then(function(){return new(u||(u=n("Promise")))(function(n,l){r("promiseDone")(t.publish("/ls_req",a,{listener:{onEvent:function(t){if(t==="NOT_CONNECTED")return l({RE_EXN_ID:o("LSPlatformRealtimeTransport").NotConnected})}},qos:(e||(e=o("I64"))).equal(i,(s||(s=o("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return n()},function(e){return e.message==="Publish Timed Out"?l({RE_EXN_ID:o("LSPlatformRealtimeTransport").Timeout}):l(e)})})})}]}var m={contents:void 0};function p(e,t,n){if(r("shouldStubUnderlyingTransport")())return r("LSPlatformDefaultUnderlyingApi");var o=n.getInstance(t),a={getPublishMessages:function(){return c(e)}};o.registerExtraConnectPayloadProvider(a);var i={onMQTTStateChanged:function(t){var e=m.contents;if(e!=null)return e(t)}};o.subscribeChannelEvents(i);var l=o.subscribe("/ls_foreground_state",function(){}),s=d(o),u=s[0],p=s[1];return{cleanup:function(){o.unregisterExtraConnectPayloadProvider(a),n.shutdownAndClear(),o.unsubscribeChannelEvents(i),l(),u()},logEvent:function(t){},onConnectionStatusChange:function(t){return m.contents=t,function(){m.contents=void 0}},onReconnect:function(t){var e={contents:o.getConnectionState()},n={contents:e.contents==="Connected"},r={onMQTTStateChanged:function(o){o==="Connected"&&(n.contents&&e.contents!=="Connected"&&t(1),n.contents=!0),e.contents=o}};return o.subscribeChannelEvents(r),function(){o.unsubscribeChannelEvents(r)}},publish:p,subscribe:function(t){return o.subscribe("/ls_resp",function(e){return t(e)})}}}l.default=p}),98);
__d("LSPlatformRequestId",[],(function(t,n,r,o,a,i){"use strict";var e=4;function l(){var t=e;return e+=1,t}var s={generate:l};i.default=s}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","justknobx","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Math.pow(2,31)-1,s=(function(){function t(){this.requests=new Map}var n=t.prototype;return n.schedule=function(n,o,a){var t=this.requests.get(o);t!=null&&r("clearTimeout")(t);var i=r("justknobx")._("4435")?Math.min(a,e):a;this.requests.set(o,r("setTimeout")(n,i))},n.cleanup=function(){this.requests.forEach(function(e){return r("clearTimeout")(e)})},t})();l.default=s}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","Promise","asyncToGeneratorRuntime","clearTimeout","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s="executeFirstBlockForSyncTransaction",u=(function(){function t(e){this.eval=e,this.currentlyRunning=new Map}var o=t.prototype;return o.evalWhenReady=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n;try{yield e,n=r("setTimeout")(function(){r("FBLogger")("messenger_web").mustfix("waited longer than 30 seconds to eval sync script")},3e4),yield this.eval(t)}finally{r("clearTimeout")(n)}});function t(t,n){return e.apply(this,arguments)}return t})(),o.$1=function(r){var t=this.currentlyRunning.get(r);return t==null&&(t=(e||(e=n("Promise"))).resolve(),this.currentlyRunning.set(r,t)),t},t.getSyncScriptType=function(t){var e;if(!((e=t.sp)!=null&&e.includes(s)))return{status:"non-transactional"};var n=(function(){try{var e;return(e=JSON.parse(t.syncScript))==null?void 0:e.step}catch(e){return null}})();if(!Array.isArray(n))return r("FBLogger")("messenger_web").warn("Sync payload appears invalid."),{status:"non-transactional"};for(var o=[n];o.length;){var a=r("nullthrows")(o.shift());for(var i of a)if(Array.isArray(i)){if(i[0]===5&&i[1]===s&&Array.isArray(i[2]))return{status:"transactional",syncGroup:parseInt(i[2][1],10)};o.push(i)}}return{status:"err"}},o.maybeEvalInOrderReceived=function(n,o){var e,a=this,i=t.getSyncScriptType(o),l=0;switch(i.status){case"err":r("FBLogger")("messenger_web").warn("Sync script sync group parsing failed: employed sprocs were %s",JSON.stringify((e=o.sp)!=null?e:void 0));break;case"non-transactional":return this.evalWhenReady(n,o);case"transactional":l=i.syncGroup;break}var s=this.$1(l),u=s.then(function(){return a.evalWhenReady(n,babelHelpers.extends({},o,{priority:"sync_script"}))}).catch(function(e){throw a.currentlyRunning.delete(l),e});return this.currentlyRunning.set(l,u),u},t})();l.default=u}),98);
__d("LSPlatformTaskSyncGroupId",[],(function(t,n,r,o,a,i){"use strict";var e=-1,l=e;i.default=l}),66);
__d("MWPBeginHandlingPendingTasksForQueue",["LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSBeginHandlingPendingTasksForQueue2","LSFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var o=t.fireAndForgetTask,a=t.ignoreSoftDelay,l=t.queueName,s=yield e.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(o===!0){var t=yield r("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(r("LSFactory")(e),{queueName:l}),n=t[0];return[n]}return r("LSBeginHandlingPendingTasksForQueue2")(e,{ignoreSoftDelay:a,queueName:l})});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":37");return s}),s.apply(this,arguments)}l.default=e}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","MetaConfig","Promise","ReQL","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){function a(){return i.apply(this,arguments)}function i(){return i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield e(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).warn("Failed to calculate work for task queue %s",t.queueName)}}),i.apply(this,arguments)}if((u||(u=o("I64"))).gt(t.priority,(u||(u=o("I64"))).zero)&&r("MetaConfig")._("78")){var l=function(){var e=a()};(s||(s=r("JSScheduler"))).scheduleLoggingPriCallback(l)}else r("promiseDone")(a())}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{yield e(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).warn("Failed to calculate work for fire forget queue %s",t.queueName)}}),m.apply(this,arguments)}function p(e,t){var r=new Set,a=[],i=[];return i.push(e.tables.pending_tasks.index("queueNameTaskId").subscribe(function(e,t){var n,i;if(t.operation==="delete"){r.add(e[0]);return}var l=t.operation==="put"&&t.prevValue==null||t.operation==="add",s=t.operation==="put"&&(u||(u=o("I64"))).compare(t.value.failureCount,(n=(i=t.prevValue)==null?void 0:i.failureCount)!=null?n:(u||(u=o("I64"))).zero)>0;(l||s)&&r.add(t.value.queueName),(t.operation==="add"&&t.value.dataTraceId==null||t.value.dataTraceId==="")&&a.push(t.value)})),i.push(e.tables.network_requests.subscribe(function(e,t){var n=e[0];n!==""&&(t.operation==="delete"||t.value.epochId==null)&&r.add(n)})),i.push(e.subscribeToCommit(function(){var i=Array.from(r);r.clear(),a=[],i.forEach((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.pending_tasks.index("queueNameTaskId")).bounds({gte:[n]}));r!=null&&c(t,r)});return function(e){return r.apply(this,arguments)}})())})),i}function _(e,t){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.pending_tasks)),r=new Set;for(var a of n)r.has(a.queueName)||(r.add(a.queueName),c(t,a))})())}function f(t,a){r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var l=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.pending_fire_and_forget_tasks));yield(e||(e=n("Promise"))).all(l.map(function(e){return d(a,e)})),r("promiseDone")(t.runInTransaction(function(t){return(e||(e=n("Promise"))).all(l.map(function(e){return t.pending_fire_and_forget_tasks.delete(e.taskId)}))},"readwrite","background",void 0,i.id+":199"))})())}function g(e,t){var n=!1,r=[];return r.push(e.tables.pending_fire_and_forget_tasks.subscribe(function(e,t){if(t.operation!=="delete"){var r=t.operation==="put"&&t.prevValue==null||t.operation==="add";r&&(n=!0)}})),r.push(e.subscribeToCommit(function(){n&&f(e,t),n=!1})),r}l.checkQueuesWhenPendingTaskTableUpdates=p,l.checkAllPendingTasksForWork=_,l.checkAllFireForgetTasksForWork=f,l.checkQueuesWhenPendingFireForgetTaskTableUpdates=g}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSHandleTaskSuccessOpsDownloadFailureForQueue","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSPlatformTaskSyncGroupId","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:4031","cr:6668","gkx","promiseDone","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=500,m=r("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),p=new Set([632,765,60011,1006,1018].map(function(e){return e.toString()})),_=(function(){function t(e,t,a,i){var l=this;this.key="ls",this.$8=!1,this.$19=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield r("MWPBeginHandlingPendingTasksForQueue")(l.$1,{ignoreSoftDelay:t,queueName:e});for(var a of n)yield l.$18(o("LSShape").toRecord(a))});return function(t,n){return e.apply(this,arguments)}})(),this.$1=e,this.$2=t,this.$3=a,this.$4=i,this.$8=o("LSDatabaseProviderType").isProviderPersisted(e),this.$5=new(r("LSPlatformRequestScheduler")),this.$6=new(r("LSPlatformServerResponseHandler"))(a),this.$7=this.$9(),this.$10()}var a=t.prototype;return a.$11=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.filter(function(e){return e.label!=null&&p.has(e.label)});if(n.length<e.length){n.length>0&&r("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",n[0].label);var o=yield this.$2.publish(t);return o}var a=n[0],i=yield m.load(),l=yield i(babelHelpers.extends({},t,{taskLabel:a.label}));return l});function t(t,n){return e.apply(this,arguments)}return t})(),a.$12=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSendFailureForQueue2")(t,e)},"readwrite",void 0,void 0,i.id+":151")});function t(t){return e.apply(this,arguments)}return t})(),a.$13=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSendSuccessForQueue2")(t,e)},"readwrite","background",void 0,i.id+":160")});function t(t){return e.apply(this,arguments)}return t})(),a.$14=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield this.$1.runInTransaction(function(t){return r("LSHandleTaskSuccessOpsDownloadFailureForQueue")(t,e)},"readwrite",void 0,void 0,i.id+":168")});function t(t){return e.apply(this,arguments)}return t})(),a.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=r("LSVec").toArray(e.tasks).slice(0).map(function(e){return o("LSShape").toRecord(e)}),n=t[0];if(n!=null){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(this.$1.tables.pending_tasks).getKeyRange(n.task_id));return a==null?void 0:a.dataTraceId}});function t(t){return e.apply(this,arguments)}return t})(),a.$16=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=this;if(t.network_payload!=null){var l=o("LSShape").toRecord(t.network_payload);(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return l&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSending(l.tasks))});var s=this.$4;try{yield(u||(u=n("Promise"))).all(r("LSVec").toArray(l.tasks).map(function(e){return o("LSShape").toRecord(e)}).map(function(n){var l=r("LSPlatformRequestId").generate();return i.$11([n],{databaseType:r("LSPlatformTaskSyncGroupId"),payload:o("LSJson").stringify(o("LSShape").ofRecord({label:n.label,payload:n.payload,version:s})),queueName:t.queue_name,requestId:l,syncChannel:o("LSMailboxInitialSyncCursor").taskChannel,type_:(e||(e=o("I64"))).of_int32(a)})}))}catch(e){}}});function a(e,n){return t.apply(this,arguments)}return a})(),a.$17=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){if(t.network_payload!=null){var i=o("LSShape").toRecord(t.network_payload),l=r("LSVec").toArray(i.tasks).map(function(e){return o("LSShape").toRecord(e)}),u=yield this.$15(i);(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return i&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSending(i.tasks))});var d=r("LSPlatformRequestId").generate(),m,p=r("qex")._("2071");if(p!=null&&p!=="default"){var _=p+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").taskChannel)+"."+a.toString();o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",_)}try{m=yield this.$11(l,{databaseType:r("LSPlatformTaskSyncGroupId"),payload:o("LSJson").stringify(o("LSShape").ofRecord(babelHelpers.extends({},i,{version_id:this.$4},u==null?{}:{data_trace_id:u}))),queueName:t.queue_name,requestId:d,syncChannel:o("LSMailboxInitialSyncCursor").taskChannel,type_:(e||(e=o("I64"))).of_int32(a)})}catch(e){if(p!=null&&p!=="default"){var f=p+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").taskChannel)+"."+a.toString();o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception"),e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception.timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f+".exception.notconnected")}e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected?(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),r("FBLogger")("messenger_web").warn("Publishing a task to the server not connected")):(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),r("FBLogger")("messenger_web").warn("Error while publishing a task for request: %s, error %s",a,JSON.stringify(e))),yield this.$12(t.queue_name)}if(m!=null&&m.type==="taskresponse")try{var g=m.downloadTask,h=m.payload,y={experiments:h.ex,sp:h.sp,syncScript:h.payload,target:h.target,taskNames:l.map(function(e){return e.label}).filter(Boolean)};yield this.$6.evalWhenReady(g,y),yield this.$13(t.queue_name),(c||(c=r("JSScheduler"))).scheduleLoggingPriCallback(function(){return i&&(n("cr:6668")==null?void 0:n("cr:6668").recordTaskSent(i.tasks,h.payload))})}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),r("FBLogger")("messenger_web").catching(e).mustfix("Encountered an error while processing a task response via realtime transport"),(e==null?void 0:e.name)==="dynamic_sproc_loading_timeout"&&r("gkx")("14417")?yield this.$14(t.queue_name):yield this.$12(t.queue_name)}}});function a(e,n){return t.apply(this,arguments)}return a})(),a.decideWhatToDoWithTask=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,i){var l=this,s=yield r("MWPBeginHandlingPendingTasksForQueue")(e,{fireAndForgetTask:i,ignoreSoftDelay:!1,queueName:t,transportKey:a});r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var e of s)yield l.$18(o("LSShape").toRecord(e))})())});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),a.$18=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=this.$5,i=this.$19;function l(t,n){a.schedule(function(){r("promiseDone")(i(t,!1))},t,n!=null?(e||(e=o("I64"))).to_float(n):d)}var s=(e||(e=o("I64"))).to_int32(t.work_item_type);switch(s){case 1:yield this.$17(t,3);break;case 5:yield this.$16(t,4);break;case 3:l(t.queue_name,t.next_sync_ms);break;case 2:yield n("cr:4031").handleLSWork(this.$1,t,o("CurrentMessengerUser").getAccountID());break;case 4:break;default:r("FBLogger")("messenger_web").warn("Unknown Task type of %s",s)}});function a(e){return t.apply(this,arguments)}return a})(),a.$9=function(){var e=this,t=this.$1;return this.$2.onReconnect(function(a){o("LSMailboxInitialSyncCursor").isWebApp&&a===3&&r("qex")._("2082")===!0||(r("promiseDone")(t.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.network_requests).bounds({gte:o("ReQL").key("")}));yield(u||(u=n("Promise"))).all(t.map(function(t){var n=t.taskQueueName;return r("LSHandleTaskSendFailureForQueue2")(e,n)}))});return function(t){return e.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":481")),e.$10())})},a.$10=function(){var e=this;o("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(t){var n=t.queueName;return e.decideWhatToDoWithTask(e.$1,n)})},a.cleanup=function(){this.$7()},t})();l.default=_}),98);
__d("LSReplyMessageAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});i.default=e}),66);
__d("LSVersion",[],(function(t,n,r,o,a,i){a.exports="32381005491547324"}),null);
__d("LSXmaContentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({TEST:-1,NONE:0,IG_SINGLE_IMAGE_POST_SHARE:1e3,IG_MULTIPOST_SHARE:1001,IG_STORY_REPLY:1002,IG_STORY_PHOTO_SHARE:1003,IG_STORY_PHOTO_MENTION:1004,IG_CLIPS_SHARE:1005,IG_SINGLE_VIDEO_POST_SHARE:1006,IG_STORY_VIDEO_SHARE:1007,IG_STORY_REACTION:1008,IG_IGTV_SHARE:1009,IG_SHOP_SHARE:1010,IG_PROFILE_SHARE:1011,IG_STORY_PHOTO_HIGHLIGHT_SHARE:1012,IG_STORY_VIDEO_HIGHLIGHT_SHARE:1013,IG_STORY_VIDEO_MENTION:1014,IG_STORY_HIGHLIGHT_REPLY:1015,IG_STORY_HIGHLIGHT_REACTION:1016,IG_EXTERNAL_LINK:1017,IG_RECEIVER_FETCH:1018,IG_TEXT_POST_APP_SHARE:1019,IG_MULTI_MEDIA_RESPONSE:1020,FB_FEED_SHARE:2e3,FB_STORY_REPLY:2001,FB_STORY_SHARE:2002,FB_STORY_MENTION:2003,FB_FEED_VIDEO_SHARE:2004,FB_GAMING_CUSTOM_UPDATE:2005,FB_PRODUCER_STORY_REPLY:2006,FB_EVENT:2007,FB_FEED_POST_PRIVATE_REPLY:2008,FB_SHORT:2009,FB_COMMENT_MENTION_SHARE:2010,FB_STORY_LWI_REPLY:2011,FB_COMMENT_SHARE:2012,FB_POST_MENTION:2013,FB_PROFILE_DIRECTORY_ITEM:2014,FB_FEED_POST_REACTION_REPLY:2015,FB_QUICKSNAP_REPLY:2016,FB_SPARK_ICEBREAKER:2017,MSG_EXTERNAL_LINK_SHARE:3e3,MSG_P2P_PAYMENT:3001,MSG_LOCATION_SHARING:3002,MSG_LOCATION_SHARING_V2:3003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:3004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:3005,MSG_RECEIVER_FETCH:3006,MSG_IG_MEDIA_SHARE:3007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:3008,MSG_REELS_LIST:3009,MSG_CONTACT:3010,MSG_THREADS_POST_SHARE:3011,MSG_FILE:3012,MSG_AVATAR_DETAILS:3013,MSG_AI_CONTACT:3014,MSG_MEMORIES_SHARE:3015,MSG_SHARED_ALBUM_REPLY:3016,MSG_SHARED_ALBUM:3017,MSG_OCCAMADILLO_XMA:3018,MSG_GEN_AI_1P_SEARCH_RESULT:3019,MSG_EARLY_ACCESS_FB_SHARE:3020,MSG_GEN_AI_SUBSCRIPTION:3021,MSG_GEN_AI_REMINDER:3022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:3023,MSG_MAGICAL_MESSENGER_PLACES:3024,MSG_RECEIVER_FETCH_FALLBACK:3025,MSG_MAGICAL_MESSENGER_TASKS:3026,MSG_NOTE_REPLY:3027,MSG_NOTE_MENTION:3028,MSG_PROMPT_REPLY:3029,MSG_GEN_AI_TASK:3030,MSG_GEN_AI_RICH_RESPONSE:3040,MSG_RECEIVER_FETCH_ENT_DELETED:3041,MSG_GEN_AI_APP_DOWNLOAD_LINK:3042,MSG_GEN_AI_ENTITY:3043,MSG_OPG_P2P_PAYMENT:3044,MSG_MARKETPLACE:3045,MSG_MUSIC_STICKER:3046,MSG_META_AI_DIGEST:3047,MSG_PHONE_NUMBER:3048,MSG_GEN_AI_CONCORD_FEED_POST:3049,MSG_META_AI_MEDIA_SHARE:3050,RTC_AUDIO_CALL:4e3,RTC_VIDEO_CALL:4001,RTC_MISSED_AUDIO_CALL:4002,RTC_MISSED_VIDEO_CALL:4003,RTC_GROUP_AUDIO_CALL:4004,RTC_GROUP_VIDEO_CALL:4005,RTC_MISSED_GROUP_AUDIO_CALL:4006,RTC_MISSED_GROUP_VIDEO_CALL:4007,RTC_ONGOING_AUDIO_CALL:4008,RTC_ONGOING_VIDEO_CALL:4009,DATACLASS_SENDER_COPY:5e3,OC_AVATAR_STATIC_STICKER:6e3,LIVE_LOCATION:7e3});i.default=e}),66);
__d("MAWODSProxy",["CurrentMessengerUser","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.amount,r=t.entity,a=t.key;(e||(e=o("ODS"))).bumpEntityKey(3185,r,a+"."+(o("CurrentMessengerUser").getAppID()||"unknown"),n)}l.odsBumpEntityKey=s}),98);
__d("WAGlobals",["WAJids","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(e){s=e}function c(){if(s==null)throw r("err")("WaMsgr api called before set");return s}function d(){var e;return(e=c().myJids)==null?void 0:e.deviceJid}function m(){var e;return(e=c().myJids)==null?void 0:e.userJid}function p(e){return o("WAJids").extractUserJid(e)===o("WAJids").extractUserJid(d())}function _(){return c().config}function f(){return c().dependencies}var g="WAOneQueue is not defined";function h(){var t=c().waOneQueue;if(t==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),g),r("err")(g);return t}function y(){return c().hmacKey}l.setGlobals=u,l.getMyDeviceJid=d,l.getMyUserJid=m,l.isPeerDevice=p,l.getConfig=_,l.getDependencies=f,l.getWaOneQueue=h,l.getHMACKey=y}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("WAJids").toMsgrUserJid(o("MAWCurrentUser").getID());if((e||(e=r("ExecutionEnvironment"))).isInWorker){var n=o("WAGlobals").getMyUserJid();return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:n===t?"same":"different"}),n}return t}l.getMyUserJid=s}),98);
__d("MAWAuthor",["MAWUserJidWrapper","WAJids","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(t==null||t===o("WAJids").AUTHOR_SYSTEM)return null;if(o("WAJids").isAuthorMe(t))return o("MAWUserJidWrapper").getMyUserJid();var e=o("WAJids").authorAsUserJid(t);return e==null||r("isStringNullOrEmpty")(o("WAJids").userIdFromJid(e))?null:o("WAJids").authorAsUserJid(t)};l.getAuthorUserJid=e}),98);
__d("MAWErrorObject",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e instanceof Error?e:typeof e=="string"?r("err")(e):null}l.getErrorObject=e}),98);
__d("MAWExternalId",["I64","Random","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=131071,u=null,c=0;function d(){var e=u,t=Date.now();if(e==null||p(e)!==p(t))return u=t,c=0,t;var n=t+100*(c+1),r=g(t),o=g(n);return r==null||o==null||r>o?t:(c++,n)}function m(e){return new Date(e).getTime()>0}function p(e){return Math.floor(e/100)*100}function _(e){return Math.floor(r("Random").random()*e)}function f(){var t=d();return o("WAStanzaUtils").toStanzaId((e||(e=o("I64"))).to_string(e.and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(e.of_float(_(s)),e.of_float(s))),e.max_int)))}function g(e){return m(e)?Math.floor(Number(e)%1e5/100):null}l.generateExternalId=f,l.getThreeMostSignificantDigitsForSortOrderTimestamp=g}),98);
__d("MAWJids",["I64","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WAJids").createJidUtils({platform:"msgr"}),u=s.toUserJid,c=function(n,r){var t=(e||(e=o("I64"))).to_string(n);return r?o("WAJids").toGroupJid(t):u(t)};function d(e){return c(e,!1)}function m(e){return c(e,!0)}var p=function(n){var t=o("WAJids").threadIdForChatJid(n);return(e||(e=o("I64"))).of_string(t)};function _(e){return o("WAJids").unsafeCoerceToChatJid(e)}l.jidUtils=s,l.toUserJid=u,l.convertIntJidToChatJid=c,l.convertIntJidToOneToOneChatJid=d,l.convertIntJidToGroupJid=m,l.convertChatJidToIntJid=p,l.threadIdToChatJid=_}),98);
__d("MAWLeakDetection",[],(function(t,n,r,o,a,i){"use strict";var e="[Vault] Vaulted string detected";function l(e){var t=/\d{10}##\d{10}/gm;return t.test(e)}function s(t){return l(t)?e:t}i.VAULTED_STRING_DETECTED=e,i.detectVaultedString=l,i.maybeReplaceVaultedString=s}),66);
__d("MAWSendQplToServer",["BrowserLockManager","ExecutionEnvironment","QPLUserFlow","WAExceededStorageQuota","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,o,a){return r("QPLUserFlow").start(t,{annotations:babelHelpers.extends({},n||{},{bool:babelHelpers.extends({},(n==null?void 0:n.bool)||{},{isDev:0,isFromUIThread:(e||(e=r("ExecutionEnvironment"))).isInMainThread,isGifSearchEnbled:!0,isLockApiSupported:r("BrowserLockManager")!=null,processAcksInOneQueue:r("gkx")("23955"),useSharedWorker:"SharedWorkerGlobalScope"in self&&self instanceof self.SharedWorkerGlobalScope})}),instanceKey:o,timeoutInMs:a}),u(t,o)}function u(e,t){return{addAnnotations:function(o){r("QPLUserFlow").addAnnotations(e,o,{instanceKey:t})},addPoint:function(o,a){a&&r("QPLUserFlow").addAnnotations(e,a,{instanceKey:t}),r("QPLUserFlow").addPoint(e,o,{instanceKey:t})},endCancel:function(a){var n;r("QPLUserFlow").addAnnotations(e,babelHelpers.extends({},a,{bool:babelHelpers.extends({},a==null?void 0:a.bool,{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}),string:babelHelpers.extends({},a==null?void 0:a.string,{threadID:a==null||(n=a.string)==null?void 0:n.jid})}),{instanceKey:t}),r("QPLUserFlow").endCancel(e,{annotations:a,instanceKey:t})},endFail:function(a,i){var n;r("QPLUserFlow").addAnnotations(e,babelHelpers.extends({},i,{bool:babelHelpers.extends({},i==null?void 0:i.bool,{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}),string:babelHelpers.extends({},i==null?void 0:i.string,{threadID:i==null||(n=i.string)==null?void 0:n.jid})}),{instanceKey:t}),r("QPLUserFlow").endFailure(e,a,{annotations:i,instanceKey:t})},endSuccess:function(a){r("QPLUserFlow").addAnnotations(e,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:t}),r("QPLUserFlow").endSuccess(e,{annotations:a,instanceKey:t})},markError:function(o,a,i){return r("QPLUserFlow").markError(e,o,{debugInfo:a,error:i,instanceKey:t})}}}l.startQplUserFlow=s,l.makeMAWQPLProxyForExistingQPLUserFlow=u}),98);
__d("WAErrorMessage",[],(function(t,n,r,o,a,i){"use strict";var e="NoErrorMessageProvided";function l(t){if(typeof t=="string")return t;if(t instanceof Error)return t.toString();if(typeof t=="object"){if(typeof(t==null?void 0:t.description)=="string")return t.description;if(typeof(t==null?void 0:t.message)=="string")return t.message}return e}i.NO_ERROR_MESSAGE_PROVIDED=e,i.maybeGetMessageFromError=l}),66);
__d("MAWQplProxy",["Deferred","ExecutionEnvironment","FBLogger","MAWBridge","MAWSendQplToServer","QPLEvent","WAErrorMessage","asyncToGeneratorRuntime","getErrorSafe","gkx","justknobx","performanceAbsoluteNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p=(e=r("gkx")("23949"))!=null?e:!1,_=new Set([25313175,25310776,1056839232,1056836502,1056836703,1056847537,521478596,521479468,521476165,521480391,521472095]),f=0,g=(d||(d=r("performanceAbsoluteNow")))()-Date.now();function h(){return Date.now()}var y=new(r("Deferred")),C=function(){y.resolve()};function b(e,t,n,a,i){a===void 0&&(a=!1),r("promiseDone")(y.getPromise(),function(){return o("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:t,type:"point"},annotations:n==null?void 0:n.annotations,event:e,instanceKey:n==null?void 0:n.instanceKey,performanceAndDateSkew:g,timestamp:a?h():void 0},!0,void 0,i)})}function v(e,t,n,r,o){var a;E(e,{bool:(a={},a[t]=n,a)},r,o)}function S(e,t,n,r,o){var a;E(e,{string:(a={},a[t]=n,a)},r,o)}function R(e,t,n,r,o){var a;E(e,{int:(a={},a[t]=n,a)},r,o)}function L(e,t,n,r){E(e,{double:t},n,r)}function E(e,t,n,a){r("promiseDone")(y.getPromise(),function(){return o("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"annotations"},annotations:t,event:e,instanceKey:n},!0,void 0,a)})}function k(e,t,n,a,i,l){i===void 0&&(i=!1);var s=h();r("promiseDone")(y.getPromise(),function(){return o("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:t,type:"failure"},annotations:n,event:e,instanceKey:a,timestamp:i?s:void 0},!0,void 0,l)})}function I(e,t,n,a,i){a===void 0&&(a=!1);var l=h();r("promiseDone")(y.getPromise(),function(){return o("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"success"},annotations:t,event:e,instanceKey:n,timestamp:a?l:void 0},!0,void 0,i)})}function T(e,t,n,a,i,l){i===void 0&&(i=!1);var s=h();r("promiseDone")(y.getPromise(),function(){return o("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{cancelReason:t,type:"cancel"},annotations:n,event:e,instanceKey:a,timestamp:i?s:void 0},!0,void 0,l)})}function D(e,t,n,a){r("promiseDone")(y.getPromise(),function(){return o("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:t,type:"error"},debugInfo:n==null?void 0:n.debugInfo,error:n==null?void 0:n.error,event:e,instanceKey:n==null?void 0:n.instanceKey},!0,void 0,a)})}function x(e,t,n,r,o){return $.apply(this,arguments)}function $(){return $=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i){b(e,t+"_start",{annotations:a,instanceKey:i});try{var l=yield n();return b(e,t+"_end",{instanceKey:i}),l}catch(n){throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(n)).MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Caught exception for "," during measurePerf"])),t),b(e,t+"_fail",{annotations:{string:{caughtError:o("WAErrorMessage").maybeGetMessageFromError(n)}},instanceKey:i}),n}}),$.apply(this,arguments)}function P(e,t,n){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){e.addPoint(t+"_start");try{var a=yield n;return e.addPoint(t+"_end"),a}catch(n){throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(n)).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Caught exception for "," during measurePerf"])),t),e.addPoint(t+"_fail",{string:{caughtError:o("WAErrorMessage").maybeGetMessageFromError(n)}}),n}}),N.apply(this,arguments)}var M=r("justknobx")._("2596");function w(e,t,n){n===void 0&&(n={});var a=n,i=a.callBridgeWithTimestamp,l=i===void 0?!1:i,s=a.providedInstanceKey,u=a.providedTimeoutInMs,c=a.sendThroughBridge,d=c===void 0?!1:c;s==null&&f++;var p=s!=null?s:f,_=u!=null?u:M,g=!(m||(m=r("ExecutionEnvironment"))).isInWorker,C=d||F(e);if(g||!C)return o("MAWSendQplToServer").startQplUserFlow(e,t,p,_);var v=d?{toLastActiveClient:!0}:void 0;return r("promiseDone")(y.getPromise(),function(){return o("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"start"},annotations:babelHelpers.extends({},t||{},{bool:babelHelpers.extends({},(t==null?void 0:t.bool)||{})}),event:e,instanceKey:p,timeoutInMs:_,timestamp:l?h():void 0},!0,void 0,v)}),{addAnnotations:function(n){return E(e,n,p,v)},addPoint:function(n,r){return b(e,n,{annotations:r,instanceKey:p},void 0,v)},endCancel:function(n){return T(e,void 0,n,p,void 0,v)},endFail:function(n,r){return k(e,n,r,p,void 0,v)},endSuccess:function(n){return I(e,n,p,void 0,v)},markError:function(n,r,o){return D(e,n,{debugInfo:r,error:o,instanceKey:p},v)}}}function A(e,t){return!(m||(m=r("ExecutionEnvironment"))).isInWorker||!F(e)?o("MAWSendQplToServer").makeMAWQPLProxyForExistingQPLUserFlow(e,t):{addAnnotations:function(r){return E(e,r,t)},addPoint:function(r,o){return b(e,r,{annotations:o,instanceKey:t})},endCancel:function(r){return T(e,void 0,r,t)},endFail:function(r,o){return k(e,r,o,t)},endSuccess:function(r){return I(e,r,t)},markError:function(r,o,a){return D(e,r,{debugInfo:o,error:a,instanceKey:t})}}}function F(e){return p||_.has((c||(c=o("QPLEvent"))).getMarkerId(e))}function O(e,t){return W(e,t)}var B=0;function W(e,t){var n,o=(n=t==null?void 0:t.instanceKey)!=null?n:B++,a=!0;return{addAnnotations:function(n){E(e,n,o)},addPoint:function(n,r){b(e,n,{annotations:r,instanceKey:o})},endCancel:function(n,r){T(e,n,r,o),a=!1},endFail:function(n,r){k(e,n,r,o),a=!1},endSuccess:function(n){I(e,n,o),a=!1},getQPLAttrs:function(){return{instanceKey:o}},isActive:function(){return a},start:function(t){r("FBLogger")("messenger_web").warn("start() should not be called for cross-bridge QPL flow")}}}l.performanceAbsoluteNow=h,l.workerBridgeDeferred=y,l.resolveWorkerBridge=C,l.sendQplPointThroughBridge=b,l.sendQPLBoolAnnotationThroughBridge=v,l.sendQPLStringAnnotationThroughBridge=S,l.sendQPLIntAnnotationThroughBridge=R,l.sendQPLDoubleAnnotationsThroughBridge=L,l.sendQPLAnnotationsThroughBridge=E,l.sendQPLFailThroughBridge=k,l.sendQPLSuccessThroughBridge=I,l.sendQPLCancelThroughBridge=T,l.sendQPLErrorThroughBridge=D,l.measurePerfInQPL_USE_WITH_CARE=x,l.measurePerfInQPL=P,l.DEFAULT_WORKER_QPL_TIMEOUT_MS=M,l.startQplUserFlow=w,l.makeQplUserFlowFromExistedInstance=A,l.continueQplAsCrossBridgeQplFlow=O}),98);
__d("MAWTransactionMode",[],(function(t,n,r,o,a,i){"use strict";var e="r!",l="rw!";i.READONLY=e,i.READWRITE=l}),66);
__d("MAWLogIndexedDb",["FBLogger","MAWCurrentUser","MAWErrorObject","MAWIndexedDbMetadata","MAWQplProxy","MAWTransactionMode","Promise","WAExceededStorageQuota","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=null;function c(){return r("justknobx")._("1399")}function d(){if(s==null)throw r("FBLogger")("messenger_web").mustfixThrow("LogDB IndexDB should've been initialized");return s}function m(){return u==null?f().then(function(){return d()}):u.then(function(){return d()})}function p(){return s!=null}var _=[function(e){var t=e.target.transaction;o("WAExceededStorageQuota").listenToQuotaExceededError(t);var n=t.db.createObjectStore("logs",{autoIncrement:!0,keyPath:"id"});n.createIndex("date","date",{unique:!1})}];function f(t){var r;if(u!=null)return u;if(s!=null)return(e||(e=n("Promise"))).resolve();var a=o("MAWCurrentUser").getID(),i=o("MAWIndexedDbMetadata").logDbName(a),l=(r=t!=null?t:c())!=null?r:_.length;return u=new(e||(e=n("Promise")))(function(e,t){var n=indexedDB.open(i,l);n.onupgradeneeded=function(e){for(var t=0;t<_.length;t++){var n=_[t];g(e,t+1)&&n(e)}},n.onsuccess=function(t){var n=t.target.result;n.onversionchange=function(){n.close()},s=n,e()},n.onerror=function(){t(n.error)}}),u}function g(e,t){var n=e.newVersion,r=e.oldVersion;return r<t&&n>=t}function h(e){return e===o("MAWTransactionMode").READWRITE?"readwrite":"readonly"}function y(e,t,n){var a=h(t);return function(t){return function(){for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];var u=n!=null?o("MAWQplProxy").startQplUserFlow(n):null;return m().then(function(n){var r=function(r){var t=n.transaction(e,r!=null?h(r):a,{durability:"relaxed"});return o("WAExceededStorageQuota").listenToQuotaExceededError(t),t.objectStore(e)};return t.apply(void 0,[r].concat(l))}).then(function(e){return u==null||u.endSuccess(),e}).catch(function(e){u==null||u.endFail("transaction_fail");var t=o("MAWErrorObject").getErrorObject(e),n=r("FBLogger")("maw_db");throw t instanceof Error?n.catching(t).mustfixThrow("LOG - Error performing transaction in log transactor"):n.mustfixThrow("LOG - Error performing transaction in log transactor")})}}}l.getLogDbVersion=c,l.getLogDB=d,l.isLogDBInitted=p,l.dbMigrations=_,l.makeLogMsgrTransactor=y}),98);
__d("MAWLoggingSwitches",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("503");l.removeLoggingFromBridge=e}),98);
__d("MAWSaveLogToDisk",["Deferred","MAWLogIndexedDb","MAWTransactionMode","Promise","asyncToGeneratorRuntime","justknobx","pageID","promiseDone","throttle"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("1403"),u=r("justknobx")._("1404"),c=r("justknobx")._("1401");function d(e){if(Number.isInteger(e))return e;if(typeof e=="string")return(e||"").replace(/\n/g,"");try{return JSON.stringify(e)}catch(e){return"Data could not be serialized"}}function m(e,t){return t===void 0&&(t=""),e.length>0?"["+e.join("|")+"]":t}function p(e){switch(e){case"logRestricted":return"warn";case"count":return"log";case"debug":case"log":case"warn":case"error":return e}}function _(e){return{args:e.logString,date:e.date,event:m(e.tags,"[]"),level:p(e.logLevel)}}function f(e,t,n,r,o,a){return{args:e+"; ERROR="+n.message+";",data:{entriesToReport:o,error:n,framesToPop:r,stack:a},date:Date.now(),event:m(t,"[]"),level:"error"}}var g=[],h=[],y=5,C=0,b=!1,v=function(){g.length=0},S=function(t){var e=I(t);h.length<y?h.push(e):h[C%y]=e,C=(C+1)%y},R=function(r){for(var t=[],o=0;o<r;){var a=((C-o-1)%y+y)%y,i=h[a];t.push(i),o++}return(e||(e=n("Promise"))).resolve(t)},L=function(t,n){g.push({context:t,logEntry:n}),S({context:t,logEntry:n}),g.length>s?r("promiseDone")(E()):k()},E=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){b=!0;try{var e=[].concat(g);v(),yield T(e)}catch(e){}b=!1});return function(){return e.apply(this,arguments)}})(),k=r("throttle")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!b){b=!0;try{var e=[].concat(g);v(),yield T(e)}catch(e){}b=!1}}),u),I=function(t){var e=t.context,n=t.logEntry;return Object.entries(n).reduce(function(e,t){var n=t[0],r=t[1];return e[n]=d(r),e},babelHelpers.extends({},n,{category:e+"-"+r("pageID")}))},T=o("MAWLogIndexedDb").makeLogMsgrTransactor("logs",o("MAWTransactionMode").READWRITE)(function(e,t){var n=new(r("Deferred")),o=e();return t.forEach(function(e){o.add(I(e))}),o.transaction.oncomplete=function(){return n.resolve()},o.transaction.onerror=function(e){return n.reject(e)},n.getPromise()}),D=o("MAWLogIndexedDb").makeLogMsgrTransactor("logs",o("MAWTransactionMode").READONLY)(function(e){var t=new(r("Deferred")),n=e(),o=n.getAll();return o.onsuccess=function(e){var n=e.target.result,r=n.slice(Math.max(0,n.length-c));t.resolve(r)},o.onerror=function(e){return t.reject(e)},t.getPromise()}),x=function(){return D().catch(function(e){return[]})},$=function(t){var e=t<=h.length?R(t):P(t);return e.catch(function(e){return[]})},P=o("MAWLogIndexedDb").makeLogMsgrTransactor("logs",o("MAWTransactionMode").READONLY)(function(e,t){var n=new(r("Deferred")),o=e(),a=o.index("date"),i=a.openCursor(null,"prev"),l=[];return i.onsuccess=function(e){var r=e.target.result;if(r==null){n.resolve(l);return}if(l.push(r.value),l.length>=t){n.resolve(l);return}r.continue()},i.onerror=function(e){return n.reject(e)},n.getPromise()});l.joinTags=m,l.formatLog=_,l.formatErrorForLogging=f,l.clearLogEntryCache=v,l.saveLogEntry=L,l.forceCachedLogEntryPersist=E,l.getEntriesFromDb=x,l.getLastNEntries=$}),98);
__d("WADevToolsBridge",["WADynamicRouterAsync"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WADynamicRouterAsync")).DynamicRouter;function s(){return e}l.getDevToolBridge=s}),98);
__d("MAWLoggerUtils",["ErrorBrowserConsole","ErrorPubSub","MAWLeakDetection","MAWLoggingSwitches","MAWSaveLogToDisk","Random","ServerJsRuntimeEnvironment","WADevToolsBridge","WAJids","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1;function u(e,t){var n=c.has(e==null?void 0:e.project);if(n){var o,a,i;f(e.type==="error"||e.type==="fatal"?"error":e.type==="warn"?"warn":"log",e.message,(o=e.tags)!=null?o:[],(a=(i=e.metadata)==null?void 0:i.includes("MESSENGER_E2EE_WEB:ENVIRONMENT:worker"))!=null?a:!1)}t&&r("ErrorBrowserConsole").errorListener(e)}var c=new Set(["messenger_web","wmi_eb","labyrinth_web","messenger_web_media","messenger_web_calling","mps","wmi","MAWCacheService","MAWUIPersistedDataServices","fts_worker","maw_threads"]),d={CleanerPurge:"CleanerPurge",CleanerStart:"CleanerStart",CleanerTimestamp:"CleanerTimestamp",CleanerUpdate:"CleanerUpdate",Countdown:"Countdown",Ephemeral:"Ephemeral",Incoming:"Incoming",MsgCleaner:"MsgCleaner",OnLoad:"OnLoad",OnRead:"OnRead",Outgoing:"Outgoing",PeerReceipt:"PeerReceipt",SettingChange:"SettingChange",SettingSync:"SettingSync",DeviceRegistration:"DeviceRegistration",MessageReceive:"MessageReceive",MediaDownload:"MediaDownload",WorkerSetup:"WorkerSetup",MAWWorker:"MAWWorker",MAWInit:"MAWInit",LogoutHandler:"LogoutHandler",MiActMapping:"MiActMapping",ThreadReady:"ThreadReady"};function m(){return Math.floor(Date.now()+o("Random").random()*1e4+1e4)}function p(e){var t=e.split("");return t.reduce(function(e,t){var n=t.charCodeAt(0),r=(e<<5)-e+n;return r&=r,r},0)}function _(){if(!s){s=!0;var t=r("gkx")("2656");(e||(e=r("ErrorPubSub"))).removeListener(r("ErrorBrowserConsole").errorListener),e.addListener(function(e){return u(e,t)})}}function f(e,t,n,a){if(!o("ServerJsRuntimeEnvironment").isRunningServerJsRuntime()){var i=o("MAWLeakDetection").maybeReplaceVaultedString(o("WAJids").maybeSanitizeLogLineText(t)),l=Date.now();if(r("gkx")("3282")&&o("WADevToolsBridge").getDevToolBridge().fireAndForget("devtool","logLine",{logLevel:e,logString:g(i,n)},!0),!!o("MAWLoggingSwitches").removeLoggingFromBridge){var s=i.replace(/\n/g," ");e==="debug"||typeof s!="string"||o("MAWSaveLogToDisk").saveLogEntry(a?"worker":"browser",{args:s,date:l,event:o("MAWSaveLogToDisk").joinTags(n,"[unknown]"),level:e})}}}function g(e,t){return t.length>0?o("MAWSaveLogToDisk").joinTags(t)+" "+e:e}l.Tag=d,l.getInstanceKey=m,l.getInstanceKeyFromId=p,l.initMessengerWebLogging=_,l.logToHistory=f}),98);
__d("MNLSXMALayoutType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28,CONDENSED_LINK:29,DOODLE_SPACE:30});i.default=e}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21,FUBS_EXCLUSIVE_CONTENT_TEASER:22});i.default=e}),66);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){var n=this;this.$1=e,this.$2=t,this.$3=new(r("LSPlatformRequestScheduler")),this.$4=o("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(e,function(t){var r=t.queueName,o=t.transportKey;return n.$6(e,r,o,!1)}),this.$5=o("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(e,function(t){var r=t.queueName,o=t.transportKey;return n.$6(e,r,o,!0)}),this.$7()}var t=e.prototype;return t.$6=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){yield this.$2.decideWhatToDoWithTask(e,t,n,r)});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),t.$7=function(){var e=this;o("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(t){var n=t.queueName;return e.$6(e.$1,n)})},t.cleanup=function(){this.$4.forEach(function(e){return e()}),this.$5.forEach(function(e){return e()}),this.$2.cleanup()},e})();l.default=e}),98);
__d("MessagingAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});i.default=e}),66);
__d("NestedTimeRange",["SimpleHook","performance","performanceAbsoluteNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new(o("SimpleHook")).SimpleHook,c=new(o("SimpleHook")).SimpleHook,d="/";function m(e,t){return""+e+d+t}var p=(function(){function t(e,t){t===void 0&&(t=null),this.$3=0,this.$1=e,this.$2=t}var n=t.prototype;return n.isRunning=function(){return this.$3>0},n.fullname=function(){return this.$2!==null?m(this.$2.fullname(),this.$1):this.$1},n.start=function(n){if(n===void 0&&(n=(e||(e=r("performanceAbsoluteNow")))()),this.$3===0){var t;(t=this.$2)==null||t.start(n),this.__onStart(n)}return++this.$3,n},n.__onStart=function(t){u.call(this,t)},n.stop=function(n){if(n===void 0&&(n=(e||(e=r("performanceAbsoluteNow")))()),--this.$3,this.$3===0){var t;this.__onStop(n),(t=this.$2)==null||t.stop(n)}return n},n.__onStop=function(t){c.call(this,t)},t})();function _(){(s||(s=r("performance"))).mark&&(s||(s=r("performance"))).measure&&(u.add(function(e,t){(s||(s=r("performance"))).mark(e.fullname()+"_start")}),c.add(function(e,t){(s||(s=r("performance"))).measure(e.fullname(),e.fullname()+"_start")}))}l.OnRangeStart=u,l.OnRangeStop=c,l.TIME_RANGE_LEVEL_SEPARATOR=d,l.rangeFullName=m,l.NestedTimeRange=p,l.enableDevConsoleTimeline=_}),98);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("4194303");function u(){return(e||(e=o("I64"))).to_string(c())}function c(){var t=o("XPlatReactCrypto").getRandomValues(new Uint8Array(8)),n=new DataView(t.buffer),r=(e||(e=o("I64"))).add(e.lsl_(e.of_int32(n.getUint32(0)),32),e.of_int32(n.getUint32(4)));return d(Date.now(),r)}function d(t,n){return(e||(e=o("I64"))).and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(n,s)),e.max_int)}function m(t){for(var n=c(),r=[],a=0;a<t.length;a++)r.push([t[a],(e||(e=o("I64"))).to_string(n)]),n=p(n);return r}function p(t,n){n===void 0&&(n=(e||(e=o("I64"))).one);var r=_(t),a=f(t);return d(r,(e||(e=o("I64"))).add(a,n))}function _(t){return(e||(e=o("I64"))).to_float(e.lsr_(t,22))}function f(t){return(e||(e=o("I64"))).and_(t,s)}l.createOfflineThreadingID=u,l.createForItemsInOrder=m,l.createNewFromExisting=p,l.extractTimestamp=_}),98);
__d("QLogEvent",["DoubleKeyMap","FBLogger","NestedTimeRange","QPLEvent","SimpleHook","performanceNavigationStart"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new(o("DoubleKeyMap")).DoubleKeyMap,c=(function(e){function t(t,n,r){var o;return o=e.call(this,t,r)||this,o.$QPLRange$p_1=n,u.set(n,o.fullname(),o),o}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.__onStart=function(n){e.prototype.__onStart.call(this,n),this.$QPLRange$p_1.point(this.fullname()+"_START",{timestamp:n})},n.__onStop=function(n){e.prototype.__onStop.call(this,n),this.$QPLRange$p_1.point(this.fullname()+"_END",{timestamp:n}),u.delete(this.$QPLRange$p_1,this.fullname())},n.range=function(n){var e;this.fullname().startsWith(o("NestedTimeRange").TIME_RANGE_LEVEL_SEPARATOR)||r("FBLogger")("qpl").warn("Range %s cannot have subrange since root name does not start with /",this.fullname());var a=o("NestedTimeRange").rangeFullName(this.fullname(),n);return(e=u.get(this.$QPLRange$p_1,a))!=null?e:new t(n,this.$QPLRange$p_1,this)},t})(o("NestedTimeRange").NestedTimeRange),d=new(o("DoubleKeyMap")).DoubleKeyMap,m=new(s=o("SimpleHook")).SimpleHook,p=new s.SimpleHook,_=new s.SimpleHook,f=new s.SimpleHook,g=(function(t){function n(n,r,a,i,l){var s;r===void 0&&(r=0),a===void 0&&(a=2),i===void 0&&(i=!1);var u=(e||(e=o("QPLEvent"))).getMarkerId(n);return s=t.call(this,"event_"+u)||this,s.event=n,s.instanceKey=r,s.$QPLEvent$p_1=a,s.isUserFlow=i,s.$QPLEvent$p_2=l,d.set(u,r,s),s}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.action=function(t){return this.$QPLEvent$p_1=t,this},a.getAction=function(){return this.$QPLEvent$p_1},a.setIsUserFlow=function(t){return this.isUserFlow=t,this},a.startFromNavStart=function(){return this.start(r("performanceNavigationStart")()),this},a.startFromTime=function(t){return this.start(t),this},a.__onStart=function(t){var e;(e=this.$QPLEvent$p_2)==null||e.onStart(this,t),m.call(this,t)},a.__onStop=function(n){var t;(t=this.$QPLEvent$p_2)==null||t.onStop(this,n),p.call(this,n),u.deleteAll(this),d.delete((e||(e=o("QPLEvent"))).getMarkerId(this.event),this.instanceKey)},a.range=function(t){var e;return(e=u.get(this,t))!=null?e:new c(t,this)},a.point=function(t,n){var e;return n===void 0&&(n={}),(e=this.$QPLEvent$p_2)==null||e.onPoint(this,t,n),_.call(this,t,n),this},a.annotate=function(t){var e;return(e=this.$QPLEvent$p_2)==null||e.onAnnotate(this,t),f.call(this,t),this},n})(o("NestedTimeRange").NestedTimeRange);function h(t,n,r){var a;return n===void 0&&(n=0),(a=d.get((e||(e=o("QPLEvent"))).getMarkerId(t),n))!=null?a:new g(t,n,2,!1,r)}l.OnEventStart=m,l.OnEventStop=p,l.OnEventPoint=_,l.OnEventAnnotate=f,l.QPLEvent=g,l.event=h}),98);
__d("URLMatcherConfig",[],(function(t,n,r,o,a,i){a.exports={tlds:"(?:\\.(com|\uD55C\uAD6D|\uC0BC\uC131|\uB2F7\uCEF4|\uB2F7\uB137|\u9999\u6E2F|\u9999\u683C\u91CC\u62C9|\u9910\u5385|\u98DF\u54C1|\u98DE\u5229\u6D66|\u96FB\u8A0A\u76C8\u79D1|\u96C6\u56E2|\u901A\u8CA9|\u8D2D\u7269|\u8C37\u6B4C|\u8BFA\u57FA\u4E9A|\u8054\u901A|\u7F51\u7EDC|\u7F51\u7AD9|\u7F51\u5E97|\u7F51\u5740|\u7EC4\u7EC7\u673A\u6784|\u79FB\u52A8|\u73E0\u5B9D|\u70B9\u770B|\u6FB3\u9580|\u6E38\u620F|\u6DE1\u9A6C\u9521|\u673A\u6784|\u66F8\u7C4D|\u65F6\u5C1A|\u65B0\u95FB|\u65B0\u52A0\u5761|\u653F\u5E9C|\u653F\u52A1|\u624B\u8868|\u624B\u673A|\u6211\u7231\u4F60|\u6148\u5584|\u5FAE\u535A|\u5E7F\u4E1C|\u5DE5\u884C|\u5BB6\u96FB|\u5A31\u4E50|\u5929\u4E3B\u6559|\u5927\u62FF|\u5927\u4F17\u6C7D\u8F66|\u5728\u7EBF|\u5609\u91CC\u5927\u9152\u5E97|\u5609\u91CC|\u5546\u6807|\u5546\u5E97|\u5546\u57CE|\u53F0\u7063|\u53F0\u6E7E|\u516C\u76CA|\u516C\u53F8|\u516B\u5366|\u5065\u5EB7|\u4FE1\u606F|\u4F5B\u5C71|\u4F01\u4E1A|\u4E2D\u6587\u7F51|\u4E2D\u570B|\u4E2D\u56FD|\u4E2D\u4FE1|\u4E16\u754C|\u30DD\u30A4\u30F3\u30C8|\u30D5\u30A1\u30C3\u30B7\u30E7\u30F3|\u30BB\u30FC\u30EB|\u30B9\u30C8\u30A2|\u30B3\u30E0|\u30B0\u30FC\u30B0\u30EB|\u30AF\u30E9\u30A6\u30C9|\u307F\u3093\u306A|\u10D2\u10D4|\u0E44\u0E17\u0E22|\u0E04\u0E2D\u0E21|\u0DBD\u0D82\u0D9A\u0DCF|\u0D2D\u0D3E\u0D30\u0D24\u0D02|\u0CAD\u0CBE\u0CB0\u0CA4|\u0C2D\u0C3E\u0C30\u0C24\u0C4D|\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD|\u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8|\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE|\u0B2D\u0B3E\u0B30\u0B24|\u0AAD\u0ABE\u0AB0\u0AA4|\u0A2D\u0A3E\u0A30\u0A24|\u09AD\u09BE\u09F0\u09A4|\u09AD\u09BE\u09B0\u09A4|\u09AC\u09BE\u0982\u09B2\u09BE|\u0938\u0902\u0917\u0920\u0928|\u092D\u093E\u0930\u094B\u0924|\u092D\u093E\u0930\u0924\u092E\u094D|\u092D\u093E\u0930\u0924|\u0928\u0947\u091F|\u0915\u0949\u092E|\u0680\u0627\u0631\u062A|\u067E\u0627\u06A9\u0633\u062A\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064A\u0644\u064A|\u0645\u0644\u064A\u0633\u064A\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062B\u0648\u0644\u064A\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064A\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064A\u0629|\u0633\u0648\u062F\u0627\u0646|\u062A\u0648\u0646\u0633|\u0628\u06BE\u0627\u0631\u062A|\u0628\u064A\u062A\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062A|\u0627\u06CC\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062A|\u0627\u0644\u0645\u063A\u0631\u0628|\u0627\u0644\u0639\u0644\u064A\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629|\u0627\u0644\u062C\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062F\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062A\u0635\u0627\u0644\u0627\u062A|\u0627\u0628\u0648\u0638\u0628\u064A|\u05E7\u05D5\u05DD|\u0570\u0561\u0575|\u049B\u0430\u0437|\u0443\u043A\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043E\u0440\u0433|\u043E\u043D\u043B\u0430\u0439\u043D|\u043C\u043E\u0441\u043A\u0432\u0430|\u043C\u043E\u043D|\u043C\u043A\u0434|\u043A\u043E\u043C|\u043A\u0430\u0442\u043E\u043B\u0438\u043A|\u0435\u044E|\u0434\u0435\u0442\u0438|\u0431\u0435\u043B|\u0431\u0433|\u03B5\u03BB|zw|zuerich|zone|zm|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qxa6a|xn--qcka1pmc|xn--q9jyb4c|xn--q7ce6a|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--otu796d|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbcpq6gpa1a|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbah1a3hjkrd|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq480n2rg|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cckwcxetd|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--4dbrk0ce|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|wanggou|wang|walter|walmart|wales|vu|voyage|voto|voting|vote|volvo|vodka|vn|vlaanderen|vivo|viva|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statefarm|statebank|star|staples|stada|st|ss|srl|sr|spot|sport|space|spa|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|show|shouji|shopping|shop|shoes|shiksha|shia|shell|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|services|sener|select|seek|security|secure|seat|search|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sc|sbs|sbi|sb|saxo|save|sas|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|ro|rip|rio|ril|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|radio|racing|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|party|parts|partners|pars|paris|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|online|onl|ong|one|omega|om|ollo|olayangroup|olayan|okinawa|office|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|name|nagoya|nab|na|mz|my|mx|mw|mv|music|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movie|mov|motorcycles|moto|moscow|mortgage|mormon|monster|money|monash|mom|moi|moe|moda|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|merckmsd|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|ma|ly|lv|luxury|luxe|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|locus|locker|loans|loan|llp|llc|lk|living|live|lipsy|link|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancaster|lamer|lamborghini|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kim|kids|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jio|jewelry|jetzt|jeep|je|jcb|java|jaguar|itv|itau|it|istanbul|ist|ismaili|is|irish|ir|iq|ipiranga|io|investments|intuit|international|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hot|hosting|host|hospital|horse|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujitsu|ftr|frontier|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|events|eus|eurovision|eu|et|estate|esq|es|erni|ericsson|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|dunlop|dubai|dtv|drive|download|dot|domains|dog|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrome|christmas|chintai|cheap|chat|chase|charity|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbre|cbn|cba|catholic|catering|cat|casino|cash|case|casa|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|amazon|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|al|akdn|airtel|airforce|airbus|aig|ai|agency|agakhan|ag|africa|afl|af|aetna|aero|aeg|ae|adult|ads|ad|actor|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|aarp|aaa))"}}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(t,n,r,o,a,i){var e="!\"#%&'()*,-./:;<>?@[\\]^_`{|}",l="\u2000-\u206F\xAB\xBB\uFF08\uFF09",s="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])",u="(?:https?)://",c="(?:(^|\\s)(?:"+s+"[.]){3}"+s+")",d=c,m="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",p="(?:\\b)www\\d{0,3}[.]",_="[^\\s"+e+l+"]",f="(?:(?:(?:[.:\\-_%@]|"+_+")*"+_+")|"+m+")",g="(?::\\d+){0,1}",h="(?=[/?#])",y=n("URLMatcherConfig").tlds,C="(?:(?:"+u+f+g+")|(?:"+d+g+")|(?:"+m+g+")|(?:"+p+f+y+g+")|(?:"+f+y+g+h+"))",b="(?:(?:"+u+f+g+")|(?:"+d+g+")|(?:"+m+g+")|(?:"+p+f+y+g+")|(?:"+f+y+g+"))",v="[/#?]",S="\\([^\\s()<>]+\\)",R="[^\\s()<>?#]+",L=new RegExp(C,"im"),E="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",k=new RegExp(E,"im"),I="(?:(?:"+v+")(?:(?:"+S+"|"+R+")*)*)*",T=new RegExp("((?:"+b+")(?:"+I+"))","im");function D(){T.compile()}var x=new RegExp("((?:"+u+f+g+")|(?:"+p+f+y+g+"))"),$=/[\s\'\";]/,P=new RegExp(v,"im"),N=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xAB\xBB\u2000-\u206F\uFF08\uFF09]","im"),M=new RegExp("[\\s()<>?#]","im"),w=new RegExp("\\s()<>"),A=function(t){return t!=null&&t.indexOf("@")!==-1?x.exec(t)?t:null:t},F=function(t){return new RegExp("((?:"+C+")(?:"+I+"))",t)};function O(){return T.source}var B=function(t){return U(t,F("im"))},W=function(t){return V(t,F("igm"))},q=function(t){return U(t,T)},U=function(t,n){var e=n.exec(t);return e==null||e.length===0?null:A(e[1]||null)},V=function(t,n){var e=t.match(n);return e==null?[]:e.filter(Boolean)||[]},H=function(t){return L.exec(t)},G=function(t){return!$.test(t.charAt(t.length-1))},z=function(t){var e=t,n=!1;do{var r,o=L.exec(e);if(!o)return null;if(((r=o[1])==null?void 0:r.trim())===""&&(o[0]=o[0].trim(),o.index+=o[1].length),n=!1,o[0][0]==="["&&o.index>0&&e[o.index-1]==="@"){var a=k.exec(o[0]);a&&(n=!0,e=e.substr(o.index+a[0].length))}}while(n);if(!o)return null;var i=e.substr(o.index+o[0].length);if(i.length===0||!P.test(i[0]))return A(o[0]);for(var l=0,s=0,u=1,c=["(","["],d=[")","]"],m=0,p=s,_=1;_<i.length;_++){var f=i[_];if(p===s){if(c.includes(f))m+=1,p=u;else if(P.test(f)||!N.test(f))l=_;else if(M.test(f))break}else if(c.includes(f))m+=1;else if(d.includes(f))m-=1,m===0&&(p=s,l=_);else if(w.test(f))break}return A(o[0]+i.substring(0,l+1))},j={compilePermissiveHostPathMatcher:D,permissiveHostPathMatch:q,permissiveMatch:B,permissiveMultiMatch:W,matchToPattern:U,multiMatchToPattern:V,matchHost:H,trigger:G,match:z,getPermissiveHostPathMatcherSource:O};a.exports=j}),null);
__d("VirtualMessageChannel",["invariant","Promise","SimpleHook","nullthrows","promiseDone"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(function(){function t(e){e===void 0&&(e=!1),this.$2=new(o("SimpleHook")).SimpleHook,this.onmessage=null,this.onmessageerror=null,this.$3=e}var a=t.prototype;return a.setRemotePort=function(t){this.$1=t},a.addEventListener=function(t,n,r){if((t==="message"||t==="error")&&r==null||s(0,55320,t),t==="message")if(typeof n=="function")this.$2.add(n);else{var e=n.handleEvent.bind(n);this.$2.add(e),n.__handler=e}},a.removeEventListener=function(t,n,r){if(typeof n=="function")this.$2.remove(n);else{var e=n.__handler;this.$2.remove(e)}},a.postMessage=function(o,a){var t=this,i=function(){var e=r("nullthrows")(t.$1,"By now remote port must have value!");e.$2.call({data:o,ports:a})};this.$3?i():r("promiseDone")((e||(e=n("Promise"))).resolve(),i)},a.start=function(){},a.close=function(){},t})(),c=function(t,n){this.port1=new u(t),this.port2=new u(n),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};l.VirtualMessagePort=u,l.VirtualMessageChannel=c}),98);
__d("WACustomError",[],(function(t,n,r,o,a,i){"use strict";var e=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function l(t,n,r){n===void 0&&(n=!0);function o(e){var r=Error.call(this,e);this.message=e,r.name=t,this.name=t,n&&(this.stack=r.stack)}return o.prototype=Object.create(r?r.prototype:e),o.prototype.constructor=o,o}function s(e){return e.length===0?"No errors":e.length===1?e[0].message:e.map(function(e){return"- "+e.message}).join("\n")}var u=(function(e){function t(t,n){var r,o=n!=null&&n.length>0?n:s(t);return r=e.call(this,o)||this,r.errors=t,r}return babelHelpers.inheritsLoose(t,e),t})(l("AggregateError",!0)),c=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(l("TimeoutError",!1)),d=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.code=n,r}return babelHelpers.inheritsLoose(t,e),t})(l("HttpError",!1)),m=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(l("UnimplementedMethod")),p=!1;function _(e){if(e==null||e.name!=="QuotaExceededError")throw e;p=!0}function f(){return p}function g(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))}var h=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.inner=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.customError=l,i.AggregateError=u,i.TimeoutError=c,i.HttpError=d,i.UnimplementedMethod=m,i.supressQuotaExceededError=_,i.hasSupressedQuotaExceededError=f,i.obtainErrorSummary=g,i.WrappedError=h}),66);
__d("WAAbortError",["WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(o("WACustomError").customError("AbortError")),s="AbortError";function u(e){return function(t){if(t.name===s)return e(t);throw t}}l.AbortError=e,l.ABORT_ERROR=s,l.catchAbort=u}),98);
__d("WALongInt",["WAHex","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){if(typeof t!="number")throw o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"])),t).color("red"),new Error("numberOrThrowIfTooLarge is given a non-safe integer");return t}var d=function(t){return t==null?t:c(t)};function m(e){return e==null||typeof e!="number"?null:e}function p(e,t){if(typeof e=="number"&&typeof t=="number")return e>t;var n=typeof e=="number"?o("WAHex").hexLongFromNumber(e):e,r=typeof t=="number"?o("WAHex").hexLongFromNumber(t):t;return o("WAHex").isBiggerHexLong(n,r)}function _(e){if(typeof e=="number")return e.toString(10);for(var t=o("WAHex").hexLongToHex(e),n=[0],r=0,a=0;a<t.length;a++){r=o("WAHex").hexAt(t,a);for(var i=0;i<n.length;i++)n[i]=n[i]*16+r,r=n[i]/10|0,n[i]%=10;for(;r>0;)n.push(r%10),r=r/10|0}var l=n.reverse().join("");return o("WAHex").hexLongIsNegative(e)?"-"+l:l}function f(e){if(!/^-?\d+$/.test(e))throw o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string'])),e).color("red"),new Error("decimalStringToLongInt is given an invalid decimal string");var t=e[0]==="-",n=e.replace(/^-?0*/,""),r=n.length;if(r<16||r===16&&n<="9007199254740991")return t?-Number(n):Number(n);if(r>20||r===20&&n>"18446744073709551615"||t&&(r>19||r===19&&n>"9223372036854775807"))throw o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits'])),e).color("red"),new Error("decimalStringToHexLong is given value over 64 bits");for(var a=0,i=0,l=0;l<r;l++)a=a*10+Number(n[l]),i=i*10+Math.floor(a/4294967296),a=a%4294967296;return o("WAHex").createHexLongFrom32Bits(i,a,t)}l.numberOrThrowIfTooLarge=c,l.maybeNumberOrThrowIfTooLarge=d,l.maybeNumber=m,l.isBiggerLongInt=p,l.longIntToDecimalString=_,l.decimalStringToLongInt=f}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r){return new(e||(e=n("Promise")))(function(e,n){if(r!=null&&r.aborted)throw new(o("WAAbortError")).AbortError;var a=setTimeout(i,t);r==null||r.addEventListener("abort",l);function i(){r==null||r.removeEventListener("abort",l),e()}function l(){r==null||r.removeEventListener("abort",l),clearTimeout(a),n(new(o("WAAbortError")).AbortError)}})}function u(t,r,o){return new(e||(e=n("Promise")))(function(e,n){var a=setTimeout(function(){try{e(o())}catch(e){n(e)}},r);t.then(function(t){clearTimeout(a),e(t)},function(e){clearTimeout(a),n(e)})})}l.delayMs=s,l.withTimeout=u}),98);
__d("WARetryableError",["WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,"see error at this.source")||this,n.source=t,n}return babelHelpers.inheritsLoose(t,e),t})(o("WACustomError").customError("RetryableError"));l.default=e}),98);
__d("WAWorkerGlobalScope",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){return typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:self})();i.workerGlobalScope=e}),66);
__d("WorkerMessagePortLogging",["MainPageUrl","QLogEvent","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=Math.random()<.1,s=20,u=100,c=50;function d(){return o("MainPageUrl").isWorkerLogEnabled()||o("MainPageUrl").mainPageUrl.searchParams.get("worker_log")===1}var m=0;function p(){return o("QLogEvent").event(r("qpl")._(41497718,"106"),m++)}function _(t,n,r){if(r===void 0&&(r=!1),!(n==null||!e)){var o=n.sendDelayHighPrecision,a=n.sendTimestamp,i=n.sendDateTime,l=n.receiveTimestamp,d=n.receiveDateTime,m=p();m.startFromTime();var _=m.range("SEND_DELAY");_.start(a),_.stop(l);var f=m.range("SEND_DELAY_LOW_PRECISION");f.start(i),f.stop(d);var g=Math.abs(a-i),h=Math.abs(l-d);if(m.annotate({string:{port_name:t},int:{send_delay:o,send_drift:g,receive_drift:h},bool:{send_delay_above_max:o!=null&&o>s,send_drift_above_max:g>u,receive_drift_above_max:h>u}}),r){var y=m.range("ROUND_TRIP");y.start(n.sendTimestamp),y.stop(n.receiveTimestamp);var C=n.receiveTimestamp-n.sendTimestamp;m.annotate({int:{round_trip:C},bool:{round_trip_above_max:C>c}})}m.stop()}}l.isWorkerLogEnabled=d,l.logMessageTiming=_}),98);
__d("WorkerMessagePort",["Deferred","FBLogger","MainPageUrl","Promise","PromiseAnnotate","SimpleHook","VirtualMessageChannel","WorkerMessagePortLogging","performanceAbsoluteNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return e}var d=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SimpleHook").SimpleHook);function m(e,t){var n=e;n.__timing=t}function p(e){return e.__timing}var _=(function(){function e(e,t){var n=this;this.$1={},this.onUnhandledMessage=new d,this.onMessage=new d,this.onPostMessage=new d,this.onError=new d,this.$2=e,this.name=t,this.$2.addEventListener("message",function(e){return n.onMessageHandler(e.data)}),this.$2.addEventListener("error",function(e){return n.onError.call(e)}),this.onPostMessage.add(function(e){m(e,{receiveDateTime:-1,receiveTimestamp:-1,sendDateTime:Date.now(),sendDelayHighPrecision:0,sendDelayLowPrecision:0,sendTimestamp:(u||(u=r("performanceAbsoluteNow")))()})}),this.onMessage.add(function(e){var t=p(e);if(t!=null){var a=t.sendDateTime,i=t.sendTimestamp,l=(u||(u=r("performanceAbsoluteNow")))(),s=Date.now();t.receiveTimestamp=l,t.receiveDateTime=s,t.sendDelayHighPrecision=l-i,t.sendDelayLowPrecision=s-a,o("WorkerMessagePortLogging").logMessageTiming(n.name,t)}})}var t=e.prototype;return t.onMessageHandler=function(t){try{this.onMessage.call(t);var e=this.$1[t.type];e?e.call(t):this.onUnhandledMessage.call(t)}catch(e){this.onError.call(e)}},t.postMessage=function(t,n){this.onPostMessage.call(t),n?this.$2.postMessage(t,n):this.$2.postMessage(t)},t.addMessageListener=function(t,n){var e=this.$1[t];return e||(e=new d,this.$1[t]=e),e.add(n)},t.removeMessageListener=function(t,n){var e=this.$1[t];return!!e&&e.remove(n)},t.removeAllMessageListeners=function(t){var e=this.$1[t];e&&e.clear()},t.onMessageOnce=function(t,r){var e=this;return new(s||(s=n("Promise")))(function(n){var o=e.addMessageListener(t,function(a){r(a)&&(e.removeMessageListener(t,o),n(a))})})},t.close=function(){var e=this.$2;e.close==null||e.close(),e.terminate==null||e.terminate()},t.isWrappingVirtualMessagePort=function(){return this.$2 instanceof o("VirtualMessageChannel").VirtualMessagePort},e})();function f(e){return e}var g=(function(t){function a(a,i){var l;l=t.call(this,a,i)||this;var u=f(l),c=new(r("Deferred")),d=c.getPromise();u.addMessageListener("endpoint_started",function(e){c.resolve(e);var t=p(e);u.postMessage({endpoint:e.endpoint,startSendTimestamp:t==null?void 0:t.sendTimestamp,targetEndpoint:l.name,type:"endpoint_started_received"})});var m=u.onMessageOnce("endpoint_started_received",function(){return!0});return(e||(e=o("PromiseAnnotate"))).setDisplayName(d,"endpoint_started"),e.setDisplayName(m,"endpoint_started_received"),u.postMessage({endpoint:l.name,type:"endpoint_started"}),r("promiseDone")(d,function(e){var t=p(e);o("WorkerMessagePortLogging").logMessageTiming(l.name,t)}),r("promiseDone")(m,function(e){var t=p(e);t!=null&&o("WorkerMessagePortLogging").logMessageTiming(l.name,t,!0)}),l.fullyConnected=(s||(s=n("Promise"))).race([d,m]).then(function(){return l}),l}return babelHelpers.inheritsLoose(a,t),a})(_);l.getMessageTiming=p,l.WorkerMessagePort=_,l.CastWorkerMessagePort=f,l.WorkerSyncedMessagePort=g}),98);
__d("XPlatRelayEnvironment",["CometRelayEnvironment","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw r("err")("RelayEnvironment is already set")}function s(){return r("CometRelayEnvironment")}l.setRelayEnvironment=e,l.getRelayEnvironment=s}),98);
__d("getMWLSRegion",["MessengerWebRegion"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("MessengerWebRegion").regionNullable;return e==null?"":e}l.default=e}),98);
__d("last",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=null;if(Array.isArray(e)||typeof e=="string")e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;return t?t.value:null}i.default=e}),66);
__d("mergeDeep",["mergeDeepInto","mergeHelpers"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var o,a=(o=r("mergeHelpers")).normalizeMergeArg(e),i=o.normalizeMergeArg(t);o.checkMergeObjectArgs(a,i),o.checkArrayStrategy(n);var l={};return r("mergeDeepInto")(l,a,n),r("mergeDeepInto")(l,i,n),l}l.default=e}),98);/*FB_PKG_DELIM*/
__d("BarcelonaCommonStrings",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e="Threads",u=s._(/*BTDS*/"Something went wrong"),c=s._(/*BTDS*/"Something went wrong, please try again later."),d=s._(/*BTDS*/"Report a problem");l.APP_NAME=e,l.GENERIC_ERROR_MESSAGE=u,l.GENERIC_ERROR_MESSAGE_WITH_RETRY=c,l.REPORT_PROBLEM_LABEL=d}),226);
__d("BarcelonaWebStorage",["WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=e}var n=t.prototype;return n.getItem=function(t){return this.$1.getItem(t)},n.removeItem=function(t){this.$1.removeItem(t)},n.setItemGuarded=function(n,o){return(e||(e=r("WebStorage"))).setItemGuarded(this.$1,n,o)},n.setItemOrThrow=function(t,n){this.$1.setItem(t,n)},t})(),u=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.getItem=function(t){return this.$1.get(t)},t.removeItem=function(t){this.$1.delete(t)},t.setItemGuarded=function(t,n){return this.setItemOrThrow(t,n)},t.setItemOrThrow=function(t,n){this.$1.set(t,n)},e})(),c=new u;function d(){var t=(e||(e=r("WebStorage"))).getLocalStorage();return t==null?c:new s(t)}function m(){var t=(e||(e=r("WebStorage"))).getLocalStorageForRead();return t==null?c:new s(t)}function p(){var t=(e||(e=r("WebStorage"))).getSessionStorage();return t==null?c:new s(t)}function _(){var t=(e||(e=r("WebStorage"))).getSessionStorageForRead();return t==null?c:new s(t)}l.getLocalStorage=d,l.getLocalStorageForRead=m,l.getSessionStorage=p,l.getSessionStorageForRead=_}),98);
__d("BarcelonaWebStorageKey",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({BADGE:"barcelona_logged_out_home_badge",BIRTHDAY:"th_signup",CAN_LOG_TO_CONSOLE:"can_log_to_console",IS_SUH_ENABLED:"is_suh_enabled",COOKIE_BANNER:"cb",CONSOLE_LOG_FILTER:"console_log_filter",DARK_MODE:"dark_mode",DRAFTS:"draft",FEDIVERSE_BETA_NOTICE:"fediverse_beta_banner_dismissed",FEDIVERSE_COMPOSER_REMINDER:"fediverse_composer_reminder_dismissed",HIDDEN_POSTS:"barcelona_hidden_post_ids",MOBILE_UPSELL:"barcelona_mobile_upsell_state",MULTIPLE_DRAFTS_NUX:"multiple_drafts_tooltip_shown",ORIGINAL_REFERRER:"original_referrer",PIN_TO_HOME:"pin_tooltip_shown",SHARE_FROM_INSTAGRAM_TOOLTIP_SHOWN:"share_from_instagram_tooltip_shown_storage_key",SPOILERS_COMPOSER_BANNER:"spoilers_banner_shown",SPOILERS_COMPOSER_BANNER_COUNT:"spoilers_banner_count",TURKEY_QP_DISMISSED:"barcelona_turkey_qp_dismissed",THREADS_ONLY_TOS_QP_DISMISSED:"barcelona_threads_only_qp_dismissed",XMT:"barcelona_xmt",SNIPPETS_UPSELL_DISMISSED:"barcelona_snippets_upsell_dismissed",SNIPPETS_UPSELL_COUNT:"barcelona_snippets_upsell_count",SNIPPETS_UPSELL_COOLDOWN:"barcelona_snippets_upsell_cooldown"}),l=e;i.default=l}),66);
__d("CometDarkModeContext",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({currentSetting:"DISABLED",onDarkModeToggle:r("emptyFunction"),setDarkModeSetting:r("emptyFunction")});l.default=u}),98);
__d("useSystemPrefersDarkMode",["CometDarkModeSetting","ExecutionEnvironment","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useLayoutEffect,d=u.useState,m="(prefers-color-scheme: dark)",p=new Set;if(window.matchMedia){var _=function(t){p.forEach(function(e){return e(t)})},f=window.matchMedia(m);f.addListener(_)}function g(t){if(!(e||(e=r("ExecutionEnvironment"))).canUseDOM){var n=t();return n==="ENABLED"||n==="USE_SYSTEM"&&o("CometDarkModeSetting").initialGuessForDarkModeOnClient}return window.matchMedia!=null&&window.matchMedia(m).matches}function h(e){var t=d(function(){return g(e)}),n=t[0],r=t[1];return c(function(){var e=function(t){r(t.matches)};return p.add(e),function(){p.delete(e)}},[]),n}l.getSystemPrefersDarkMode=g,l.useSystemPrefersDarkMode=h}),98);
__d("BarcelonaDarkModeStateProvider.react",["BarcelonaWebStorage","BarcelonaWebStorageKey","BaseThemeConfigContext","BaseThemeDisplayModeContext","CometDarkModeContext","CometDarkModeRootClass","gkx","react","refine","useCometSetDarkModeMetaContent","useSystemPrefersDarkMode"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.unstable_ViewTransition,d=u.useCallback,m=u.useLayoutEffect,p=u.useMemo,_=u.useState,f=r("gkx")("4174"),g="__fb-light-mode",h="__fb-dark-mode",y={darkClassName:h,darkVariables:{},lightClassName:g,lightVariables:{}};function C(e){var t=o("refine").coercion(o("refine").stringLiterals({DISABLED:"DISABLED",ENABLED:"ENABLED",USE_SYSTEM:"USE_SYSTEM"}));return t(e)}var b={get:function(){var e=o("BarcelonaWebStorage").getLocalStorage().getItem(r("BarcelonaWebStorageKey").DARK_MODE);return C(e)},set:function(t){o("BarcelonaWebStorage").getLocalStorage().setItemGuarded(r("BarcelonaWebStorageKey").DARK_MODE,t)}};function v(){var e=b.get();return e!=null?e:"USE_SYSTEM"}function S(e,t){return e==="USE_SYSTEM"?t:e==="ENABLED"}function R(){var e=v(),t=o("useSystemPrefersDarkMode").getSystemPrefersDarkMode(v),n=S(e,t);o("CometDarkModeRootClass").updateDarkModeRootClass(n?"ENABLED":"DISABLED"),o("useCometSetDarkModeMetaContent").setDarkModeMetaContent(n)}function L(e){var t=e.children,n=o("useSystemPrefersDarkMode").useSystemPrefersDarkMode(v),a=_(v),i=a[0],l=a[1],u=S(i,n);o("useCometSetDarkModeMetaContent").useCometSetDarkModeMetaContent(u),m(function(){o("CometDarkModeRootClass").updateDarkModeRootClass(u?"ENABLED":"DISABLED")},[i,u,n]);var g=u?"dark":"light",h=d(function(){g==="dark"?(l("DISABLED"),b.set("DISABLED")):(l("ENABLED"),b.set("ENABLED"))},[g]),C=d(function(e){l(e),b.set(e)},[]),R=p(function(){return{currentSetting:i,onDarkModeToggle:h,setDarkModeSetting:C}},[i,h,C]);return s.jsx(r("BaseThemeConfigContext").Provider,{value:y,children:s.jsx(r("BaseThemeDisplayModeContext").Provider,{value:g,children:s.jsx(r("CometDarkModeContext").Provider,{value:R,children:f?s.jsx(c,{update:{default:"none","update-theme":"root"},children:t}):t})})})}L.displayName=L.name+" [from "+i.id+"]",l.initDarkMode=R,l.BarcelonaDarkModeStateProvider=L}),98);
__d("THSpinner.react",["fbt","BaseLoadingStateElement.react","XPlatReactSVG","range","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={large:{count:12,length:25,offset:25,size:32,thickness:6},medium:{count:8,length:28,offset:22,size:24,thickness:10},small:{count:8,length:28,offset:22,size:18,thickness:10}},d="x1rp9ifn-B",m="xqng64z-B",p={root:{color:"x12rw4y6",display:"x1rg5ohu",$$css:!0},rootSizing:function(t){return[{height:t!=null?"x16ye13r":t,width:t!=null?"x5lhr3w":t,$$css:!0},{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},spin12:{animationDuration:"xemfg65",animationIterationCount:"xa4qsjk",animationName:"x1ka1v4i",animationTimingFunction:"xbv57ra",$$css:!0},spin8:{animationDuration:"xemfg65",animationIterationCount:"xa4qsjk",animationName:"xs51kk",animationTimingFunction:"x2a5n4e",$$css:!0}};function _(e){var t=e.disableLoadingStateTracker,n=e.size,a=n===void 0?"medium":n,i=e.xstyle,l=c[a],d=l.count,m=l.length,_=l.offset,f=l.size,g=l.thickness;return u.jsx(r("BaseLoadingStateElement.react"),{disableLoadingStateTracker:t,xstyle:[p.root,i,p.rootSizing(f)],children:u.jsx(o("XPlatReactSVG").Svg,{"aria-label":s._(/*BTDS*/"Loading..."),role:"img",viewBox:"0 0 100 100",xstyle:[d===8&&p.spin8,d===12&&p.spin12],children:r("range")(0,d).map(function(e){return u.jsx(o("XPlatReactSVG").Rect,{fill:"currentColor",height:g,opacity:e/d,rx:g/2,ry:g/2,transform:"rotate("+(e-d/4)*360/d+" 50 50)",width:m,x:50-g/2+_,y:50-g/2},e)})})})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),226);
__d("BarcelonaDialogLoadingState.react",["BaseDialog.react","THSpinner.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.onClose,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{className:"x6s0dn4 x1ey2m1c x78zum5 xtijo5x x1o0tod xl56j7k xixxii4 x13vifvy",children:s.jsx(r("THSpinner.react"),{size:"medium"})}),t[0]=a):a=t[0];var i;return t[1]!==n?(i=s.jsx(r("BaseDialog.react"),{onClose:n,children:a}),t[1]=n,t[2]=i):i=t[2],i}l.default=u}),98);
__d("BarcelonaHeaderLogoIcon.react",["BarcelonaCommonStrings","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={logo:{cursor:"x1ypdohk",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(5),a=t.xstyle,i;n[0]!==a?(i=(e||(e=r("stylex"))).props(c.logo,a),n[0]=a,n[1]=i):i=n[1];var l;n[2]===Symbol.for("react.memo_cache_sentinel")?(l=u.jsx("path",{d:"M141.537 88.9883C140.71 88.5919 139.87 88.2104 139.019 87.8451C137.537 60.5382 122.616 44.905 97.5619 44.745C97.4484 44.7443 97.3355 44.7443 97.222 44.7443C82.2364 44.7443 69.7731 51.1409 62.102 62.7807L75.881 72.2328C81.6116 63.5383 90.6052 61.6848 97.2286 61.6848C97.3051 61.6848 97.3819 61.6848 97.4576 61.6855C105.707 61.7381 111.932 64.1366 115.961 68.814C118.893 72.2193 120.854 76.925 121.825 82.8638C114.511 81.6207 106.601 81.2385 98.145 81.7233C74.3247 83.0954 59.0111 96.9879 60.0396 116.292C60.5615 126.084 65.4397 134.508 73.775 140.011C80.8224 144.663 89.899 146.938 99.3323 146.423C111.79 145.74 121.563 140.987 128.381 132.296C133.559 125.696 136.834 117.143 138.28 106.366C144.217 109.949 148.617 114.664 151.047 120.332C155.179 129.967 155.42 145.8 142.501 158.708C131.182 170.016 117.576 174.908 97.0135 175.059C74.2042 174.89 56.9538 167.575 45.7381 153.317C35.2355 139.966 29.8077 120.682 29.6052 96C29.8077 71.3178 35.2355 52.0336 45.7381 38.6827C56.9538 24.4249 74.2039 17.11 97.0132 16.9405C119.988 17.1113 137.539 24.4614 149.184 38.788C154.894 45.8136 159.199 54.6488 162.037 64.9503L178.184 60.6422C174.744 47.9622 169.331 37.0357 161.965 27.974C147.036 9.60668 125.202 0.195148 97.0695 0H96.9569C68.8816 0.19447 47.2921 9.6418 32.7883 28.0793C19.8819 44.4864 13.2244 67.3157 13.0007 95.9325L13 96L13.0007 96.0675C13.2244 124.684 19.8819 147.514 32.7883 163.921C47.2921 182.358 68.8816 191.806 96.9569 192H97.0695C122.03 191.827 139.624 185.292 154.118 170.811C173.081 151.866 172.51 128.119 166.26 113.541C161.776 103.087 153.227 94.5962 141.537 88.9883ZM98.4405 129.507C88.0005 130.095 77.1544 125.409 76.6196 115.372C76.2232 107.93 81.9158 99.626 99.0812 98.6368C101.047 98.5234 102.976 98.468 104.871 98.468C111.106 98.468 116.939 99.0737 122.242 100.233C120.264 124.935 108.662 128.946 98.4405 129.507Z"}),n[2]=l):l=n[2];var s;return n[3]!==i?(s=u.jsx("svg",babelHelpers.extends({"aria-label":o("BarcelonaCommonStrings").APP_NAME},i,{fill:"var(--barcelona-primary-icon)",height:"100%",role:"img",viewBox:"0 0 192 192",width:"100%",xmlns:"http://www.w3.org/2000/svg",children:l})),n[3]=i,n[4]=s):s=n[4],s}l.default=d}),98);
__d("BarcelonaStyleXDarkTheme",[],(function(t,n,r,o,a,i){var e=Object.freeze({"fds-black":"black","fds-black-alpha-05":"rgba(0, 0, 0, 0.05)","fds-black-alpha-10":"rgba(0, 0, 0, 0.1)","fds-black-alpha-15":"rgba(0, 0, 0, 0.15)","fds-black-alpha-20":"rgba(0, 0, 0, 0.2)","fds-black-alpha-30":"rgba(0, 0, 0, 0.3)","fds-black-alpha-40":"rgba(0, 0, 0, 0.4)","fds-black-alpha-50":"rgba(0, 0, 0, 0.5)","fds-black-alpha-60":"rgba(0, 0, 0, 0.6)","fds-black-alpha-80":"rgba(0, 0, 0, 0.8)","fds-blue-05":"black","fds-blue-30":"black","fds-blue-40":"black","fds-blue-60":"black","fds-blue-70":"black","fds-blue-80":"black","fds-button-text":"black","fds-comment-background":"black","fds-dark-mode-gray-35":"black","fds-dark-mode-gray-50":"black","fds-dark-mode-gray-70":"black","fds-dark-mode-gray-80":"black","fds-dark-mode-gray-90":"black","fds-dark-mode-gray-100":"black","fds-gray-00":"black","fds-gray-05":"black","fds-gray-10":"black","fds-gray-20":"black","fds-gray-25":"black","fds-gray-30":"black","fds-gray-45":"black","fds-gray-70":"black","fds-gray-80":"black","fds-gray-90":"black","fds-gray-100":"black","fds-green-55":"black","fds-green-65":"black","fds-highlight":"black","fds-highlight-cell-background":"black","fds-primary-icon":"white","fds-primary-text":"white","fds-red-55":"black","fds-soft":"cubic-bezier(.08,.52,.52,1)","fds-spectrum-aluminum-tint-70":"black","fds-spectrum-blue-gray-tint-70":"black","fds-spectrum-cherry":"black","fds-spectrum-cherry-tint-70":"black","fds-spectrum-grape-tint-70":"black","fds-spectrum-grape-tint-90":"black","fds-spectrum-lemon-dark-1":"black","fds-spectrum-lemon-tint-70":"black","fds-spectrum-lime":"black","fds-spectrum-lime-tint-70":"black","fds-spectrum-orange-tint-70":"black","fds-spectrum-orange-tint-90":"black","fds-spectrum-seafoam-tint-70":"black","fds-spectrum-slate-dark-2":"black","fds-spectrum-slate-tint-70":"black","fds-spectrum-teal":"black","fds-spectrum-teal-dark-1":"black","fds-spectrum-teal-dark-2":"black","fds-spectrum-teal-tint-70":"black","fds-spectrum-teal-tint-90":"black","fds-spectrum-tomato":"black","fds-spectrum-tomato-tint-30":"black","fds-spectrum-tomato-tint-90":"black","fds-strong":"cubic-bezier(.12,.8,.32,1)","fds-unified-blue-35":"black","fds-unified-gray-20":"black","fds-white":"black","fds-white-alpha-05":"rgba(255, 255, 255, 0.05)","fds-white-alpha-10":"rgba(255, 255, 255, 0.1)","fds-white-alpha-20":"rgba(255, 255, 255, 0.2)","fds-white-alpha-30":"rgba(255, 255, 255, 0.3)","fds-white-alpha-40":"rgba(255, 255, 255, 0.4)","fds-white-alpha-50":"rgba(255, 255, 255, 0.5)","fds-white-alpha-60":"rgba(255, 255, 255, 0.6)","fds-white-alpha-80":"rgba(255, 255, 255, 0.8)","fds-yellow-20":"black",accent:"hsl(214, 100%, 59%)","always-white":"#ffffff","always-black":"#000000","always-dark-gradient":"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.6))","always-dark-overlay":"rgba(0, 0, 0, 0.4)","always-light-overlay":"rgba(255, 255, 255, 0.4)","always-gray-40":"#65676B","always-gray-75":"#BCC0C4","always-gray-95":"#F0F2F5","attachment-footer-background":"rgba(255,255,255,0.1)","background-deemphasized":"rgba(255,255,255,0.1)","badge-background-color-blue":"var(--accent)","badge-background-color-dark-gray":"var(--secondary-icon)","badge-background-color-gray":"var(--disabled-icon)","badge-background-color-green":"var(--positive)","badge-background-color-light-blue":"var(--highlight-bg)","badge-background-color-red":"var(--notification-badge)","badge-background-color-yellow":"var(--base-lemon)","base-blue":"#1877F2","base-cherry":"#F3425F","base-grape":"#9360F7","base-lemon":"#F7B928","base-lime":"#45BD62","base-pink":"#FF66BF","base-seafoam":"#54C7EC","base-teal":"#2ABBA7","base-tomato":"#FB724B","text-badge-info-background":"hsl(214, 100%, 59%)","text-badge-success-background":"#31A24C","text-badge-attention-background":"hsl(40, 89%, 52%)","text-badge-critical-background":"#e41e3f","blue-link":"#4599FF","border-focused":"#8A8D91","card-background":"#242526","card-background-flat":"#323436","comment-background":"#3A3B3C","comment-footer-background":"#4E4F50","dataviz-primary-1":"rgb(0,174,143)","dataviz-blue-primary":"#1D85FC","dataviz-blue-secondary":"#EBF5FF","dataviz-orange":"#D06C14","disabled-button-background":"rgba(255, 255, 255, 0.2)","disabled-button-text":"rgba(255, 255, 255, 0.3)","disabled-icon":"rgba(255, 255, 255, 0.3)","disabled-text":"rgba(255, 255, 255, 0.3)",divider:"#3E4042","divider-on-color":"#3E4042","event-date":"#F3425F","fb-wordmark":"#FFFFFF","fb-logo":"#0866FF","filter-accent":"invert(40%) sepia(52%) saturate(200%) saturate(200%) saturate(200%) saturate(189%) hue-rotate(191deg) brightness(103%) contrast(102%)","filter-always-white":"invert(100%)","filter-disabled-icon":"invert(100%) opacity(30%)","filter-placeholder-icon":"invert(59%) sepia(11%) saturate(200%) saturate(135%) hue-rotate(176deg) brightness(96%) contrast(94%)","filter-primary-accent":"invert(40%) sepia(52%) saturate(200%) saturate(200%) saturate(200%) saturate(189%) hue-rotate(191deg) brightness(103%) contrast(102%)","filter-primary-icon":"invert(89%) sepia(6%) hue-rotate(185deg)","filter-secondary-button-icon-on-media":"invert(100%)","filter-secondary-icon":"invert(62%) sepia(98%) saturate(12%) hue-rotate(175deg) brightness(90%) contrast(96%)","filter-warning-icon":"invert(77%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(128%) hue-rotate(359deg) brightness(102%) contrast(107%)","filter-blue-link-icon":"invert(73%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(103.25%) hue-rotate(189deg) brightness(101%) contrast(101%)","filter-positive":"invert(37%) sepia(61%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(115%) hue-rotate(91deg) brightness(97%) contrast(105%)","filter-primary-deemphasized-button-icon":"brightness(0) saturate(100%) invert(63%) sepia(20%) saturate(1290%) hue-rotate(185deg) brightness(107%) contrast(101%)","filter-negative":"invert(25%) sepia(33%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(110%) hue-rotate(345deg) brightness(132%) contrast(96%)","focus-ring-blue":"#1877F2","glimmer-base-opaque":"#FFFFFF","glimmer-high-contrast-base-opaque":"#FFFFFF","glimmer-opacity-high-contrast-max":"0.48","glimmer-opacity-high-contrast-min":"0.1","glimmer-opacity-max":"1","glimmer-opacity-min":"0.32","glimmer-spinner-icon":"white","hero-banner-background":"#E85D07","hosted-view-selected-state":"rgba(45, 136, 255, 0.1)","highlight-bg":"rgba(24, 119, 242, .31)","hover-overlay":"rgba(255, 255, 255, 0.04)","inverse-text":"var(--always-white)","list-cell-chevron":"#B0B3B8","media-hover":"rgba(68, 73, 80, 0.15)","media-inner-border":"rgba(255, 255, 255, 0.05)","media-outer-border":"#33363A","media-pressed":"rgba(68, 73, 80, 0.35)","messenger-card-background":"#242526","messenger-card-box-shadow":"0px 0px 16px rgba(0, 0, 0, 0.3)","mwp-header-background-color":"var(--messenger-card-background)","mwp-header-button-color":"var(--accent)","mwp-message-row-background":"var(--messenger-card-background)","messenger-reply-background":"#18191A","overlay-alpha-80":"rgba(11, 11, 11, 0.8)","overlay-on-media":"rgba(0, 0, 0, 0.6)","nav-bar-background":"#242526","popover-card-background":"var(--card-background)","nav-bar-background-gradient":"linear-gradient(to top, #242526, rgba(36,37,38,.9), rgba(36,37,38,.7), rgba(36,37,38,.4), rgba(36,37,38,0))","nav-bar-background-gradient-wash":"linear-gradient(to top, #18191A, rgba(24,25,26,.9), rgba(24,25,26,.7), rgba(24,25,26,.4), rgba(24,25,26,0))",negative:"hsl(350, 87%, 55%)","negative-background":"hsl(350, 87%, 55%, 20%)","new-notification-background":"#E7F3FF","non-media-pressed":"rgba(68, 73, 80, 0.15)","non-media-pressed-on-dark":"rgba(255, 255, 255, 0.3)","notification-badge":"#e41e3f","placeholder-icon":"#8A8D91","placeholder-image":"rgb(164, 167, 171)","placeholder-text":"#8A8D91","placeholder-text-on-media":"rgba(255, 255, 255, 0.5)","popover-background":"#3E4042",positive:"#31A24C","positive-background":"#1F3520","press-overlay":"rgba(255, 255, 255, 0.2)","primary-button-background":"#2374E1","primary-button-icon":"#FFFFFF","primary-button-pressed":"#77A7FF","primary-button-text":"#FFFFFF","primary-deemphasized-button-background":"rgba(45, 136, 255, 0.2)","primary-deemphasized-button-pressed":"rgba(24, 119, 242, 0.2)","primary-deemphasized-button-pressed-overlay":"rgba(25, 110, 255, 0.15)","primary-deemphasized-button-text":"#2D88FF","primary-icon":"#E4E6EB","primary-text":"#E4E6EB","primary-text-on-media":"white","primary-web-focus-indicator":"#D24294","progress-ring-neutral-background":"rgba(255, 255, 255, 0.2)","progress-ring-neutral-foreground":"#ffffff","progress-ring-on-media-background":"rgba(255, 255, 255, 0.2)","progress-ring-on-media-foreground":"#FFFFFF","progress-ring-blue-background":"rgba(45, 136, 255, 0.2)","progress-ring-blue-foreground":"hsl(214, 100%, 59%)","progress-ring-disabled-background":"rgba(122,125,130, 0.2)","progress-ring-disabled-foreground":"#7A7D82","rating-star-active":"#FF9831","scroll-thumb":"rgba(255, 255, 255, 0.3)","scroll-shadow":"0 1px 2px rgba(0, 0, 0, 0.1), 0 -1px rgba(255, 255, 255, 0.05) inset","secondary-button-background":"rgba(255,255,255,.1)","secondary-button-background-floating":"#4B4C4F","secondary-button-background-on-dark":"rgba(255, 255, 255, 0.4)","secondary-button-pressed":"rgba(0, 0, 0, 0.05)","secondary-button-stroke":"transparent","secondary-button-text":"#E4E6EB","secondary-icon":"#B0B3B8","secondary-text":"#B0B3B8","secondary-text-on-media":"rgba(255, 255, 255, 0.9)","section-header-text":"#BCC0C4","shadow-1":"rgba(0, 0, 0, 0.1)","shadow-2":"rgba(0, 0, 0, 0.2)","shadow-5":"rgba(0, 0, 0, 0.5)","shadow-8":"rgba(0, 0, 0, 0.8)","shadow-base":"0 1px 2px var(--shadow-2)","shadow-elevated":"0 8px 20px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1)","shadow-emphasis":"0 2px 12px var(--shadow-2)","shadow-inset":"rgba(255, 255, 255, 0.05)","shadow-on-media":"0px 0px 1px rgba(0, 0, 0, 0.62)","shadow-persistent":"0px 0px 12px rgba(28, 43, 51, 0.6)","shadow-primary":"0px 0px 12px rgba(28, 43, 51, 0.1)","shadow-responsive":"0px 8px 16px 0px rgba(0, 0, 0, 0.1)","surface-background":"#242526","switch-active":"hsl(214, 100%, 59%)","switch-inactive":"#3E4042","switch-unchecked-background-color":"#6F7276","text-highlight":"rgba(24, 119, 242, 0.45)","input-background":"#242526","input-background-hover":"var(--input-background)","input-background-warn-hover":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-hover":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-active":"hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)","input-background-warn-active":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-active":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-disabled":"#18191A","input-border-color":"#3E4042","input-border-color-hover":"var(--placeholder-text)","input-label-color-highlighted":"hsl(214, 100%, 59%)","input-label-color-inside":"var(--secondary-text)","input-label-color-error":"var(--negative)","input-label-color-disabled":"var(--disabled-text)","text-input-outside-label":"#FFFFFF","toast-background":"rgba(0, 0, 0)","toast-text":"rgb(255, 255, 255)","toast-text-link":"#4599FF","toast-border-color":"transparent","toast-border-style":"none","toast-border-width":"0px","toggle-active-background":"rgb(45, 136, 255)","toggle-active-icon":"#FFFFFF","toggle-active-text":"#FFFFFF","toggle-button-active-background":"#E6F2FF","tooltip-background":"rgba(11, 11, 11, 0.8)","tooltip-box-shadow":"0 2px 4px 0 var(--shadow-5)","popover-border-color":"transparent",wash:"#3E4042","web-wash":"#18191A",warning:"hsl(40, 89%, 52%)","chat-bubble-emphasis-ring-after":"white","chat-bubble-emphasis-ring-before":"black","chat-text-blockquote-color-background-line":"rgba(255, 255, 255, 0.19)","chat-text-blockquote-color-text-primary-media":"rgba(255, 255, 255, 0.7)","chat-incoming-message-bubble-background-color":"#303030","chat-outgoing-message-bubble-background-color":"var(--accent)","chat-replied-message-background-color":"rgba(255, 255, 255, 0.12)","radio-border-color":"var(--primary-icon)","radio-border-color-disabled":"var(--disabled-button-background)","radio-border-color-selected":"var(--accent)","radio-checked-icon-color":"var(--accent)","radio-checked-icon-color-disabled":"var(--disabled-button-background)","dialog-anchor-vertical-padding":"56px","header-height":"0px","global-panel-width":"0px","global-panel-width-expanded":"0px","alert-banner-corner-radius":"8px","button-corner-radius":"6px","button-corner-radius-medium":"10px","button-corner-radius-large":"12px","button-height-large":"40px","button-height-medium":"36px","button-padding-horizontal-large":"16px","button-padding-horizontal-medium":"16px","button-padding-icon-only":"16px","button-icon-padding-large":"16px","button-icon-padding-medium":"16px","button-inner-icon-spacing-large":"3px","button-inner-icon-spacing-medium":"3px","blueprint-button-height-medium":"40px","blueprint-button-height-large":"48px","card-corner-radius":"8px","card-box-shadow":"0 12px 28px 0 var(--shadow-2), 0 2px 4px 0 var(--shadow-1)","card-padding-horizontal":"10px","card-padding-vertical":"20px","chip-corner-radius":"6px","comment-bubble":"18px","dialog-corner-radius":"8px","glimmer-corner-radius":"8px","image-corner-radius":"4px","infochip-medium-radius":"12px","input-corner-radius":"6px","input-border-width":"1px","nav-list-cell-corner-radius":"8px","list-cell-corner-radius":"8px","list-cell-min-height":"52px","list-cell-padding-vertical":"20px","list-cell-padding-vertical-with-addon":"14px","menu-base-list-item-padding-horizontal":"8px","menu-base-list-item-padding-vertical":"12px","menu-base-size-full-margin-end":"48px","menu-item-base-margin-horizontal":"8px","menu-item-base-margin-vertical":"0px","menu-item-base-padding-horizontal":"8px","menu-item-base-overlay-radius":"4px","menu-item-base-padding-vertical":"12px","menu-item-base-with-icon-padding-horizontal":"var(--menu-item-base-padding-horizontal)","separator-menu-item-margin-horizontal":"16px","separator-menu-item-margin-vertical":"4px","nav-list-cell-min-height":"0px","nav-list-cell-padding-vertical":"16px","nav-list-cell-padding-vertical-with-addon":"16px","nux-card-body-padding-end":"24px","page-footer-padding-vertical":"16px","popover-border-style":"none","popover-border-width":"0px","section-header-addOnEnd-margin-horizontal":"8px","section-header-addOnStart-margin-horizontal":"12px","section-header-addOnEnd-button-padding-horizontal":"0px","section-header-addOnEnd-button-padding-vertical":"0px","section-header-padding-vertical":"16px","section-header-subtitle-margin-vertical":"14px","section-header-subtitle-with-addOnEnd-margin-vertical":"6px","tab-height":"60px","tab-icon-padding-end":"0px","tab-text-icon-gap":"4px","tab-underline-color":"transparent","tab-underline-height":"3px","text-badge-corner-radius":"4px","text-badge-padding-horizontal":"6px","text-badge-padding-vertical":"6px","text-input-multi-padding-between-text-scrollbar":"20px","text-input-multi-padding-scrollbar":"16px","text-input-caption-margin-top":"10px","text-input-padding-vertical":"12px","toast-addon-padding-horizontal":"6px","toast-addon-padding-vertical":"6px","toast-container-max-width":"100%","toast-container-min-width":"0px","toast-container-padding-horizontal":"14px","toast-container-padding-vertical":"10px","toast-corner-radius":"8px","toaster-view-max-width":"328px","tooltip-corner-radius":"8px","typeahead-list-outer-padding-vertical":"2px","fds-animation-enter-exit-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-enter-exit-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-swap-shuffle-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-swap-shuffle-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-passive-move-in":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-passive-move-out":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-quick-move-in":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-quick-move-out":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-fade-in":"cubic-bezier(0, 0, 1, 1)","fds-animation-fade-out":"cubic-bezier(0, 0, 1, 1)","fds-duration-extra-extra-short-in":"100ms","fds-duration-extra-extra-short-out":"100ms","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","fds-duration-short-in":"280ms","fds-duration-short-out":"200ms","fds-duration-medium-in":"400ms","fds-duration-medium-out":"350ms","fds-duration-long-in":"500ms","fds-duration-long-out":"350ms","fds-duration-extra-long-in":"1000ms","fds-duration-extra-long-out":"1000ms","fds-duration-none":"0ms","fds-fast":"200ms","fds-slow":"400ms","font-family-apple":"system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif","font-family-code":"ui-monospace, Menlo, Consolas, Monaco, monospace","font-family-default":"Helvetica, Arial, sans-serif","font-family-segoe":"Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","font-family-system-fds":"system-ui, -apple-system, BlinkMacSystemFont, Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","text-input-field-font-family":"Placeholder Font","text-input-field-font-size":"1rem","text-input-field-font-stretch":"initial","text-input-field-font-weight":"500","text-input-field-line-height":"1.2941","text-input-label-font-family":"Placeholder Font","text-input-label-font-size":"17px","text-input-label-font-size-scale-multiplier":"0.75","text-input-label-font-stretch":"initial","text-input-label-font-weight":"400","text-input-label-line-height":"1.2941","messenger-card-min-width":"300px","messenger-card-max-width":"480px","messenger-application-max-width":"2560px","messenger-sidebar-collapsed-width":"44px","messenger-sidebar-expanded-width":"240px","messenger-card-corner-radius":"8px","messenger-card-spacing":"16px","chat-bubble-padding-vertical":"8px","chat-bubble-padding-horizontal":"12px","chat-bubble-border-radius":"18px","dialog-size-medium-width":"100%","dialog-size-small-width":"100%","focus-ring-outline-forced-colors":"2px auto transparent !important","focus-ring-outline-link":"2px auto var(--focus-ring-blue)","focus-ring-shadow-default":"0 0 0 2px var(--always-white), 0 0 0 4px var(--focus-ring-blue)","focus-ring-shadow-inset":"0 0 0 2px var(--focus-ring-blue) inset, 0 0 0 4px var(--always-white) inset","glimmer-animation-direction":"alternate","glimmer-animation-duration":"1000ms","glimmer-animation-timing-function":"linear","radio-checked-icon-size-large":"12px","radio-checked-icon-size-medium":"12px","radio-border-width":"2px","radio-size-large":"24px","radio-size-medium":"20px","blue-primary":"rgb(0,136,244)","blue-secondary":"rgb(235,245,255)","blue-tertiary":"rgb(4,59,114)","chartreuse-primary":"rgb(106,147,22)","chartreuse-secondary":"rgb(226,255,152)","chartreuse-tertiary":"rgb(50,65,19)","cyan-primary":"rgb(0,142,213)","cyan-secondary":"rgb(231,245,255)","cyan-tertiary":"rgb(15,63,93)","dataviz-primary-2":"rgb(156,219,255)","dataviz-primary-3":"rgb(73,156,255)","dataviz-secondary-1":"rgb(92,87,210)","dataviz-secondary-2":"rgb(142,129,255)","dataviz-secondary-3":"rgb(119,45,88)","dataviz-supplementary-1":"rgb(253,91,67)","dataviz-supplementary-2":"rgb(161,132,0)","dataviz-supplementary-3":"rgb(36,131,44)","dataviz-supplementary-4":"rgb(232,234,238)","fuschia-primary":"rgb(250,45,138)","fuschia-secondary":"rgb(255,241,246)","fuschia-tertiary":"rgb(118,14,62)","green-primary":"rgb(43,154,53)","green-secondary":"rgb(227,250,224)","green-tertiary":"rgb(26,68,27)","magenta-primary":"rgb(215,77,204)","magenta-secondary":"rgb(255,239,254)","magenta-tertiary":"rgb(96,36,91)","orange-primary":"rgb(208,108,20)","orange-secondary":"rgb(255,241,239)","orange-tertiary":"rgb(94,49,14)","purple-primary":"rgb(125,116,255)","purple-secondary":"rgb(245,241,255)","purple-tertiary":"rgb(55,50,121)","red-primary":"rgb(251,60,68)","red-secondary":"rgb(255,241,239)","red-tertiary":"rgb(118,22,27)","teal-primary":"rgb(0,152,124)","teal-secondary":"rgb(227,247,241)","teal-tertiary":"rgb(10,68,56)","yellow-primary":"rgb(161,132,0)","yellow-secondary":"rgb(255,246,161)","yellow-tertiary":"rgb(72,59,12)","base-unit":"4px","blue-0":"245, 251, 255","blue-1":"224, 241, 255","blue-2":"179, 219, 255","blue-3":"112, 188, 255","blue-4":"71, 175, 255","blue-5":"0, 149, 246","blue-6":"0, 116, 204","blue-7":"0, 87, 163","blue-8":"0, 55, 107","blue-9":"0, 41, 82","cyan-5":"39, 196, 245","font-family-monospace":"Menlo, Monaco, Consolas, Courier New, monospace","font-family-system":"system-ui, -apple-system, BlinkMacSystemFont, Roboto, Helvetica, Arial, sans-serif","font-family-serif":"ui-serif, New York Small, New York, Georgia, Times New Roman, Times, serif","font-weight-system-bold":"700","font-weight-system-extra-bold":"800","font-weight-system-extra-light":"200","font-weight-system-light":"300","font-weight-system-medium":"500","font-weight-system-regular":"400","font-weight-system-semibold":"600","green-4":"120, 222, 69","green-5":"88, 195, 34","green-6":"55, 166, 0","grey-0":"245, 245, 245","grey-1":"239, 239, 239","grey-2":"219, 219, 219","grey-3":"199, 199, 199","grey-4":"168, 168, 168","grey-5":"142, 142, 142","grey-6":"115, 115, 115","grey-7":"85, 85, 85","grey-8":"54, 54, 54","grey-9":"38, 38, 38","grey-10":"26, 26, 26","orange-5":"253, 141, 50","pink-5":"209, 8, 105","purple-5":"163, 7, 186","red-4":"255, 104, 116","red-5":"237, 73, 86","red-6":"198, 35, 48","red-7":"167, 3, 17","system-10-font-size":"10px","system-10-line-height":"12px","system-11-font-size":"11px","system-11-line-height":"13px","system-12-font-size":"12px","system-13-font-size":"13px","system-12-line-height":"16px","system-14-font-size":"14px","system-14-line-height":"18px","system-15-font-size":"15px","system-15-line-height":"21px","system-16-font-size":"16px","system-17-font-size":"17px","system-16-line-height":"20px","system-18-font-size":"18px","system-18-line-height":"24px","system-20-font-size":"20px","system-20-line-height":"25px","system-22-font-size":"22px","system-22-line-height":"26px","system-24-font-size":"24px","system-24-line-height":"27px","system-26-font-size":"26px","system-26-line-height":"28px","system-28-font-size":"28px","system-28-line-height":"32px","system-30-font-size":"30px","system-30-line-height":"36px","system-32-font-size":"32px","system-32-line-height":"40px","system-40-font-size":"40px","system-40-line-height":"46px","yellow-5":"253, 203, 92","barcelona-success-icon":"#20c584","barcelona-green-dot":"rgb(94, 231, 71)","glimmer-stagger-time":"100ms","base-line-clamp-line-height":"calc(1.4 * 1em)","barcelona-desktop-header-height":"74px","barcelona-mobile-header-height":"60px","barcelona-mobile-logged-out-header-height":"102px","barcelona-large-screen-breakpoint":"768px","barcelona-large-screen-composer-footer-height":"84px","barcelona-small-screen-composer-footer-height":"64px","barcelona-composer-header-height":"46px","barcelona-large-screen-max-width":"620px","barcelona-large-screen-max-page-width":"1230px","barcelona-large-screen-padding":"344px","barcelona-large-screen-content-width":"572px","barcelona-medium-screen-breakpoint":"700px","barcelona-medium-screen-max-width":"520px","barcelona-small-screen-nav-height":"68px","barcelona-small-screen-nav-height-short":"50px","barcelona-threadline-column-width":"48px","barcelona-desktop-page-horizontal-padding":"24px","barcelona-post-horizontal-padding":"12px","barcelona-quoted-post-horizontal-padding":"16px","barcelona-carousel-gap":"6px","barcelona-lightbox-horizontal-padding":"92px","barcelona-search-page-width":"572px","barcelona-columns-item-horizontal-padding":"24px","barcelona-user-list-item-padding":"16px","barcelona-side-navigation-width":"76px","barcelona-tombstone-padding-horizontal":"12px","barcelona-post-footer-height":"60px","barcelona-markup-attachment-max-width":"355px","barcelona-box-shadow-04":"rgba(0, 0, 0, 0.04)","barcelona-box-shadow-08":"rgba(0, 0, 0, 0.08)","barcelona-box-shadow-10":"rgba(0, 0, 0, 0.10)","barcelona-box-shadow-12":"rgba(0, 0, 0, 0.12)","barcelona-box-shadow-15":"rgba(0, 0, 0, 0.15)","barcelona-dark-backdrop-background":"rgba(0, 0, 0, 0.7)","barcelona-onboarding-navigation-height":"52px","barcelona-onboarding-small-screen-navigation-height":"38px","barcelona-onboarding-content-width":"390px","barcelona-notification-badge-background":"rgb(255, 48, 64)","barcelona-notification-badge-background-wide-gamut":"color(display-p3 1 0.18 0.25 / 1)","barcelona-verified-badge-background":"rgb(0, 149, 246)","barcelona-video-player-mute-button-background":"rgb(40, 40, 40, 0.5)","barcelona-activity-icon-background-first-post":"#007aff","barcelona-activity-icon-background-follow":"#6e3def","barcelona-activity-icon-background-like":"#fe0169","barcelona-activity-icon-background-mention":"#20c584","barcelona-activity-icon-background-quote":"#fe7900","barcelona-activity-icon-background-markup":"#ffd600","barcelona-activity-icon-background-polls":"#007aff","barcelona-activity-icon-background-reply":"#24c3ff","barcelona-activity-icon-background-repost":"#c329bf","barcelona-activity-icon-background-request":"#ffb800","barcelona-activity-icon-background-subscribe":"#24c3ff","barcelona-activity-icon-background-warning":"#ff0000","barcelona-activity-icon-background-pinned-reply":"#0d31eb","barcelona-medium-column-layout-width":"420px","barcelona-column-layout-max-width":"640px","site-width-wide":"935px","gradient-yellow":"255, 214, 0","gradient-orange":" 255, 122, 0","gradient-pink":"255, 1, 105","gradient-lavender":"211, 0, 197","gradient-purple":"118, 56, 250","ig-primary-background":"0, 0, 0","ig-elevated-highlight-background":"54 54 54","barcelona-primary-text":"rgb(243, 245, 247)","barcelona-secondary-text":"rgb(119, 119, 119)","barcelona-secondary-text-loading":"rgba(119, 119, 119, 0.25)","barcelona-primary-button":"rgb(255, 255, 255)","barcelona-primary-button-text":"rgb(0, 0, 0)","barcelona-secondary-button":"rgb(16, 16, 16)","barcelona-liked-text":"rgb(255, 48, 64)","barcelona-liked-text-wide-gamut":"color(display-p3 1 0.18 0.25 / 1)","barcelona-link-text":"rgb(24, 163, 254)","barcelona-error-text":"rgb(255, 48, 64)","barcelona-beta-text":"rgb(149, 120, 179)","barcelona-charcoal-text":"rgb(204, 204, 204)","barcelona-brand-highlighted-text":"rgb(255, 248, 111)","barcelona-primary-icon":"rgb(243, 245, 247)","barcelona-secondary-icon":"rgb(119, 119, 119)","barcelona-navigation-icon":"rgb(77, 77, 77)","barcelona-charcoal-icon":"rgb(204, 204, 204)","barcelona-primary-background":"rgb(16, 16, 16)","barcelona-elevated-background":"rgb(24, 24, 24)","barcelona-secondary-background":"rgb(10, 10, 10)","barcelona-tertiary-background":"rgb(30, 30, 30)","background-secondary":"rgb(16, 16, 16)","barcelona-header-background":"rgba(16, 16, 16, 0.85)","barcelona-elevated-header-background":"rgba(24, 24, 24, 0.85)","barcelona-elevated-tertiary-background":"rgb(38, 38, 38)","barcelona-hovered-background":"rgba(255, 255, 255, 0.04)","barcelona-pressed-background":"rgba(0, 0, 0, 0.06)","barcelona-side-navigation-background":"rgba(10, 10, 10, 0.85)","barcelona-primary-button-background":"rgb(255, 255, 255)","barcelona-dialog-backdrop-background":"rgba(16, 16, 16, 0.85)","barcelona-navigation-item-hover-background":"rgba(255, 255, 255, 0.08)","barcelona-floating-button-background":"rgba(255, 255, 255, 0.08)","barcelona-upsell-gradient-background":"linear-gradient(0deg, color(display-p3 0.0627 0.0627 0.0627) 54.03%, color(display-p3 0.0627 0.0627 0.0627 / 0.00) 99.83%)","barcelona-avatar-ig-background-border-hovered":"rgba(255, 255, 255,0.1)","barcelona-beta-background":"rgba(155, 56, 255, 0.12)","barcelona-brand-highlighted-background":"rgb(88, 81, 11)","barcelona-brand-highlighted-pressure-point-background":"rgb(123, 109, 7)","barcelona-insights-background":"rgb(16, 16, 16)","barcelona-primary-outline":"rgba(243, 245, 247, 0.15)","barcelona-primary-column-outline":"rgb(45, 45, 45)","barcelona-media-outline":"rgba(243, 245, 247, 0.2)","barcelona-threadline":"rgb(51, 54, 56)","barcelona-menu-outline":"rgba(255, 255, 255, 0.04)","barcelona-glimmer-background":"rgb(44, 44, 44)","barcelona-checkbox-checked-background":"rgb(255, 255, 255)","barcelona-checkbox-checkmark-color":"rgb(16, 16, 16)","barcelona-checkbox-outline":"rgb(195, 195, 195)","barcelona-composer-poll-option-outline":"rgb(52, 52, 52)","barcelona-poll-option-meter-background":"rgb(52, 52, 52)","barcelona-poll-option-meter-highlighted-background":"rgb(255, 255, 255)","barcelona-switch-background-off":"rgb(50, 53, 57)","barcelona-cherry-blossom-lightpink":"rgb(255, 207, 243)","color-scheme":"dark","barcelona-translucent-column-header-background":"rgb(15, 15, 15)","barcelona-tooltip-background":"rgb(38, 38, 38)","barcelona-splash-screen-logo-color":"rgb(255, 255, 255)","barcelona-bar-chart-gradient-bottom":"rgb(204, 204, 204)","barcelona-bar-chart-gradient-top":"rgb(243, 245, 247)","barcelona-user-list-action-button-gradient":"linear-gradient(180deg, color(display-p3 0.0392 0.0392 0.0392 / 0.00) 0%, color(display-p3 0.0392 0.0392 0.0392) 49.07%, color(display-p3 0.0392 0.0392 0.0392) 100%)"});i.default=e}),66);
__d("BarcelonaStyleXDefaultTheme",[],(function(t,n,r,o,a,i){var e=Object.freeze({"fds-black":"#000000","fds-black-alpha-05":"rgba(0, 0, 0, 0.05)","fds-black-alpha-10":"rgba(0, 0, 0, 0.1)","fds-black-alpha-15":"rgba(0, 0, 0, 0.15)","fds-black-alpha-20":"rgba(0, 0, 0, 0.2)","fds-black-alpha-30":"rgba(0, 0, 0, 0.3)","fds-black-alpha-40":"rgba(0, 0, 0, 0.4)","fds-black-alpha-50":"rgba(0, 0, 0, 0.5)","fds-black-alpha-60":"rgba(0, 0, 0, 0.6)","fds-black-alpha-80":"rgba(0, 0, 0, 0.8)","fds-blue-05":"#ECF3FF","fds-blue-30":"#AAC9FF","fds-blue-40":"#77A7FF","fds-blue-60":"#1877F2","fds-blue-70":"#2851A3","fds-blue-80":"#1D3C78","fds-button-text":"#444950","fds-comment-background":"#F2F3F5","fds-dark-mode-gray-35":"#CCCCCC","fds-dark-mode-gray-50":"#828282","fds-dark-mode-gray-70":"#4A4A4A","fds-dark-mode-gray-80":"#373737","fds-dark-mode-gray-90":"#282828","fds-dark-mode-gray-100":"#1C1C1C","fds-gray-00":"#F5F6F7","fds-gray-05":"#F2F3F5","fds-gray-10":"#EBEDF0","fds-gray-20":"#DADDE1","fds-gray-25":"#CCD0D5","fds-gray-30":"#BEC3C9","fds-gray-45":"#8D949E","fds-gray-70":"#606770","fds-gray-80":"#444950","fds-gray-90":"#303338","fds-gray-100":"#1C1E21","fds-green-55":"#00A400","fds-green-65":"#51CE70","fds-highlight":"#3578E5","fds-highlight-cell-background":"#ECF3FF","fds-primary-icon":"#1C1E21","fds-primary-text":"#1C1E21","fds-red-55":"#FA383E","fds-soft":"cubic-bezier(.08,.52,.52,1)","fds-spectrum-aluminum-tint-70":"#E4F0F6","fds-spectrum-blue-gray-tint-70":"#CFD1D5","fds-spectrum-cherry":"#F35369","fds-spectrum-cherry-tint-70":"#FBCCD2","fds-spectrum-grape-tint-70":"#DDD5F0","fds-spectrum-grape-tint-90":"#F4F1FA","fds-spectrum-lemon-dark-1":"#F5C33B","fds-spectrum-lemon-tint-70":"#FEF2D1","fds-spectrum-lime":"#A3CE71","fds-spectrum-lime-tint-70":"#E4F0D5","fds-spectrum-orange-tint-70":"#FCDEC5","fds-spectrum-orange-tint-90":"#FEF4EC","fds-spectrum-seafoam-tint-70":"#CAEEF9","fds-spectrum-slate-dark-2":"#89A1AC","fds-spectrum-slate-tint-70":"#EAEFF2","fds-spectrum-teal":"#6BCEBB","fds-spectrum-teal-dark-1":"#4DBBA6","fds-spectrum-teal-dark-2":"#31A38D","fds-spectrum-teal-tint-70":"#D2F0EA","fds-spectrum-teal-tint-90":"#F0FAF8","fds-spectrum-tomato":"#FB724B","fds-spectrum-tomato-tint-30":"#F38E7B","fds-spectrum-tomato-tint-90":"#FDEFED","fds-strong":"cubic-bezier(.12,.8,.32,1)","fds-unified-blue-35":"#1455B0","fds-unified-gray-20":"#323436","fds-white":"#FFFFFF","fds-white-alpha-05":"rgba(255, 255, 255, 0.05)","fds-white-alpha-10":"rgba(255, 255, 255, 0.1)","fds-white-alpha-20":"rgba(255, 255, 255, 0.2)","fds-white-alpha-30":"rgba(255, 255, 255, 0.3)","fds-white-alpha-40":"rgba(255, 255, 255, 0.4)","fds-white-alpha-50":"rgba(255, 255, 255, 0.5)","fds-white-alpha-60":"rgba(255, 255, 255, 0.6)","fds-white-alpha-80":"rgba(255, 255, 255, 0.8)","fds-yellow-20":"#FFBA00",accent:"hsl(214, 89%, 52%)","always-white":"#ffffff","always-black":"#000000","always-dark-gradient":"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.6))","always-dark-overlay":"rgba(0, 0, 0, 0.4)","always-light-overlay":"rgba(255, 255, 255, 0.4)","always-gray-40":"#65676B","always-gray-75":"#BCC0C4","always-gray-95":"#F0F2F5","attachment-footer-background":"#F0F2F5","background-deemphasized":"#F0F2F5","badge-background-color-blue":"var(--accent)","badge-background-color-dark-gray":"var(--secondary-icon)","badge-background-color-gray":"var(--disabled-icon)","badge-background-color-green":"var(--positive)","badge-background-color-light-blue":"var(--highlight-bg)","badge-background-color-red":"var(--notification-badge)","badge-background-color-yellow":"var(--base-lemon)","base-blue":"#1877F2","base-cherry":"#F3425F","base-grape":"#9360F7","base-lemon":"#F7B928","base-lime":"#45BD62","base-pink":"#FF66BF","base-seafoam":"#54C7EC","base-teal":"#2ABBA7","base-tomato":"#FB724B","text-badge-info-background":"hsl(214, 89%, 52%)","text-badge-success-background":"#31A24C","text-badge-attention-background":"hsl(40, 89%, 52%)","text-badge-critical-background":"#e41e3f","blue-link":"#216FDB","border-focused":"#65676B","card-background":"#FFFFFF","card-background-flat":"#F7F8FA","comment-background":"#F0F2F5","comment-footer-background":"#F6F9FA","dataviz-primary-1":"rgb(0,174,143)","dataviz-blue-primary":"#1D85FC","dataviz-blue-secondary":"#043B72","dataviz-orange":"#D06C14","disabled-button-background":"#E4E6EB","disabled-button-text":"#BCC0C4","disabled-icon":"#BCC0C4","disabled-text":"#BCC0C4",divider:"#CED0D4","divider-on-color":"#CED0D4","event-date":"#F3425F","fb-wordmark":"#0866FF","fb-logo":"#0866FF","filter-accent":"invert(39%) sepia(57%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(147.75%) hue-rotate(202deg) brightness(97%) contrast(96%)","filter-always-white":"invert(100%)","filter-disabled-icon":"invert(80%) sepia(6%) saturate(200%) saturate(120%) hue-rotate(173deg) brightness(98%) contrast(89%)","filter-placeholder-icon":"invert(59%) sepia(11%) saturate(200%) saturate(135%) hue-rotate(176deg) brightness(96%) contrast(94%)","filter-primary-accent":"invert(39%) sepia(57%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(147.75%) hue-rotate(202deg) brightness(97%) contrast(96%)","filter-primary-icon":"invert(8%) sepia(10%) saturate(200%) saturate(200%) saturate(166%) hue-rotate(177deg) brightness(104%) contrast(91%)","filter-secondary-button-icon-on-media":"invert(100%)","filter-secondary-icon":"invert(39%) sepia(21%) saturate(200%) saturate(109.5%) hue-rotate(174deg) brightness(94%) contrast(86%)","filter-warning-icon":"invert(77%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(128%) hue-rotate(359deg) brightness(102%) contrast(107%)","filter-blue-link-icon":"invert(30%) sepia(98%) saturate(200%) saturate(200%) saturate(200%) saturate(166.5%) hue-rotate(192deg) brightness(91%) contrast(101%)","filter-positive":"invert(37%) sepia(61%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(115%) hue-rotate(91deg) brightness(97%) contrast(105%)","filter-primary-deemphasized-button-icon":"invert(28%) sepia(100%) saturate(6042%) hue-rotate(202deg) brightness(96%) contrast(101%)","filter-negative":"invert(25%) sepia(33%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(110%) hue-rotate(345deg) brightness(132%) contrast(96%)","focus-ring-blue":"#1877F2","glimmer-base-opaque":"#979A9F","glimmer-high-contrast-base-opaque":"#65686C","glimmer-opacity-high-contrast-max":"1","glimmer-opacity-high-contrast-min":"0.08","glimmer-opacity-max":"1","glimmer-opacity-min":"0.32","glimmer-spinner-icon":"#65676B","hero-banner-background":"#FFFFFF","hosted-view-selected-state":"rgba(45, 136, 255, 0.1)","highlight-bg":"#E7F3FF","hover-overlay":"rgba(0, 0, 0, 0.04)","inverse-text":"var(--always-white)","list-cell-chevron":"#65676B","media-hover":"rgba(68, 73, 80, 0.15)","media-inner-border":"rgba(0, 0, 0, 0.1)","media-outer-border":"#FFFFFF","media-pressed":"rgba(68, 73, 80, 0.35)","messenger-card-background":"#FFFFFF","messenger-card-box-shadow":"0px 1px 2px 0px #0000001A","mwp-header-background-color":"var(--messenger-card-background)","mwp-header-button-color":"var(--accent)","mwp-message-row-background":"var(--messenger-card-background)","messenger-reply-background":"#F0F2F5","overlay-alpha-80":"rgba(244, 244, 244, 0.8)","overlay-on-media":"rgba(0, 0, 0, 0.6)","nav-bar-background":"#FFFFFF","popover-card-background":"var(--card-background)","nav-bar-background-gradient":"linear-gradient(to top, #FFFFFF, rgba(255,255,255.9), rgba(255,255,255,.7), rgba(255,255,255,.4), rgba(255,255,255,0))","nav-bar-background-gradient-wash":"linear-gradient(to top, #F0F2F5, rgba(240,242,245.9), rgba(240,242,245,.7), rgba(240,242,245,.4), rgba(240,242,245,0))",negative:"hsl(350, 87%, 55%)","negative-background":"hsl(350, 87%, 55%, 20%)","new-notification-background":"#E7F3FF","non-media-pressed":"rgba(68, 73, 80, 0.15)","non-media-pressed-on-dark":"rgba(255, 255, 255, 0.3)","notification-badge":"#e41e3f","placeholder-icon":"#65676B","placeholder-image":"rgb(164, 167, 171)","placeholder-text":"#65676B","placeholder-text-on-media":"rgba(255, 255, 255, 0.5)","popover-background":"#FFFFFF",positive:"#31A24C","positive-background":"#DEEFE1","press-overlay":"rgba(0, 0, 0, 0.10)","primary-button-background":"#1B74E4","primary-button-icon":"#FFFFFF","primary-button-pressed":"#77A7FF","primary-button-text":"#FFFFFF","primary-deemphasized-button-background":"#E7F3FF","primary-deemphasized-button-pressed":"rgba(0, 0, 0, 0.05)","primary-deemphasized-button-pressed-overlay":"rgba(25, 110, 255, 0.15)","primary-deemphasized-button-text":"#1877F2","primary-icon":"#050505","primary-text":"#050505","primary-text-on-media":"#FFFFFF","primary-web-focus-indicator":"#D24294","progress-ring-neutral-background":"rgba(0, 0, 0, 0.2)","progress-ring-neutral-foreground":"#000000","progress-ring-on-media-background":"rgba(255, 255, 255, 0.2)","progress-ring-on-media-foreground":"#FFFFFF","progress-ring-blue-background":"rgba(24, 119, 242, 0.2)","progress-ring-blue-foreground":"hsl(214, 89%, 52%)","progress-ring-disabled-background":"rgba(190,195,201, 0.2)","progress-ring-disabled-foreground":"#BEC3C9","rating-star-active":"#EB660D","scroll-thumb":"#BCC0C4","scroll-shadow":"0 1px 2px rgba(0, 0, 0, 0.1), 0 -1px rgba(0, 0, 0, 0.1) inset","secondary-button-background":"#E4E6EB","secondary-button-background-floating":"#ffffff","secondary-button-background-on-dark":"rgba(0, 0, 0, 0.4)","secondary-button-pressed":"rgba(0, 0, 0, 0.05)","secondary-button-stroke":"transparent","secondary-button-text":"#050505","secondary-icon":"#65676B","secondary-text":"#65676B","secondary-text-on-media":"rgba(255, 255, 255, 0.9)","section-header-text":"#4B4C4F","shadow-1":"rgba(0, 0, 0, 0.1)","shadow-2":"rgba(0, 0, 0, 0.2)","shadow-5":"rgba(0, 0, 0, 0.5)","shadow-8":"rgba(0, 0, 0, 0.8)","shadow-base":"0 1px 2px var(--shadow-2)","shadow-elevated":"0 8px 20px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1)","shadow-emphasis":"0 2px 12px var(--shadow-2)","shadow-inset":"rgba(255, 255, 255, 0.5)","shadow-on-media":"0px 0px 1px rgba(0, 0, 0, 0.62)","shadow-persistent":"0px 0px 12px rgba(52, 72, 84, 0.05)","shadow-primary":"0px 5px 12px rgba(52, 72, 84, 0.2)","shadow-responsive":"0px 8px 16px 0px rgba(0, 0, 0, 0.1)","surface-background":"#FFFFFF","switch-active":"hsl(214, 89%, 52%)","switch-inactive":"#CED0D4","switch-unchecked-background-color":"#8F9297","text-highlight":"rgba(24, 119, 242, 0.2)","input-background":"#FFFFFF","input-background-hover":"var(--input-background)","input-background-warn-hover":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-hover":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-active":"hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)","input-background-warn-active":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-active":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-disabled":"#F0F2F5","input-border-color":"#CED0D4","input-border-color-hover":"var(--placeholder-text)","input-label-color-highlighted":"hsl(214, 89%, 52%)","input-label-color-inside":"var(--secondary-text)","input-label-color-error":"var(--negative)","input-label-color-disabled":"var(--disabled-text)","text-input-outside-label":"#000000","toast-background":"rgba(255, 255, 255)","toast-text":"rgb(0, 0, 0)","toast-text-link":"#216FDB","toast-border-color":"transparent","toast-border-style":"none","toast-border-width":"0px","toggle-active-background":"#E7F3FF","toggle-active-icon":"rgb(24, 119, 242)","toggle-active-text":"rgb(24, 119, 242)","toggle-button-active-background":"#E7F3FF","tooltip-background":"rgba(244, 244, 244, 0.8)","tooltip-box-shadow":"0 2px 4px 0 var(--shadow-5)","popover-border-color":"transparent",wash:"#E4E6EB","web-wash":"#F0F2F5",warning:"hsl(40, 89%, 52%)","chat-bubble-emphasis-ring-after":"black","chat-bubble-emphasis-ring-before":"white","chat-text-blockquote-color-background-line":"rgba(0, 0, 0, 0.12)","chat-text-blockquote-color-text-primary-media":"rgba(255, 255, 255, 0.7)","chat-incoming-message-bubble-background-color":"#F0F0F0","chat-outgoing-message-bubble-background-color":"var(--accent)","chat-replied-message-background-color":"rgba(0, 0, 0, 0.03)","radio-border-color":"var(--primary-icon)","radio-border-color-disabled":"var(--disabled-button-background)","radio-border-color-selected":"var(--accent)","radio-checked-icon-color":"var(--accent)","radio-checked-icon-color-disabled":"var(--disabled-button-background)","dialog-anchor-vertical-padding":"56px","header-height":"0px","global-panel-width":"0px","global-panel-width-expanded":"0px","alert-banner-corner-radius":"8px","button-corner-radius":"6px","button-corner-radius-medium":"10px","button-corner-radius-large":"12px","button-height-large":"40px","button-height-medium":"36px","button-padding-horizontal-large":"16px","button-padding-horizontal-medium":"16px","button-padding-icon-only":"16px","button-icon-padding-large":"16px","button-icon-padding-medium":"16px","button-inner-icon-spacing-large":"3px","button-inner-icon-spacing-medium":"3px","blueprint-button-height-medium":"40px","blueprint-button-height-large":"48px","card-corner-radius":"8px","card-box-shadow":"0 12px 28px 0 var(--shadow-2), 0 2px 4px 0 var(--shadow-1)","card-padding-horizontal":"10px","card-padding-vertical":"20px","chip-corner-radius":"6px","comment-bubble":"18px","dialog-corner-radius":"8px","glimmer-corner-radius":"8px","image-corner-radius":"4px","infochip-medium-radius":"12px","input-corner-radius":"6px","input-border-width":"1px","nav-list-cell-corner-radius":"8px","list-cell-corner-radius":"8px","list-cell-min-height":"52px","list-cell-padding-vertical":"20px","list-cell-padding-vertical-with-addon":"14px","menu-base-list-item-padding-horizontal":"8px","menu-base-list-item-padding-vertical":"12px","menu-base-size-full-margin-end":"48px","menu-item-base-margin-horizontal":"8px","menu-item-base-margin-vertical":"0px","menu-item-base-padding-horizontal":"8px","menu-item-base-overlay-radius":"4px","menu-item-base-padding-vertical":"12px","menu-item-base-with-icon-padding-horizontal":"var(--menu-item-base-padding-horizontal)","separator-menu-item-margin-horizontal":"16px","separator-menu-item-margin-vertical":"4px","nav-list-cell-min-height":"0px","nav-list-cell-padding-vertical":"16px","nav-list-cell-padding-vertical-with-addon":"16px","nux-card-body-padding-end":"24px","page-footer-padding-vertical":"16px","popover-border-style":"none","popover-border-width":"0px","section-header-addOnEnd-margin-horizontal":"8px","section-header-addOnStart-margin-horizontal":"12px","section-header-addOnEnd-button-padding-horizontal":"0px","section-header-addOnEnd-button-padding-vertical":"0px","section-header-padding-vertical":"16px","section-header-subtitle-margin-vertical":"14px","section-header-subtitle-with-addOnEnd-margin-vertical":"6px","tab-height":"60px","tab-icon-padding-end":"0px","tab-text-icon-gap":"4px","tab-underline-color":"transparent","tab-underline-height":"3px","text-badge-corner-radius":"4px","text-badge-padding-horizontal":"6px","text-badge-padding-vertical":"6px","text-input-multi-padding-between-text-scrollbar":"20px","text-input-multi-padding-scrollbar":"16px","text-input-caption-margin-top":"10px","text-input-padding-vertical":"12px","toast-addon-padding-horizontal":"6px","toast-addon-padding-vertical":"6px","toast-container-max-width":"100%","toast-container-min-width":"0px","toast-container-padding-horizontal":"14px","toast-container-padding-vertical":"10px","toast-corner-radius":"8px","toaster-view-max-width":"328px","tooltip-corner-radius":"8px","typeahead-list-outer-padding-vertical":"2px","fds-animation-enter-exit-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-enter-exit-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-swap-shuffle-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-swap-shuffle-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-passive-move-in":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-passive-move-out":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-quick-move-in":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-quick-move-out":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-fade-in":"cubic-bezier(0, 0, 1, 1)","fds-animation-fade-out":"cubic-bezier(0, 0, 1, 1)","fds-duration-extra-extra-short-in":"100ms","fds-duration-extra-extra-short-out":"100ms","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","fds-duration-short-in":"280ms","fds-duration-short-out":"200ms","fds-duration-medium-in":"400ms","fds-duration-medium-out":"350ms","fds-duration-long-in":"500ms","fds-duration-long-out":"350ms","fds-duration-extra-long-in":"1000ms","fds-duration-extra-long-out":"1000ms","fds-duration-none":"0ms","fds-fast":"200ms","fds-slow":"400ms","font-family-apple":"system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif","font-family-code":"ui-monospace, Menlo, Consolas, Monaco, monospace","font-family-default":"Helvetica, Arial, sans-serif","font-family-segoe":"Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","font-family-system-fds":"system-ui, -apple-system, BlinkMacSystemFont, Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","text-input-field-font-family":"Placeholder Font","text-input-field-font-size":"1rem","text-input-field-font-stretch":"initial","text-input-field-font-weight":"500","text-input-field-line-height":"1.2941","text-input-label-font-family":"Placeholder Font","text-input-label-font-size":"17px","text-input-label-font-size-scale-multiplier":"0.75","text-input-label-font-stretch":"initial","text-input-label-font-weight":"400","text-input-label-line-height":"1.2941","messenger-card-min-width":"300px","messenger-card-max-width":"480px","messenger-application-max-width":"2560px","messenger-sidebar-collapsed-width":"44px","messenger-sidebar-expanded-width":"240px","messenger-card-corner-radius":"8px","messenger-card-spacing":"16px","chat-bubble-padding-vertical":"8px","chat-bubble-padding-horizontal":"12px","chat-bubble-border-radius":"18px","dialog-size-medium-width":"100%","dialog-size-small-width":"100%","focus-ring-outline-forced-colors":"2px auto transparent !important","focus-ring-outline-link":"2px auto var(--focus-ring-blue)","focus-ring-shadow-default":"0 0 0 2px var(--always-white), 0 0 0 4px var(--focus-ring-blue)","focus-ring-shadow-inset":"0 0 0 2px var(--focus-ring-blue) inset, 0 0 0 4px var(--always-white) inset","glimmer-animation-direction":"alternate","glimmer-animation-duration":"1000ms","glimmer-animation-timing-function":"linear","radio-checked-icon-size-large":"12px","radio-checked-icon-size-medium":"12px","radio-border-width":"2px","radio-size-large":"24px","radio-size-medium":"20px","blue-primary":"rgb(0,136,244)","blue-secondary":"rgb(4,59,114)","blue-tertiary":"rgb(235,245,255)","chartreuse-primary":"rgb(106,147,22)","chartreuse-secondary":"rgb(50,65,19)","chartreuse-tertiary":"rgb(226,255,152)","cyan-primary":"rgb(0,142,213)","cyan-secondary":"rgb(15,63,93)","cyan-tertiary":"rgb(231,245,255)","dataviz-primary-2":"rgb(156,219,255)","dataviz-primary-3":"rgb(73,156,255)","dataviz-secondary-1":"rgb(83,78,191)","dataviz-secondary-2":"rgb(103,96,228)","dataviz-secondary-3":"rgb(119,45,88)","dataviz-supplementary-1":"rgb(253,91,67)","dataviz-supplementary-2":"rgb(161,132,0)","dataviz-supplementary-3":"rgb(36,131,44)","dataviz-supplementary-4":"rgb(51,51,52)","fuschia-primary":"rgb(250,45,138)","fuschia-secondary":"rgb(118,14,62)","fuschia-tertiary":"rgb(255,241,246)","green-primary":"rgb(43,154,53)","green-secondary":"rgb(26,68,27)","green-tertiary":"rgb(227,250,224)","magenta-primary":"rgb(215,77,204)","magenta-secondary":"rgb(96,36,91)","magenta-tertiary":"rgb(255,239,254)","orange-primary":"rgb(208,108,20)","orange-secondary":"rgb(94,49,14)","orange-tertiary":"rgb(255,241,239)","purple-primary":"rgb(125,116,255)","purple-secondary":"rgb(55,50,121)","purple-tertiary":"rgb(245,241,255)","red-primary":"rgb(251,60,68)","red-secondary":"rgb(118,22,27)","red-tertiary":"rgb(255,241,239)","teal-primary":"rgb(0,152,124)","teal-secondary":"rgb(10,68,56)","teal-tertiary":"rgb(227,247,241)","yellow-primary":"rgb(161,132,0)","yellow-secondary":"rgb(72,59,12)","yellow-tertiary":"rgb(255,246,161)","base-unit":"4px","blue-0":"245, 251, 255","blue-1":"224, 241, 255","blue-2":"179, 219, 255","blue-3":"112, 188, 255","blue-4":"71, 175, 255","blue-5":"0, 149, 246","blue-6":"0, 116, 204","blue-7":"0, 87, 163","blue-8":"0, 55, 107","blue-9":"0, 41, 82","cyan-5":"39, 196, 245","font-family-monospace":"Menlo, Monaco, Consolas, Courier New, monospace","font-family-system":"system-ui, -apple-system, BlinkMacSystemFont, Roboto, Helvetica, Arial, sans-serif","font-family-serif":"ui-serif, New York Small, New York, Georgia, Times New Roman, Times, serif","font-weight-system-bold":"700","font-weight-system-extra-bold":"800","font-weight-system-extra-light":"200","font-weight-system-light":"300","font-weight-system-medium":"500","font-weight-system-regular":"400","font-weight-system-semibold":"600","green-4":"120, 222, 69","green-5":"88, 195, 34","green-6":"55, 166, 0","grey-0":"245, 245, 245","grey-1":"239, 239, 239","grey-2":"219, 219, 219","grey-3":"199, 199, 199","grey-4":"168, 168, 168","grey-5":"142, 142, 142","grey-6":"115, 115, 115","grey-7":"85, 85, 85","grey-8":"54, 54, 54","grey-9":"38, 38, 38","grey-10":"26, 26, 26","orange-5":"253, 141, 50","pink-5":"209, 8, 105","purple-5":"163, 7, 186","red-4":"255, 104, 116","red-5":"237, 73, 86","red-6":"198, 35, 48","red-7":"167, 3, 17","system-10-font-size":"10px","system-10-line-height":"12px","system-11-font-size":"11px","system-11-line-height":"13px","system-12-font-size":"12px","system-13-font-size":"13px","system-12-line-height":"16px","system-14-font-size":"14px","system-14-line-height":"18px","system-15-font-size":"15px","system-15-line-height":"21px","system-16-font-size":"16px","system-17-font-size":"17px","system-16-line-height":"20px","system-18-font-size":"18px","system-18-line-height":"24px","system-20-font-size":"20px","system-20-line-height":"25px","system-22-font-size":"22px","system-22-line-height":"26px","system-24-font-size":"24px","system-24-line-height":"27px","system-26-font-size":"26px","system-26-line-height":"28px","system-28-font-size":"28px","system-28-line-height":"32px","system-30-font-size":"30px","system-30-line-height":"36px","system-32-font-size":"32px","system-32-line-height":"40px","system-40-font-size":"40px","system-40-line-height":"46px","yellow-5":"253, 203, 92","barcelona-success-icon":"#20c584","barcelona-green-dot":"rgb(94, 231, 71)","glimmer-stagger-time":"100ms","base-line-clamp-line-height":"calc(1.4 * 1em)","barcelona-desktop-header-height":"74px","barcelona-mobile-header-height":"60px","barcelona-mobile-logged-out-header-height":"102px","barcelona-large-screen-breakpoint":"768px","barcelona-large-screen-composer-footer-height":"84px","barcelona-small-screen-composer-footer-height":"64px","barcelona-composer-header-height":"46px","barcelona-large-screen-max-width":"620px","barcelona-large-screen-max-page-width":"1230px","barcelona-large-screen-padding":"344px","barcelona-large-screen-content-width":"572px","barcelona-medium-screen-breakpoint":"700px","barcelona-medium-screen-max-width":"520px","barcelona-small-screen-nav-height":"68px","barcelona-small-screen-nav-height-short":"50px","barcelona-threadline-column-width":"48px","barcelona-desktop-page-horizontal-padding":"24px","barcelona-post-horizontal-padding":"12px","barcelona-quoted-post-horizontal-padding":"16px","barcelona-carousel-gap":"6px","barcelona-lightbox-horizontal-padding":"92px","barcelona-search-page-width":"572px","barcelona-columns-item-horizontal-padding":"24px","barcelona-user-list-item-padding":"16px","barcelona-side-navigation-width":"76px","barcelona-tombstone-padding-horizontal":"12px","barcelona-post-footer-height":"60px","barcelona-markup-attachment-max-width":"355px","barcelona-box-shadow-04":"rgba(0, 0, 0, 0.04)","barcelona-box-shadow-08":"rgba(0, 0, 0, 0.08)","barcelona-box-shadow-10":"rgba(0, 0, 0, 0.10)","barcelona-box-shadow-12":"rgba(0, 0, 0, 0.12)","barcelona-box-shadow-15":"rgba(0, 0, 0, 0.15)","barcelona-dark-backdrop-background":"rgba(0, 0, 0, 0.7)","barcelona-onboarding-navigation-height":"52px","barcelona-onboarding-small-screen-navigation-height":"38px","barcelona-onboarding-content-width":"390px","barcelona-notification-badge-background":"rgb(255, 48, 64)","barcelona-notification-badge-background-wide-gamut":"color(display-p3 1 0.18 0.25 / 1)","barcelona-verified-badge-background":"rgb(0, 149, 246)","barcelona-video-player-mute-button-background":"rgb(40, 40, 40, 0.5)","barcelona-activity-icon-background-first-post":"#007aff","barcelona-activity-icon-background-follow":"#6e3def","barcelona-activity-icon-background-like":"#fe0169","barcelona-activity-icon-background-mention":"#20c584","barcelona-activity-icon-background-quote":"#fe7900","barcelona-activity-icon-background-markup":"#ffd600","barcelona-activity-icon-background-polls":"#007aff","barcelona-activity-icon-background-reply":"#24c3ff","barcelona-activity-icon-background-repost":"#c329bf","barcelona-activity-icon-background-request":"#ffb800","barcelona-activity-icon-background-subscribe":"#24c3ff","barcelona-activity-icon-background-warning":"#ff0000","barcelona-activity-icon-background-pinned-reply":"#0d31eb","barcelona-medium-column-layout-width":"420px","barcelona-column-layout-max-width":"640px","site-width-wide":"935px","gradient-yellow":"255, 214, 0","gradient-orange":" 255, 122, 0","gradient-pink":"255, 1, 105","gradient-lavender":"211, 0, 197","gradient-purple":"118, 56, 250","ig-primary-background":"255, 255, 255","ig-elevated-highlight-background":"239, 239, 239","barcelona-primary-text":"rgb(0, 0, 0)","barcelona-secondary-text":"rgb(153, 153, 153)","barcelona-secondary-text-loading":"rgba(153, 153, 153, 0.25)","barcelona-primary-button":"rgb(0, 0, 0)","barcelona-primary-button-text":"rgb(255, 255, 255)","barcelona-secondary-button":"rgb(255, 255, 255)","barcelona-liked-text":"rgb(255, 48, 64)","barcelona-liked-text-wide-gamut":"color(display-p3 1 0.18 0.25 / 1)","barcelona-link-text":"rgb(0, 149, 246)","barcelona-error-text":"rgb(255, 48, 64)","barcelona-beta-text":"rgb(149, 120, 179)","barcelona-charcoal-text":"rgb(66, 66, 66)","barcelona-brand-highlighted-text":"rgb(0, 42, 6)","barcelona-primary-icon":"rgb(0, 0, 0)","barcelona-secondary-icon":"rgb(153, 153, 153)","barcelona-navigation-icon":"rgb(184, 184, 184)","barcelona-charcoal-icon":"rgb(66, 66, 66)","barcelona-primary-background":"rgb(255, 255, 255)","barcelona-elevated-background":"rgb(255, 255, 255)","barcelona-secondary-background":"rgb(250, 250, 250)","barcelona-tertiary-background":"rgb(245, 245, 245)","background-secondary":"rgb(239, 239, 239)","barcelona-primary-button-background":"rgb(0, 0, 0)","barcelona-header-background":"rgba(255, 255, 255, 0.85)","barcelona-elevated-header-background":"rgba(255, 255, 255, 0.85)","barcelona-elevated-tertiary-background":"rgb(255, 255, 255)","barcelona-hovered-background":"rgba(0, 0, 0, 0.04)","barcelona-pressed-background":"rgba(0, 0, 0, 0.06)","barcelona-side-navigation-background":"rgba(250, 250, 250, 0.85)","barcelona-dialog-backdrop-background":"rgba(255, 255, 255, 0.85)","barcelona-navigation-item-hover-background":"rgba(0, 0, 0, 0.035)","barcelona-floating-button-background":"rgba(0, 0, 0, 0.03)","barcelona-upsell-gradient-background":"linear-gradient(0deg, color(display-p3 1 1 1) 54.03%, color(display-p3 1 1 1 / 0.00) 99.83%)","barcelona-avatar-ig-background-border-hovered":"rgba(255, 255, 255, 0.1)","barcelona-beta-background":"rgba(155, 56, 255, 0.04)","barcelona-brand-highlighted-background":"rgb(250, 234, 78)","barcelona-brand-highlighted-pressure-point-background":"rgb(239, 217, 0)","barcelona-insights-background":"rgb(245, 245, 245)","barcelona-primary-outline":"rgba(0, 0, 0, 0.15)","barcelona-primary-column-outline":"rgb(213, 213, 213)","barcelona-media-outline":"rgba(0, 0, 0, 0.15)","barcelona-threadline":"rgb(229, 229, 229)","barcelona-menu-outline":"rgba(0, 0, 0, 0.04)","barcelona-glimmer-background":"rgb(225, 225, 225)","barcelona-checkbox-checked-background":"rgb(16, 16, 16)","barcelona-checkbox-checkmark-color":"rgb(255, 255, 255)","barcelona-checkbox-outline":"rgb(222, 222, 222)","barcelona-composer-poll-option-outline":"rgb(229, 229, 229)","barcelona-poll-option-meter-background":"rgb(240, 240, 240)","barcelona-poll-option-meter-highlighted-background":"rgb(0, 0, 0)","barcelona-switch-background-off":"rgb(219, 223, 228)","barcelona-cherry-blossom-lightpink":"rgb(255, 224, 247)","barcelona-translucent-column-header-background":"rgb(254, 254, 254)","barcelona-tooltip-background":"rgb(255, 255, 255)","barcelona-splash-screen-logo-color":"rgb(0, 0, 0)","barcelona-bar-chart-gradient-bottom":"rgb(0, 0, 0)","barcelona-bar-chart-gradient-top":"rgb(102, 102, 102)","barcelona-user-list-action-button-gradient":"linear-gradient(180deg, color(display-p3 0.9804 0.9804 0.9804 / 0.00) 0%, color(display-p3 0.9804 0.9804 0.9804) 49.07%, color(display-p3 0.9804 0.9804 0.9804) 100%)"});i.default=e}),66);
__d("BarcelonaThemeProvider.react",["BarcelonaStyleXDarkTheme","BarcelonaStyleXDefaultTheme","BaseThemeProvider.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={dark:r("BarcelonaStyleXDarkTheme"),light:r("BarcelonaStyleXDefaultTheme"),type:"VARIABLES"};function d(t){var n=o("react-compiler-runtime").c(6),a=t.children,i=t.displayMode,l=t.xstyle,s;n[0]!==a||n[1]!==l?(s=function(n,o){return u.jsx("div",{className:(e||(e=r("stylex")))(n,l),style:o,children:a})},n[0]=a,n[1]=l,n[2]=s):s=n[2];var d;return n[3]!==i||n[4]!==s?(d=u.jsx(r("BaseThemeProvider.react"),{config:c,displayMode:i,children:s}),n[3]=i,n[4]=s,n[5]=d):d=n[5],d}l.default=d}),98);
__d("CAAFetaSavePasswordInterstitialDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9971025792955102"}),null);
__d("CAAFetaSavePasswordInterstitialDialogQuery$Parameters",["CAAFetaSavePasswordInterstitialDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("CAAFetaSavePasswordInterstitialDialogQuery_facebookRelayOperation"),metadata:{},name:"CAAFetaSavePasswordInterstitialDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("CDSListCellRefContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).createContext,u=s();l.default=u}),98);
__d("CDSListContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({density:"regular",selectedColorScheme:"neutral"});l.default=u}),98);
__d("CDSListTruncationLimitContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext();l.default=u}),98);
__d("CDSMenuItemRoleContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("FRLXAuthHomeControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/",Object.freeze({uphe:!1}),void 0),s=e;l.default=s}),98);
__d("XCometHomeControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("ConsentTemplateActionUtils",["FBLogger","FRLXAuthHomeControllerRouteBuilder","THXBarcelonaFeedControllerRouteBuilder","XCometHomeControllerRouteBuilder","XMessengerDotComCometRootControllerRouteBuilder","XPolarisFeedControllerRouteBuilder","goForceFullPageRedirectTo"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(t("flow_finished"),n!=null){n();return}var o=s(e);r("goForceFullPageRedirectTo")(o)}function s(e){switch(e){case"facebook_comet":return r("XCometHomeControllerRouteBuilder").buildURL({});case"facebook_weblite":return r("XCometHomeControllerRouteBuilder").buildURL({});case"messenger_dot_com":return r("XMessengerDotComCometRootControllerRouteBuilder").buildURL({});case"instagram_web":return r("XPolarisFeedControllerRouteBuilder").buildURL({});case"meta_comet":return r("FRLXAuthHomeControllerRouteBuilder").buildURL({});case"barcelona_web":return r("THXBarcelonaFeedControllerRouteBuilder").buildURL({});default:throw r("FBLogger")("consent_core").mustfixThrow("Surface %s is not supported by Consent Template infra and cannot be used for shutdown experience",e)}}l.handleEndOfConsentFlow=e}),98);
__d("GeneralizedConsentLoggingEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4746"),s=o("FalcoLoggerInternal").create("generalized_consent_logging_event",e),u=s;l.default=u}),98);
__d("ConsentGCLLogger",["GeneralizedConsentLoggingEventFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o,a,i){var l={consent_identifier:n,event:String(e),event_data:t,experience_id:a,source:o,target:i};r("GeneralizedConsentLoggingEventFalcoEvent").log(function(){return l})}l.logGCLEvent=e}),98);
__d("ConsentTemplateConsentExperienceIDContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=s.createContext("");function p(e){var t=e.children,n=e.consentExperienceID,r=d(function(){return n},[n]);return s.jsx(m.Provider,{value:r,children:t})}p.displayName=p.name+" [from "+i.id+"]";function _(){var e=c(m);return e}l.ConsentTemplateConsentExperienceIDContextProvider=p,l.useConsentTemplateConsentExperienceID=_}),98);
__d("ConsentTemplateFlowContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=s.createContext("");function p(e){var t=e.children,n=e.flow,r=d(function(){return n},[n]);return s.jsx(m.Provider,{value:r,children:t})}p.displayName=p.name+" [from "+i.id+"]";function _(){var e=c(m);return e}l.ConsentTemplateFlowContextProvider=p,l.useConsentTemplateFlow=_}),98);
__d("ConsentTemplateSurfaceContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=s.createContext("unknown");function p(e){var t=e.children,n=e.surface,r=d(function(){return n},[n]);return s.jsx(m.Provider,{value:r,children:t})}p.displayName=p.name+" [from "+i.id+"]";function _(){var e=c(m);return e}l.ConsentTemplateSurfaceContextProvider=p,l.useConsentTemplateSurface=_}),98);
__d("ConsentTemplateGeneralizedConsentLoggingContext",["ConsentGCLLogger","ConsentTemplateConsentExperienceIDContext","ConsentTemplateFlowContext","ConsentTemplateSurfaceContext","nullthrows","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useMemo,p=s.createContext(null);function _(e){var t=e.children,n=e.gclExperienceID,r=e.gclSource,o=e.gclTarget,a=m(function(){return{gclExperienceID:n,gclSource:r,gclTarget:o}},[n,r,o]);return s.jsx(p.Provider,{value:a,children:t})}_.displayName=_.name+" [from "+i.id+"]";function f(e){var t=r("nullthrows")(d(p),"GCL params have not been set via context"),n=t.gclExperienceID,a=t.gclSource,i=t.gclTarget,l=o("ConsentTemplateFlowContext").useConsentTemplateFlow(),s=o("ConsentTemplateSurfaceContext").useConsentTemplateSurface(),u=o("ConsentTemplateConsentExperienceIDContext").useConsentTemplateConsentExperienceID();return c(function(t){var r={consent_experience_id:u,flow:l,surface:s};o("ConsentGCLLogger").logGCLEvent(t,r,e,a,n,i)},[e,n,a,i,l,s,u])}l.ConsentTemplateGeneralizedConsentLoggingContextProvider=_,l.useConsentTemplateGeneralizedConsentLoggingCallback=f}),98);
__d("ConsentTemplateActionCallbacksContext",["CometRelay","ConsentTemplateActionUtils","ConsentTemplateGeneralizedConsentLoggingContext","ConsentTemplateSurfaceContext","nullthrows","react","useConsentTemplateFlowConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=c(null);function _(){var e=d(p);return r("nullthrows")(e,"Prompt action callbacks have not been set via context")}function f(e){var t=e.children,n=e.currentConsentPrompt,a=e.onCloseDialog,i=e.popConsentPrompt,l=e.pushConsentPrompt,u=o("CometRelay").useRelayEnvironment(),c=o("ConsentTemplateSurfaceContext").useConsentTemplateSurface(),d=r("useConsentTemplateFlowConfig")(),_=o("ConsentTemplateGeneralizedConsentLoggingContext").useConsentTemplateGeneralizedConsentLoggingCallback(n),f=m(function(){return{onApproved:function(t){_("step_approved"),d.recordConsentOutcome("APPROVED",u),t!=null?l(t):o("ConsentTemplateActionUtils").handleEndOfConsentFlow(c,_,a)},onBacked:function(){_("step_backed");var e=i();e==null&&o("ConsentTemplateActionUtils").handleEndOfConsentFlow(c,_,a)},onContinued:function(t){_("step_continued"),l(t)},onDenied:function(t){_("step_denied"),d.recordConsentOutcome("DENIED",u),t!=null?l(t):o("ConsentTemplateActionUtils").handleEndOfConsentFlow(c,_,a)},onDismissed:function(){_("step_dismissed"),o("ConsentTemplateActionUtils").handleEndOfConsentFlow(c,_,a)},onFlowLaunched:function(){_("flow_launched")}}},[l,i,c,d,u,_,a]);return s.jsx(p.Provider,{value:f,children:t})}f.displayName=f.name+" [from "+i.id+"]",l.ConsentTemplateActionCallbacksContext=p,l.useConsentTemplateActionCallbacks=_,l.ConsentTemplateActionCallbacksProvider=f}),98);
__d("ConsentTemplateFlow.type",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({CELEB_BAIT:"celeb_bait",EXAMPLE:"example",TEMPLATE_1A:"template_1a",TEMPLATE_1B:"template_1b",TEMPLATE_1A_XMDS:"template_1a_xmds",TEMPLATE_1B_XMDS:"template_1b_xmds",UOOM:"uoom"});i.ConsentTemplateFlow=e}),66);
__d("ConsentTemplateFlows",["CelebBaitConsentTemplateConfig","ConsentTemplateFlow.type","ExampleConsentTemplateConfig","FBLogger","Template1AConsentTemplateConfig","Template1AXMDSConsentTemplateConfig","Template1BConsentTemplateConfig","Template1BXMDSConsentTemplateConfig","UOOMConsentTemplateConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("ConsentTemplateFlow.type").ConsentTemplateFlow.cast(e);if(t==null)throw r("FBLogger")("consent_core").mustfixThrow("The flow %s is not supported by Consent Templates",e);switch(t){case o("ConsentTemplateFlow.type").ConsentTemplateFlow.CELEB_BAIT:return o("CelebBaitConsentTemplateConfig").CelebBaitConsentTemplateConfig;case o("ConsentTemplateFlow.type").ConsentTemplateFlow.EXAMPLE:return o("ExampleConsentTemplateConfig").ExampleConsentTemplateConfig;case o("ConsentTemplateFlow.type").ConsentTemplateFlow.TEMPLATE_1A:return o("Template1AConsentTemplateConfig").Template1AConsentTemplateConfig;case o("ConsentTemplateFlow.type").ConsentTemplateFlow.TEMPLATE_1B:return o("Template1BConsentTemplateConfig").Template1BConsentTemplateConfig;case o("ConsentTemplateFlow.type").ConsentTemplateFlow.TEMPLATE_1A_XMDS:return o("Template1AXMDSConsentTemplateConfig").Template1AXMDSConsentTemplateConfig;case o("ConsentTemplateFlow.type").ConsentTemplateFlow.TEMPLATE_1B_XMDS:return o("Template1BXMDSConsentTemplateConfig").Template1BXMDSConsentTemplateConfig;case o("ConsentTemplateFlow.type").ConsentTemplateFlow.UOOM:return o("UOOMConsentTemplateConfig").UOOMConsentTemplateConfig}}l.getConsentTemplateFlowConfig=e}),98);
__d("CelebBaitConsentTemplateConfigMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9805440179541125"}),null);
__d("CelebBaitConsentTemplateConfigMutation.graphql",["CelebBaitConsentTemplateConfigMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"outcome"}],t=[{alias:null,args:[{kind:"Variable",name:"outcome",variableName:"outcome"}],kind:"ScalarField",name:"celeb_bait_write_consent_outcome",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CelebBaitConsentTemplateConfigMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CelebBaitConsentTemplateConfigMutation",selections:t},params:{id:n("CelebBaitConsentTemplateConfigMutation_facebookRelayOperation"),metadata:{},name:"CelebBaitConsentTemplateConfigMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("CelebBaitConsentTemplateConfig",["$InternalEnum","CelebBaitConsentTemplateConfigMutation.graphql","CelebBaitExplicitConsentPromptScreen.react","CelebBaitExplicitNoticePromptScreenFB.react","CelebBaitExplicitNoticePromptScreenIG.react","CometRelay","ConsentTemplateFlow.type","FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=n("$InternalEnum")({CELEB_BAIT_EXPLICIT_CONSENT:"celeb_bait_explicit_consent",CELEB_BAIT:"celeb_bait"}),d={flow:o("ConsentTemplateFlow.type").ConsentTemplateFlow.CELEB_BAIT,getConsentTemplatePromptScreen:function(t,n){var e=c.cast(t);if(e==null)throw r("FBLogger")("consent_core").mustfixThrow("No matching consent template screen found for the given prompt %s",t);switch(e){case c.CELEB_BAIT_EXPLICIT_CONSENT:return u.jsx(r("CelebBaitExplicitConsentPromptScreen.react"),{});case c.CELEB_BAIT:switch(n){case"facebook_comet":case"facebook_weblite":return u.jsx(r("CelebBaitExplicitNoticePromptScreenFB.react"),{});case"instagram_web":return u.jsx(r("CelebBaitExplicitNoticePromptScreenIG.react"),{})}break}throw r("FBLogger")("consent_core").mustfixThrow("The consent prompt %s does not currently support the surface %s",t,n)},recordConsentOutcome:function(r,a){var t=e!==void 0?e:e=n("CelebBaitConsentTemplateConfigMutation.graphql");o("CometRelay").commitMutation(a,{mutation:t,variables:{outcome:r}})}};l.ConsentTemplatePrompts=c,l.CelebBaitConsentTemplateConfig=d}),98);
__d("MetaBrandCheckmarkShieldOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M16.64 9.768a1 1 0 1 0-1.28-1.536l-.067.055a43.006 43.006 0 0 0-4.852 4.74l-1.734-1.734a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.475-.067l.056-.067a40.999 40.999 0 0 1 5.25-5.25l.066-.055z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5.835c0-.515.28-.99.73-1.24a17.03 17.03 0 0 1 16.54 0c.45.25.73.725.73 1.24v4.104a12 12 0 0 1-6.172 10.49L12.97 21.46a2 2 0 0 1-1.942 0L9.172 20.43A12 12 0 0 1 3 9.939V5.835zm2 .346a15.03 15.03 0 0 1 14 0V9.94a10 10 0 0 1-5.144 8.742L12 19.712l-1.856-1.031A10 10 0 0 1 5 9.939V6.181z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandGearOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0zm-2 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m22.191 9.207-2.224 2.06a8.112 8.112 0 0 1 0 1.466l2.224 2.06a1 1 0 0 1 .187 1.233l-1.702 2.948a1 1 0 0 1-1.162.455l-2.895-.896a7.991 7.991 0 0 1-1.27.735l-.672 2.954a1 1 0 0 1-.975.778H10.3a1 1 0 0 1-.975-.778l-.672-2.954a8 8 0 0 1-1.27-.735l-2.895.896a1 1 0 0 1-1.162-.455l-1.702-2.948a1 1 0 0 1 .187-1.233l2.224-2.06a8.1 8.1 0 0 1 0-1.466L1.81 9.207a1 1 0 0 1-.187-1.233l1.702-2.948a1 1 0 0 1 1.162-.455l2.895.896a7.992 7.992 0 0 1 1.27-.735l.672-2.954A1 1 0 0 1 10.299 1h3.403a1 1 0 0 1 .975.778l.672 2.954a7.99 7.99 0 0 1 1.27.735l2.895-.896a1 1 0 0 1 1.162.455l1.702 2.948a1 1 0 0 1-.187 1.233zm-8.574-3.071.894.412c.335.155.653.34.952.551l.805.57 3.075-.951.903 1.564-2.36 2.186.09.98a6.093 6.093 0 0 1 0 1.104l-.09.98 2.36 2.185-.903 1.565-3.075-.951-.805.57a5.993 5.993 0 0 1-.952.55l-.894.413L12.904 21h-1.807l-.713-3.136-.894-.412a5.993 5.993 0 0 1-.952-.551l-.805-.57-3.075.951-.904-1.565 2.36-2.185-.089-.98a6.102 6.102 0 0 1 0-1.104l.09-.98-2.36-2.186.903-1.564 3.075.951.805-.57c.299-.212.617-.396.952-.55l.894-.413L11.097 3h1.807l.713 3.136z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandSmileyStardustOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M19.004 2.327a.541.541 0 0 0-.993 0l-.715 1.664a.54.54 0 0 1-.284.283l-1.684.72a.538.538 0 0 0-.005.989l1.62.71a.54.54 0 0 1 .274.271l.784 1.72c.194.426.804.42.989-.01l.73-1.699a.54.54 0 0 1 .284-.283l1.668-.713a.538.538 0 0 0 0-.991l-1.668-.714a.54.54 0 0 1-.284-.283l-.716-1.664z"}),s.jsx("path",{d:"M19 13c0-.698-.102-1.373-.293-2.009a2.503 2.503 0 0 0 1.79-.963 9 9 0 1 1-7.097-5.92 2.584 2.584 0 0 0-.332 1.973A7 7 0 1 0 19 13z"}),s.jsx("path",{d:"M9.227 12.636c.678 0 1.227-.732 1.227-1.636 0-.904-.549-1.636-1.227-1.636S8 10.096 8 11c0 .904.55 1.636 1.227 1.636zM8.172 14.168a1 1 0 0 1 1.387.277c.452.677 1.348 1.191 2.441 1.191 1.094 0 1.989-.514 2.441-1.191a1 1 0 0 1 1.663 1.11c-.854 1.28-2.4 2.081-4.104 2.081-1.703 0-3.25-.801-4.104-2.08a1 1 0 0 1 .276-1.388zM14.777 12.636c.678 0 1.228-.732 1.228-1.636 0-.904-.55-1.636-1.228-1.636-.677 0-1.227.732-1.227 1.636 0 .904.55 1.636 1.227 1.636z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("CelebBaitExplicitConsentPromptScreen.react",["fbt","BaseRow.react","BaseRowItem.react","BaseView.react","CometColumnItem.react","CometPlaceholder.react","ConsentTemplateActionCallbacksContext","ConsentTemplateSurfaceContext","MetaBrandCaretLeftOutline24.svg.react","MetaBrandCheckmarkShieldOutline24.svg.react","MetaBrandGearOutline24.svg.react","MetaBrandSmileyStardustOutline24.svg.react","MetaLockupPrimary.react","XMDSButton.react","XMDSDialogContainer.react","XMDSDialogLoadingState.react","XMDSIcon.react","XMDSIconButton.react","XMDSInlinePressableText.react","XMDSText.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={footer:{backgroundColor:"x2bj2ny",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,"@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xx6bls6","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerDisclosure:{paddingBottom:"xr1496l",paddingTop:"xqy66fx",$$css:!0},header:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x8nclml",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},primaryButton:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},section:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},sectionIconTextList:{paddingBottom:"x10b6aqq",paddingTop:"xyamay9",$$css:!0},sectionIconTextListItem:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemContent:{paddingBottom:"x1a8lsjc",paddingTop:"x1yrsyyn",$$css:!0},sectionIconTextListItemContentSpaceBetween:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemIcon:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionParagraph:{paddingTop:"x7sb2j6",$$css:!0}};function d(){var e,t,n,a,l,d=o("ConsentTemplateSurfaceContext").useConsentTemplateSurface(),m="";switch(d){case"facebook_comet":case"facebook_weblite":m="https://www.facebook.com/privacy/policy/";break;default:m="https://privacycenter.instagram.com/policy/"}var p=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),_=p.onApproved,f=p.onBacked,g=p.onDenied;return u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("XMDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:u.jsxs(r("XMDSDialogContainer.react"),{disableClosingWithMask:!0,size:"medium",children:[u.jsxs(e=r("BaseRow.react"),{xstyle:c.navbar,children:[u.jsx(r("XMDSIconButton.react"),{"aria-label":s._(/*BTDS*/"Back"),onPress:f,children:u.jsx(t=r("XMDSIcon.react"),{color:"primary",icon:r("MetaBrandCaretLeftOutline24.svg.react"),size:24})}),u.jsx(r("MetaLockupPrimary.react"),{size:12}),u.jsx("div",{className:"xc9qbxq x14qfxbe"})]}),u.jsx(n=r("BaseView.react"),{xstyle:[c.root,c.header],children:u.jsx(a=r("XMDSText.react"),{color:"primaryText",isPrimaryHeading:!0,textAlign:"start",textStyle:"headline1",children:s._(/*BTDS*/"Allow Meta to use facial recognition technology on your image to help protect it from misuse")})}),u.jsxs(r("CometColumnItem.react"),{expanding:!0,children:[u.jsxs(n,{xstyle:[c.root,c.section],children:[u.jsx(n,{xstyle:c.sectionParagraph,children:u.jsx(a,{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"To help us quickly and more accurately detect and stop scams that use your image, we would like to use facial recognition technology. {=m1}",[s._implicitParam("=m1",u.jsx(r("XMDSInlinePressableText.react"),{linkProps:{target:"_blank",url:"https://www.meta.com/help/1265316287987507/"},children:s._(/*BTDS*/"Learn how we use this technology.")}))])})}),u.jsxs(n,{xstyle:c.sectionIconTextList,children:[u.jsxs(e,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l=r("BaseRowItem.react"),{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(t,{icon:r("MetaBrandSmileyStardustOutline24.svg.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(e,{align:"start",children:u.jsx(a,{color:"primaryText",textAlign:"start",textStyle:"primaryLabel",children:s._(/*BTDS*/"How we use your data")})}),u.jsx(e,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(e,{children:u.jsx(a,{color:"secondaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"If we believe your image is being misused, such as in scam ads, we will use facial recognition technology to compare that image to photos you uploaded on your Facebook and Instagram profiles, including any previous profile photos on Facebook.")})})]})]}),u.jsxs(e,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(t,{icon:r("MetaBrandCheckmarkShieldOutline24.svg.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(e,{align:"start",children:u.jsx(a,{color:"primaryText",textAlign:"start",textStyle:"primaryLabel",children:s._(/*BTDS*/"What happens next")})}),u.jsx(e,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(e,{children:u.jsx(a,{color:"secondaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"If we confirm that your image is being misused, we will take action.")})})]})]}),u.jsxs(e,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(t,{icon:r("MetaBrandGearOutline24.svg.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(e,{align:"start",children:u.jsx(a,{color:"primaryText",textAlign:"start",textStyle:"primaryLabel",children:s._(/*BTDS*/"You can change your choice anytime")})}),u.jsx(e,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(e,{children:u.jsx(a,{color:"secondaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"You can manage this permission at any time in Accounts Center. Changes you make will apply to all the Facebook and Instagram accounts in the same Accounts Center.")})})]})]})]})]}),u.jsx(e,{expanding:!0}),u.jsxs(r("CometColumnItem.react"),{xstyle:[c.root,c.footer],children:[u.jsx(n,{xstyle:c.footerDisclosure,children:u.jsx(a,{color:"secondaryText",textAlign:"center",textStyle:"body",children:s._(/*BTDS*/"By choosing Agree, you consent to Meta using facial recognition technology on your data as described above and in the {=m1}",[s._implicitParam("=m1",u.jsx(r("XMDSInlinePressableText.react"),{linkProps:{target:"_blank",url:m},children:s._(/*BTDS*/"Privacy Policy.")}))])})}),u.jsx(n,{xstyle:c.footerButtons,children:u.jsx(e,{expanding:!0,children:u.jsxs(n,{xstyle:c.footerButtonsContainer,children:[u.jsx(l,{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("XMDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Agree"),onPress:function(){_()},size:"medium",type:"primary"})}),u.jsx(l,{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("XMDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Don't agree"),onPress:function(){g()},size:"medium",type:"secondary"})})]})})})]})]})]})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("ConsentTemplateUserContext_user_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ConsentTemplateUserContext_user_data",selections:[{alias:null,args:null,concreteType:"ConsentTemplateAPIUserData",kind:"LinkedField",name:"user_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null}],storageKey:null}],type:"ConsentTemplateAPILaunch",abstractKey:null};a.exports=e}),null);
__d("ConsentTemplateUserContext",["CometRelay","ConsentTemplateUserContext_user_data.graphql","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useContext,d=u.createContext(null);function m(t){var r=t.children,a=t.launchConsentTemplateFlowData$key,i=o("CometRelay").useFragment(e!==void 0?e:e=n("ConsentTemplateUserContext_user_data.graphql"),a).user_data;return u.jsx(d.Provider,{value:i,children:r})}m.displayName=m.name+" [from "+i.id+"]";function p(){var e=c(d);return e==null?void 0:e.short_name}l.ConsentTemplateUserContextProvider=m,l.useConsentTemplateUserShortName=p}),98);
__d("CrossFilled24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M18.707 5.293a1 1 0 0 0-1.414 0L12 10.586 6.707 5.293a1 1 0 0 0-1.414 1.414L10.586 12l-5.293 5.293a1 1 0 1 0 1.414 1.414L12 13.414l5.293 5.293a1 1 0 0 0 1.414-1.414L13.414 12l5.293-5.293a1 1 0 0 0 0-1.414z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("CelebBaitExplicitNoticePromptScreenFB.react",["fbt","BaseRow.react","BaseRowItem.react","BaseView.react","CelebBaitConsentTemplateConfig","CometBackgroundImage.react","CometColumn.react","CometColumnItem.react","CometPlaceholder.react","ConsentTemplateActionCallbacksContext","ConsentTemplateUserContext","CrossFilled24.svg.react","FDSButton.react","FDSCircleButton.react","FDSDialogContainer.react","FDSDialogLoadingState.react","FDSText.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={footer:{paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xsag5q8","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},header:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},headerTitle:{paddingTop:"xyamay9",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x879a55",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},primaryButton:{paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},section:{paddingBottom:"x10b6aqq",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},sectionParagraph:{paddingTop:"xyamay9",$$css:!0}};function d(){var e,t=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),n=t.onContinued,a=t.onDismissed,l=t.onFlowLaunched,d=o("ConsentTemplateUserContext").useConsentTemplateUserShortName();return l(),u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("FDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:u.jsxs(r("FDSDialogContainer.react"),{disableClosingWithMask:!0,size:"medium",children:[u.jsxs(r("BaseRow.react"),{xstyle:c.navbar,children:[u.jsx("div",{className:"xc9qbxq x14qfxbe"}),u.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Close"),icon:r("CrossFilled24.svg.react"),iconRatio:"large",onPress:a,size:32})]}),u.jsxs(e=r("BaseView.react"),{xstyle:[c.root,c.header],children:[u.jsx(r("CometColumn.react"),{align:"stretch",children:u.jsx(r("CometColumnItem.react"),{children:u.jsx(r("CometBackgroundImage.react"),{src:"/images/assets_DO_NOT_HARDCODE/privacy_checkup_privatetopublic/Communities-Privacy-Checkup-PrivateToPublic-BottomSheet-Header-iOS_light-2x.png"})})}),u.jsx(e,{xstyle:c.headerTitle,children:u.jsx(r("FDSText.react"),{align:"start",color:"primary",isPrimaryHeading:!0,type:"headlineEmphasized1",children:s._(/*BTDS*/"{userName}, help protect your image from being misused",[s._param("userName",d)])})})]}),u.jsx(e,{xstyle:[c.root,c.section],children:u.jsx(e,{xstyle:c.sectionParagraph,children:u.jsx(r("FDSText.react"),{align:"start",color:"primary",type:"body3",children:s._(/*BTDS*/"You can use facial recognition technology to help us detect and stop scams that use your image.")})})}),u.jsx(r("BaseRow.react"),{expanding:!0}),u.jsx(e,{xstyle:[c.root,c.footer],children:u.jsx(e,{xstyle:c.footerButtons,children:u.jsx(r("BaseRow.react"),{expanding:!0,children:u.jsxs(e,{xstyle:c.footerButtonsContainer,children:[u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("FDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Continue"),onPress:function(){n(o("CelebBaitConsentTemplateConfig").ConsentTemplatePrompts.CELEB_BAIT_EXPLICIT_CONSENT)},size:"medium",type:"primary"})}),u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("FDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Not now"),onPress:a,size:"medium",type:"secondary"})})]})})})})]})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("IGDSDialogPage.react",["BaseHeadingContextWrapper.react","BaseScrollableArea.react","FocusInertRegion.react","focusScopeQueries","react","react-compiler-runtime","shouldUseIGDSPrismDialog","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={content:{paddingBottom:"x84yb8i",paddingInlineStart:"x7vhb2i",paddingInlineEnd:"xli2wwf",paddingLeft:null,paddingRight:null,"@media (max-width: 679px)_paddingInlineStart":"x1t4wfpm","@media (max-width: 679px)_paddingInlineEnd":"xnfz16y","@media (max-width: 679px)_paddingLeft":null,"@media (max-width: 679px)_paddingRight":null,$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1yr2tfi",position:"x1n2onr6",$$css:!0},rootFullAndMinHeight:{minHeight:"xw36ugu",$$css:!0},rootFullHeight:{minHeight:"xw36ugu",$$css:!0},scrollableArea:{flexGrow:"x1iyjqo2",overscrollBehaviorY:"xy5w88m",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(29),a=t.children,i=t.disablePageScroll,l=t.footer,s=t.header,d=t.isContentInert,m=t.isFullHeightByDefault,p=t.mobileFullHeight,_=t.pageXStyle,f=t.scrollAreaRef,g=i===void 0?!1:i,h=d===void 0?!1:d,y=m===void 0?!1:m,C=p===void 0?!0:p,b,v,S;if(n[0]!==a||n[1]!==g||n[2]!==l||n[3]!==s||n[4]!==h||n[5]!==y||n[6]!==C||n[7]!==_||n[8]!==f){var R=r("shouldUseIGDSPrismDialog")(),L=!h,E;n[12]!==h?(E={0:{className:"x78zum5 xdt5ytf x1iyjqo2 x7ywyr2"},1:{className:"x78zum5 xdt5ytf x1iyjqo2 x7ywyr2 x47corl x87ps6o"}}[!!h<<0],n[12]=h,n[13]=E):E=n[13];var k;n[14]!==a||n[15]!==E?(k=u.jsx("div",babelHelpers.extends({},E,{children:a})),n[14]=a,n[15]=E,n[16]=k):k=n[16];var I;n[17]!==k||n[18]!==L?(I=u.jsx(r("FocusInertRegion.react"),{disabled:L,focusQuery:o("focusScopeQueries").tabbableScopeQuery,children:k}),n[17]=k,n[18]=L,n[19]=I):I=n[19];var T=I;n[20]!==a||n[21]!==y||n[22]!==C||n[23]!==_?(b=(e||(e=r("stylex"))).props(c.root,y&&c.rootFullHeight,y&&C&&a!=null&&c.rootFullAndMinHeight,_),n[20]=a,n[21]=y,n[22]=C,n[23]=_,n[24]=b):b=n[24],v=s,S=(a!=null||l!=null)&&u.jsxs(u.Fragment,{children:[a!=null&&u.jsx(r("BaseHeadingContextWrapper.react"),{children:g?u.jsx("div",babelHelpers.extends({},{0:{},1:{className:"x84yb8i x7vhb2i xli2wwf x1t4wfpm xnfz16y"}}[!!R<<0],{children:T})):u.jsx(r("BaseScrollableArea.react"),{horizontal:!1,ref:f,vertical:!0,xstyle:[c.scrollableArea,R&&c.content],children:T})}),l&&u.jsx("div",babelHelpers.extends({},{0:{},1:{className:"x84yb8i x7vhb2i xli2wwf x1t4wfpm xnfz16y"}}[!!R<<0],{children:l}))]}),n[0]=a,n[1]=g,n[2]=l,n[3]=s,n[4]=h,n[5]=y,n[6]=C,n[7]=_,n[8]=f,n[9]=b,n[10]=v,n[11]=S}else b=n[9],v=n[10],S=n[11];var D;return n[25]!==b||n[26]!==v||n[27]!==S?(D=u.jsxs("div",babelHelpers.extends({},b,{children:[v,S]})),n[25]=b,n[26]=v,n[27]=S,n[28]=D):D=n[28],D}l.default=d}),98);
__d("IGDSDialogPageLoadingState.react",["IGDSDialogHeader.react","IGDSDialogPage.react","IGDSSpinner.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.onClose,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{}),t[0]=a):a=t[0];var i;t[1]!==n?(i=s.jsx(r("IGDSDialogHeader.react"),{borderBottom:"none",onClose:n,children:a}),t[1]=n,t[2]=i):i=t[2];var l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("div",{className:"x6s0dn4 x78zum5 x5yr21d xl56j7k xh8yej3",children:s.jsx(r("IGDSSpinner.react"),{})}),t[3]=l):l=t[3];var u;return t[4]!==i?(u=s.jsx(r("IGDSDialogPage.react"),{footer:null,header:i,children:l}),t[4]=i,t[5]=u):u=t[5],u}l.default=u}),98);
__d("IGDSDialogContainer.react",["BaseDialog.react","BaseDialogLabelIDProvider","BaseMultiPageView.react","IGDSDialogPageLoadingState.react","PolarisUA","emptyFunction","react","react-compiler-runtime","shouldUseIGDSPrismDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo,c={anchor:{alignItems:"x1qjc9v5",maxHeight:"x1bwycvy",paddingTop:"x1x97wu9",paddingBottom:"xbr3nou",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,"@supports (padding: env(safe-area-inset-bottom, 0))_paddingBottom":"xqit15g","@supports (padding: env(safe-area-inset-bottom, 0))_paddingTop":"x1bi8yb4",$$css:!0},card:{backgroundColor:"x1jx94hy",borderStartStartRadius:"x1bphaa0",borderStartEndRadius:"x18nydb4",borderEndEndRadius:"xcm95gh",borderEndStartRadius:"x1vsb9q8",clipPath:"x1gj8qfm",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},cardPrism:{backgroundColor:"x1jx94hy",borderStartStartRadius:"x15fl9t6",borderStartEndRadius:"x1yw9sn2",borderEndEndRadius:"x1evh3fb",borderEndStartRadius:"x4giqqa",clipPath:"x1gj8qfm",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62","@media (max-width: 450px)_width":"x1kfdzhg","@media (max-width: 735px)_maxWidth":"xw2d4lh",$$css:!0},dialog:{alignItems:"x1qjc9v5",borderStartStartRadius:"x1bphaa0",borderStartEndRadius:"x18nydb4",borderEndEndRadius:"xcm95gh",borderEndStartRadius:"x1vsb9q8",display:"x78zum5",overflowX:"x1plvlek",overflowY:"xryxfnj",$$css:!0},dialogMobile:{width:"xh8yej3",$$css:!0},dialogPrism:{alignItems:"x1qjc9v5",borderStartStartRadius:"x15fl9t6",borderStartEndRadius:"x1yw9sn2",borderEndEndRadius:"x1evh3fb",borderEndStartRadius:"x4giqqa",display:"x78zum5",overflowX:"x1plvlek",overflowY:"xryxfnj","@media (max-width: 735px)_placeItems":"x14q99fr",$$css:!0}},d={default:{maxWidth:"x1j9u4d2",minWidth:"x1klvvdw",width:"x1wqampe",$$css:!0},extraLarge:{maxWidth:"xnfiwf0",width:"xh8yej3",$$css:!0},large:{width:"xewp6mh","@media (max-width: 735px)_alignSelf":"x13cs4ds","@media (max-width: 735px)_flexGrow":"x1quol0o","@media (max-width: 735px)_marginTop":"xwzhuwn","@media (max-width: 735px)_marginInlineEnd":"x1ou96c","@media (max-width: 735px)_marginBottom":"x1lvlso5","@media (max-width: 735px)_marginInlineStart":"x1ja1j3x","@media (max-width: 735px)_maxHeight":"xk2aghb","@media (max-width: 735px)_overflowX":"x14pmy57","@media (max-width: 735px)_overflowY":"xcaymy2","@media (max-width: 735px)_width":"x16kswgo",$$css:!0},prismDefault:{maxHeight:"xqui1pq",minHeight:"x5mc7k8",width:"xewp6mh x19lxi20",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(20),n=e.anchorXStyle,a=e["aria-label"],i=e.children,l=e.disableClosingWithMask,u=e.onClose,m=e.ref,p=e.size,_=e.testid,f=l===void 0?!1:l,g=p===void 0?"default":p,h,y=u!=null?u:r("emptyFunction"),C;t[0]!==y?(C=s.jsx(r("IGDSDialogPageLoadingState.react"),{onClose:y}),t[0]=y,t[1]=C):C=t[1],h=C;var b=h,v=o("BaseDialogLabelIDProvider").useDialogLabelID(),S=r("shouldUseIGDSPrismDialog")(),R;t[2]!==n?(R=[c.anchor,n],t[2]=n,t[3]=R):R=t[3];var L=a==null?v:void 0,E=u!=null?u:r("emptyFunction"),k=g==="default"&&S?d.prismDefault:d[g],I;t[4]===Symbol.for("react.memo_cache_sentinel")?(I=o("PolarisUA").isMobile()&&c.dialogMobile,t[4]=I):I=t[4];var T;t[5]!==k?(T=[S?c.dialogPrism:c.dialog,k,I],t[5]=k,t[6]=T):T=t[6];var D;t[7]!==i||t[8]!==b?(D=s.jsx(r("BaseMultiPageView.react"),{fallback:b,xstyle:S?c.cardPrism:c.card,children:i}),t[7]=i,t[8]=b,t[9]=D):D=t[9];var x;return t[10]!==a||t[11]!==f||t[12]!==m||t[13]!==T||t[14]!==D||t[15]!==R||t[16]!==L||t[17]!==E||t[18]!==_?(x=s.jsx(r("BaseDialog.react"),{anchorXStyle:R,"aria-label":a,"aria-labelledby":L,disableClosingWithMask:f,onClose:E,ref:m,testid:void 0,xstyle:T,children:D}),t[10]=a,t[11]=f,t[12]=m,t[13]=T,t[14]=D,t[15]=R,t[16]=L,t[17]=E,t[18]=_,t[19]=x):x=t[19],x}l.default=m}),98);
__d("IGDSDialog.react",["BaseDialogLabelIDProvider","IGDSDialogContainer.react","IGDSDialogPage.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["anchorXStyle","aria-label","disableClosingWithMask","onClose","ref","size","testid"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(20),a,i,l,s,c,d,m,p;n[0]!==t?(a=t.anchorXStyle,i=t["aria-label"],l=t.disableClosingWithMask,s=t.onClose,d=t.ref,m=t.size,p=t.testid,c=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8]);var _;n[9]!==c?(_=u.jsx(r("IGDSDialogPage.react"),babelHelpers.extends({},c)),n[9]=c,n[10]=_):_=n[10];var f;return n[11]!==a||n[12]!==i||n[13]!==l||n[14]!==s||n[15]!==d||n[16]!==m||n[17]!==_||n[18]!==p?(f=u.jsx(o("BaseDialogLabelIDProvider").BaseDialogLabelIDProvider,{children:u.jsx(r("IGDSDialogContainer.react"),{anchorXStyle:a,"aria-label":i,disableClosingWithMask:l,onClose:s,ref:d,size:m,testid:void 0,children:_})}),n[11]=a,n[12]=i,n[13]=l,n[14]=s,n[15]=d,n[16]=m,n[17]=_,n[18]=p,n[19]=f):f=n[19],f}l.default=c}),98);
__d("IGDSDialogLoadingState.react",["fbt","CometDialogLoadingStateContext","IGDSDialog.react","IGDSDialogHeader.react","IGDSSpinner.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(10),n=e["aria-label"],a=e.borderBottom,i=e.onClose,l=a===void 0?"default":a,c;t[0]!==n?(c=n!=null?n:s._(/*BTDS*/"Loading..."),t[0]=n,t[1]=c):c=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx("div",{}),t[2]=d):d=t[2];var m;t[3]!==l||t[4]!==i?(m=u.jsx(r("IGDSDialogHeader.react"),{borderBottom:l,onClose:i,children:d}),t[3]=l,t[4]=i,t[5]=m):m=t[5];var p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=u.jsx("div",{className:"x6s0dn4 x78zum5 x5yr21d xl56j7k x1ku5rj1 xh8yej3",children:u.jsx(r("IGDSSpinner.react"),{})}),t[6]=p):p=t[6];var _;return t[7]!==c||t[8]!==m?(_=u.jsx(r("CometDialogLoadingStateContext").Provider,{value:!0,children:u.jsx(r("IGDSDialog.react"),{"aria-label":c,footer:null,header:m,children:p})}),t[7]=c,t[8]=m,t[9]=_):_=t[9],_}l.default=c}),226);
__d("CelebBaitExplicitNoticePromptScreenIG.react",["fbt","BaseRow.react","BaseRowItem.react","BaseView.react","CelebBaitConsentTemplateConfig","CometColumn.react","CometColumnItem.react","CometImage.react","CometPlaceholder.react","ConsentTemplateActionCallbacksContext","ConsentTemplateUserContext","IGDSBox.react","IGDSButton.react","IGDSDialogLegacy.react","IGDSDialogLoadingState.react","IGDSIconButton.react","IGDSText.react","IGDSXPanoOutlineIcon.react","PolarisBaseThemeDisplayModeWrapper.react","PolarisIGTheme.react","emptyFunction","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={dialog:{"--dialog-anchor-vertical-padding":"xqtmrrc",borderTopColor:"x5ur3kl",borderInlineEndColor:"x6usi7g",borderBottomColor:"x1bs97v6",borderInlineStartColor:"x18dxpii",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",maxHeight:"xedcshv","@media (max-width: 679px)_minHeight":"x1mfppf3",$$css:!0},footer:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,paddingTop:"xz9dl7a",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xwxc41k","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},header:{paddingInlineStart:"x13jy36j",paddingInlineEnd:"x64bnmy",paddingLeft:null,paddingRight:null,$$css:!0},headerHero:{alignItems:"x6s0dn4",$$css:!0},headerTitle:{paddingTop:"xz9dl7a",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x1qafhyn",paddingInlineStart:"x13jy36j",paddingInlineEnd:"x64bnmy",paddingLeft:null,paddingRight:null,$$css:!0},primaryButton:{paddingBottom:"xwib8y2",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1y1aw1k",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"xwib8y2",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1y1aw1k",$$css:!0},section:{paddingBottom:"x1a8lsjc",paddingInlineStart:"x13jy36j",paddingInlineEnd:"x64bnmy",paddingLeft:null,paddingRight:null,$$css:!0},sectionParagraph:{paddingTop:"x1p5oq8j",$$css:!0}};function d(){var e,t=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),n=t.onContinued,a=t.onDismissed,l=t.onFlowLaunched,d=o("ConsentTemplateUserContext").useConsentTemplateUserShortName();return l(),u.jsx(o("PolarisIGTheme.react").IGThemeProvider,{children:u.jsx(r("PolarisBaseThemeDisplayModeWrapper.react"),{children:u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("IGDSDialogLoadingState.react"),{onClose:r("emptyFunction")}),name:i.id,children:u.jsxs(r("IGDSDialogLegacy.react"),{innerContentXStyle:c.dialog,size:"large",children:[u.jsxs(r("BaseRow.react"),{xstyle:c.navbar,children:[u.jsx("div",{className:"xc9qbxq x14qfxbe"}),u.jsx(r("IGDSIconButton.react"),{onClick:a,padding:0,children:u.jsx(r("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:u.jsx(r("IGDSXPanoOutlineIcon.react"),{alt:s._(/*BTDS*/"Close"),size:24})})})]}),u.jsxs(e=r("BaseView.react"),{xstyle:[c.root,c.header],children:[u.jsx(r("CometColumn.react"),{align:"stretch",xstyle:c.headerHero,children:u.jsx(r("CometColumnItem.react"),{children:u.jsx(r("CometImage.react"),{height:96,src:"/images/assets_DO_NOT_HARDCODE/ig_illustrations/qp-shield-refresh_light-2x.png",width:96})})}),u.jsx(e,{xstyle:c.headerTitle,children:u.jsx(r("IGDSText.react"),{color:"primaryText",size:"headline2",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"{userName}, help protect your image from being misused",[s._param("userName",d)])})})]}),u.jsx(e,{xstyle:[c.root,c.section],children:u.jsx(e,{xstyle:c.sectionParagraph,children:u.jsx(r("IGDSText.react"),{color:"primaryText",size:"body",weight:"normal",children:s._(/*BTDS*/"You can use facial recognition technology to help us detect and stop scams that use your image.")})})}),u.jsx(r("BaseRow.react"),{expanding:!0}),u.jsx(e,{xstyle:[c.root,c.footer],children:u.jsx(e,{xstyle:c.footerButtons,children:u.jsx(r("BaseRow.react"),{expanding:!0,children:u.jsxs(e,{xstyle:c.footerButtonsContainer,children:[u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:!1,label:s._(/*BTDS*/"Continue"),onClick:function(){n(o("CelebBaitConsentTemplateConfig").ConsentTemplatePrompts.CELEB_BAIT_EXPLICIT_CONSENT)},size:"large",variant:"primary"})}),u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:!1,label:s._(/*BTDS*/"Not now"),onClick:a,size:"large",variant:"secondary"})})]})})})})]})})})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("ExampleConsentTemplateConfig",["$InternalEnum","ConsentTemplateFlow.type","ExamplePromptScreenFB.react","ExamplePromptScreenIG.react","ExamplePromptScreenMN.react","ExamplePromptScreenMeta.react","ExamplePromptScreenTH.react","FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=n("$InternalEnum")({EXAMPLE:"example"}),c={flow:o("ConsentTemplateFlow.type").ConsentTemplateFlow.EXAMPLE,getConsentTemplatePromptScreen:function(t,n){var e=u.cast(t);if(e==null)throw r("FBLogger")("consent_core").mustfixThrow("No matching consent template screen found for the given prompt %s",t);switch(e){case u.EXAMPLE:switch(n){case"facebook_comet":return s.jsx(r("ExamplePromptScreenFB.react"),{});case"instagram_web":return s.jsx(r("ExamplePromptScreenIG.react"),{});case"meta_comet":return s.jsx(r("ExamplePromptScreenMeta.react"),{});case"messenger_dot_com":return s.jsx(r("ExamplePromptScreenMN.react"),{});case"barcelona_web":return s.jsx(r("ExamplePromptScreenTH.react"),{})}break}throw r("FBLogger")("consent_core").mustfixThrow("The consent prompt %s does not currently support the surface %s",t,n)},recordConsentOutcome:function(t,n){}};l.ConsentTemplatePrompts=u,l.ExampleConsentTemplateConfig=c}),98);
__d("CometIconAppFacebookCircleFilled.react",["CometSVGIcon.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(r("CometSVGIcon.react"),babelHelpers.extends({},e,{viewBox:"0 0 36 36",children:[s.jsx("path",{d:"M20.181 35.87C29.094 34.791 36 27.202 36 18c0-9.941-8.059-18-18-18S0 8.059 0 18c0 8.442 5.811 15.526 13.652 17.471L14 34h5.5l.681 1.87Z"}),s.jsx("path",{className:"xe3v8dz",d:"M13.651 35.471v-11.97H9.936V18h3.715v-2.37c0-6.127 2.772-8.964 8.784-8.964 1.138 0 3.103.223 3.91.446v4.983c-.425-.043-1.167-.065-2.081-.065-2.952 0-4.09 1.116-4.09 4.025V18h5.883l-1.008 5.5h-4.867v12.37a18.183 18.183 0 0 1-6.53-.399Z"})]}))}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("CometIconLogo.react",["CometIconAppFacebookCircleFilled.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.color;return s.jsx(r("CometIconAppFacebookCircleFilled.react"),babelHelpers.extends({},e,{color:t!=null?t:"fb-logo"}))}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("MetaBrandDashedArcPointerOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({fill:"currentColor",viewBox:"0 0 24 24",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M5.98 19.97c.29.22.69.27 1.02.11 3.04-1.41 6.95-1.41 10 0a1 1 0 0 0 1.02-.11C20.55 18.06 22 15.15 22 12c0-3.67-1.99-6.88-4.95-8.62-.02-.01-.03-.03-.05-.04-.02 0-.03 0-.05-.02A9.9 9.9 0 0 0 12 2c-1.8 0-3.49.49-4.95 1.32-.02 0-.03 0-.05.02-.02.01-.03.03-.05.04C3.99 5.12 2 8.33 2 12c0 3.15 1.45 6.06 3.98 7.97M5 11h-.93a7.98 7.98 0 0 1 3.1-5.36l.46.8c.19.32.52.5.87.5.17 0 .34-.04.5-.13.48-.28.64-.89.37-1.37l-.47-.81c.95-.4 2-.63 3.1-.63s2.15.22 3.1.63l-.47.81a1.002 1.002 0 0 0 .87 1.5c.35 0 .68-.18.87-.5l.46-.8a7.98 7.98 0 0 1 3.1 5.36H19c-.55 0-1 .45-1 1s.45 1 1 1h.93a7.9 7.9 0 0 1-2.67 5.01A14 14 0 0 0 12 17c-1.82 0-3.62.35-5.26 1.01A7.9 7.9 0 0 1 4.07 13H5c.55 0 1-.45 1-1s-.45-1-1-1"}),s.jsx("path",{d:"M12 14c1.1 0 2-.9 2-2 0-.88-1.28-4.06-1.54-4.69-.15-.38-.77-.38-.93 0-.26.63-1.54 3.81-1.54 4.69 0 1.1.9 2 2 2z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandHeartOpenHandOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M14.506 2.024A2.877 2.877 0 0 1 17 4.882c0 1.328-.656 2.552-1.49 3.525-.845.985-1.954 1.815-3.063 2.369a1 1 0 0 1-.894 0c-1.108-.554-2.218-1.384-3.062-2.369C7.656 7.434 7 6.21 7 4.882a2.877 2.877 0 0 1 2.494-2.858 2.825 2.825 0 0 1 2.048.533c.162.118.316.254.458.405a3.27 3.27 0 0 1 .458-.405 2.825 2.825 0 0 1 2.048-.533z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m14.146 11.742-1.697 1.414-3.25-.928a5.285 5.285 0 0 0-5.188 1.345c-.272.272-.64.425-1.025.425h-.985a1 1 0 1 0 0 2h.985c.915 0 1.792-.364 2.439-1.01a3.286 3.286 0 0 1 3.225-.837l3.483.994c.366.105.658.384.778.746a.346.346 0 0 1-.355.454l-4.479-.344a1 1 0 0 0-.153 1.994l4.478.345c.63.048 1.2-.15 1.64-.502a.979.979 0 0 0 .04-.026l5.051-3.609a1.21 1.21 0 0 1 1.661.244c-.62.788-2.032 2.414-4.408 4.262-1.79 1.391-2.99 1.76-5.026 2.127a2.902 2.902 0 0 1-1.505-.137l-2.221-.808a8 8 0 0 0-5.264-.07l-.686.228a1 1 0 0 0 .633 1.898l.686-.23a6 6 0 0 1 3.948.054l2.22.807c.806.294 1.683.381 2.543.226 2.243-.404 3.779-.867 5.9-2.517 2.678-2.082 4.233-3.923 4.874-4.76.462-.603.46-1.392.102-1.99a3.212 3.212 0 0 0-3.967-1.322.933.933 0 0 0-.022-.017l-.735-.551a3 3 0 0 0-3.72.095zm2.52 1.505a1 1 0 0 0-1.24.032l-1.171.976c.167.204.31.43.422.673l2.167-1.548-.178-.133z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandPersonStarsOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M5.409 1.606c-.347-.808-1.492-.808-1.839 0l-.423.988a1 1 0 0 1-.525.525l-1.016.435C.802 3.9.796 5.037 1.597 5.39l.952.419a1 1 0 0 1 .508.501l.495 1.09c.36.791 1.488.78 1.83-.02l.45-1.05a1 1 0 0 1 .525-.525l.988-.423c.808-.347.808-1.492 0-1.839l-.988-.423a1 1 0 0 1-.525-.525l-.423-.988zM18.99 3.461a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.99 12.961a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4zM18.99 19.147v.862c0 1.255-.792 2.358-2.029 2.57-1.16.198-2.817.382-4.971.382-2.155 0-3.812-.184-4.972-.382-1.237-.212-2.028-1.315-2.028-2.57v-.862c0-3.457 3.5-5.186 7-5.186s7 1.729 7 5.186zm-2 .862v-.862c0-.942-.434-1.657-1.288-2.219-.912-.6-2.255-.967-3.712-.967-1.458 0-2.8.367-3.713.967-.854.562-1.287 1.277-1.287 2.219v.862c0 .211.066.367.136.458.062.081.133.124.23.14 1.05.18 2.594.354 4.634.354 2.04 0 3.584-.174 4.634-.353a.343.343 0 0 0 .229-.14.756.756 0 0 0 .137-.459z"}),s.jsx("path",{d:"M4.99 13.961a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM19.3 10.07a.75.75 0 0 1 1.379 0l.392.916a.75.75 0 0 0 .394.394l.916.392a.75.75 0 0 1 0 1.379l-.916.392a.75.75 0 0 0-.394.394l-.412.963a.75.75 0 0 1-1.372.015l-.452-.993a.75.75 0 0 0-.38-.376l-.885-.389a.75.75 0 0 1 .007-1.376l.937-.401a.75.75 0 0 0 .394-.394l.392-.916z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("ExamplePromptScreenFB.react",["fbt","BaseRow.react","BaseRowItem.react","BaseScrollableArea.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometIconLogo.react","CometLink.react","CometPlaceholder.react","CometRow.react","ConsentTemplateActionCallbacksContext","ConsentTemplateUserContext","FDSButton.react","FDSDialogContainer.react","FDSDialogLoadingState.react","FDSIcon.react","FDSText.react","MetaBrandDashedArcPointerOutline24Icon.react","MetaBrandEyeOutline24Icon.react","MetaBrandHeartOpenHandOutline24Icon.react","MetaBrandPersonStarsOutline24Icon.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={dialog:{"@media (max-width: 679px)_maxHeight":"x1jxyteu","@media (max-width: 679px)_minHeight":"x1mfppf3","@media (max-width: 679px)_paddingTop":"x1y0ix2f","@media (max-width: 679px)_paddingBottom":"x1eevrrt","@media (max-width: 679px)_paddingInlineStart":"x1vnzckh","@media (max-width: 679px)_paddingInlineEnd":"xgof6fa","@media (max-width: 679px)_paddingLeft":null,"@media (max-width: 679px)_paddingRight":null,$$css:!0},footer:{backgroundColor:"x2bj2ny",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,"@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xsag5q8","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerDisclosure:{paddingBottom:"xsag5q8",paddingTop:"xyamay9",$$css:!0},header:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9",$$css:!0},layout:{maxHeight:"x1yr2tfi",position:"x1n2onr6","@media (max-width: 679px)_maxHeight":"x1jxyteu",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x879a55",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},primaryButton:{paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},section:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},sectionIconTextList:{paddingBottom:"x10b6aqq",paddingTop:"xyamay9",$$css:!0},sectionIconTextListItem:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemContent:{paddingBottom:"x1a8lsjc",paddingTop:"x1yrsyyn",$$css:!0},sectionIconTextListItemContentSpaceBetween:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemIcon:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionParagraph:{paddingTop:"x7sb2j6",$$css:!0}};function d(){var e,t,n,a,l,d,m=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),p=m.onApproved,_=m.onDenied,f=o("ConsentTemplateUserContext").useConsentTemplateUserShortName();return u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("FDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:u.jsx(r("FDSDialogContainer.react"),{anchorXStyle:c.dialog,disableClosingWithMask:!0,size:"medium",children:u.jsxs(r("CometColumn.react"),{expanding:!0,paddingTop:0,paddingVertical:0,xstyle:c.layout,children:[u.jsxs(r("CometRow.react"),{xstyle:c.navbar,children:[u.jsx(e=r("CometColumnItem.react"),{children:u.jsx(r("CometIconLogo.react"),{size:32})}),u.jsx(e,{children:u.jsx("div",{className:"xc9qbxq x14qfxbe"})})]}),u.jsx(e,{expanding:!0,children:u.jsxs(r("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:!1,horizontal:!1,vertical:!0,children:[u.jsx(t=r("BaseView.react"),{xstyle:[c.root,c.header],children:u.jsx(n=r("FDSText.react"),{align:"start",color:"primary",isPrimaryHeading:!0,type:"headlineEmphasized1",children:s._(/*BTDS*/"Allow Meta to improve your app experience?")})}),u.jsxs(t,{xstyle:[c.root,c.section],children:[u.jsx(t,{xstyle:c.sectionParagraph,children:u.jsx(n,{align:"start",color:"primary",type:"body3",children:s._(/*BTDS*/"{userName}, at Meta, we value your trust and want to be transparent about how we use your data. By consenting to this agreement, you allow us to collect and process your data to improve your app experience. {=m2}",[s._param("userName",f),s._implicitParam("=m2",u.jsx(r("CometLink.react"),{href:"https://www.meta.com/help/1265316287987507/",children:s._(/*BTDS*/"Learn how your data will be processed.")}))])})}),u.jsxs(t,{xstyle:c.sectionIconTextList,children:[u.jsxs(a=r("BaseRow.react"),{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l=r("BaseRowItem.react"),{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d=r("FDSIcon.react"),{icon:r("MetaBrandPersonStarsOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{align:"start",color:"primary",type:"headlineEmphasized3",children:s._(/*BTDS*/"Personalized Recommendations")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{align:"start",color:"secondary",type:"body3",children:s._(/*BTDS*/"We can provide you with tailored content and suggestions based on your interests and preferences.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandDashedArcPointerOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{align:"start",color:"primary",type:"headlineEmphasized3",children:s._(/*BTDS*/"Enhanced App Performance")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{align:"start",color:"secondary",type:"body3",children:s._(/*BTDS*/"Your data helps us identify areas for improvement, ensuring a smoother and more efficient app experience.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandHeartOpenHandOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{align:"start",color:"primary",type:"headlineEmphasized3",children:s._(/*BTDS*/"New Features and Services")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{align:"start",color:"secondary",type:"body3",children:s._(/*BTDS*/"By analyzing user behavior, we can develop new features and services that cater to your needs and interests.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandEyeOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{align:"start",color:"primary",type:"headlineEmphasized3",children:s._(/*BTDS*/"Improved Security")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{align:"start",color:"secondary",type:"body3",children:s._(/*BTDS*/"Your data helps us detect and prevent potential security threats, keeping your account and personal information safe.")})})]})]})]})]})]})}),u.jsxs(e,{xstyle:[c.root,c.footer],children:[u.jsx(t,{xstyle:c.footerDisclosure,children:u.jsx(n,{align:"center",color:"secondary",type:"body3",children:s._(/*BTDS*/"By agreeing to this consent, you acknowledge that you have read and understood how we will use your data to improve your app experience. You also acknowledge that you are at least 18 years old (or the age of majority in your jurisdiction) and have the authority to agree to this consent.")})}),u.jsx(t,{xstyle:c.footerButtons,children:u.jsx(a,{expanding:!0,children:u.jsxs(t,{xstyle:c.footerButtonsContainer,children:[u.jsx(l,{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("FDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Agree"),onPress:function(){p()},size:"medium",type:"primary"})}),u.jsx(l,{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("FDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Don't agree"),onPress:function(){_()},size:"medium",type:"secondary"})})]})})})]})]})})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("MDSIcon.react",["BaseTheme.react","Box.react","FDSIcon.react","SVGIcon","XPlatReactEnvironment","getMDSIconColorCometFallback","react","useMDSIconColors"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","backgroundEnabled","color"],s,u=s||(s=o("react")),c=s.useMemo,d={iconBackground:{alignItems:"x6s0dn4",backgroundColor:"x1qhmfi1",borderStartStartRadius:"xd4w7er",borderStartEndRadius:"x1u1g78z",borderEndEndRadius:"x3n7fbn",borderEndStartRadius:"xljgxep",display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},themeWrapper:{display:"xt0psk2",$$css:!0}},m={dark:{"secondary-button-background":"rgba(255, 255, 255, 0.14)"},light:{"secondary-button-background":"rgba(0, 0, 0, 0.04)"},type:"VARIABLES"};function p(t){var n=t.ref,a=t.backgroundEnabled,i=a===void 0?!1:a,l=t.color,s=babelHelpers.objectWithoutPropertiesLoose(t,e),p=r("useMDSIconColors")(!0),_=l!=null&&l!=="primary"?p[l]:void 0,f=c(function(){return _!=null?{dark:{"primary-icon":_},light:{"primary-icon":_},type:"VARIABLES"}:void 0},[_]),g=s.icon instanceof o("SVGIcon").SVGIcon,h=u.jsx(r("FDSIcon.react"),babelHelpers.extends({color:g?"primary":o("getMDSIconColorCometFallback").getMDSIconColorCometFallback(l),ref:n},s));return f!=null&&(h=u.jsx(r("BaseTheme.react"),{config:f,xstyle:o("XPlatReactEnvironment").isWeb()?d.themeWrapper:null,children:h})),i?u.jsx(r("BaseTheme.react"),{config:m,children:u.jsx(r("Box.react"),{xstyle:d.iconBackground,children:h})}):h}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("ExamplePromptScreenIG.react",["fbt","BaseLink.react","BaseRow.react","BaseRowItem.react","BaseScrollableArea.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometPlaceholder.react","CometRow.react","ConsentTemplateActionCallbacksContext","ConsentTemplateUserContext","IGDSButton.react","IGDSDialogLegacy.react","IGDSDialogLoadingState.react","IGDSText.react","MDSIcon.react","MetaBrandDashedArcPointerOutline24Icon.react","MetaBrandEyeOutline24Icon.react","MetaBrandHeartOpenHandOutline24Icon.react","MetaBrandInstagramFilled24.svg.react","MetaBrandPersonStarsOutline24Icon.react","PolarisBaseThemeDisplayModeWrapper.react","PolarisIGTheme.react","emptyFunction","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={dialog:{"--dialog-anchor-vertical-padding":"xqtmrrc",borderTopColor:"x5ur3kl",borderInlineEndColor:"x6usi7g",borderBottomColor:"x1bs97v6",borderInlineStartColor:"x18dxpii",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4","@media (max-width: 679px)_minHeight":"x1mfppf3","@media (max-width: 679px)_overflowX":"xgez5wu","@media (max-width: 679px)_overflowY":"x1ws9fzp",$$css:!0},footer:{backgroundColor:"x2bj2ny",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,"@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_position":"xv7j57z","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xwxc41k",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerDisclosure:{paddingBottom:"xsag5q8",paddingTop:"xyamay9",$$css:!0},header:{paddingInlineStart:"x13jy36j",paddingInlineEnd:"x64bnmy",paddingLeft:null,paddingRight:null,paddingTop:"xz9dl7a",$$css:!0},layout:{maxHeight:"x1yr2tfi",position:"x1n2onr6","@media (max-width: 679px)_maxHeight":"x1jxyteu",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x879a55",paddingInlineStart:"x13jy36j",paddingInlineEnd:"x64bnmy",paddingLeft:null,paddingRight:null,$$css:!0},primaryButton:{paddingBottom:"xwib8y2",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1y1aw1k",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"xwib8y2",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1y1aw1k",$$css:!0},section:{paddingInlineStart:"x13jy36j",paddingInlineEnd:"x64bnmy",paddingLeft:null,paddingRight:null,$$css:!0},sectionIconTextList:{paddingBottom:"x10b6aqq",paddingTop:"xyamay9",$$css:!0},sectionIconTextListItem:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemContent:{paddingBottom:"x1a8lsjc",paddingTop:"x1yrsyyn",$$css:!0},sectionIconTextListItemContentSpaceBetween:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemIcon:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionParagraph:{paddingTop:"x7sb2j6",$$css:!0}};function d(){var e,t,n,a,l,d,m=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),p=m.onApproved,_=m.onDenied,f=o("ConsentTemplateUserContext").useConsentTemplateUserShortName();return u.jsx(o("PolarisIGTheme.react").IGThemeProvider,{children:u.jsx(r("PolarisBaseThemeDisplayModeWrapper.react"),{children:u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("IGDSDialogLoadingState.react"),{onClose:r("emptyFunction")}),name:i.id,children:u.jsx(r("IGDSDialogLegacy.react"),{innerContentXStyle:c.dialog,size:"large",children:u.jsxs(r("CometColumn.react"),{expanding:!0,paddingTop:0,paddingVertical:0,xstyle:c.layout,children:[u.jsxs(r("CometRow.react"),{xstyle:c.navbar,children:[u.jsx(e=r("CometColumnItem.react"),{children:u.jsx(r("MetaBrandInstagramFilled24.svg.react"),{height:24,width:24})}),u.jsx(e,{children:u.jsx("div",{className:"xc9qbxq x14qfxbe"})})]}),u.jsx(e,{expanding:!0,children:u.jsxs(r("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:!1,horizontal:!1,vertical:!0,children:[u.jsx(t=r("BaseView.react"),{xstyle:[c.root,c.header],children:u.jsx(n=r("IGDSText.react"),{color:"primaryText",size:"headline2",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"Allow Meta to improve your app experience?")})}),u.jsxs(t,{xstyle:[c.root,c.section],children:[u.jsx(t,{xstyle:c.sectionParagraph,children:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"{userName}, at Meta, we value your trust and want to be transparent about how we use your data. By consenting to this agreement, you allow us to collect and process your data to improve your app experience. {=m2}",[s._param("userName",f),s._implicitParam("=m2",u.jsx(r("BaseLink.react"),{href:"https://www.meta.com/help/1265316287987507/",children:s._(/*BTDS*/"Learn how your data will be processed.")}))])})}),u.jsxs(t,{xstyle:c.sectionIconTextList,children:[u.jsxs(a=r("BaseRow.react"),{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l=r("BaseRowItem.react"),{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d=r("MDSIcon.react"),{icon:r("MetaBrandPersonStarsOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",weight:"semibold",children:s._(/*BTDS*/"Personalized Recommendations")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{color:"secondaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"We can provide you with tailored content and suggestions based on your interests and preferences.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandDashedArcPointerOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",weight:"semibold",children:s._(/*BTDS*/"Enhanced App Performance")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{color:"secondaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"Your data helps us identify areas for improvement, ensuring a smoother and more efficient app experience.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandHeartOpenHandOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",weight:"semibold",children:s._(/*BTDS*/"New Features and Services")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{color:"secondaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"By analyzing user behavior, we can develop new features and services that cater to your needs and interests.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandEyeOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",weight:"semibold",children:s._(/*BTDS*/"Improved Security")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{color:"secondaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"Your data helps us detect and prevent potential security threats, keeping your account and personal information safe.")})})]})]})]})]})]})}),u.jsxs(e,{xstyle:[c.root,c.footer],children:[u.jsx(t,{xstyle:c.footerDisclosure,children:u.jsx(n,{color:"secondaryText",size:"body",textAlign:"center",children:s._(/*BTDS*/"By agreeing to this consent, you acknowledge that you have read and understood how we will use your data to improve your app experience. You also acknowledge that you are at least 18 years old (or the age of majority in your jurisdiction) and have the authority to agree to this consent.")})}),u.jsx(t,{xstyle:c.footerButtons,children:u.jsx(a,{expanding:!0,children:u.jsxs(t,{xstyle:c.footerButtonsContainer,children:[u.jsx(l,{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:!1,label:s._(/*BTDS*/"Agree"),onClick:function(){p()},size:"large",variant:"primary"})}),u.jsx(l,{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:!1,label:s._(/*BTDS*/"Don't agree"),onClick:function(){_()},size:"large",variant:"secondary"})})]})})})]})]})})})})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("MDSButtonImpl.react",["BaseStyledButton.react","BaseTheme.react","CometContainerPressableContext","FDSIcon.react","MDSText.react","emptyFunction","gkx","mergeRefs","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["addOnStart","disabled","icon","isContainerTarget","label","labelIsHidden","linkProps","onFocusIn","onFocusOut","onHoverIn","onHoverOut","onPress","onPressIn","onPressOut","padding","reduceEmphasis","size","suppressHydrationWarning","testid","type"],u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useEffect,_=d.useRef,f={destructive:{backgroundColor:"xb4tp27",$$css:!0},disabled:{backgroundColor:"xwcfey6",$$css:!0},primary:{backgroundColor:"xtvsq51",$$css:!0},primaryDeemphasized:{backgroundColor:"x1hr4nm9",$$css:!0},secondary:{backgroundColor:"x1qhmfi1",$$css:!0},secondaryDeemphasized:{backgroundColor:"x1f3278h",$$css:!0},secondaryDeemphasized_DEPRECATED:{backgroundColor:"xjbqb8w",$$css:!0},sizeLarge:{height:"xc9qbxq",$$css:!0},sizeMedium:{height:"x10w6t97",$$css:!0},sizeSmall:{borderStartStartRadius:"xbjudin",borderStartEndRadius:"xnlwouz",borderEndEndRadius:"xpp8er5",borderEndStartRadius:"xs9wviy",height:"x1fgtraw",$$css:!0}},g={dark:{"destructive-button-background":"rgba(235, 52, 52, 100)","disabled-button-background":"var(--secondary-button-background)","disabled-button-text":"rgba(155, 160, 168, 0.5)","primary-button-background":"#429AFF","secondary-button-background":"rgba(255, 255, 255, 0.19)"},light:{"destructive-button-background":"rgba(255, 41, 41, 100)","disabled-button-background":"var(--secondary-button-background)","disabled-button-text":"rgba(134, 142, 153, 0.5)","primary-button-background":"#0A7CFF","secondary-button-background":"rgba(0, 0, 0, 0.04)"},type:"VARIABLES"},h={":deemphasized":{iconColor:"highlight",textColor:"highlight"},":disabled":{iconColor:"disabled",textColor:"disabled"},iconColor:"white",textColor:"white"},y={":deemphasized":{iconColor:"highlight",textColor:"highlight"},":disabled":{iconColor:"disabled",textColor:"disabled"},iconColor:"primary",textColor:"secondary"};function C(e){switch(e){case"secondary":return y;case"destructive":case"primary":default:return h}}function b(e,t){var n=t.disabled,r=t.reduceEmphasis,o=C(e);return(n?o[":disabled"]:null)||(r?o[":deemphasized"]:null)||o}function v(t){var n,o=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=a.addOnStart,l=a.disabled,u=l===void 0?!1:l,d=a.icon,h=a.isContainerTarget,y=h===void 0?!1:h,C=a.label,v=a.labelIsHidden,S=v===void 0?!1:v,R=a.linkProps,L=a.onFocusIn,E=a.onFocusOut,k=a.onHoverIn,I=a.onHoverOut,T=a.onPress,D=a.onPressIn,x=a.onPressOut,$=a.padding,P=$===void 0?"normal":$,N=a.reduceEmphasis,M=N===void 0?!1:N,w=a.size,A=w===void 0?32:w,F=a.suppressHydrationWarning,O=F===void 0?!1:F,B=a.testid,W=a.type,q=W===void 0?"primary":W,U=babelHelpers.objectWithoutPropertiesLoose(a,s),V=b(q,{disabled:u,reduceEmphasis:M}),H=V.iconColor,G=V.textColor,z=_(null),j=_(null),K=m(r("CometContainerPressableContext"));return p(function(){y&&K&&K.onMount({onContextMenu:r("emptyFunction"),onPress:function(t){var e=z.current;e&&e.click()},target:R==null?void 0:R.target,url:R==null?void 0:R.url},j)},[K,y,R==null?void 0:R.url,R==null?void 0:R.target]),c.jsx(r("BaseTheme.react"),{config:r("gkx")("5751")?void 0:g,style:{width:"100%"},children:c.jsx(r("BaseStyledButton.react"),babelHelpers.extends({},U,{addOnStart:i,"aria-label":(n=U["aria-label"])!=null?n:C,content:S?null:c.jsx(r("MDSText.react"),{color:G,numberOfLines:1,type:"button2",children:C}),contentXstyle:[A===28&&f.sizeSmall,A===32&&f.sizeMedium,A===36&&f.sizeLarge],disabled:u,icon:d==null?null:c.jsx(r("FDSIcon.react"),{color:H,icon:d,size:24}),linkProps:R,onFocusIn:L,onFocusOut:E,onHoverIn:k,onHoverOut:I,onPress:T,onPressIn:D,onPressOut:x,padding:P,ref:r("mergeRefs")(z,o),suppressHydrationWarning:O,testid:void 0,xstyle:[q==="primary"&&f.primary,q==="secondary"&&f.secondary,q==="destructive"&&f.destructive,q==="secondary"&&M?r("gkx")("5751")?f.secondaryDeemphasized:f.secondaryDeemphasized_DEPRECATED:null,q==="primary"&&M&&f.primaryDeemphasized,u&&f.disabled]}))})}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),98);
__d("MDSButton.react",["MDSButtonImpl.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsx(r("MDSButtonImpl.react"),babelHelpers.extends({ref:n},o))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MDSPressable.react",["CometPressable.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["overlayRadius","ref"],s,u=s||(s=o("react")),c={hover:{backgroundColor:"x1yjz2vk",$$css:!0}};function d(e){switch(e){case"normal":return 6;case"50%":return"50%";case"compact":return 4;case"inherit":default:return}}function m(t){var n=t.overlayRadius,o=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsx(r("CometPressable.react"),babelHelpers.extends({overlayFocusVisibleStyle:c.hover,overlayHoveredStyle:c.hover,overlayRadius:d(n),ref:o},a))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("MDSBaseCircleButton.react",["ComponentWithDataAttributes.react","MDSIcon.react","MDSPressable.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["color","dataAttributes","disabled","focusable","icon","iconRatio","label","linkProps","onFocusIn","onFocusOut","onHoverIn","onHoverOut","onPress","onPressIn","onPressOut","overlayHoveredStyle","size","testid","testOnly_pressed","type"],u,c,d,m=d||(d=o("react")),p={pressableOverlayPressed:{backgroundColor:"x1lxk4cn",$$css:!0},pressed:{transform:"x1n5d1j9",$$css:!0},root:{alignItems:"x6s0dn4",borderStartStartRadius:"x1rl75mt",borderStartEndRadius:"x19t5iym",borderEndEndRadius:"xz7t8uv",borderEndStartRadius:"x13xmedi",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x1n2onr6",$$css:!0}},_={24:{height:"xxk0z11",width:"xvy4d1p",$$css:!0},28:{height:"x1fgtraw",width:"xgd8bvy",$$css:!0},32:{height:"x10w6t97",width:"x1td3qas",$$css:!0},36:{height:"xc9qbxq",width:"x14qfxbe",$$css:!0},40:{height:"x1vqgdyp",width:"x100vrsf",$$css:!0},48:{height:"xsdox4t",width:"x1useyqa",$$css:!0}},f={"dark-overlay":{backgroundColor:"x18l40ae",color:"x14ctfv",$$css:!0},deemphasized:{backgroundColor:"xjbqb8w",$$css:!0},"deemphasized-overlay":{backgroundColor:"x1hr4nm9",$$css:!0},green:{backgroundColor:"x2h9iz9",$$css:!0},normal:{backgroundColor:"x10ltxyv",$$css:!0},overlay:{backgroundColor:"x9bbmet",boxShadow:"x10f5nwc",color:"xi81zsa",$$css:!0},"overlay-floating":{backgroundColor:"x1l31dnx",boxShadow:"x1qeybcx",$$css:!0},"overlay-raised":{backgroundColor:"x1iyvwtf",boxShadow:"xqqgvjq",color:"xi81zsa",$$css:!0},"primary-background-overlay":{backgroundColor:"xtvsq51",$$css:!0},red:{backgroundColor:"x18tkn2g",$$css:!0},"secondary-on-media":{backgroundColor:"x182fuwn",$$css:!0}},g={"dark-overlay":{backgroundColor:"x18l40ae",$$css:!0},deemphasized:{backgroundColor:"xjbqb8w",$$css:!0},"deemphasized-overlay":{backgroundColor:"x1f2gare",$$css:!0},green:{backgroundColor:"xwcfey6",$$css:!0},normal:{backgroundColor:"xwcfey6",$$css:!0},overlay:{backgroundColor:"x1ahlmzr",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxShadow:"xxnfx33",color:"x1dntmbh",$$css:!0},"primary-background-overlay":{backgroundColor:"xtvsq51",$$css:!0},red:{backgroundColor:"xwcfey6",$$css:!0},"secondary-on-media":{backgroundColor:"xwcfey6",$$css:!0}},h=(u={},u[24]=12,u[28]=16,u[32]=16,u[36]=20,u[40]=20,u),y=(c={},c[24]=20,c[28]=20,c[32]=24,c[36]=28,c[40]=32,c);function C(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=o.color,i=o.dataAttributes,l=o.disabled,u=l===void 0?!1:l,c=o.focusable,d=o.icon,C=o.iconRatio,v=o.label,S=o.linkProps,R=o.onFocusIn,L=o.onFocusOut,E=o.onHoverIn,k=o.onHoverOut,I=o.onPress,T=o.onPressIn,D=o.onPressOut,x=o.overlayHoveredStyle,$=o.size,P=o.testid,N=o.testOnly_pressed,M=o.type,w=M===void 0?"normal":M,A=babelHelpers.objectWithoutPropertiesLoose(o,s),F=m.jsx(r("MDSPressable.react"),babelHelpers.extends({},A,{"aria-label":v,disabled:u,display:"inline",focusable:c,linkProps:S,onFocusIn:R,onFocusOut:L,onHoverIn:E,onHoverOut:k,onPress:I,onPressIn:T,onPressOut:D,overlayHoveredStyle:x,overlayPressedStyle:p.pressableOverlayPressed,overlayRadius:"50%",ref:n,testOnly_pressed:N,testid:void 0,xstyle:function(t){var e=t.pressed;return[p.root,_[$],f[w],u&&g[w==="overlay-raised"||w==="overlay-floating"?"overlay":w],e&&p.pressed]},children:m.jsx(r("MDSIcon.react"),{color:u?"disabled":a!=null?a:b(w),icon:d,isDecorative:!0,size:C==="large"?y[$]:h[$]})}));return m.jsx(r("ComponentWithDataAttributes.react"),{dataAttributes:i,children:F})}C.displayName=C.name+" [from "+i.id+"]";function b(e){switch(e){case"primary-background-overlay":case"dark-overlay":return"white";case"deemphasized-overlay":return"highlight";default:return"primary"}}l.default=C}),98);
__d("MDSCircleButton.react",["MDSBaseCircleButton.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsx(r("MDSBaseCircleButton.react"),babelHelpers.extends({iconRatio:"large"},o,{ref:n}))}c.displayName=c.name+" [from "+i.id+"]";var d=c;l.default=d}),98);
__d("MessengerArrowLeft.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M17.634 11.384a1.25 1.25 0 0 0-1.768-1.768l-7.5 7.5a1.25 1.25 0 0 0 0 1.768l7.5 7.5a1.25 1.25 0 0 0 1.768-1.768l-4.94-4.94a.25.25 0 0 1 .177-.426H26.75a1.25 1.25 0 1 0 0-2.5H12.871a.25.25 0 0 1-.177-.427l4.94-4.94z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerArrowLeftIcon",["MessengerArrowLeft.svg.react","SVGIcon"],(function(t,n,r,o,a,i,l){"use strict";var e=o("SVGIcon").svgIcon(r("MessengerArrowLeft.svg.react"));l.default=e}),98);
__d("MessengerArrowRight.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M18.366 11.384a1.25 1.25 0 0 1 1.768-1.768l7.5 7.5a1.25 1.25 0 0 1 0 1.768l-7.5 7.5a1.25 1.25 0 0 1-1.768-1.768l4.94-4.94a.25.25 0 0 0-.177-.426H9.25a1.25 1.25 0 1 1 0-2.5h13.879a.25.25 0 0 0 .176-.427l-4.939-4.94z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerArrowRightIcon",["MessengerArrowRight.svg.react","SVGIcon"],(function(t,n,r,o,a,i,l){"use strict";var e=o("SVGIcon").svgIcon(r("MessengerArrowRight.svg.react"));l.default=e}),98);
__d("MessengerCrossFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"m12.631 25.138 5.196-5.189a.25.25 0 0 1 .353 0l5.197 5.189a1.241 1.241 0 0 0 1.76 0 1.241 1.241 0 0 0 0-1.761L19.95 18.18a.25.25 0 0 1 0-.354l5.188-5.196a1.241 1.241 0 0 0 0-1.76 1.241 1.241 0 0 0-1.76 0l-5.197 5.188a.25.25 0 0 1-.353 0l-5.196-5.189a1.241 1.241 0 0 0-1.76 0 1.241 1.241 0 0 0 0 1.761l5.188 5.196a.25.25 0 0 1 0 .354l-5.189 5.196a1.241 1.241 0 0 0 0 1.76 1.241 1.241 0 0 0 1.761 0z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MDSDialogHeader.react",["fbt","BaseDialogLabelIDProvider","BaseHeading.react","Box.react","Locale","MDSCircleButton.react","MDSGlimmer.react","MDSRow.react","MDSRowItem.react","MDSText.react","MessengerArrowLeftIcon","MessengerArrowRightIcon","MessengerCrossFilled.svg.react","SVGIcon","justknobx","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={backButton:{insetInlineStart:"xzwoauc",left:null,right:null,position:"x10l6tqk",top:"xomnu4r",zIndex:"x1vjfegm",$$css:!0},closeButton:{insetInlineEnd:"xdg88n9",left:null,right:null,position:"x10l6tqk",top:"xomnu4r",zIndex:"x1vjfegm",$$css:!0},header:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",height:"x1peatla",paddingBottom:"x1l90r2v",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9",$$css:!0},headerGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"xlup9mm",width:"xq1dxzn",$$css:!0},headerWithPadding:{paddingInlineEnd:"xh7rcd0",paddingInlineStart:"x17smslp",$$css:!0}},d={center:{justifyContent:"xl56j7k",$$css:!0},start:{justifyContent:"x1nhvcw1",$$css:!0}};function m(e){var t=e.backButtonType,n=e.closeButtonTestId,a=n===void 0?"close-button":n,i=e.closeButtonType,l=e.id,m=e.isLoading,p=m===void 0?!1:m,_=e.onBack,f=e.onClose,g=e.title,h=e.titleHorizontalAlignment,y=h===void 0?"center":h,C=e.titleImageAddOn,b=e.titleLayout,v=b===void 0?"auto":b,S=e.withBackButton,R=S===void 0?!1:S,L=e.withCloseButton,E=L===void 0?!1:L,k=o("BaseDialogLabelIDProvider").useDialogHeaderID();return u.jsxs(u.Fragment,{children:[g!=null||p===!0||v==="block"?u.jsx(r("Box.react"),{id:r("justknobx")._("5280")||l!=null?l:k,xstyle:[c.header,(E||R)&&y==="center"&&c.headerWithPadding,d[y]],children:p===!0?u.jsx(r("MDSGlimmer.react"),{index:0,xstyle:c.headerGlimmer}):!r("justknobx")._("5280")||C!=null||g!=null?u.jsx(r("BaseHeading.react"),{id:r("justknobx")._("5280")?k:void 0,children:u.jsxs(r("MDSRow.react"),{align:"center",paddingHorizontal:0,paddingVertical:0,spacing:4,verticalAlign:"center",children:[C!=null&&u.jsx(r("MDSRowItem.react"),{children:C}),u.jsx(r("MDSRowItem.react"),{children:u.jsx(r("MDSText.react"),{align:"center",type:"headlineEmphasized3",children:g})})]})}):null}):null,E?u.jsx(r("Box.react"),{xstyle:c.closeButton,children:u.jsx(r("MDSCircleButton.react"),{color:"primary",icon:o("SVGIcon").svgIcon(r("MessengerCrossFilled.svg.react")),label:s._(/*BTDS*/"Close"),onPress:f,size:32,testid:void 0,type:i})}):null,R?u.jsx(r("Box.react"),{xstyle:c.backButton,children:u.jsx(r("MDSCircleButton.react"),{color:"primary",icon:o("Locale").isRTL()?r("MessengerArrowRightIcon"):r("MessengerArrowLeftIcon"),label:s._(/*BTDS*/"Back"),onPress:_,size:32,testid:void 0,type:t})}):null]})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("MDSDialogLoadingStateImpl.react",["MDSColumn.react","MDSColumnItem.react","MDSGlimmer.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={bodyGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"x1kpxq89",marginBottom:"x1yztbdb",$$css:!0},bodyGlimmerFirst:{width:"xktia5q",$$css:!0},bodyGlimmerSecond:{width:"x65xoit",$$css:!0}};function c(){return s.jsxs(r("MDSColumn.react"),{align:"center",spacing:4,children:[s.jsx(r("MDSColumnItem.react"),{children:s.jsx(r("MDSGlimmer.react"),{index:0,xstyle:[u.bodyGlimmer,u.bodyGlimmerFirst]})}),s.jsx(r("MDSColumnItem.react"),{children:s.jsx(r("MDSGlimmer.react"),{index:0,xstyle:[u.bodyGlimmer,u.bodyGlimmerSecond]})}),s.jsx(r("MDSColumnItem.react"),{children:s.jsx(r("MDSGlimmer.react"),{index:0,xstyle:[u.bodyGlimmer,u.bodyGlimmerFirst]})})]})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MDSDialogPage.react",["BaseHeadingContextWrapper.react","BaseScrollableArea.react","react","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useRef,c={content:{flexGrow:"x1iyjqo2",paddingBottom:"xwib8y2",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1yr2tfi x1jxyteu",position:"x1n2onr6",$$css:!0},rootFullAndMinHeight:{minHeight:"xw36ugu x1mfppf3",$$css:!0},rootFullHeight:{minHeight:"xw36ugu",$$css:!0},rootMinHeight:{minHeight:"x1mfppf3",$$css:!0},scrollableArea:{flexGrow:"x1iyjqo2",overscrollBehaviorY:"xy5w88m",$$css:!0},textOnlyContent:{textAlign:"x2b8uid",$$css:!0}};function d(e){var t=e.children,n=e.disablePageScroll,a=n===void 0?!1:n,i=e.footer,l=e.hasTextOnlyContent,d=l===void 0?!1:l,m=e.header,p=e.isFullHeightByDefault,_=p===void 0?!1:p,f=e.mobileFullHeight,g=f===void 0?!0:f,h=e.scrollAreaFocusProps,y=e.scrollAreaRef,C=u(null),b=s.jsx(o("react-strict-dom").html.div,{ref:C,style:[c.content,d===!0&&c.textOnlyContent],children:t});return s.jsxs(o("react-strict-dom").html.div,{style:[c.root,[_&&c.rootFullHeight],[g&&t!=null&&c.rootMinHeight],[_&&g&&t!=null&&c.rootFullAndMinHeight]],children:[m,t!=null&&s.jsx(r("BaseHeadingContextWrapper.react"),{children:a?b:s.jsx(r("BaseScrollableArea.react"),babelHelpers.extends({},h,{contentRef:C,horizontal:!1,ref:y,vertical:!0,xstyle:c.scrollableArea,children:b}))}),i]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("MDSDialogPageLoadingState.react",["fbt","MDSDialogHeader.react","MDSDialogLoadingStateImpl.react","MDSDialogPage.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=e.onClose,n=t!=null;return u.jsx(r("MDSDialogPage.react"),{footer:null,header:u.jsx(r("MDSDialogHeader.react"),{isLoading:!0,onClose:t,title:s._(/*BTDS*/"Loading..."),withBackButton:!1,withCloseButton:n}),children:u.jsx(r("MDSDialogLoadingStateImpl.react"),{})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("MDSDialogSizes",[],(function(t,n,r,o,a,i,l){"use strict";var e={content:{maxWidth:"x193iq5w",$$css:!0},"content-mobile-safe":{width:"xh8yej3",$$css:!0},medium:{maxWidth:"xrgej4m",width:"x3dwbn0",$$css:!0},small:{maxWidth:"x1n7qst7",width:"x17omtbh",$$css:!0}};l.sizeStyles=e}),98);
__d("MDSDialogContainer.react",["BaseDialog.react","BaseDialogLabelIDProvider","BaseMultiPageView.react","CometDialogLoadingStateContext","MDSDialogPageLoadingState.react","MDSDialogSizes","emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={anchor:{alignItems:"x1qjc9v5",maxHeight:"x1bwycvy",paddingTop:"x1x97wu9",paddingBottom:"xbr3nou",paddingInlineStart:"x10zyrgg",paddingInlineEnd:"xxe13sb",paddingLeft:null,paddingRight:null,$$css:!0},card:{backgroundColor:"x1jx94hy",borderStartStartRadius:"x9n396y",borderStartEndRadius:"x1ojodb8",borderEndEndRadius:"xul23gt",borderEndStartRadius:"x1zosaf",boxShadow:"xwhkkir",clipPath:"x1gj8qfm",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62","@media (max-width: 679px)_boxShadow":"x1likypf","@media (max-width: 679px)_clipPath":"xzit4ce","@media (max-width: 679px)_overflowX":"x1e9k66k","@media (max-width: 679px)_overflowY":"x12l8kdc",$$css:!0},dialog:{alignItems:"x1qjc9v5",borderStartStartRadius:"xw5cjc7",borderStartEndRadius:"x1dmpuos",borderEndEndRadius:"x1vsv7so",borderEndStartRadius:"xau1kf4",display:"x78zum5",overflowX:"x1plvlek",overflowY:"xryxfnj","@media (max-width: 679px)_boxShadow":"xcatxm7",$$css:!0},root:{"@media (max-width: 679px)_justifyContent":"xshlqvt",$$css:!0}};function d(e){var t=e.ref,n=e.anchorXStyle,a=e.children,i=e.disableClosingWithMask,l=i===void 0?!1:i,d=e.onClose,m=e.size,p=m===void 0?"small":m,_=e.testid,f=u(r("CometDialogLoadingStateContext")),g=o("BaseDialogLabelIDProvider").useDialogLabelID();return s.jsx(r("BaseDialog.react"),{anchorXStyle:[c.anchor,n],"aria-labelledby":g,disableClosingWithMask:l,onClose:d!=null?d:r("emptyFunction"),ref:t,rootXStyle:c.root,testid:void 0,xstyle:[c.dialog,o("MDSDialogSizes").sizeStyles[p]],children:s.jsx(r("BaseMultiPageView.react"),{disableAutoRestoreFocus:f,fallback:s.jsx(r("MDSDialogPageLoadingState.react"),{onClose:d}),xstyle:c.card,children:a})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("MDSDialog.react",["BaseDialogLabelIDProvider","MDSDialogContainer.react","MDSDialogPage.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","anchorXStyle","disableClosingWithMask","onClose","size","testid"],s,u=s||(s=o("react"));function c(t){var n=t.ref,a=t.anchorXStyle,i=t.disableClosingWithMask,l=t.onClose,s=t.size,c=t.testid,d=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsx(o("BaseDialogLabelIDProvider").BaseDialogLabelIDProvider,{children:u.jsx(r("MDSDialogContainer.react"),{anchorXStyle:a,disableClosingWithMask:i,onClose:l,ref:n,size:s,testid:void 0,children:u.jsx(r("MDSDialogPage.react"),babelHelpers.extends({},d))})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MDSDialogLoadingState.react",["fbt","CometDialogLoadingStateContext","MDSDialog.react","MDSDialogHeader.react","MDSDialogLoadingStateImpl.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=e.onClose,n=t!=null;return u.jsx(r("CometDialogLoadingStateContext").Provider,{value:!0,children:u.jsx(r("MDSDialog.react"),{footer:null,header:u.jsx(r("MDSDialogHeader.react"),{isLoading:!0,onClose:t,title:s._(/*BTDS*/"Loading..."),withBackButton:!1,withCloseButton:n}),children:u.jsx(r("MDSDialogLoadingStateImpl.react"),{})})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("MDSLinkNewImpl.react",["BaseTheme.react","CometLink.react","E2EEMessagingLinkContext.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","xstyleInThread"],s,u=s||(s=o("react"));function c(t){var n=t.ref,a=t.xstyleInThread,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=o("E2EEMessagingLinkContext.react").useE2EEMessagingLink(),s=l.inThread,c=[s&&a];return u.jsx(r("BaseTheme.react"),{style:{display:"inline"},children:u.jsx(r("CometLink.react"),babelHelpers.extends({},i,{color_DEPRECATED:"blueLink",ref:n,weight_DEPRECATED:"bold",xstyle_DEPRECATED:c}))})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MDSLink.react",["MDSLinkNewImpl.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["color_DEPRECATED","ref","display_DEPRECATED","weight_DEPRECATED","xstyle_DEPRECATED"],s,u=s||(s=o("react"));function c(t){var n=t.color_DEPRECATED,o=t.ref,a=t.display_DEPRECATED,i=t.weight_DEPRECATED,l=t.xstyle_DEPRECATED,s=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsx(r("MDSLinkNewImpl.react"),babelHelpers.extends({ref:o,xstyleInThread:l},s))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MessengerAppMessengerFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 28.855c6.337 0 11.25-4.642 11.25-10.913 0-6.27-4.913-10.912-11.25-10.912S6.75 11.672 6.75 17.942c0 3.28 1.344 6.114 3.533 8.072a.898.898 0 0 1 .302.641l.062 2.001a.9.9 0 0 0 1.262.796l2.234-.986a.897.897 0 0 1 .6-.043 12.27 12.27 0 0 0 3.257.432zm6.971-13.825-3.916 6.054a.662.662 0 0 1-.916.196l-3.628-2.348a.414.414 0 0 0-.46.007l-4.09 2.82c-.597.412-1.326-.296-.932-.905l3.917-6.053a.662.662 0 0 1 .916-.197l3.629 2.348c.14.091.322.089.46-.007l4.088-2.82c.597-.411 1.326.297.932.905z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("ExamplePromptScreenMN.react",["fbt","BaseRow.react","BaseRowItem.react","BaseScrollableArea.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometPlaceholder.react","CometRow.react","CometTransientDialogProvider.react","ConsentTemplateActionCallbacksContext","ConsentTemplateUserContext","MDSButton.react","MDSDialogContainer.react","MDSDialogLoadingState.react","MDSIcon.react","MDSLink.react","MDSText.react","MDSTheme.react","MessengerAppMessengerFilled.svg.react","MetaBrandDashedArcPointerOutline24Icon.react","MetaBrandEyeOutline24Icon.react","MetaBrandHeartOpenHandOutline24Icon.react","MetaBrandPersonStarsOutline24Icon.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={dialog:{"@media (max-width: 679px)_maxHeight":"x1jxyteu","@media (max-width: 679px)_minHeight":"x1mfppf3","@media (max-width: 679px)_paddingTop":"x1y0ix2f","@media (max-width: 679px)_paddingBottom":"x1eevrrt","@media (max-width: 679px)_paddingInlineStart":"x1vnzckh","@media (max-width: 679px)_paddingInlineEnd":"xgof6fa","@media (max-width: 679px)_paddingLeft":null,"@media (max-width: 679px)_paddingRight":null,$$css:!0},footer:{backgroundColor:"x2bj2ny",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,"@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xsag5q8","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerDisclosure:{paddingBottom:"xsag5q8",paddingTop:"xyamay9",$$css:!0},header:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9",$$css:!0},layout:{maxHeight:"x1yr2tfi",position:"x1n2onr6","@media (max-width: 679px)_maxHeight":"x1jxyteu",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x879a55",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},primaryButton:{paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},section:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},sectionIconTextList:{paddingBottom:"x10b6aqq",paddingTop:"xyamay9",$$css:!0},sectionIconTextListItem:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemContent:{paddingBottom:"x1a8lsjc",paddingTop:"x1yrsyyn",$$css:!0},sectionIconTextListItemContentSpaceBetween:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemIcon:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionParagraph:{paddingTop:"x7sb2j6",$$css:!0}};function d(){var e,t,n,a,l,d,m=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),p=m.onApproved,_=m.onDenied,f=o("ConsentTemplateUserContext").useConsentTemplateUserShortName();return u.jsx(r("MDSTheme.react"),{children:u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("MDSDialogLoadingState.react"),{}),name:i.id,children:u.jsx(r("CometTransientDialogProvider.react"),{children:u.jsx(r("MDSDialogContainer.react"),{anchorXStyle:c.dialog,disableClosingWithMask:!0,size:"medium",children:u.jsxs(r("CometColumn.react"),{expanding:!0,paddingTop:0,paddingVertical:0,xstyle:c.layout,children:[u.jsxs(r("CometRow.react"),{xstyle:c.navbar,children:[u.jsx(e=r("CometColumnItem.react"),{children:u.jsx(t=r("MDSIcon.react"),{icon:r("MessengerAppMessengerFilled.svg.react"),isDecorative:!0,size:40})}),u.jsx(e,{children:u.jsx("div",{className:"xc9qbxq x14qfxbe"})})]}),u.jsx(e,{expanding:!0,children:u.jsxs(r("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:!1,horizontal:!1,vertical:!0,children:[u.jsx(n=r("BaseView.react"),{xstyle:[c.root,c.header],children:u.jsx(a=r("MDSText.react"),{align:"start",color:"primary",isPrimaryHeading:!0,type:"headlineEmphasized1",children:s._(/*BTDS*/"Allow Meta to improve your app experience?")})}),u.jsxs(n,{xstyle:[c.root,c.section],children:[u.jsx(n,{xstyle:c.sectionParagraph,children:u.jsx(a,{align:"start",color:"primary",type:"body3",children:s._(/*BTDS*/"{userName}, at Meta, we value your trust and want to be transparent about how we use your data. By consenting to this agreement, you allow us to collect and process your data to improve your app experience. {=m2}",[s._param("userName",f),s._implicitParam("=m2",u.jsx(r("MDSLink.react"),{href:"https://www.meta.com/help/1265316287987507/",children:s._(/*BTDS*/"Learn how your data will be processed.")}))])})}),u.jsxs(n,{xstyle:c.sectionIconTextList,children:[u.jsxs(l=r("BaseRow.react"),{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(d=r("BaseRowItem.react"),{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(t,{icon:r("MetaBrandPersonStarsOutline24Icon.react"),size:24})}),u.jsxs(d,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(l,{align:"start",children:u.jsx(a,{align:"start",color:"primary",type:"headlineEmphasized3",children:s._(/*BTDS*/"Personalized Recommendations")})}),u.jsx(l,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(l,{children:u.jsx(a,{align:"start",color:"secondary",type:"body3",children:s._(/*BTDS*/"We can provide you with tailored content and suggestions based on your interests and preferences.")})})]})]}),u.jsxs(l,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(d,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(t,{icon:r("MetaBrandDashedArcPointerOutline24Icon.react"),size:24})}),u.jsxs(d,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(l,{align:"start",children:u.jsx(a,{align:"start",color:"primary",type:"headlineEmphasized3",children:s._(/*BTDS*/"Enhanced App Performance")})}),u.jsx(l,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(l,{children:u.jsx(a,{align:"start",color:"secondary",type:"body3",children:s._(/*BTDS*/"Your data helps us identify areas for improvement, ensuring a smoother and more efficient app experience.")})})]})]}),u.jsxs(l,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(d,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(t,{icon:r("MetaBrandHeartOpenHandOutline24Icon.react"),size:24})}),u.jsxs(d,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(l,{align:"start",children:u.jsx(a,{align:"start",color:"primary",type:"headlineEmphasized3",children:s._(/*BTDS*/"New Features and Services")})}),u.jsx(l,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(l,{children:u.jsx(a,{align:"start",color:"secondary",type:"body3",children:s._(/*BTDS*/"By analyzing user behavior, we can develop new features and services that cater to your needs and interests.")})})]})]}),u.jsxs(l,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(d,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(t,{icon:r("MetaBrandEyeOutline24Icon.react"),size:24})}),u.jsxs(d,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(l,{align:"start",children:u.jsx(a,{align:"start",color:"primary",type:"headlineEmphasized3",children:s._(/*BTDS*/"Improved Security")})}),u.jsx(l,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(l,{children:u.jsx(a,{align:"start",color:"secondary",type:"body3",children:s._(/*BTDS*/"Your data helps us detect and prevent potential security threats, keeping your account and personal information safe.")})})]})]})]})]})]})}),u.jsxs(e,{xstyle:[c.root,c.footer],children:[u.jsx(n,{xstyle:c.footerDisclosure,children:u.jsx(a,{align:"center",color:"secondary",type:"body3",children:s._(/*BTDS*/"By agreeing to this consent, you acknowledge that you have read and understood how we will use your data to improve your app experience. You also acknowledge that you are at least 18 years old (or the age of majority in your jurisdiction) and have the authority to agree to this consent.")})}),u.jsx(n,{xstyle:c.footerButtons,children:u.jsx(l,{expanding:!0,children:u.jsxs(n,{xstyle:c.footerButtonsContainer,children:[u.jsx(d,{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("MDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Agree"),onPress:function(){p()},size:32,type:"primary"})}),u.jsx(d,{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("MDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Don't agree"),onPress:function(){_()},size:32,type:"secondary"})})]})})})]})]})})})})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("ExamplePromptScreenMeta.react",["fbt","BaseRow.react","BaseRowItem.react","BaseView.react","CometColumnItem.react","CometPlaceholder.react","ConsentTemplateActionCallbacksContext","ConsentTemplateUserContext","MetaBrandDashedArcPointerOutline24Icon.react","MetaBrandEyeOutline24Icon.react","MetaBrandHeartOpenHandOutline24Icon.react","MetaBrandPersonStarsOutline24Icon.react","MetaLockupPrimary.react","XMDSButton.react","XMDSDialogContainer.react","XMDSDialogLoadingState.react","XMDSIcon.react","XMDSInlinePressableText.react","XMDSText.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={footer:{backgroundColor:"x2bj2ny",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,"@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xx6bls6","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerDisclosure:{paddingBottom:"xr1496l",paddingTop:"xqy66fx",$$css:!0},header:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x8nclml",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},primaryButton:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},section:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},sectionIconTextList:{paddingBottom:"x10b6aqq",paddingTop:"xyamay9",$$css:!0},sectionIconTextListItem:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemContent:{paddingBottom:"x1a8lsjc",paddingTop:"x1yrsyyn",$$css:!0},sectionIconTextListItemContentSpaceBetween:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemIcon:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionParagraph:{paddingTop:"x7sb2j6",$$css:!0}};function d(){var e,t,n,a,l,d=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),m=d.onApproved,p=d.onDenied,_=o("ConsentTemplateUserContext").useConsentTemplateUserShortName();return u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("XMDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:u.jsxs(r("XMDSDialogContainer.react"),{disableClosingWithMask:!0,size:"medium",children:[u.jsxs(e=r("BaseRow.react"),{xstyle:c.navbar,children:[u.jsx("div",{className:"xc9qbxq x14qfxbe"}),u.jsx(r("MetaLockupPrimary.react"),{size:12}),u.jsx("div",{className:"xc9qbxq x14qfxbe"})]}),u.jsx(t=r("BaseView.react"),{xstyle:[c.root,c.header],children:u.jsx(n=r("XMDSText.react"),{color:"primaryText",isPrimaryHeading:!0,textAlign:"start",textStyle:"headline1",children:s._(/*BTDS*/"Allow Meta to improve your app experience?")})}),u.jsxs(r("CometColumnItem.react"),{expanding:!0,children:[u.jsxs(t,{xstyle:[c.root,c.section],children:[u.jsx(t,{xstyle:c.sectionParagraph,children:u.jsx(n,{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"{userName}, at Meta, we value your trust and want to be transparent about how we use your data. By consenting to this agreement, you allow us to collect and process your data to improve your app experience. {=m2}",[s._param("userName",_),s._implicitParam("=m2",u.jsx(r("XMDSInlinePressableText.react"),{linkProps:{target:"_blank",url:"https://www.meta.com/help/1265316287987507/"},children:s._(/*BTDS*/"Learn how your data will be processed.")}))])})}),u.jsxs(t,{xstyle:c.sectionIconTextList,children:[u.jsxs(e,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(a=r("BaseRowItem.react"),{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(l=r("XMDSIcon.react"),{icon:r("MetaBrandPersonStarsOutline24Icon.react"),size:24})}),u.jsxs(a,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(e,{align:"start",children:u.jsx(n,{color:"primaryText",textAlign:"start",textStyle:"primaryLabel",children:s._(/*BTDS*/"Personalized Recommendations")})}),u.jsx(e,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(e,{children:u.jsx(n,{color:"secondaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"We can provide you with tailored content and suggestions based on your interests and preferences.")})})]})]}),u.jsxs(e,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(a,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(l,{icon:r("MetaBrandDashedArcPointerOutline24Icon.react"),size:24})}),u.jsxs(a,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(e,{align:"start",children:u.jsx(n,{color:"primaryText",textAlign:"start",textStyle:"primaryLabel",children:s._(/*BTDS*/"Enhanced App Performance")})}),u.jsx(e,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(e,{children:u.jsx(n,{color:"secondaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"Your data helps us identify areas for improvement, ensuring a smoother and more efficient app experience.")})})]})]}),u.jsxs(e,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(a,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(l,{icon:r("MetaBrandHeartOpenHandOutline24Icon.react"),size:24})}),u.jsxs(a,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(e,{align:"start",children:u.jsx(n,{color:"primaryText",textAlign:"start",textStyle:"primaryLabel",children:s._(/*BTDS*/"New Features and Services")})}),u.jsx(e,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(e,{children:u.jsx(n,{color:"secondaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"By analyzing user behavior, we can develop new features and services that cater to your needs and interests.")})})]})]}),u.jsxs(e,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(a,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(l,{icon:r("MetaBrandEyeOutline24Icon.react"),size:24})}),u.jsxs(a,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(e,{align:"start",children:u.jsx(n,{color:"primaryText",textAlign:"start",textStyle:"primaryLabel",children:s._(/*BTDS*/"Improved Security")})}),u.jsx(e,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(e,{children:u.jsx(n,{color:"secondaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"Your data helps us detect and prevent potential security threats, keeping your account and personal information safe.")})})]})]})]})]}),u.jsx(e,{expanding:!0}),u.jsxs(r("CometColumnItem.react"),{xstyle:[c.root,c.footer],children:[u.jsx(t,{xstyle:c.footerDisclosure,children:u.jsx(n,{color:"secondaryText",textAlign:"center",textStyle:"body",children:s._(/*BTDS*/"By agreeing to this consent, you acknowledge that you have read and understood how we will use your data to improve your app experience. You also acknowledge that you are at least 18 years old (or the age of majority in your jurisdiction) and have the authority to agree to this consent.")})}),u.jsx(t,{xstyle:c.footerButtons,children:u.jsx(e,{expanding:!0,children:u.jsxs(t,{xstyle:c.footerButtonsContainer,children:[u.jsx(a,{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("XMDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Agree"),onPress:function(){m()},size:"medium",type:"primary"})}),u.jsx(a,{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("XMDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Don't agree"),onPress:function(){p()},size:"medium",type:"secondary"})})]})})})]})]})]})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("THButton.react",["CometPressable.react","Locale","THSpinner.react","normalizeCometRouterUrl","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={disabled:{color:"x12rw4y6",cursor:"x1h6gzvc",":active_transform":"x1pdlv7q",$$css:!0},large:{height:"xdd8jsf",$$css:!0},loading:{color:"x19co3pv",$$css:!0},primary:{backgroundColor:"x111bo7f",borderTopColor:"x1vmvj1k",borderInlineEndColor:"x1yvpm8f",borderBottomColor:"x3tjt7u",borderInlineStartColor:"x147ezun",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",color:"xteu7em",$$css:!0},root:{alignItems:"x6s0dn4",borderStartStartRadius:"x16qb05n",borderStartEndRadius:"xi7iut8",borderEndEndRadius:"x1dm3dyd",borderEndStartRadius:"x1pv694p",boxSizing:"x9f619",display:"x3nfvp2",fontWeight:"x1s688f",height:"x90ne7k",justifyContent:"xl56j7k",maxWidth:"x193iq5w",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,transitionDuration:"x1g2r6go x12w9bfk",transitionProperty:"x11xpdln",transitionTimingFunction:"xz4gly6",userSelect:"x87ps6o",whiteSpace:"xuxw1ft",":active_transform":"x19kf12q",$$css:!0},secondary:{borderTopColor:"x6bh95i",borderInlineEndColor:"x1gzj6u4",borderBottomColor:"x1hvtcl2",borderInlineStartColor:"x1e1ff7m",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",color:"xp07o12",$$css:!0},simpleText:{color:"xp07o12",fontSize:"x1lkfr7t",fontWeight:"xo1l8bm",paddingTop:"x1mznueg",paddingInlineEnd:"x1isbhzs",paddingBottom:"xw3kv2p",paddingInlineStart:"xwmlgs2",$$css:!0},small:{fontSize:"xmd891q",height:"xmix8c7",$$css:!0},tertiary:{backgroundColor:"x90nhty",borderTopColor:"x6bh95i",borderInlineEndColor:"x1gzj6u4",borderBottomColor:"x1hvtcl2",borderInlineStartColor:"x1e1ff7m",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",color:"xp07o12",$$css:!0},tertiaryBordered:{borderTopColor:"x6bh95i",borderInlineEndColor:"x1gzj6u4",borderBottomColor:"x1hvtcl2",borderInlineStartColor:"x1e1ff7m",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",color:"xu0ddkp",$$css:!0},tertiaryText:{color:"xu0ddkp",$$css:!0},tombstone:{color:"xu0ddkp",paddingInlineEnd:"xyri2b",":active_opacity":"x1citr7e",":active_transform":"x1pdlv7q",$$css:!0},whiteText:{color:"x14ctfv",$$css:!0}};function c(e){var t=e["aria-current"],n=e["aria-pressed"],a=e.disableLinkShimForFollowLinkButton_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV,i=e.href,l=e.icon,c=e.isDisabled,d=c===void 0?!1:c,m=e.isDownload,p=m===void 0?!1:m,_=e.isLabelHidden,f=_===void 0?!1:_,g=e.isLoading,h=g===void 0?!1:g,y=e.label,C=e.onClick,b=e.onHoverIn,v=e.onHoverOut,S=e.onPressIn,R=e.prefetchQueriesOnHover,L=e.replace,E=e.size,k=E===void 0?"medium":E,I=e.target,T=e.testid,D=e.textAlign,x=D===void 0?"center":D,$=e.traceParams,P=$===void 0?void 0:$,N=e.variant,M=e.xstyle,w=d||h,A=x==="center"||o("Locale").isRTL();return s.jsxs(r("CometPressable.react"),{"aria-current":t,"aria-label":f?y:void 0,"aria-pressed":n,cursorDisabled:w,disabled:w,linkProps:i==null?void 0:{disableLinkShimForFollowLinkButton_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV:a,download:p,prefetchQueriesOnHover:R,replace:L,target:I,traceParams:P,url:r("normalizeCometRouterUrl")(i)},onHoverIn:b,onHoverOut:v,onPress:C,onPressIn:S,overlayDisabled:!0,testid:void 0,xstyle:[u.root,k==="large"&&u.large,k==="small"&&u.small,N==="primary"&&u.primary,N==="secondary"&&u.secondary,N==="tertiary"&&u.tertiary,N==="tertiary_text"&&u.tertiaryText,N==="tertiary_bordered"&&u.tertiaryBordered,N==="tombstone"&&u.tombstone,N==="simple_text"&&u.simpleText,N==="always_white"&&[u.simpleText,u.whiteText],M,w&&u.disabled,h&&u.loading],children:[l!=null&&A&&!(f&&h)&&l,f===!0?null:s.jsx("div",babelHelpers.extends({},{0:{className:"x6ikm8r x10wlt62 xlyipyv"},1:{className:"x6ikm8r x10wlt62 xlyipyv x1iyjqo2"}}[(x==="start")<<0],{children:y})),l!=null&&!A&&!(f&&h)&&l,h&&s.jsx("div",{className:"xausltr x10l6tqk xim6ej3",children:s.jsx(r("THSpinner.react"),{size:"small"})})]})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("THDialogConstants",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["DEFAULT","SMALL","SMALL_TABBED","FULLSCREEN_FOR_BOTTOM_SHEET_OTHERWISE_DEFAULT"]),l=n("$InternalEnum").Mirrored(["BLURRED","DARK"]);i.THDialogVariant=e,i.THDialogBackdropVariant=l}),66);
__d("THDialogStyles",[],(function(t,n,r,o,a,i,l){"use strict";var e="x18re5ia-B",s="x1prjo1g-B",u={backdropBlurred:{backgroundColor:"xjbqb8w",$$css:!0},backdropDark:{animationDuration:"x5hsz1j x1u6grsq",animationName:"xqcmdr3",animationTimingFunction:"x4hg4is",backgroundColor:"xwv1ft4",$$css:!0},card:{backgroundColor:"xz401s1",borderTopColor:"x6bh95i",borderInlineEndColor:"x1gzj6u4",borderBottomColor:"x1hvtcl2",borderInlineStartColor:"x1e1ff7m",borderStartStartRadius:"xbjudin",borderStartEndRadius:"xnlwouz",borderEndEndRadius:"xpp8er5",borderEndStartRadius:"xs9wviy",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xt8cgyo",borderInlineEndWidth:"x128c8uf",borderBottomWidth:"x1co6499",borderInlineStartWidth:"xc5fred",boxShadow:"x1vbw0d0",boxSizing:"x9f619",clipPath:"x1gj8qfm",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},contentWithAnimation:{animationDuration:"x5hsz1j x1u6grsq",animationName:"x1mkrjbl",animationTimingFunction:"x4hg4is",$$css:!0}};l.dialogStyles=u}),98);
__d("THHighlightedIconButton.react",["BaseButton.react","react","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={button:{alignItems:"x6s0dn4",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",height:"xn3w4p2",justifyContent:"xl56j7k",transitionDuration:"x13dflua",transitionProperty:"x11xpdln",width:"x187nhsf",":active_transform":"xk4oym4",":hover_transform":"xus2keu",$$css:!0},circle:{alignItems:"x6s0dn4",backgroundColor:"x90nhty",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",height:"xn3w4p2",justifyContent:"xl56j7k",width:"x187nhsf",$$css:!0},circleSecondary:{backgroundColor:"x1ohetei",$$css:!0},circleSmall:{height:"x1fgtraw",width:"xgd8bvy",$$css:!0},disabled:{opacity:"xti2d7y",":active_transform":"x1pdlv7q",":hover_transform":"x1t7rm6y",$$css:!0}};function c(e){var t=e.children,n=e.disabled,a=n===void 0?!1:n,i=e.innerRef,l=e.onClick,c=e.size,d=e.useSecondaryBackground,m=d===void 0?!1:d;return s.jsx(r("BaseButton.react"),{disabled:a,onClick:l,ref:i,xstyle:[u.button,a&&u.disabled],children:s.jsx(o("react-strict-dom").html.span,{style:[u.circle,c==="small"&&u.circleSmall,m&&u.circleSecondary],children:t})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("colorStyles",[],(function(t,n,r,o,a,i){"use strict";var e={"always-white":{dark:"var(--always-white)",light:"var(--always-white)"},"beta-icon":{dark:"var(--barcelona-beta-text)",light:"var(--barcelona-beta-text)"},"charcoal-icon":{dark:"var(--barcelona-charcoal-icon)",light:"var(--barcelona-charcoal-icon)"},"elevated-background":{dark:"var(--barcelona-elevated-background)",light:"var(--barcelona-elevated-background)"},"error-text":{dark:"var(--barcelona-error-text)",light:"var(--barcelona-error-text)"},"link-text":{dark:"var(--barcelona-link-text)",light:"var(--barcelona-link-text)"},"navigation-icon":{dark:"var(--barcelona-navigation-icon)",light:"var(--barcelona-navigation-icon)"},"notification-badge":{dark:"var(--barcelona-notification-badge-background)",light:"var(--barcelona-notification-badge-background)"},"primary-button-text":{dark:"var(--barcelona-primary-button-text)",light:"var(--barcelona-primary-button-text)"},"primary-icon":{dark:"var(--barcelona-primary-icon)",light:"var(--barcelona-primary-icon)"},"secondary-icon":{dark:"var(--barcelona-secondary-icon)",light:"var(--barcelona-secondary-icon)"},"success-icon":{dark:"var(--barcelona-success-icon)",light:"var(--barcelona-success-icon)"},"tooltip-background":{dark:"var(--barcelona-tooltip-background)",light:"var(--barcelona-tooltip-background)"}},l=e;i.default=l}),66);
__d("THIcon.react",["BaseSVGIcon.react","colorStyles","react","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l){"use strict";var e=["color"],s,u=s||(s=o("react"));function c(t){var n=t.color,o=n===void 0?"primary-icon":n,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=r("useCurrentDisplayMode")();return u.jsx(r("BaseSVGIcon.react"),babelHelpers.extends({color:r("colorStyles")[o][i]},a))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("ThreadsXOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M18.293 4.293a1 1 0 1 1 1.414 1.414L13.414 12l6.293 6.293a1 1 0 1 1-1.414 1.414L12 13.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L10.586 12 4.293 5.707a1 1 0 1 1 1.414-1.414L12 10.586l6.293-6.293z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("useTHIsLargeScreen_UNSAFE_FOR_SSR",["BarcelonaStyleXDefaultTheme","useMatchMedia"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("BarcelonaStyleXDefaultTheme")["barcelona-large-screen-breakpoint"];return r("useMatchMedia")("(min-width: "+e+")")}l.default=e}),98);
__d("THDialog.react",["fbt","BaseDialog.react","BaseMultiPageView.react","THDialogConstants","THDialogStyles","THHighlightedIconButton.react","THIcon.react","ThreadsXOutline24Icon.react","react","react-strict-dom","useTHIsLargeScreen_UNSAFE_FOR_SSR"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={backdrop:{bottom:"x1ey2m1c",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,pointerEvents:"x47corl",position:"xixxii4",top:"x13vifvy",$$css:!0},backdropBlurredVariant:{backdropFilter:"xgpcfj4",backgroundColor:"xspb4xo",$$css:!0},closeButtonContainer:{display:"x78zum5",insetInlineStart:"xqpl54q",left:null,right:null,position:"xixxii4",top:"x8l1umf",zIndex:"x1vjfegm",$$css:!0},closeButtonContainerSmall:{insetInlineStart:"x1r4y97",left:null,right:null,top:"xuivejd",$$css:!0},closeButtonContainerSmallTabbed:{insetInlineStart:"x1r4y97",left:null,right:null,top:"xfr5jun",$$css:!0},content:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0},dialog:{overflowX:"x1plvlek",overflowY:"xryxfnj",$$css:!0}};function d(e){var t=e.backdropVariant,n=t===void 0?o("THDialogConstants").THDialogBackdropVariant.DARK:t,a=e.children,i=e.childrenXStyle,l=e.disableClosingWithMask,d=e.disableMultiPageViewAnimations,m=d===void 0?!1:d,p=e.fallback,_=e.hasCloseButton,f=_===void 0?!1:_,g=e.onClose,h=e.ref,y=e.showCardStyles,C=y===void 0?!1:y,b=e.testid,v=e.variant,S=v===void 0?o("THDialogConstants").THDialogVariant.DEFAULT:v,R=r("useTHIsLargeScreen_UNSAFE_FOR_SSR")();return u.jsxs(r("BaseDialog.react"),{disableClosingWithMask:l,onClose:g,ref:h,testid:void 0,xstyle:[c.dialog,n!==o("THDialogConstants").THDialogBackdropVariant.BLURRED&&o("THDialogStyles").dialogStyles.contentWithAnimation],children:[u.jsx(o("react-strict-dom").html.div,{style:[c.backdrop,n===o("THDialogConstants").THDialogBackdropVariant.BLURRED&&c.backdropBlurredVariant]}),u.jsxs(o("react-strict-dom").html.div,{style:[c.content],children:[f&&u.jsx(o("react-strict-dom").html.div,{style:[c.closeButtonContainer,!R&&S===o("THDialogConstants").THDialogVariant.SMALL&&c.closeButtonContainerSmall,!R&&S===o("THDialogConstants").THDialogVariant.SMALL_TABBED&&c.closeButtonContainerSmallTabbed],children:u.jsx(r("THHighlightedIconButton.react"),{onClick:g,size:R?"large":"small",children:u.jsx(r("THIcon.react"),{alt:s._(/*BTDS*/"Close"),color:"secondary-icon",icon:r("ThreadsXOutline24Icon.react"),size:R?18:12})})}),u.jsx(r("BaseMultiPageView.react"),{disableAnimations:m,fallback:p,xstyle:[C&&o("THDialogStyles").dialogStyles.card,i],children:a})]})]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("THBrandHighlightContext.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("THTextConfig",[],(function(t,n,r,o,a,i,l){"use strict";var e={alwaysBlack:{color:"x1p6odiv",$$css:!0},alwaysWhite:{color:"x14ctfv",$$css:!0},beta:{color:"x1mpclbd",$$css:!0},brandHighlighted:{color:"x4d59ch",$$css:!0},charcoal:{color:"xc82ewx",$$css:!0},disabled:{color:"x1abma",$$css:!0},errorOrDestructive:{color:"xhci195",$$css:!0},likedText:{color:"x1mked70",$$css:!0},link:{color:"x1pwva54",$$css:!0},primary:{color:"xp07o12",$$css:!0},secondary:{color:"x12rw4y6",$$css:!0}},s=400,u=600,c=700,d=800,m={default:{fontWeight:"xo1l8bm",$$css:!0}},p={default:{fontWeight:"x1s688f",$$css:!0}},_={default:{fontWeight:"x1xlr1w8",$$css:!0}},f={default:{fontWeight:"xuv8nkb",$$css:!0}},g={body1:{fontSize:"xjohtrz",$$css:!0},body2:{fontSize:"xmd891q",$$css:!0},display:{fontSize:"x1vravhs",$$css:!0},footnote:{fontSize:"x1fhwpqd",$$css:!0},heading1:{fontSize:"x1kd8h9g",$$css:!0},heading2:{fontSize:"x133cpev",$$css:!0},label:{fontSize:"xl565be",$$css:!0},subtitle:{fontSize:"x1ju8cih",$$css:!0},title:{fontSize:"x1ms8i2q",$$css:!0}},h=function(){return[0,0]},y=function(t){switch(t){case"footnote":return[2,1];case"body1":return[3,4];case"body2":return[3,4];case"label":return[3,4];case"subtitle":return[3,4];case"title":return[4,6];case"heading2":return[5,6];case"heading1":return[5,6];case"display":return[5,6]}},C={default:{fontFamily:"x1i0vuye",$$css:!0},defaultWithInstagramLogo:{fontFamily:"x1ep9g4n",$$css:!0},instagramSans:{fontFamily:"xnh215r",$$css:!0},serif:{fontFamily:"xfbp3kx",$$css:!0}};function b(t,n,r){t===void 0&&(t="normal"),n===void 0&&(n=!1),r===void 0&&(r="default");var o=g,a=m;switch(t){case"semibold":a=p;break;case"bold":a=_;break;case"heavy":a=f}var i=C.default;switch(r){case"instagramSans":i=C.instagramSans;break;case"defaultWithInstagramLogo":i=C.defaultWithInstagramLogo;break;case"serif":i=C.serif;break}var l=n?y:h;return{colors:{alwaysBlack:e.alwaysBlack,alwaysWhite:e.alwaysWhite,betaText:e.beta,brandHighlightedText:e.brandHighlighted,charcoal:e.charcoal,destructive:e.errorOrDestructive,disabled:e.disabled,likedText:e.likedText,link:e.link,primary:e.primary,secondary:e.secondary},defaultFontFamily:i,offsets:l,styles:{body1:{lineHeight:"1.4",style:[o.body1,a.default]},body2:{lineHeight:"1.4",style:[o.body2,a.default]},display:{lineHeight:"1.15",style:[o.display,a.default]},footnote:{lineHeight:"1.4",style:[o.footnote,a.default]},heading1:{lineHeight:"1.125",style:[o.heading1,a.default]},heading2:{lineHeight:"1.25",style:[o.heading2,a.default]},label:{lineHeight:"1.3125",style:[o.label,a.default]},subtitle:{lineHeight:"1.5",style:[o.subtitle,a.default]},title:{lineHeight:"1.25",style:[o.title,a.default]}}}}l.createTHTextConfig=b}),98);
__d("THText.react",["BaseText.react","THBrandHighlightContext.react","THTextConfig","memoizeWithArgs","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.use,c=r("memoizeWithArgs")(function(e,t,n){return o("BaseText.react").createBaseTextComponent(o("THTextConfig").createTHTextConfig(e,t,n))},function(e,t,n){return e+":"+t.toString()+":"+n});function d(e){var t=e.applyNegativeMargins,n=t===void 0?!1:t,o=e.children,a=e.color,i=a===void 0?"primary":a,l=e.dir,d=l===void 0?"auto":l,m=e.elementType,p=e.fontFamily,_=p===void 0?"default":p,f=e.maxLines,g=f===void 0?0:f,h=e.textAlign,y=e.textElementRef,C=e.translate,b=e.type,v=b===void 0?"body1":b,S=e.weight,R=S===void 0?"normal":S,L=e.wrap,E=e.xstyle,k=u(r("THBrandHighlightContext.react")),I=c(R,n,_);return s.jsx(I,{alignment:h,colorName:(k==null?void 0:k.inHighlightOverlay)===!0?"brandHighlightedText":i,dir:d,elementType:m,lines:g,ref:y,styleName:v,translate:C,wrap:L,xstyle:E,children:o})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("THLink.react",["BaseLink.react","normalizeCometRouterUrl","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.ref,n=e["aria-current"],o=e["aria-label"],a=e.children,i=e.disableLinkShimForFollowLinkButton_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV,l=e.display,u=e.focusable,c=e.href,d=e.onClick,m=e.onHoverEnd,p=e.onHoverStart,_=e.onPressStart,f=e.passthroughProps,g=e.prefetchQueriesOnHover,h=e.preventLocalNavigation,y=e.replace,C=e.target,b=e.testid,v=e.xstyle,S=c!=null?r("normalizeCometRouterUrl")(c):null;return s.jsx(r("BaseLink.react"),{"aria-current":n,"aria-label":o,disableLinkShimForFollowLinkButton_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV:i,display:l,focusable:u,href:S,onClick:d,onHoverEnd:m,onHoverStart:p,onPressStart:_,passthroughProps:f,prefetchQueriesOnHover:g,preventLocalNavigation:h,ref:t,replace:y,target:C,testid:void 0,xstyle:v,children:a})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("THTextLink.react",["THLink.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={bold:{fontWeight:"x1xlr1w8",$$css:!0},heavy:{fontWeight:"xuv8nkb",$$css:!0},normal:{fontWeight:"xo1l8bm",$$css:!0},semibold:{fontWeight:"x1s688f",$$css:!0}},c={primary:{color:"xp07o12",":active_color":"xzmqwrg",":active_opacity":"x1citr7e",":visited_color":"x1kdxza",$$css:!0},root:{color:"xzlwxrv",":active_color":"xklvfq0",":active_opacity":"x1citr7e",":hover_textDecoration":"x1lku1pv",":visited_color":"x1w4el19",$$css:!0},secondary:{color:"x12rw4y6",":active_color":"xrkepyr",":active_opacity":"x1citr7e",":visited_color":"x37wo2f",$$css:!0},underline:{textDecoration:"x1bvjpef",$$css:!0},underlineOnHover:{":hover_textDecoration":"xt0b8zv",$$css:!0}};function d(e){var t=e.ref,n=e["aria-label"],o=e.children,a=e.color,i=e.disableLinkShimForFollowLinkButton_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV,l=e.focusable,d=e.href,m=e.onClick,p=e.onHoverEnd,_=e.onHoverStart,f=e.onPressStart,g=e.passthroughProps,h=e.preventLocalNavigation,y=e.target,C=e.testid,b=e.textDecoration,v=e.underlineOnHover,S=e.weight,R=e.xstyle;return s.jsx(r("THLink.react"),{"aria-label":n,disableLinkShimForFollowLinkButton_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV:i,focusable:l,href:d,onClick:m,onHoverEnd:p,onHoverStart:_,onPressStart:f,passthroughProps:g,preventLocalNavigation:h,ref:t,target:y,testid:void 0,xstyle:[c.root,a==="primary"&&c.primary,a==="secondary"&&c.secondary,v===!0&&c.underlineOnHover,b==="underline"&&c.underline,S!=null&&u[S],R],children:o})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("ExamplePromptScreenTH.react",["fbt","BarcelonaDarkModeStateProvider.react","BarcelonaDialogLoadingState.react","BarcelonaHeaderLogoIcon.react","BarcelonaThemeProvider.react","BaseRow.react","BaseRowItem.react","BaseScrollableArea.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometPlaceholder.react","CometRow.react","ConsentTemplateActionCallbacksContext","ConsentTemplateUserContext","MetaBrandDashedArcPointerOutline24Icon.react","MetaBrandEyeOutline24Icon.react","MetaBrandHeartOpenHandOutline24Icon.react","MetaBrandPersonStarsOutline24Icon.react","THButton.react","THDialog.react","THText.react","THTextLink.react","XMDSIcon.react","emptyFunction","react","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={dialog:{maxWidth:"x1xu72j8",$$css:!0},footer:{backgroundColor:"xzii09s",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,"@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xx6bls6","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerDisclosure:{paddingBottom:"xr1496l",paddingTop:"xqy66fx",$$css:!0},header:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},layout:{maxHeight:"x1yr2tfi",position:"x1n2onr6",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x8nclml",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},navboarLogo:{height:"xt7dq6l",width:"xgd8bvy",$$css:!0},primaryButton:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},section:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},sectionIconTextList:{paddingBottom:"x10b6aqq",paddingTop:"xyamay9",$$css:!0},sectionIconTextListItem:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemContent:{paddingBottom:"x1a8lsjc",paddingTop:"x1yrsyyn",$$css:!0},sectionIconTextListItemContentSpaceBetween:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemIcon:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionParagraph:{paddingTop:"x7sb2j6",$$css:!0}};function d(){var e,t,n,a,l,d,m=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),p=m.onApproved,_=m.onDenied,f=o("ConsentTemplateUserContext").useConsentTemplateUserShortName(),g=r("useCurrentDisplayMode")();return u.jsx(r("BarcelonaThemeProvider.react"),{displayMode:g,children:u.jsx(o("BarcelonaDarkModeStateProvider.react").BarcelonaDarkModeStateProvider,{children:u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("BarcelonaDialogLoadingState.react"),{onClose:r("emptyFunction")}),name:i.id,children:u.jsx("div",{className:"x6s0dn4 x78zum5 x1q0g3np xl56j7k xg6iff7",children:u.jsx(r("THDialog.react"),{childrenXStyle:c.dialog,hasCloseButton:!1,onClose:r("emptyFunction"),showCardStyles:!0,children:u.jsxs(r("CometColumn.react"),{expanding:!0,paddingTop:0,paddingVertical:0,xstyle:c.layout,children:[u.jsxs(r("CometRow.react"),{xstyle:c.navbar,children:[u.jsx(e=r("CometColumnItem.react"),{children:u.jsx("div",{className:"xc9qbxq x14qfxbe"})}),u.jsx(e,{children:u.jsx(r("BarcelonaHeaderLogoIcon.react"),{xstyle:c.navboarLogo})}),u.jsx(e,{children:u.jsx("div",{className:"xc9qbxq x14qfxbe"})})]}),u.jsx(e,{expanding:!0,children:u.jsxs(r("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:!1,horizontal:!1,vertical:!0,children:[u.jsx(t=r("BaseView.react"),{xstyle:[c.root,c.header],children:u.jsx(n=r("THText.react"),{color:"primary",textAlign:"start",type:"heading1",children:s._(/*BTDS*/"Allow Meta to improve your app experience?")})}),u.jsxs(t,{xstyle:[c.root,c.section],children:[u.jsx(t,{xstyle:c.sectionParagraph,children:u.jsx(n,{color:"primary",textAlign:"start",type:"body1",children:s._(/*BTDS*/"{userName}, at Meta, we value your trust and want to be transparent about how we use your data. By consenting to this agreement, you allow us to collect and process your data to improve your app experience. {=m2}",[s._param("userName",f),s._implicitParam("=m2",u.jsx(r("THTextLink.react"),{color:"blue",href:"https://www.meta.com/help/1265316287987507/",children:s._(/*BTDS*/"Learn how your data will be processed.")}))])})}),u.jsxs(t,{xstyle:c.sectionIconTextList,children:[u.jsxs(a=r("BaseRow.react"),{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l=r("BaseRowItem.react"),{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d=r("XMDSIcon.react"),{icon:r("MetaBrandPersonStarsOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{color:"primary",textAlign:"start",type:"label",children:s._(/*BTDS*/"Personalized Recommendations")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{color:"secondary",textAlign:"start",type:"body1",children:s._(/*BTDS*/"We can provide you with tailored content and suggestions based on your interests and preferences.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandDashedArcPointerOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{color:"primary",textAlign:"start",type:"label",children:s._(/*BTDS*/"Enhanced App Performance")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{color:"secondary",textAlign:"start",type:"body1",children:s._(/*BTDS*/"Your data helps us identify areas for improvement, ensuring a smoother and more efficient app experience.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandHeartOpenHandOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{color:"primary",textAlign:"start",type:"label",children:s._(/*BTDS*/"New Features and Services")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{color:"secondary",textAlign:"start",type:"body1",children:s._(/*BTDS*/"By analyzing user behavior, we can develop new features and services that cater to your needs and interests.")})})]})]}),u.jsxs(a,{align:"start",role:"listitem",xstyle:c.sectionIconTextListItem,children:[u.jsx(l,{xstyle:c.sectionIconTextListItemIcon,children:u.jsx(d,{icon:r("MetaBrandEyeOutline24Icon.react"),size:24})}),u.jsxs(l,{expanding:!0,xstyle:c.sectionIconTextListItemContent,children:[u.jsx(a,{align:"start",children:u.jsx(n,{color:"primary",textAlign:"start",type:"label",children:s._(/*BTDS*/"Improved Security")})}),u.jsx(a,{align:"start",xstyle:c.sectionIconTextListItemContentSpaceBetween}),u.jsx(a,{children:u.jsx(n,{color:"secondary",textAlign:"start",type:"body1",children:s._(/*BTDS*/"Your data helps us detect and prevent potential security threats, keeping your account and personal information safe.")})})]})]})]})]})]})}),u.jsxs(e,{xstyle:[c.root,c.footer],children:[u.jsx(t,{xstyle:c.footerDisclosure,children:u.jsx(n,{color:"secondary",textAlign:"center",type:"body1",children:s._(/*BTDS*/"By agreeing to this consent, you acknowledge that you have read and understood how we will use your data to improve your app experience. You also acknowledge that you are at least 18 years old (or the age of majority in your jurisdiction) and have the authority to agree to this consent.")})}),u.jsx(t,{xstyle:c.footerButtons,children:u.jsx(a,{expanding:!0,children:u.jsxs(t,{xstyle:c.footerButtonsContainer,children:[u.jsx(l,{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("THButton.react"),{isDisabled:!1,label:s._(/*BTDS*/"Agree"),onClick:function(){p()},size:"medium",variant:"primary"})}),u.jsx(l,{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("THButton.react"),{isDisabled:!1,label:s._(/*BTDS*/"Don't agree"),onClick:function(){_()},size:"medium",variant:"secondary"})})]})})})]})]})})})})})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("Template1AConsentTemplateConfig",["$InternalEnum","ConsentTemplateFlow.type","FBLogger","Template1AConsentPromptScreenFB.react","Template1AConsentPromptScreenIG.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=n("$InternalEnum")({TEMPLATE_1A:"template_1a"}),c={flow:o("ConsentTemplateFlow.type").ConsentTemplateFlow.TEMPLATE_1A,getConsentTemplatePromptScreen:function(t,n){var e=u.cast(t);if(e==null)throw r("FBLogger")("consent_core").mustfixThrow("No matching consent template screen found for the given prompt %s",t);switch(e){case u.TEMPLATE_1A:switch(n){case"facebook_comet":return s.jsx(r("Template1AConsentPromptScreenFB.react"),{});case"instagram_web":return s.jsx(r("Template1AConsentPromptScreenIG.react"),{})}break}throw r("FBLogger")("consent_core").mustfixThrow("The consent prompt %s does not currently support the surface %s",t,n)},recordConsentOutcome:function(t,n){}};l.ConsentTemplatePrompts=u,l.Template1AConsentTemplateConfig=c}),98);
__d("CometVariablesTheme.react",["BaseTheme.react","CometStyleXDarkTheme","CometStyleXDefaultTheme","DspFDSWebLegacyThemeUsage","react","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l){"use strict";var e=["theme","xstyle"],s,u=s||(s=o("react")),c=s.useMemo,d={root:{boxSizing:"x1afcbsf",position:"x1uhb9sk",zIndex:"x1swf91x",$$css:!0}},m=babelHelpers.extends({},r("CometStyleXDefaultTheme")),p=babelHelpers.extends({},r("CometStyleXDarkTheme"));Object.assign(m,r("DspFDSWebLegacyThemeUsage").light),Object.assign(p,r("DspFDSWebLegacyThemeUsage").dark);var _={dark:p,light:m,type:"VARIABLES"};function f(t){var n=t.theme,o=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=r("useCurrentDisplayMode")(),l=c(function(){return n==="invert"?i==="dark"?"light":"dark":n!=null?n:i},[i,n]);return u.jsx(r("BaseTheme.react"),babelHelpers.extends({config:_,displayMode:l,xstyle:[d.root,o]},a))}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("ChevronLeftOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M6.053 12.53a.748.748 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.061 1.06L7.644 12l6.97 6.97a.75.75 0 0 1-1.061 1.06z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("ChevronRightOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M17.947 12.53a.748.748 0 0 0 0-1.06l-7.5-7.5a.75.75 0 1 0-1.061 1.06l6.97 6.97-6.97 6.97a.75.75 0 0 0 1.061 1.06z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("FDSDialogBackgroundImageHeader.react",["fbt","BaseDialogLabelIDProvider","ChevronLeftOutline24.svg.react","ChevronRightOutline24.svg.react","CometImage.react","CrossFilled24.svg.react","FDSCircleButton.react","FDSDialogHeaderContainer.react","Locale","emptyFunction","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={maxHeight:"x1jols5v",$$css:!0},d={container:function(t){return[c,{"--x-maxHeight":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})("calc(100% - "+t+"px)")}]},content:{position:"x10l6tqk",width:"xh8yej3",$$css:!0},image:{height:"x5yr21d",objectFit:"xl1xv1r",verticalAlign:"xxymvpz",width:"xh8yej3",$$css:!0}},m=r("Locale").isRTL();function p(e){var t=e.backgroundImageProps,n=e.backTestID,a=n===void 0?"back-button":n,i=e.closeTestID,l=i===void 0?"close-button":i,c=e.disabled,p=c===void 0?!1:c,_=e.imageCutoffHeight,f=_===void 0?120:_,g=e.onBack,h=g===void 0?r("emptyFunction"):g,y=e.onClose,C=y===void 0?r("emptyFunction"):y,b=e.withBackButton,v=b===void 0?!1:b,S=e.withCloseButton,R=S===void 0?!0:S,L=e.withoutDivider,E=o("BaseDialogLabelIDProvider").useDialogHeaderID();return u.jsxs(r("FDSDialogHeaderContainer.react"),{addOnBottom:u.jsx(r("CometImage.react"),babelHelpers.extends({},t,{draggable:!1,xstyle:d.image})),containerXstyle:d.container(f),contentXstyle:d.content,id:E,children:[v?u.jsx("div",{className:"xyqm7xq x1ys307a",children:u.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Back"),disabled:p,icon:r(m?"ChevronRightOutline24.svg.react":"ChevronLeftOutline24.svg.react"),onPress:h,size:36,testid:void 0})}):u.jsx("div",{className:"xyqm7xq x1ys307a xc9qbxq x14qfxbe"}),R?u.jsx("div",{className:"xyqm7xq x1ys307a",children:u.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Close"),disabled:p,icon:r("CrossFilled24.svg.react"),onPress:C,size:36,testid:void 0})}):u.jsx("div",{className:"xc9qbxq x14qfxbe xyqm7xq x1ys307a"})]})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("CometFocusGroupContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({FocusContainer:null,FocusItem:null});l.default=u}),98);
__d("CometFocusGroup.react",["CometCompositeFocusIndicator.react","CometFocusGroupContext","FocusGroup.react","focusScopeQueries","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","hideArrowSignifiers","role"],s,u=s||(s=o("react")),c=s.useMemo,d=o("FocusGroup.react").createFocusGroup(o("focusScopeQueries").tabbableScopeQuery),m=d[0],p=d[1];function _(t){var n=t.children,o=t.hideArrowSignifiers,a=t.role,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=c(function(){return{FocusContainer:m,FocusItem:p}},[]),s=c(function(){return{hideArrowSignifiers:o===!0,horizontal:t.orientation!=="vertical",role:a,vertical:t.orientation!=="horizontal"}},[o,t.orientation,a]);return u.jsx(r("CometCompositeFocusIndicator.react"),{compositeInfo:s,children:function(t){return u.jsx(r("CometFocusGroupContext").Provider,{value:l,children:u.jsx(m,babelHelpers.extends({},i,{children:n(t)}))})}})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("FDSList.react",["BaseList.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","ref","testid","xstyle"],s,u=s||(s=o("react"));function c(t){var n=t.children,o=t.ref,a=t.testid,i=t.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsx(r("BaseList.react"),babelHelpers.extends({},l,{ref:o,role:"list",testid:void 0,variant:{xstyleConfig:{root:i}},children:n}))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("FDSListCellImpl.react",["cr:8666","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var r=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsx(n("cr:8666"),babelHelpers.extends({},o,{ref:r}))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("FDSListCell.react",["FDSListCellImpl.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsx(r("FDSListCellImpl.react"),babelHelpers.extends({},o,{ref:n}))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("Template1AConsentPromptScreenFB.react",["fbt","BaseRowItem.react","BaseScrollableArea.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometPlaceholder.react","CometVariablesTheme.react","ConsentTemplateActionCallbacksContext","FDSButton.react","FDSDialogBackgroundImageHeader.react","FDSDialogContainer.react","FDSDialogLoadingState.react","FDSList.react","FDSListCell.react","FDSText.react","FDSTextPairing.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={dialog:{"@media (max-width: 679px)_maxHeight":"x1jxyteu","@media (max-width: 679px)_minHeight":"x1mfppf3","@media (max-width: 679px)_paddingTop":"x1y0ix2f","@media (max-width: 679px)_paddingBottom":"x1eevrrt","@media (max-width: 679px)_paddingInlineStart":"x1vnzckh","@media (max-width: 679px)_paddingInlineEnd":"xgof6fa","@media (max-width: 679px)_paddingLeft":null,"@media (max-width: 679px)_paddingRight":null,$$css:!0},footer:{backgroundColor:"x2bj2ny",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xsag5q8",paddingTop:"x1y1aw1k",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerDisclaimer:{$$css:!0},header:{paddingBottom:"xjkvuk6",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"x1cnzs8",$$css:!0},layout:{maxHeight:"x1yr2tfi",position:"x1n2onr6","@media (max-width: 679px)_maxHeight":"x1jxyteu",$$css:!0},primaryButton:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},secondaryButton:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},section:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},sectionList:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},sectionListSubHeadline:{paddingBottom:"xjkvuk6",paddingTop:"x1cnzs8",$$css:!0},sectionSubHeadline:{paddingBottom:"xjkvuk6",paddingTop:"x1cnzs8",$$css:!0}};function d(){var e,t,n=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),a=n.onApproved,l=n.onDenied,d=n.onDismissed;return u.jsx(r("CometVariablesTheme.react"),{children:u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("FDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:u.jsx(r("FDSDialogContainer.react"),{anchorXStyle:c.dialog,disableClosingWithMask:!0,size:"small",children:u.jsxs(r("CometColumn.react"),{expanding:!0,paddingTop:0,paddingVertical:0,xstyle:c.layout,children:[u.jsxs(r("CometColumnItem.react"),{expanding:!0,children:[u.jsx(r("FDSDialogBackgroundImageHeader.react"),{backgroundImageProps:{src:"/images/assets_DO_NOT_HARDCODE/foundation_privacy_sev_template_illustrations/Privacy-SEV-template-QP-mobile-4x.png"},onClose:d,withBackButton:!1}),u.jsxs(r("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:!1,horizontal:!1,vertical:!0,children:[u.jsx(e=r("BaseView.react"),{xstyle:c.header,children:u.jsx(r("FDSText.react"),{align:"start",color:"primary",isPrimaryHeading:!0,type:"headlineEmphasized2",children:s._(/*BTDS*/"Allow [Processor] to use [Data types] for [Purposes]?")})}),u.jsxs(e,{xstyle:c.section,children:[u.jsx(e,{xstyle:c.sectionSubHeadline,children:u.jsx(t=r("FDSTextPairing.react"),{body:s._(/*BTDS*/"More information about the [Processor], [Data types], [Purposes], [Outcome] or [Management]."),bodyColor:"secondary",headline:s._(/*BTDS*/"Description subheadline"),isSemanticHeading:!0,level:3})}),u.jsx(e,{xstyle:c.sectionListSubHeadline,children:u.jsx(r("FDSText.react"),{align:"start",color:"primary",isSemanticHeading:!0,type:"headlineEmphasized3",children:s._(/*BTDS*/"List subheadline")})}),u.jsx(e,{xstyle:c.sectionList,children:u.jsxs(r("FDSList.react"),{"aria-label":s._(/*BTDS*/"List showing additional information about the consent"),children:[u.jsx(r("FDSListCell.react"),{content:u.jsx(t,{headline:s._(/*BTDS*/"More detail about this experience."),level:4,reduceEmphasis:!0}),spacingVertical:0}),u.jsx(r("FDSListCell.react"),{content:u.jsx(t,{headline:s._(/*BTDS*/"More detail about this experience."),level:4,reduceEmphasis:!0}),spacingVertical:0}),u.jsx(r("FDSListCell.react"),{content:u.jsx(t,{headline:s._(/*BTDS*/"More detail about this experience."),level:4,reduceEmphasis:!0}),spacingVertical:0})]})})]})]})]}),u.jsxs(r("CometColumnItem.react"),{xstyle:c.footer,children:[u.jsx(e,{xstyle:c.footerDisclaimer,children:u.jsx(r("FDSText.react"),{align:"center",color:"secondary",type:"meta3",children:s._(/*BTDS*/"Disclaimer text")})}),u.jsx(e,{xstyle:c.footerButtons,children:u.jsxs(e,{xstyle:c.footerButtonsContainer,children:[u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("FDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Allow"),onPress:function(){a()},size:"medium",type:"primary"})}),u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("FDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Don't allow"),onPress:function(){l()},size:"medium",type:"secondary"})})]})})]})]})})})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("ConsentTemplateListItemMarker.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){return s.jsx("div",{className:"x1jvgg1o x1c9tyrk xeusxvb x1pahc9y x1ertn4p xols6we x1v4s8kt"})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("IGDSList.react",["BaseList.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react"));function u(e){return s.jsx(r("BaseList.react"),babelHelpers.extends({},e))}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("getIGDSTextHierarchyStyle",["memoizeWithArgs"],(function(t,n,r,o,a,i,l){"use strict";var e=r("memoizeWithArgs")(function(e){switch(e){case"promotional":return{bodyType:"body",headlineType:"headline1",metaType:"footnote"};case"operational":return{bodyType:"body",headlineType:"headline2",metaType:"footnote"}}},function(e){return e});l.default=e}),98);
__d("IGDSTextPairing.react",["IGDSText.react","getIGDSTextHierarchyStyle","react","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={item:{marginBottom:"xu06os2",marginTop:"x1ok221b",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",marginBottom:"xz62fqu",marginTop:"x16ldp7u",$$css:!0}},d={operational:{marginBottom:"x1wsgfga",marginTop:"x9otpla",$$css:!0},promotional:{marginBottom:"x1wsgfga",marginTop:"x9otpla",$$css:!0}},m={operational:{marginBottom:"x1e56ztr",marginTop:"x1xmf6yo",$$css:!0},promotional:{marginBottom:"x1e56ztr",marginTop:"x1xmf6yo",$$css:!0}};function p(t){"use no forget";var n=t.body,o=t.bodyColor,a=o===void 0?"primaryText":o,i=t.bodyLineLimit,l=t.dir,s=l===void 0?"auto":l,p=t.headline,_=t.headlineColor,f=_===void 0?"primaryText":_,g=t.headlineLineLimit,h=t.headlineTestid,y=t.level,C=t.meta,b=t.metaColor,v=b===void 0?"secondaryText":b,S=t.metaLineLimit,R=t.metaLocation,L=R===void 0?"below":R,E=t.metaTestID,k=t.testid,I=t.textAlign,T=I===void 0?"start":I,D=r("getIGDSTextHierarchyStyle")(y),x=D.bodyType,$=D.headlineType,P=D.metaType,N=(e||(e=r("stylex")))(c.item,m[y]),M=p!=null&&u.jsx("div",{className:N,children:u.jsx(r("IGDSText.react"),{color:f,dir:s,maxLines:g,size:$,testid:void 0,textAlign:T,weight:"bold",children:p})}),w=C!=null&&u.jsx("div",{className:N,children:u.jsx(r("IGDSText.react"),{color:v,dir:s,maxLines:S,size:P,testid:void 0,textAlign:T,children:C})});return u.jsxs("div",babelHelpers.extends({},e.props(c.root,d[y]),{"data-testid":void 0,children:[L==="above"&&w,M,n!=null&&u.jsx("div",{className:N,children:u.jsx(r("IGDSText.react"),{color:a,dir:s,maxLines:i,size:x,textAlign:T,children:n})}),L==="below"&&w]}))}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("Template1AConsentPromptScreenIG.react",["fbt","BaseRow.react","BaseRowItem.react","BaseScrollableArea.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometImage.react","CometPlaceholder.react","ConsentTemplateActionCallbacksContext","ConsentTemplateListItemMarker.react","IGDSButton.react","IGDSDialogContainer.react","IGDSDialogHeader.react","IGDSDialogLoadingState.react","IGDSList.react","IGDSListCell.react","IGDSText.react","IGDSTextPairing.react","PolarisIGTheme.react","emptyFunction","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={footer:{backgroundColor:"x2bj2ny",paddingBottom:"x1t4gjm",paddingInlineStart:"x7vhb2i",paddingInlineEnd:"xli2wwf",paddingLeft:null,paddingRight:null,paddingTop:"x889kno",$$css:!0},footerButtons:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerButtonsPrimary:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},footerButtonsSecondary:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},header:{paddingBottom:"xwib8y2",paddingInlineStart:"x7vhb2i",paddingInlineEnd:"xli2wwf",paddingLeft:null,paddingRight:null,paddingTop:"x1miatn0",$$css:!0},headerImage:{alignItems:"x6s0dn4",paddingBottom:"x84yb8i",$$css:!0},layout:{maxHeight:"xz59zxb",position:"x1n2onr6",$$css:!0},section:{paddingBottom:"x1l90r2v",paddingInlineStart:"x7vhb2i",paddingInlineEnd:"xli2wwf",paddingLeft:null,paddingRight:null,$$css:!0},sectionDescription:{paddingBottom:"xsag5q8",paddingTop:"xyamay9",$$css:!0},sectionListItem:{minHeight:"x1gg8mnh",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},sectionListItemGap:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionListItemMarker:{paddingBottom:"xwib8y2",paddingInlineStart:"x7coems",paddingInlineEnd:"xrw5ot4",paddingLeft:null,paddingRight:null,paddingTop:"x1y1aw1k",$$css:!0},sectionListSubHeadline:{paddingBottom:"x1a8lsjc",paddingTop:"x7sb2j6",$$css:!0}};function d(){var e,t,n,a,l=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),d=l.onApproved,m=l.onDenied,p=l.onDismissed,_=o("PolarisIGTheme.react").useTheme().getTheme();return u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("IGDSDialogLoadingState.react"),{onClose:r("emptyFunction")}),name:i.id,children:u.jsx(r("IGDSDialogContainer.react"),{size:"large",children:u.jsxs(r("CometColumn.react"),{expanding:!0,paddingTop:0,paddingVertical:0,xstyle:c.layout,children:[u.jsx(e=r("CometColumnItem.react"),{children:u.jsx(r("IGDSDialogHeader.react"),{borderBottom:"none",onClose:p,size:"default",children:null})}),u.jsx(e,{expanding:!0,children:u.jsxs(r("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:!1,horizontal:!1,vertical:!0,children:[u.jsxs(t=r("BaseView.react"),{xstyle:c.header,children:[u.jsx(e,{xstyle:c.headerImage,children:u.jsx(r("CometImage.react"),{alt:s._(/*BTDS*/"[Placeholder] Image for a screen that asks the user to give permission for their data to be used for a specific purpose."),height:"100%",src:"/images/assets_DO_NOT_HARDCODE/ig_illustrations/illo-ig-fb-connection-refresh_"+_+"-4x.png",width:144})}),u.jsx(t,{children:u.jsx(r("IGDSTextPairing.react"),{headline:u.jsx(n=r("IGDSText.react"),{color:"primaryText",size:"headline2",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"Allow [Processor] to use [Data types] for [Purposes]?")}),isPrimaryHeading:!0,level:"operational"})})]}),u.jsxs(t,{xstyle:c.section,children:[u.jsxs(t,{xstyle:c.sectionDescription,children:[u.jsx(r("IGDSTextPairing.react"),{headline:u.jsx(n,{color:"primaryText",size:"label",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"Description subheadline")}),isSemanticHeading:!0,level:"operational"}),u.jsx(r("IGDSTextPairing.react"),{body:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"More information about the [Processor], [Data types], [Purposes], [Outcome] or [Management].")}),level:"operational"})]}),u.jsx(t,{xstyle:c.sectionListSubHeadline,children:u.jsx(n,{color:"primaryText",size:"label",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"List subheadline")})}),u.jsx(t,{children:u.jsxs(r("IGDSList.react"),{"aria-label":s._(/*BTDS*/"[Placeholder] List with more information."),role:"list",children:[u.jsx(r("IGDSListCell.react"),{addOnStart:u.jsx(a=r("BaseRow.react"),{xstyle:c.sectionListItemMarker,children:u.jsx(r("ConsentTemplateListItemMarker.react"),{})}),addOnStartVerticalAlign:"top",addOnStartXStyle:c.sectionListItemGap,content:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"More detail about this experience.")}),horizontalSpacing:0,verticalSpacing:12,xstyle:c.sectionListItem}),u.jsx(r("IGDSListCell.react"),{addOnStart:u.jsx(a,{xstyle:c.sectionListItemMarker,children:u.jsx(r("ConsentTemplateListItemMarker.react"),{})}),addOnStartVerticalAlign:"top",addOnStartXStyle:c.sectionListItemGap,content:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"More detail about this experience.")}),horizontalSpacing:0,verticalSpacing:12,xstyle:c.sectionListItem}),u.jsx(r("IGDSListCell.react"),{addOnStart:u.jsx(a,{xstyle:c.sectionListItemMarker,children:u.jsx(r("ConsentTemplateListItemMarker.react"),{})}),addOnStartVerticalAlign:"top",addOnStartXStyle:c.sectionListItemGap,content:u.jsx(n,{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"More detail about this experience.")}),horizontalSpacing:0,verticalSpacing:12,xstyle:c.sectionListItem})]})})]})]})}),u.jsx(e,{xstyle:c.footer,children:u.jsx(a,{expanding:!0,children:u.jsxs(t,{xstyle:c.footerButtons,children:[u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.footerButtonsPrimary,children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:!1,label:s._(/*BTDS*/"Allow"),onClick:function(){d()},size:"large",variant:"primary"})}),u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.footerButtonsSecondary,children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:!1,label:s._(/*BTDS*/"Don't allow"),onClick:function(){m()},size:"large",variant:"secondary"})})]})})})]})})})}d.displayName=d.name+" [from "+i.id+"]";function m(){return u.jsx(o("PolarisIGTheme.react").IGThemeProvider,{children:u.jsx(d,{})})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("XMDSDialogFooterContainer.react",["CDSDialogHeaderFooterContainerContext","CometColumn.react","react","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useContext,d={background:{backgroundColor:"x1jx94hy",$$css:!0},column:{paddingTop:"x1cnzs8",paddingInlineEnd:"x1xnnf8n",paddingBottom:"xx6bls6",paddingInlineStart:"x106a9eq",$$css:!0},root:{backfaceVisibility:"xlp1x4z",bottom:"x1ey2m1c",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",width:"xh8yej3",$$css:!0},sticky:{position:"x1n2onr6 xv7j57z",$$css:!0}};function m(t){var n,o=t.children,a=t.sticky,i=t.testid,l=c(r("CDSDialogHeaderFooterContainerContext")),s=l.isInner,m=l.isSticky,p=l.showBackground,_=l.xstyle,f=(n=a!=null?a:m)!=null?n:!0,g=s===!0,h=g&&!f||!g&&f;return h?u.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(d.root,p===!0&&d.background,f&&d.sticky,_),{"data-testid":void 0,children:u.jsx("div",{className:"x6ikm8r x10wlt62",children:u.jsx(r("CometColumn.react"),{xstyle:d.column,children:o})})})):null}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("XMDSButtonGroup.react",["BaseRow.react","BaseRowItem.react","XMDSButton.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["testid"],u=["ref"],c=["testid","type"],d,m=d||(d=o("react")),p={containerNegativeMargin:{marginTop:"xifccgj",marginInlineEnd:"x1ws5yxj",marginBottom:"x4cne27",marginInlineStart:"xw01apr",$$css:!0},itemSpacing:{paddingTop:"x1yrsyyn",paddingInlineEnd:"x1icxu4v",paddingBottom:"x10b6aqq",paddingInlineStart:"x25sj25",$$css:!0},resetFlexBasis:{flexBasis:"xdl72j9",$$css:!0},stacked:{minWidth:"xgqtt45",$$css:!0}};function _(t){var n=t.align,o=n===void 0?"justify":n,a=t.direction,i=a===void 0?"forward":a,l=t.expanding,d=l===void 0?!1:l,_=t.showSecondaryLabelButtonOnly,f=_===void 0?!1:_,g=t.size,h=t.stacking,y=h===void 0?"auto":h,C=t.verticalAlign,b=t.widthMode,v=b===void 0?"flexible":b,S=t.wrap,R=S===void 0?"none":S,L=t.xstyle,E=t.primary,k=t.secondary,I=t.secondaryIcon,T=t.secondaryIconGroup,D=[],x=[],$=y==="always",P=$?"forward":y==="never"?"none":R,N=[p.itemSpacing,$&&p.stacked],M=null;if(E!=null){var w=E.ref,A=babelHelpers.objectWithoutPropertiesLoose(E,e),F=A.testid,O=babelHelpers.objectWithoutPropertiesLoose(A,s);M=m.jsx(r("XMDSButton.react"),babelHelpers.extends({},A,{ref:w,size:g,widthMode:v})),D.push({hidden:m.jsx(r("XMDSButton.react"),babelHelpers.extends({},O,{disabled:!0,size:g,widthMode:v})),visible:M})}if(k!=null){var B=k.ref,W=babelHelpers.objectWithoutPropertiesLoose(k,u),q=W.testid,U=W.type,V=babelHelpers.objectWithoutPropertiesLoose(W,c),H={hidden:m.jsx(r("XMDSButton.react"),babelHelpers.extends({},V,{disabled:!0,size:g,type:U!=null?U:"secondary",widthMode:v})),visible:m.jsx(r("XMDSButton.react"),babelHelpers.extends({},W,{ref:B,size:g,type:U!=null?U:"secondary",widthMode:v}))};i==="forward"&&R==="backward"&&!$?D.unshift(H):D.push(H)}else if(I!=null)x.push(m.jsx(r("BaseRowItem.react"),{xstyle:N,children:m.jsx(r("XMDSButton.react"),babelHelpers.extends({},I,{labelIsHidden:!0,size:g,type:"secondary",widthMode:v}))},"secondary-icon"));else if(T!=null){var G=T.primaryIcon,z=T.secondaryIcon;G!=null&&x.push(m.jsx(r("BaseRowItem.react"),{xstyle:N,children:m.jsx(r("XMDSButton.react"),babelHelpers.extends({},G,{labelIsHidden:!0,size:g,type:"secondary",widthMode:v}))},"secondary-icon-1")),z!=null&&x.push(m.jsx(r("BaseRowItem.react"),{xstyle:N,children:m.jsx(r("XMDSButton.react"),babelHelpers.extends({},z,{labelIsHidden:!0,size:g,type:"secondary",widthMode:v}))},"secondary-icon-2"))}var j=D.map(function(e,t){return m.jsx(r("BaseRowItem.react"),{expanding:o==="justify"&&v!=="constrained",xstyle:[p.resetFlexBasis,N],children:D.map(function(e,n){return m.jsx(m.Fragment,{children:t!==n?v==="constrained"?null:m.jsx("div",{"aria-hidden":!0,className:"xqtp20y xlshs6z",children:e.hidden}):e.visible},n)})},t)}),K=M!=null?m.jsx(r("BaseRowItem.react"),{expanding:o==="justify",xstyle:[p.resetFlexBasis,N],children:M},"primary"):null,Q=[K].concat(x),X=D.length===2||f;return m.jsx(r("BaseRow.react"),{align:o,direction:i,expanding:d,verticalAlign:C,wrap:P,xstyle:[L,p.containerNegativeMargin],children:X?j:Q})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("XMDSDialogFooterItem.react",["CometColumnItem.react","XMDSButtonGroup.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.primary,n=e.secondary,o=e.showSecondaryLabelButtonOnly,a=o===void 0?!1:o,i=e.size,l=i===void 0?"large":i,u=e.stacking;return s.jsx(r("CometColumnItem.react"),{children:s.jsx(r("XMDSButtonGroup.react"),{direction:"forward",primary:t?babelHelpers.extends({},t):null,secondary:n?babelHelpers.extends({},n):null,showSecondaryLabelButtonOnly:a,size:l,stacking:u!=null?u:void 0,verticalAlign:"stretch",wrap:"backward"})})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("useCDSDialogFooterActionsProps",["react"],(function(t,n,r,o,a,i,l){"use strict";var e=["purpose","testid"],s=["purpose","testid"],u,c=(u||(u=o("react"))).useMemo;function d(t){var n=t.primary,r=t.secondary,o=c(function(){if(n==null)return null;var t=n.purpose,r=n.testid,o=babelHelpers.objectWithoutPropertiesLoose(n,e);return babelHelpers.extends({testid:r},o)},[n]),a=c(function(){if(r==null)return null;var e=r.purpose,t=r.testid,n=babelHelpers.objectWithoutPropertiesLoose(r,s);return babelHelpers.extends({testid:t},n)},[r]);return{primary:o,secondary:a}}l.default=d}),98);
__d("XMDSDialogFooter.react",["CometColumnItem.react","XMDSDialogFooterContainer.react","XMDSDialogFooterItem.react","XMDSText.react","react","useCDSDialogFooterActionsProps"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.meta,n=e.metaAlign,o=n===void 0?"start":n,a=e.metaBelowPaddingTop,i=e.metaPosition,l=i===void 0?"below":i,u=e.primary,c=e.secondary,d=e.showSecondaryLabelButtonOnly,m=d===void 0?!1:d,p=e.size,_=e.stacking,f=e.sticky,g=e.testid,h=t!=null&&l==="above",y=t!=null&&l==="below",C=s.jsx(r("XMDSText.react"),{color:"secondaryText",textStyle:"meta",children:t}),b=r("useCDSDialogFooterActionsProps")({primary:u,secondary:c}),v=b.primary,S=b.secondary,R=function(t){switch(t){case"small":return 12;case"medium":return 16;case"large":return 20;case"xlarge":return 24}};return s.jsxs(r("XMDSDialogFooterContainer.react"),{sticky:f,testid:void 0,children:[h&&s.jsx(r("CometColumnItem.react"),{align:o,paddingTop:0,paddingVertical:16,children:C}),s.jsx(r("XMDSDialogFooterItem.react"),{primary:v!=null?v:void 0,secondary:S!=null?S:void 0,showSecondaryLabelButtonOnly:m,size:p,stacking:_!=null?_:void 0}),y&&s.jsx(r("CometColumnItem.react"),{align:o,paddingTop:R(a!=null?a:"large"),children:C})]})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("XMDSCard.react",["CometPressable.react","react","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={overflowHidden:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},pressed:{opacity:"x18km98s",transform:"xjzqdv7",$$css:!0},root:{alignItems:"x1qjc9v5",borderStartStartRadius:"xk4rmqj",borderStartEndRadius:"xzhdlhr",borderEndEndRadius:"x4j2o4k",borderEndStartRadius:"xuyguo4",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x1epygpo",borderInlineEndWidth:"x91d900",borderBottomWidth:"x18bsr7w",borderInlineStartWidth:"xj39t1m",boxShadow:"x1irw62u",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",isolation:"xc8icb0",justifyContent:"x1nhvcw1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}},d={default:{backgroundColor:"x1jx94hy",borderTopColor:"xkpljb8",borderInlineEndColor:"x1fimh9p",borderBottomColor:"x1ae76x5",borderInlineStartColor:"x4hbd2p",$$css:!0},filled:{backgroundColor:"x1mz6kv3",borderTopColor:"xqtaiir",borderInlineEndColor:"x1lc4v28",borderBottomColor:"xxepxns",borderInlineStartColor:"xnmcyqj",$$css:!0}};function m(t){var n=t.children,o=t.color,a=o===void 0?"default":o,i=t.linkProps,l=t.onPress,s=t.ref,m=t.testid,p=t.xstyle;return l!=null||i!=null?u.jsx(r("CometPressable.react"),{hideHoverOverlay:!0,linkProps:i,onPress:l,ref:s,xstyle:function(t){var e=t.pressed;return[c.root,d[a],p,e&&c.pressed]},children:n}):u.jsx("div",babelHelpers.extends({"data-testid":void 0},(e||(e=r("stylex"))).props(c.root,d[a],c.overflowHidden,p),{ref:s,children:n}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("XMDSListContainer.react",["XMDSCard.react","XPlatReactEnvironment","react","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={card:{borderTopColor:"xkkctlj",borderInlineEndColor:"x1xa7n6s",borderBottomColor:"x1rsacje",borderInlineStartColor:"x140pcy2",borderStartStartRadius:"x1xupafa",borderStartEndRadius:"xajztof",borderEndEndRadius:"x4wgi3o",borderEndStartRadius:"x3rzcs5",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x1486fpl",borderInlineEndWidth:"x17j4th3",borderBottomWidth:"xh2bela",borderInlineStartWidth:"xzgjdc6",$$css:!0},cardWeb:{boxShadow:"x1bqluzl",$$css:!0},content:{alignItems:"x1qjc9v5",boxSizing:"x9f619",flexDirection:"xdt5ytf",justifyContent:"x1nhvcw1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},contentWeb:{borderStartStartRadius:"x1fmog5m",borderStartEndRadius:"xu25z0z",borderEndEndRadius:"x140muxe",borderEndStartRadius:"xo1y3bh",display:"x1jfb8zj",isolation:"xc8icb0",$$css:!0},footerMargin:{marginBottom:"x1yztbdb",$$css:!0},headerMargin:{marginTop:"x1gslohp",$$css:!0},inheritBorder:{borderStartStartRadius:"x1fmog5m",borderStartEndRadius:"xu25z0z",borderEndEndRadius:"x140muxe",borderEndStartRadius:"xo1y3bh",$$css:!0}};function c(e){var t=e["aria-label"],n=t===void 0?null:t,r=e["aria-labelledby"],a=e.children,i=e.footer,l=e.header,c=e.role,m=e.withoutCard,p=m===void 0?!1:m,_=e.xstyle;return s.jsxs(o("react-strict-dom").html.div,{style:_,children:[l,s.jsx(d,{hasFooter:i!=null,hasHeader:l!=null,withoutCard:p,children:s.jsx(o("react-strict-dom").html.div,{style:u.inheritBorder,children:s.jsx(o("react-strict-dom").html.div,{"aria-label":r==null&&n!=null?n:void 0,"aria-labelledby":r!=null?r:void 0,role:c,style:[u.content,o("XPlatReactEnvironment").isWeb()&&u.contentWeb],children:a})})}),i]})}c.displayName=c.name+" [from "+i.id+"]";function d(e){var t=e.children,n=e.hasFooter,a=e.hasHeader,i=e.withoutCard,l=[a&&u.headerMargin,n&&u.footerMargin];return i?s.jsx(o("react-strict-dom").html.div,{style:[u.inheritBorder,l],children:t}):s.jsx(r("XMDSCard.react"),{xstyle:[l,u.card,o("XPlatReactEnvironment").isWeb()&&u.cardWeb],children:t})}d.displayName=d.name+" [from "+i.id+"]",l.default=c}),98);
__d("XMDSListCellTextPairing.react",["XMDSText.react","react","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={subtitleText:{marginBottom:"xjpr12u",paddingTop:"x1nn3v0j",$$css:!0},subtitleTextOverride:{paddingTop:"x889kno",$$css:!0},titleText:{marginBottom:"xjpr12u",paddingTop:"x1nn3v0j",$$css:!0},topText:{marginBottom:"x1e56ztr",$$css:!0}},c={dense:"body",regular:"primaryLabel"},d={dense:"bodyEmphasized",regular:"primaryLabelEmphasized"},m={dense:"meta",regular:"body"};function p(e){var t=e.density,n=t===void 0?"regular":t,o=e.selectedColorScheme,a=e.state,i=e.subtitle,l=e.subtitleColor,p=l===void 0?"secondaryText":l,_=e.subtitleMaxLines,f=e.title,g=e.titleColor,h=g===void 0?"primaryText":g,y=e.titleId,C=e.titleMaxLines,b=e.topText,v=e.topTextColor,S=v===void 0?"secondaryText":v,R=e.topTextMaxLines,L=r("useCurrentDisplayMode")(),E=L==="dark",k=a==="selected"&&o==="accent";return s.jsxs(s.Fragment,{children:[b!=null?s.jsx(r("XMDSText.react"),{color:a==="disabled"?"disabledText":a==="selected"?o==="accent"?"navListSelectedAccentText":"primaryDeemphasizedButtonText":S,maxLines:R,textStyle:"meta",xstyle:u.topText,children:b}):null,f!=null?s.jsx(r("XMDSText.react"),{asBox:!0,color:a==="disabled"?"disabledText":a==="selected"?o==="accent"?"navListSelectedAccentText":"primaryDeemphasizedButtonText":h,id:y,maxLines:C,textStyle:k&&E?d[n]:c[n],xstyle:u.titleText,children:f}):null,i!=null?s.jsx(r("XMDSText.react"),{asBox:!0,color:a==="disabled"?"disabledText":k?"primaryText":p,maxLines:_,textStyle:m[n],xstyle:[u.subtitleText,f!=null&&u.subtitleTextOverride],children:i}):null]})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("XMDSListCellImpl.react",["BaseDivider.react","BaseListCell.react","BaseRow.react","CDSListCellRefContext","CDSListContext","CDSListTruncationLimitContext","CDSMenuItemRoleContext","CometCompositeStructureContext","CometPressable.react","CometPressableOverlay.react","FBLogger","XMDSListCellTextPairing.react","XMDSText.react","react","stylex","useCometPressableEventHandlers","useMergeRefs"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useEffect,_=d.useMemo,f=d.useRef,g=d.useState,h={16:{paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0}},y={40:{alignItems:"x6s0dn4",height:"x1vqgdyp",justifyContent:"xl56j7k",width:"x100vrsf",$$css:!0}},C={16:{width:"x1kky2od",$$css:!0},24:{width:"xvy4d1p",$$css:!0},32:{width:"x1td3qas",$$css:!0},40:{width:"x100vrsf",$$css:!0},48:{width:"x1useyqa",$$css:!0}},b={deemphasized:{backgroundColor:"xljulmy",$$css:!0},primary:{$$css:!0}},v={badgeMargin:{marginTop:"x1xmf6yo",$$css:!0},baseListCell:{flexBasis:"xdl72j9",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",minHeight:"x1mq37bv",paddingTop:"xdqstbe",paddingBottom:"x7oumki",$$css:!0},denseListCell:{minHeight:"x1gg8mnh",$$css:!0},listItemBorder:{":first-child_borderStartEndRadius":"x1exlly7",":first-child_borderStartStartRadius":"x1e7cf47",":last-child_borderEndEndRadius":"x44cjkt",":last-child_borderEndStartRadius":"x1dygckn",$$css:!0},listItemPressable:{display:"x1lliihq",position:"x1n2onr6",$$css:!0},menuItemMargin:{marginInlineStart:"x1ijvj0j",marginInlineEnd:"x19rhlwn",marginLeft:null,marginRight:null,$$css:!0},menuItemPressableOverlay:{borderStartStartRadius:"x1aw5mqg",borderStartEndRadius:"x1je6yt",borderEndEndRadius:"x18jemmn",borderEndStartRadius:"x1n8fppw",$$css:!0},metaStartAddOnSpacing:{marginInlineStart:"xdwrcjd",$$css:!0},metaText:{marginBottom:"xjpr12u",paddingTop:"x1nn3v0j",$$css:!0},metaTextOverride:{paddingTop:"x96k8nx",$$css:!0},pressable:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",display:"x78zum5",flexDirection:"xdt5ytf",minHeight:"x1mq37bv",":first-child_borderStartEndRadius":"x1exlly7",":first-child_borderStartStartRadius":"x1e7cf47",":last-child_borderEndEndRadius":"x44cjkt",":last-child_borderEndStartRadius":"x1dygckn",$$css:!0},selected:{backgroundColor:"x1av1boa",$$css:!0},selectedAccent:{backgroundColor:"x9intrv",$$css:!0},startIndentStyles:{display:"x1rg5ohu",$$css:!0},withAddon:{paddingTop:"x1gw22gp",paddingBottom:"x188425o",$$css:!0}};function S(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=o.addOnBottom,i=o.addOnEnd,l=o.addOnEndVerticalAlign,u=o.addOnEndXStyle,d=o.addOnStart,S=o.addOnStartSize,R=o.addOnStartVerticalAlign,L=R===void 0?"top":R,E=o["aria-checked"],k=o["aria-label"],I=o["aria-selected"],T=o.badge,D=o.colorVariant,x=D===void 0?"primary":D,$=o.contentId,P=o.contentVerticalAlign,N=P===void 0?"center":P,M=o.contentXStyle,w=o.disabled,A=w===void 0?!1:w,F=o.hasBottomDivider,O=F===void 0?!1:F,B=o.linkProps,W=o.meta,q=o.metaAddOnStart,U=o.metaAddOnStartXStyle,V=o.metaColor,H=o.metaMaxLines,G=o.onPress,z=o.pressableId,j=o.role,K=o.selected,Q=K===void 0?!1:K,X=o.startIndent,Y=o.subtitle,J=o.subtitleColor,Z=J===void 0?"secondaryText":J,ee=o.subtitleMaxLines,te=o.testid,ne=o.title,re=o.titleColor,oe=re===void 0?"primaryText":re,ae=o.titleMaxLines,ie=o.topText,le=o.topTextColor,se=le===void 0?"secondaryText":le,ue=o.topTextMaxLines,ce=o.visuallyFocused,de=ce===void 0?!1:ce,me=o.withLabelElement,pe=me===void 0?!1:me,_e=m(r("CDSListContext")),fe=_e.density,ge=_e.selectedColorScheme,he=f(null),ye=f(null),Ce=m(r("CDSListTruncationLimitContext")),be=m(r("CDSListCellRefContext")),ve=m(r("CDSMenuItemRoleContext")),Se=G!=null||B!=null||pe,Re=m(r("CometCompositeStructureContext")),Le=Re.role,Ee=Le==="list",ke=r("useMergeRefs")(n,he,be!=null&&Ce&&!Se?be:null),Ie=r("useMergeRefs")(ye,be!=null&&Ce?be:null),Te=g(null),De=Te[0],xe=Te[1],$e=B!=null,Pe=d!=null||i!=null,Ne=G!=null||$e,Me=f(!0);p(function(){var e=!Me.current;Me.current=!1;var t=he.current;!de||t==null||t.scrollIntoView==null||t.scrollIntoView({behavior:e?"smooth":"auto",block:"nearest"})},[de]);var we=_(function(){if(k!=null)return k;if($e&&De!=null)return De},[k,$e,De]);p(function(){if(!(!$e||k!=null)){var e=he.current;if(e==null){r("FBLogger")("comet_ui").mustfix("List cell ref not set");return}xe(e.innerText)}},[k,$e,Y,ne]);var Ae=r("useCometPressableEventHandlers")({disabled:A}),Fe=Ae[2],Oe=Fe.focused,Be=Fe.focusVisible,We=Fe.hovered,qe=Fe.pressed,Ue=Ae[3],Ve=X!=null?c.jsx("span",babelHelpers.extends({},(s||(s=r("stylex"))).props([v.startIndentStyles,C[X]]))):void 0,He=c.jsx(r("BaseListCell.react"),{addOnEnd:i,addOnEndVerticalAlign:l,addOnEndXStyle:u,addOnFooter:a,addOnStart:d!=null?d:Ve,addOnStartVerticalAlign:L,addOnStartXStyle:S&&y[S],"aria-hidden":$e&&we!=null,"aria-label":Ne?void 0:k,content:c.jsxs("div",babelHelpers.extends({},{0:{},2:{className:"x1diwwjn"},1:{className:"xbmvrgn"},3:{className:"x1diwwjn xbmvrgn"}}[(d!=null||Ve!=null)<<1|(i!=null)<<0],{children:[c.jsx(r("XMDSListCellTextPairing.react"),{density:fe,selectedColorScheme:ge,state:A?"disabled":Q?"selected":null,subtitle:Y,subtitleColor:Z,subtitleMaxLines:ee,title:ne,titleColor:oe,titleMaxLines:ae,topText:ie,topTextColor:se,topTextMaxLines:ue}),W!=null?c.jsxs(r("BaseRow.react"),{align:"start",verticalAlign:"center",xstyle:[v.metaText,(ne!=null||Y!=null)&&q==null&&v.metaTextOverride,q!=null&&U],children:[q!=null?q:null,c.jsx(r("XMDSText.react"),{color:A?"disabledText":V!=null?V:"secondaryText",maxLines:H,textStyle:"meta",xstyle:q!=null&&v.metaStartAddOnSpacing,children:W})]}):null,T&&c.jsx(r("BaseRow.react"),{align:"start",verticalAlign:"center",xstyle:ne!=null||Y!=null||W!=null?v.badgeMargin:void 0,children:T})]})),contentId:$,contentVerticalAlign:N,contentXStyle:M,ref:ke,role:Ee&&(Ne||pe)?"none":void 0,tabIndex:Se?void 0:-1,testid:void 0,verticalAlign:"center",xstyle:[v.baseListCell,fe==="dense"&&v.denseListCell,h[16],Pe&&v.withAddon,v.listItemBorder,b[x],Q===!0&&(ge==="accent"?v.selectedAccent:v.selected)]}),Ge=O&&c.jsx(r("BaseDivider.react"),{ariaHidden:!0});if(pe)return c.jsxs(c.Fragment,{children:[c.jsxs("label",babelHelpers.extends({},Ue,{className:(s||(s=r("stylex")))([v.listItemPressable,v.listItemBorder]),ref:Ie,tabIndex:-1,children:[He,c.jsx(r("CometPressableOverlay.react"),{focusRingPosition:"inset",focusVisible:Oe&&Be||de,hovered:We,pressed:qe,showFocusRing:!0,xstyle:ve!=null&&v.menuItemPressableOverlay})]})),Ge]});if(!Ne)return c.jsxs(c.Fragment,{children:[He,Ge]});var ze=c.jsx(r("CometPressable.react"),{"aria-checked":E,"aria-label":we,"aria-selected":I!=null?I:Q||void 0,disabled:A,id:z,linkProps:B,onPress:G,overlayDisabled:!0,ref:Ie,role:j,suppressFocusRing:!0,xstyle:[v.pressable,fe==="dense"&&v.denseListCell,b[x],ve!=null&&v.menuItemMargin],children:function(t){return c.jsxs(c.Fragment,{children:[He,c.jsx(r("CometPressableOverlay.react"),{focusRingPosition:"inset",focusVisible:t.focused&&t.focusVisible||de,hovered:t.hovered,pressed:t.pressed,showFocusRing:!0,xstyle:ve!=null&&v.menuItemPressableOverlay})]})}});return c.jsxs(c.Fragment,{children:[Ee?c.jsx("div",{role:"listitem",className:"x1exlly7 x1e7cf47 x44cjkt x1dygckn",children:ze}):ze,Ge]})}S.displayName=S.name+" [from "+i.id+"]",l.default=S}),98);
__d("Template1AXMDSConsentPromptScreen.react",["fbt","BaseView.react","CometBackgroundImage.react","CometColumnItem.react","CometPlaceholder.react","ConsentTemplateActionCallbacksContext","XMDSDialog.react","XMDSDialogFooter.react","XMDSDialogHeader.react","XMDSDialogLoadingState.react","XMDSList.react","XMDSListCell.react","XMDSText.react","XMDSTextPairing.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={header:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},headerHeadline:{paddingTop:"x1cnzs8",$$css:!0},headerImage:{borderStartStartRadius:"x6nl9eh",borderStartEndRadius:"x1a5l9x9",borderEndEndRadius:"x7vuprf",borderEndStartRadius:"x1mg3h75",marginTop:"xhsvlbd",$$css:!0},section:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},sectionListSubHeadline:{paddingBottom:"xx6bls6",paddingTop:"x1p5oq8j",$$css:!0},sectionSubHeadline:{paddingBottom:"x10b6aqq",paddingTop:"xm77wn2",$$css:!0}};function d(){var e,t=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),n=t.onApproved,a=t.onDenied,l=t.onDismissed;return u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("XMDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:u.jsxs(r("XMDSDialog.react"),{footer:u.jsx(r("XMDSDialogFooter.react"),{meta:s._(/*BTDS*/"Disclaimer text"),metaAlign:"center",metaPosition:"above",primary:{label:s._(/*BTDS*/"Allow"),onPress:function(){n()}},secondary:{label:s._(/*BTDS*/"Don't allow"),onPress:function(){a()}},sticky:!0}),header:u.jsx(r("XMDSDialogHeader.react"),{onClose:l}),inline:!0,size:"small",children:[u.jsxs(e=r("BaseView.react"),{xstyle:c.header,children:[u.jsx(r("CometColumnItem.react"),{xstyle:c.headerImage,children:u.jsx(r("CometBackgroundImage.react"),{alt:s._(/*BTDS*/"[Placeholder] Image for a screen that asks the user to give permission for their data to be used for a specific purpose."),src:"/images/assets_DO_NOT_HARDCODE/fb_company_illo/XMDS-Image-16-7-Placeholder_light-4x.png"})}),u.jsx(r("CometColumnItem.react"),{xstyle:c.headerHeadline,children:u.jsx(r("XMDSText.react"),{color:"primaryText",isPrimaryHeading:!0,textAlign:"start",textStyle:"headline1",children:s._(/*BTDS*/"Allow [Processor] to use [Data types] for [Purposes]?")})})]}),u.jsxs(e,{xstyle:c.section,children:[u.jsx(e,{xstyle:c.sectionSubHeadline,children:u.jsx(r("XMDSTextPairing.react"),{contentText:s._(/*BTDS*/"More information about the [Processor], [Data types], [Purposes], [Outcome] or [Management]."),headlineText:s._(/*BTDS*/"Description subheadline"),isSemanticHeading:!0,textPairingStyle:"headline3Body"})}),u.jsx(e,{xstyle:c.sectionListSubHeadline,children:u.jsx(r("XMDSText.react"),{color:"primaryText",isSemanticHeading:!0,textAlign:"start",textStyle:"headline3",children:s._(/*BTDS*/"List subheadline")})}),u.jsx(e,{children:u.jsxs(r("XMDSList.react"),{"aria-label":s._(/*BTDS*/"[Placeholder] List with more information."),children:[u.jsx(r("XMDSListCell.react"),{hasBottomDivider:!0,title:s._(/*BTDS*/"More detail about this experience.")}),u.jsx(r("XMDSListCell.react"),{hasBottomDivider:!0,title:s._(/*BTDS*/"More detail about this experience.")}),u.jsx(r("XMDSListCell.react"),{title:s._(/*BTDS*/"More detail about this experience.")})]})})]})]})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("Template1AXMDSConsentTemplateConfig",["$InternalEnum","ConsentTemplateFlow.type","FBLogger","Template1AXMDSConsentPromptScreen.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=n("$InternalEnum")({TEMPLATE_1A_XMDS:"template_1a_xmds"}),c={flow:o("ConsentTemplateFlow.type").ConsentTemplateFlow.TEMPLATE_1A_XMDS,getConsentTemplatePromptScreen:function(t,n){var e=u.cast(t);if(e==null)throw r("FBLogger")("consent_core").mustfixThrow("No matching consent template screen found for the given prompt %s",t);switch(e){case u.TEMPLATE_1A_XMDS:switch(n){case"facebook_comet":case"instagram_web":return s.jsx(r("Template1AXMDSConsentPromptScreen.react"),{})}break}throw r("FBLogger")("consent_core").mustfixThrow("The consent prompt %s does not currently support the surface %s",t,n)},recordConsentOutcome:function(t,n){}};l.ConsentTemplatePrompts=u,l.Template1AXMDSConsentTemplateConfig=c}),98);
__d("Template1BConsentTemplateConfig",["$InternalEnum","ConsentTemplateFlow.type","FBLogger","Template1BConsentPromptScreenFB.react","Template1BConsentPromptScreenIG.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=n("$InternalEnum")({TEMPLATE_1B:"template_1b"}),c={flow:o("ConsentTemplateFlow.type").ConsentTemplateFlow.TEMPLATE_1B,getConsentTemplatePromptScreen:function(t,n){var e=u.cast(t);if(e==null)throw r("FBLogger")("consent_core").mustfixThrow("No matching consent template screen found for the given prompt %s",t);switch(e){case u.TEMPLATE_1B:switch(n){case"facebook_comet":return s.jsx(r("Template1BConsentPromptScreenFB.react"),{});case"instagram_web":return s.jsx(r("Template1BConsentPromptScreenIG.react"),{})}break}throw r("FBLogger")("consent_core").mustfixThrow("The consent prompt %s does not currently support the surface %s",t,n)},recordConsentOutcome:function(t,n){}};l.ConsentTemplatePrompts=u,l.Template1BConsentTemplateConfig=c}),98);
__d("Template1BConsentString",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=s._(/*BTDS*/"Allow [Processor] to use [Data types] for [Purposes]?"),u=s._(/*BTDS*/"More information about the [Processor], [Data types], [Purposes], [Outcome] or [Management]."),c=s._(/*BTDS*/"List subheadline"),d=s._(/*BTDS*/"More detail about this experience."),m=s._(/*BTDS*/"Disclaimer text"),p=s._(/*BTDS*/"Allow"),_=s._(/*BTDS*/"Don't allow");l.TITLE=e,l.SUBTITLE=u,l.LIST_SUBHEADLINE=c,l.LIST_ITEM_CONTENT=d,l.DISCLAIMER_TEXT=m,l.ALLOW_BUTTON_LABEL=p,l.DISALLOW_BUTTON_LABEL=_}),226);
__d("Template1BConsentPromptScreenFB.react",["ix","BaseRowItem.react","BaseScrollableArea.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometPlaceholder.react","CometVariablesTheme.react","ConsentTemplateActionCallbacksContext","FDSButton.react","FDSDialogContainer.react","FDSDialogHeader.react","FDSDialogLoadingState.react","FDSIcon.react","FDSList.react","FDSListCell.react","FDSText.react","FDSTextPairing.react","Template1BConsentString","fbicon","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={dialog:{"@media (max-width: 679px)_maxHeight":"x1jxyteu","@media (max-width: 679px)_minHeight":"x1mfppf3","@media (max-width: 679px)_paddingTop":"x1y0ix2f","@media (max-width: 679px)_paddingBottom":"x1eevrrt","@media (max-width: 679px)_paddingInlineStart":"x1vnzckh","@media (max-width: 679px)_paddingInlineEnd":"xgof6fa","@media (max-width: 679px)_paddingLeft":null,"@media (max-width: 679px)_paddingRight":null,$$css:!0},footer:{backgroundColor:"x2bj2ny",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xsag5q8",paddingTop:"x1y1aw1k",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",columnGap:"xfex06f",display:"x78zum5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerDisclaimer:{$$css:!0},header:{paddingBottom:"xjkvuk6",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"x1cnzs8",$$css:!0},layout:{maxHeight:"x1yr2tfi",position:"x1n2onr6","@media (max-width: 679px)_maxHeight":"x1jxyteu",$$css:!0},primaryButton:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},secondaryButton:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},section:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},sectionList:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},sectionListSubHeadline:{paddingBottom:"xjkvuk6",paddingTop:"x1cnzs8",$$css:!0},sectionSubHeadline:{paddingBottom:"xjkvuk6",paddingTop:"x1y1aw1k",$$css:!0}};function d(){var e,t,n,a=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),l=a.onApproved,d=a.onDenied,m=a.onDismissed;return u.jsx(r("CometVariablesTheme.react"),{children:u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("FDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:u.jsxs(r("FDSDialogContainer.react"),{anchorXStyle:c.dialog,disableClosingWithMask:!0,size:"small",children:[u.jsx(r("FDSDialogHeader.react"),{onClose:m,text:"",withoutDivider:!0}),u.jsxs(r("CometColumn.react"),{expanding:!0,paddingTop:0,paddingVertical:0,xstyle:c.layout,children:[u.jsx(r("CometColumnItem.react"),{expanding:!0,children:u.jsxs(r("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:!1,horizontal:!1,vertical:!0,children:[u.jsx(t=r("BaseView.react"),{xstyle:c.header,children:u.jsx(n=r("FDSText.react"),{align:"start",color:"primary",isPrimaryHeading:!0,type:"headlineEmphasized2",children:(e=o("Template1BConsentString")).TITLE})}),u.jsxs(t,{xstyle:c.section,children:[u.jsx(t,{xstyle:c.sectionSubHeadline,children:u.jsx(n,{color:"primary",type:"body2",children:e.SUBTITLE})}),u.jsx(t,{xstyle:c.sectionListSubHeadline,children:u.jsx(n,{align:"start",color:"primary",isSemanticHeading:!0,type:"headlineEmphasized3",children:e.LIST_SUBHEADLINE})}),u.jsx(t,{xstyle:c.sectionList,children:u.jsxs(r("FDSList.react"),{"aria-label":e.LIST_ITEM_CONTENT,children:[u.jsx(r("FDSListCell.react"),{addOnStart:u.jsx(r("FDSIcon.react"),{color:"black",icon:o("fbicon")._(s("834100"),24)}),content:u.jsx(r("FDSTextPairing.react"),{headline:e.LIST_ITEM_CONTENT,level:4,reduceEmphasis:!0}),spacingVertical:0}),u.jsx(r("FDSListCell.react"),{addOnStart:u.jsx(r("FDSIcon.react"),{color:"black",icon:o("fbicon")._(s("834100"),24)}),content:u.jsx(r("FDSTextPairing.react"),{headline:e.LIST_ITEM_CONTENT,level:4,reduceEmphasis:!0}),spacingVertical:0}),u.jsx(r("FDSListCell.react"),{addOnStart:u.jsx(r("FDSIcon.react"),{color:"black",icon:o("fbicon")._(s("834100"),24)}),content:u.jsx(r("FDSTextPairing.react"),{headline:e.LIST_ITEM_CONTENT,level:4,reduceEmphasis:!0}),spacingVertical:0})]})})]})]})}),u.jsxs(r("CometColumnItem.react"),{xstyle:c.footer,children:[u.jsx(t,{xstyle:c.footerDisclaimer,children:u.jsx(n,{align:"center",color:"secondary",type:"meta3",children:e.DISCLAIMER_TEXT})}),u.jsx(t,{xstyle:c.footerButtons,children:u.jsxs(t,{xstyle:c.footerButtonsContainer,children:[u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.primaryButton,children:u.jsx(r("FDSButton.react"),{disabled:!1,label:e.ALLOW_BUTTON_LABEL,onPress:function(){l()},size:"medium",type:"primary"})}),u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.secondaryButton,children:u.jsx(r("FDSButton.react"),{disabled:!1,label:e.DISALLOW_BUTTON_LABEL,onPress:function(){d()},size:"medium",type:"secondary"})})]})})]})]})]})})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("IGDSShieldStarPanoOutline24Icon.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M3 13.5a9 9 0 0 0 18 0V4.488A17.848 17.848 0 0 1 12 1.5a17.848 17.848 0 0 1-9 2.988z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2px"}),s.jsx(o("XPlatReactSVG").Path,{d:"m11.283 7.925-.934 2.094-2.403.277a.785.785 0 0 0-.425 1.372l1.808 1.572-.523 2.342a.785.785 0 0 0 1.177.839L12 15.18l2.017 1.241a.785.785 0 0 0 1.177-.84l-.523-2.341 1.808-1.572a.785.785 0 0 0-.425-1.372l-2.403-.277-.934-2.094a.785.785 0 0 0-1.434 0z",fillRule:"evenodd"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("Template1BConsentPromptScreenIG.react",["fbt","BaseRow.react","BaseRowItem.react","BaseScrollableArea.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometPlaceholder.react","ConsentTemplateActionCallbacksContext","IGDSButton.react","IGDSDialogContainer.react","IGDSDialogHeader.react","IGDSDialogLoadingState.react","IGDSIcon.react","IGDSList.react","IGDSListCell.react","IGDSShieldStarPanoOutline24Icon.svg.react","IGDSText.react","IGDSTextPairing.react","PolarisIGTheme.react","emptyFunction","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={disclaimerText:{paddingBottom:"xsag5q8",paddingTop:"xz9dl7a",$$css:!0},footer:{backgroundColor:"x2bj2ny",paddingBottom:"x1t4gjm",paddingInlineStart:"x7vhb2i",paddingInlineEnd:"xli2wwf",paddingLeft:null,paddingRight:null,paddingTop:"x889kno",$$css:!0},footerButtons:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},footerButtonsPrimary:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},footerButtonsSecondary:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},header:{paddingBottom:"xwib8y2",paddingInlineStart:"x7vhb2i",paddingInlineEnd:"xli2wwf",paddingLeft:null,paddingRight:null,paddingTop:"x1p5oq8j",$$css:!0},layout:{maxHeight:"xz59zxb",position:"x1n2onr6",$$css:!0},section:{paddingBottom:"x1l90r2v",paddingInlineStart:"x7vhb2i",paddingInlineEnd:"xli2wwf",paddingLeft:null,paddingRight:null,$$css:!0},sectionListItem:{minHeight:"x1gg8mnh",$$css:!0},sectionListItemGap:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionListItemMarker:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},sectionListSubHeadline:{paddingBottom:"x1a8lsjc",paddingTop:"x1p5oq8j",$$css:!0}};function d(){var e,t,n,a=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),l=a.onApproved,d=a.onDenied,m=a.onDismissed;return u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("IGDSDialogLoadingState.react"),{onClose:r("emptyFunction")}),name:i.id,children:u.jsx(r("IGDSDialogContainer.react"),{size:"large",children:u.jsxs(r("CometColumn.react"),{expanding:!0,paddingTop:0,paddingVertical:0,xstyle:c.layout,children:[u.jsx(r("CometColumnItem.react"),{children:u.jsx(r("IGDSDialogHeader.react"),{borderBottom:"none",onClose:m,size:"default",children:null})}),u.jsx(r("CometColumnItem.react"),{expanding:!0,children:u.jsxs(r("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:!1,horizontal:!1,vertical:!0,children:[u.jsx(e=r("BaseView.react"),{xstyle:c.header,children:u.jsx(e,{children:u.jsx(r("IGDSTextPairing.react"),{body:u.jsx(t=r("IGDSText.react"),{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"More information about the [Processor], [Data types], [Purposes], [Outcome] or [Management].")}),headline:u.jsx(t,{color:"primaryText",size:"headline2",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"Allow [Processor] to use [Data types] for [Purposes]?")}),isPrimaryHeading:!0,level:"operational"})})}),u.jsxs(e,{xstyle:c.section,children:[u.jsx(e,{xstyle:c.sectionListSubHeadline,children:u.jsx(t,{color:"primaryText",size:"label",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"List subheadline")})}),u.jsx(e,{children:u.jsxs(r("IGDSList.react"),{"aria-label":s._(/*BTDS*/"[Placeholder] List with more information."),role:"list",children:[u.jsx(r("IGDSListCell.react"),{addOnStart:u.jsx(n=r("BaseRow.react"),{xstyle:c.sectionListItemMarker,children:u.jsx(r("IGDSIcon.react"),{icon:r("IGDSShieldStarPanoOutline24Icon.svg.react"),size:24})}),addOnStartVerticalAlign:"top",addOnStartXStyle:c.sectionListItemGap,content:u.jsx(t,{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"More detail about this experience.")}),horizontalSpacing:0,verticalSpacing:12,xstyle:c.sectionListItem}),u.jsx(r("IGDSListCell.react"),{addOnStart:u.jsx(n,{xstyle:c.sectionListItemMarker,children:u.jsx(r("IGDSIcon.react"),{icon:r("IGDSShieldStarPanoOutline24Icon.svg.react"),size:24})}),addOnStartVerticalAlign:"top",addOnStartXStyle:c.sectionListItemGap,content:u.jsx(t,{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"More detail about this experience.")}),horizontalSpacing:0,verticalSpacing:12,xstyle:c.sectionListItem}),u.jsx(r("IGDSListCell.react"),{addOnStart:u.jsx(n,{xstyle:c.sectionListItemMarker,children:u.jsx(r("IGDSIcon.react"),{icon:r("IGDSShieldStarPanoOutline24Icon.svg.react"),size:24})}),addOnStartVerticalAlign:"top",addOnStartXStyle:c.sectionListItemGap,content:u.jsx(t,{color:"primaryText",size:"body",textAlign:"start",children:s._(/*BTDS*/"More detail about this experience.")}),horizontalSpacing:0,verticalSpacing:12,xstyle:c.sectionListItem})]})})]})]})}),u.jsx(r("CometColumnItem.react"),{xstyle:c.footer,children:u.jsx(n,{expanding:!0,children:u.jsxs(e,{xstyle:c.footerButtons,children:[u.jsx(r("BaseRowItem.react"),{xstyle:c.disclaimerText,children:u.jsx(t,{color:"secondaryText",size:"footnote",textAlign:"center",children:s._(/*BTDS*/"Disclaimer text")})}),u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.footerButtonsPrimary,children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:!1,label:s._(/*BTDS*/"Allow"),onClick:function(){l()},size:"large",variant:"primary"})}),u.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:c.footerButtonsSecondary,children:u.jsx(r("IGDSButton.react"),{display:"block",isDisabled:!1,label:s._(/*BTDS*/"Don't allow"),onClick:function(){d()},size:"large",variant:"secondary"})})]})})})]})})})}d.displayName=d.name+" [from "+i.id+"]";function m(){return u.jsx(o("PolarisIGTheme.react").IGThemeProvider,{children:u.jsx(d,{})})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("MetaBrandSquareOverlappingCircleOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M23 8.5a7.503 7.503 0 0 1-5 7.073V15.5c0-.721-.023-1.414-.063-2.068A5.5 5.5 0 1 0 10.6 6H8.428A7.5 7.5 0 0 1 23 8.5z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 15.5c0-2.09.21-3.926.423-5.258C1.638 8.907 2.817 8 4.17 8h8.662c1.352 0 2.53.907 2.746 2.242.214 1.332.423 3.167.423 5.258 0 2.09-.21 3.926-.423 5.258C15.362 22.093 14.183 23 12.83 23H4.17c-1.352 0-2.53-.907-2.746-2.242A33.478 33.478 0 0 1 1 15.5zm2.398-4.94A31.479 31.479 0 0 0 3 15.5c0 1.961.197 3.688.398 4.94.043.266.296.56.77.56h8.663c.475 0 .728-.294.771-.56.201-1.252.398-2.979.398-4.94 0-1.961-.197-3.688-.398-4.94-.043-.266-.296-.56-.77-.56H4.168c-.475 0-.728.294-.771.56z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("Template1BXMDSConsentPromptScreen.react",["fbt","BaseView.react","CometColumnItem.react","CometPlaceholder.react","ConsentTemplateActionCallbacksContext","MetaBrandSquareOverlappingCircleOutline24Icon.react","XMDSDialog.react","XMDSDialogFooter.react","XMDSDialogHeader.react","XMDSDialogLoadingState.react","XMDSIcon.react","XMDSList.react","XMDSListCell.react","XMDSText.react","XMDSTextPairing.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={header:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},headerHeadline:{paddingTop:"xexx8yu",$$css:!0},section:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},sectionListSubHeadline:{paddingBottom:"xx6bls6",paddingTop:"xljfnv1",$$css:!0},sectionSubHeadline:{paddingBottom:"x10b6aqq",paddingTop:"x1nn3v0j",$$css:!0}};function d(){var e,t=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),n=t.onApproved,a=t.onDenied,l=t.onDismissed;return u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("XMDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:u.jsxs(r("XMDSDialog.react"),{footer:u.jsx(r("XMDSDialogFooter.react"),{meta:s._(/*BTDS*/"Disclaimer text"),metaAlign:"center",metaPosition:"above",primary:{label:s._(/*BTDS*/"Allow"),onPress:function(){n()}},secondary:{label:s._(/*BTDS*/"Don't allow"),onPress:function(){a()}},sticky:!0}),header:u.jsx(r("XMDSDialogHeader.react"),{onClose:l}),inline:!0,size:"small",children:[u.jsx(e=r("BaseView.react"),{xstyle:c.header,children:u.jsx(r("CometColumnItem.react"),{xstyle:c.headerHeadline,children:u.jsx(r("XMDSText.react"),{color:"primaryText",isPrimaryHeading:!0,textAlign:"start",textStyle:"headline1",children:s._(/*BTDS*/"Allow [Processor] to use [Data types] for [Purposes]?")})})}),u.jsxs(e,{xstyle:c.section,children:[u.jsx(e,{xstyle:c.sectionSubHeadline,children:u.jsx(r("XMDSTextPairing.react"),{contentText:s._(/*BTDS*/"More information about the [Processor], [Data types], [Purposes], [Outcome] or [Management]."),headlineText:s._(/*BTDS*/""),isSemanticHeading:!0,textPairingStyle:"headline3Body"})}),u.jsx(e,{xstyle:c.sectionListSubHeadline,children:u.jsx(r("XMDSText.react"),{color:"primaryText",isSemanticHeading:!0,textAlign:"start",textStyle:"headline3",children:s._(/*BTDS*/"List subheadline")})}),u.jsx(e,{children:u.jsxs(r("XMDSList.react"),{"aria-label":s._(/*BTDS*/"[Placeholder] List with more information."),withoutCard:!0,children:[u.jsx(r("XMDSListCell.react"),{addOnStart:u.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandSquareOverlappingCircleOutline24Icon.react"),size:24}),hasBottomDivider:!1,title:s._(/*BTDS*/"More detail about this experience.")}),u.jsx(r("XMDSListCell.react"),{addOnStart:u.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandSquareOverlappingCircleOutline24Icon.react"),size:24}),hasBottomDivider:!1,title:s._(/*BTDS*/"More detail about this experience.")}),u.jsx(r("XMDSListCell.react"),{addOnStart:u.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandSquareOverlappingCircleOutline24Icon.react"),size:24}),title:s._(/*BTDS*/"More detail about this experience.")})]})})]})]})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("Template1BXMDSConsentTemplateConfig",["$InternalEnum","ConsentTemplateFlow.type","FBLogger","Template1BXMDSConsentPromptScreen.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=n("$InternalEnum")({TEMPLATE_1B_XMDS:"template_1b_xmds"}),c={flow:o("ConsentTemplateFlow.type").ConsentTemplateFlow.TEMPLATE_1B_XMDS,getConsentTemplatePromptScreen:function(t,n){var e=u.cast(t);if(e==null)throw r("FBLogger")("consent_core").mustfixThrow("No matching consent template screen found for the given prompt %s",t);switch(e){case u.TEMPLATE_1B_XMDS:switch(n){case"facebook_comet":case"instagram_web":return s.jsx(r("Template1BXMDSConsentPromptScreen.react"),{})}break}throw r("FBLogger")("consent_core").mustfixThrow("The consent prompt %s does not currently support the surface %s",t,n)},recordConsentOutcome:function(t,n){}};l.ConsentTemplatePrompts=u,l.Template1BXMDSConsentTemplateConfig=c}),98);
__d("ConsentInteractionsFlowAcceptFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7031"),s=o("FalcoLoggerInternal").create("consent_interactions_flow_accept",e),u=s;l.default=u}),98);
__d("ConsentInteractionsFlowDenyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7033"),s=o("FalcoLoggerInternal").create("consent_interactions_flow_deny",e),u=s;l.default=u}),98);
__d("ConsentInteractionsFlowDismissFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7034"),s=o("FalcoLoggerInternal").create("consent_interactions_flow_dismiss",e),u=s;l.default=u}),98);
__d("ConsentInteractionsFlowStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7036"),s=o("FalcoLoggerInternal").create("consent_interactions_flow_start",e),u=s;l.default=u}),98);
__d("ConsentInteractionsLinkOpenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7050"),s=o("FalcoLoggerInternal").create("consent_interactions_link_open",e),u=s;l.default=u}),98);
__d("ConsentInteractionsPromptAcceptFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7051"),s=o("FalcoLoggerInternal").create("consent_interactions_prompt_accept",e),u=s;l.default=u}),98);
__d("ConsentInteractionsPromptBackFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7052"),s=o("FalcoLoggerInternal").create("consent_interactions_prompt_back",e),u=s;l.default=u}),98);
__d("ConsentInteractionsPromptContinueFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7053"),s=o("FalcoLoggerInternal").create("consent_interactions_prompt_continue",e),u=s;l.default=u}),98);
__d("ConsentInteractionsPromptDenyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7054"),s=o("FalcoLoggerInternal").create("consent_interactions_prompt_deny",e),u=s;l.default=u}),98);
__d("ConsentInteractionsPromptDismissFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7055"),s=o("FalcoLoggerInternal").create("consent_interactions_prompt_dismiss",e),u=s;l.default=u}),98);
__d("ConsentInteractionsPromptImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("7056"),s=o("FalcoLoggerInternal").create("consent_interactions_prompt_impression",e),u=s;l.default=u}),98);
__d("ConsentPromptType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({DIALOG:1,BOTTOM_SHEET:2,FULL_SCREEN_DEPRECATED:3,SCREEN_COMPONENT:4,NO_PROMPT:5,ALERT:6,MODAL:7,SCREEN:8}),l=e;i.default=l}),66);
__d("ConsentInteractionsLogger",["ConsentInteractionsFlowAcceptFalcoEvent","ConsentInteractionsFlowDenyFalcoEvent","ConsentInteractionsFlowDismissFalcoEvent","ConsentInteractionsFlowStartFalcoEvent","ConsentInteractionsLinkOpenFalcoEvent","ConsentInteractionsPromptAcceptFalcoEvent","ConsentInteractionsPromptBackFalcoEvent","ConsentInteractionsPromptContinueFalcoEvent","ConsentInteractionsPromptDenyFalcoEvent","ConsentInteractionsPromptDismissFalcoEvent","ConsentInteractionsPromptImpressionFalcoEvent","ExecutionEnvironment","WebStorage","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var t="consent_interactions_experience_id",n=(e||(e=r("WebStorage"))).getSessionStorage(),o=n==null?void 0:n.getItem(t);return o==null&&(o=r("uuidv4")(),n==null||n.setItem(t,o)),o}function c(){if((s||(s=r("ExecutionEnvironment"))).canUseDOM&&typeof window!="undefined"){var e=window.location.hostname;if(e==="instagram.com"||e.endsWith(".instagram.com"))return"instagram_web";if(e==="messenger.com"||e.endsWith(".messenger.com"))return"messenger_dot_com";if(e==="web.whatsapp.com"||e.endsWith(".web.whatsapp.com"))return"whatsapp_web";if(e==="threads.net"||e.endsWith(".threads.net"))return"barcelona_web";if(e==="meta.com"||e.endsWith(".meta.com"))return"meta_dot_com";if(e==="meta.ai"||e.endsWith(".meta.ai"))return"meta_ai_web";if(e==="facebook.com"||e.endsWith(".facebook.com"))return"facebook_comet"}return"facebook_comet"}function d(){if((s||(s=r("ExecutionEnvironment"))).canUseDOM&&typeof window!="undefined"){var e=window.location.hostname;if(e.includes("instagram.com"))return"Instagram"}return"Facebook"}function m(e){var t=e.config_enum,n=e.flow_category,r=e.flow_name,o=e.owner,a=e.product_data,i=e.surface,l=e.user_id,s={prompt_type:1},m=l!=null?l:"0";return{config_enum:t,event_data:s,experience_id:u(),flow_category:n,flow_name:r,owner:o,product_data:a!=null?a:null,source:"consent_experiences_kit",surface:i!=null?i:c(),universe:d(),user_fbid:m,user_id:m}}function p(e){r("ConsentInteractionsPromptImpressionFalcoEvent").log(function(){return m(e)})}function _(e){r("ConsentInteractionsPromptAcceptFalcoEvent").log(function(){return m(e)})}function f(e){var t=m(e);r("ConsentInteractionsFlowStartFalcoEvent").log(function(){return{config_enum:t.config_enum,event_data:{},experience_id:t.experience_id,flow_category:t.flow_category,flow_name:t.flow_name,owner:t.owner,product_data:t.product_data,source:t.source,surface:t.surface,universe:t.universe,user_fbid:t.user_fbid,user_id:t.user_id}})}function g(e){r("ConsentInteractionsPromptDenyFalcoEvent").log(function(){return m(e)})}function h(e){r("ConsentInteractionsPromptDismissFalcoEvent").log(function(){return m(e)})}function y(e){var t=m(e);r("ConsentInteractionsFlowDenyFalcoEvent").log(function(){return{config_enum:t.config_enum,event_data:{},experience_id:t.experience_id,flow_category:t.flow_category,flow_name:t.flow_name,owner:t.owner,product_data:t.product_data,source:t.source,surface:t.surface,universe:t.universe,user_fbid:t.user_fbid,user_id:t.user_id}})}function C(e){var t=m(e);r("ConsentInteractionsFlowAcceptFalcoEvent").log(function(){return{config_enum:t.config_enum,event_data:{},experience_id:t.experience_id,flow_category:t.flow_category,flow_name:t.flow_name,owner:t.owner,product_data:t.product_data,source:t.source,surface:t.surface,universe:t.universe,user_fbid:t.user_fbid,user_id:t.user_id}})}function b(e){var t=m(e);r("ConsentInteractionsFlowDismissFalcoEvent").log(function(){return{config_enum:t.config_enum,event_data:{},experience_id:t.experience_id,flow_category:t.flow_category,flow_name:t.flow_name,owner:t.owner,product_data:t.product_data,source:t.source,surface:t.surface,universe:t.universe,user_fbid:t.user_fbid,user_id:t.user_id}})}function v(e){r("ConsentInteractionsPromptBackFalcoEvent").log(function(){return m(e)})}function S(e){r("ConsentInteractionsPromptContinueFalcoEvent").log(function(){return m(e)})}function R(e,t){var n=m(e);r("ConsentInteractionsLinkOpenFalcoEvent").log(function(){return{config_enum:n.config_enum,event_data:{url:t},experience_id:n.experience_id,flow_category:n.flow_category,flow_name:n.flow_name,owner:n.owner,product_data:n.product_data,source:n.source,surface:n.surface,universe:n.universe,user_fbid:n.user_fbid,user_id:n.user_id}})}l.logImpression=p,l.logAccept=_,l.logFlowStart=f,l.logDeny=g,l.logDismiss=h,l.logDenyFlow=y,l.logAcceptFlow=C,l.logDismissFlow=b,l.logBack=v,l.logContinue=S,l.logLinkOpen=R}),98);
__d("FXAccountsCenterAdPreferencesPageRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/ad_preferences/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("MetaBrandExclamationCircleOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18zm0 2c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11zm1.25-7.002c0 .6-.416 1-1.25 1-.833 0-1.25-.4-1.25-1s.417-1 1.25-1c.834 0 1.25.4 1.25 1zm-.374-8.125a.875.875 0 0 0-1.75 0v4.975a.875.875 0 1 0 1.75 0V7.873z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandLinesRectangleCheckmarkOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M7 4h10a1 1 0 0 1 1 1v9.523a47.96 47.96 0 0 1 1.98-1.745l.02-.017V5a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h3.764A2.99 2.99 0 0 1 10 18H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1z"}),s.jsx("path",{d:"M8 8a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1zM8 12a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1zM22.768 14.36a1 1 0 0 1-.128 1.408l-.099.083a44 44 0 0 0-5.24 5.167l-.542.633a1 1 0 0 1-1.466.056l-3-3a1 1 0 0 1 1.414-1.414l2.237 2.237a46.002 46.002 0 0 1 5.317-5.216l.099-.082a1 1 0 0 1 1.408.128z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandSquareLinesStamperOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),s.jsxs("g",{clipPath:"url(#a)",children:[s.jsx("path",{d:"M16 4H6a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h6v2H6a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v3.024a5.261 5.261 0 0 0-2 .196V5a1 1 0 0 0-1-1z"}),s.jsx("path",{d:"M8 7a1 1 0 0 0 0 2h5a1 1 0 1 0 0-2H8zM8 11a1 1 0 1 0 0 2h3a1 1 0 1 0 0-2H8z"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m21.222 17 .391-3.521a3.133 3.133 0 1 0-6.226 0l.39 3.521H15a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-.778zm-2.012 0 .416-3.742a1.133 1.133 0 1 0-2.252 0L17.79 17h1.42zM16 19v1h5v-1h-5z"})]}),s.jsxs("defs",{children:[s.jsx("clipPath",{children:s.jsx("path",{d:"M0 0H24V24H0z"})}),e.children]})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandXOutline24.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M5.707 4.293a1 1 0 1 0-1.414 1.414L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 0 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-1.414-1.414L12 10.586 5.707 4.293z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("UOOMConsentPromptScreenFacePileQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10029822320475508"}),null);
__d("UOOMConsentPromptScreenFacePileQuery.graphql",["UOOMConsentPromptScreenFacePileQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,concreteType:"XFBFXPlatformInfo",kind:"LinkedField",name:"platform_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},r={alias:null,args:null,concreteType:"XFBFXProfilePictureInfo",kind:"LinkedField",name:"profile_picture_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMConsentPromptScreenFacePileQuery",selections:[{alias:null,args:null,concreteType:"FXManageAccountsQueries",kind:"LinkedField",name:"fx_accounts_management",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"accounts",plural:!0,selections:[e,t,r,o],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMConsentPromptScreenFacePileQuery",selections:[{alias:null,args:null,concreteType:"FXManageAccountsQueries",kind:"LinkedField",name:"fx_accounts_management",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"accounts",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e,t,r,o],storageKey:null}],storageKey:null}]},params:{id:n("UOOMConsentPromptScreenFacePileQuery_facebookRelayOperation"),metadata:{},name:"UOOMConsentPromptScreenFacePileQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("UOOMConsentPromptScreenOnFlowEndMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24496941779983126"}),null);
__d("UOOMConsentPromptScreenOnFlowEndMutation.graphql",["UOOMConsentPromptScreenOnFlowEndMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"gpc_signal_reconciliation_on_flow_end",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMConsentPromptScreenOnFlowEndMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMConsentPromptScreenOnFlowEndMutation",selections:e},params:{id:n("UOOMConsentPromptScreenOnFlowEndMutation_facebookRelayOperation"),metadata:{},name:"UOOMConsentPromptScreenOnFlowEndMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("UOOMConsentPromptScreenProductDataQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25857066470550581"}),null);
__d("UOOMConsentPromptScreenProductDataQuery.graphql",["UOOMConsentPromptScreenProductDataQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"gpc_signal_reconciliation_logging_product_data",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMConsentPromptScreenProductDataQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMConsentPromptScreenProductDataQuery",selections:e},params:{id:n("UOOMConsentPromptScreenProductDataQuery_facebookRelayOperation"),metadata:{},name:"UOOMConsentPromptScreenProductDataQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("MetaBrandExclamationTriangleFilled24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({fill:"currentColor",viewBox:"0 0 24 24",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",d:"M10.257 3.057c.765-1.358 2.72-1.358 3.486 0l7.998 14.211c.75 1.333-.213 2.982-1.743 2.982H4c-1.53 0-2.492-1.649-1.742-2.982zM12 14.997c-.833 0-1.25.4-1.25 1s.417 1 1.25 1c.834 0 1.25-.4 1.25-1s-.417-1-1.25-1m0-7.122a.875.875 0 0 0-.875.875v4.347a.875.875 0 1 0 1.75 0V8.75A.875.875 0 0 0 12 7.875",clipRule:"evenodd"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("cdsPushToast",["BaseToasterStateManager","MetaBrandExclamationTriangleFilled24Icon.react","XMDSIcon.react","basePushToast","deferredLoadComponent","getToastDurationFromTextLength","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=["action"],s,u=s||(s=o("react")),c=r("BaseToasterStateManager").getInstance(),d=r("deferredLoadComponent")(r("requireDeferred")("XMDSToast.react").__setRef("cdsPushToast")),m={LONG:5e3,MEDIUM:3e3};function p(t,n,a){var i=a?m[a]:void 0,l=n!=null?n:c;if(o("basePushToast").passesNewToastAPIGK())if(o("basePushToast").isInteractiveToast(t)){var s=o("basePushToast").pushPersistentToast(u.jsx(d,babelHelpers.extends({},t,{loadImmediately:!0,onDismiss:function(){return l.expire(s)}})),l);return s}else{var p=t.action,_=babelHelpers.objectWithoutPropertiesLoose(t,e),f=babelHelpers.extends({withoutCloseButton:!0},_),g=o("basePushToast").pushAlertToast(babelHelpers.extends({},f),u.jsx(d,babelHelpers.extends({},f,{loadImmediately:!0,onDismiss:function(){return l.expire(g)}})),l,i);return g}else{var h=l.push(u.jsx(d,babelHelpers.extends({},t,{loadImmediately:!0,onDismiss:function(){return l.expire(h)}})),i!=null?i:r("getToastDurationFromTextLength")(t.message.toString(),l));return h}}function _(e){return p({message:e})}function f(e,t,n){return p(babelHelpers.extends({},e,{addOnStart:u.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandExclamationTriangleFilled24Icon.react"),size:24})}),t,n)}function g(e,t){var n=t!=null?t:c,r=n.push(u.jsx(d,babelHelpers.extends({},e,{loadImmediately:!0,onDismiss:function(){return n.expire(r)}})),1/0);return r}l.pushToast=p,l.pushSimpleToast=_,l.pushErrorToast=f,l.pushPersistentToast=g}),98);
__d("UOOMConsentPromptScreen.react",["fbt","Actor","BaseRow.react","BaseRowItem.react","BaseView.react","CometColumnItem.react","CometImage.react","CometPlaceholder.react","CometPressable.react","CometRelay","ConsentInteractionsLogger","ConsentTemplateActionCallbacksContext","ConsentTemplateSurfaceContext","FXAccountsCenterAdPreferencesPageRouteBuilder","MetaBrandExclamationCircleOutline24.svg.react","MetaBrandGearOutline24.svg.react","MetaBrandLinesRectangleCheckmarkOutline24.svg.react","MetaBrandPadlockClosedOutline24.svg.react","MetaBrandSquareLinesStamperOutline24.svg.react","MetaBrandXOutline24.svg.react","MetaLockupPrimary.react","UOOMConsentPromptScreenFacePileQuery.graphql","UOOMConsentPromptScreenOnFlowEndMutation.graphql","UOOMConsentPromptScreenProductDataQuery.graphql","XMDSButton.react","XMDSDialogContainer.react","XMDSDialogLoadingState.react","XMDSIcon.react","XMDSInlinePressableText.react","XMDSText.react","asyncToGeneratorRuntime","cdsPushToast","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=m.useEffect,_=m.useMemo,f=m.useRef,g=m.useState,h={audienceDialogSection:{paddingBottom:"x1t1ogtf",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,paddingTop:"x1y1aw1k",$$css:!0},facePileSection:{paddingBottom:"xjkvuk6",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,paddingTop:"x1cnzs8",$$css:!0},footer:{backgroundColor:"x2bj2ny",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,"@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xx6bls6","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},header:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x8nclml",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},overlayBackdrop:{backgroundColor:"x18l40ae",bottom:"x1ey2m1c",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"xixxii4",top:"x13vifvy",zIndex:"x1vjfegm",$$css:!0},overlayContainer:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",display:"x78zum5",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,justifyContent:"xl56j7k",position:"xixxii4",top:"x13vifvy",zIndex:"x1vjfegm",$$css:!0},primaryButton:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},secondaryButton:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},section:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,paddingTop:"x1y1aw1k",$$css:!0},sectionIconTextList:{paddingBottom:"x84yb8i",paddingTop:"x1xy6bms",$$css:!0},sectionIconTextListItem:{paddingTop:"x889kno",$$css:!0},sectionIconTextListItemContent:{paddingBottom:"x1a8lsjc",paddingTop:"x1yrsyyn",$$css:!0},sectionIconTextListItemIcon:{paddingInlineEnd:"xpdmqnj",$$css:!0},sectionParagraph:{paddingTop:"x1cnzs8",$$css:!0}},y=e!==void 0?e:e=n("UOOMConsentPromptScreenFacePileQuery.graphql"),C=u!==void 0?u:u=n("UOOMConsentPromptScreenProductDataQuery.graphql"),b=c!==void 0?c:c=n("UOOMConsentPromptScreenOnFlowEndMutation.graphql");function v(){var e,t=o("CometRelay").useLazyLoadQuery(y,{});return _(function(){var e;if(!(t!=null&&(e=t.fx_accounts_management)!=null&&e.accounts))return{accounts:[],accountsCount:0,hasLinkedAccounts:!1};var n=t.fx_accounts_management.accounts.filter(function(e){var t,n;return e&&e.is_active===!0&&(((t=e.platform_info)==null?void 0:t.type)==="FACEBOOK"||((n=e.platform_info)==null?void 0:n.type)==="INSTAGRAM")}).map(function(e){var t,n,r;return{account_type:((t=e.platform_info)==null?void 0:t.type)==="FACEBOOK"?"facebook":"instagram",id:e.id||"",platform_info:{type:((n=e.platform_info)==null?void 0:n.type)||""},profile_picture_url:((r=e.profile_picture_info)==null?void 0:r.url)||""}}),r=n.sort(function(e,t){return e.account_type==="instagram"&&t.account_type==="facebook"?-1:e.account_type==="facebook"&&t.account_type==="instagram"?1:0});return{accounts:r,accountsCount:r.length,hasLinkedAccounts:r.length>0}},[t==null||(e=t.fx_accounts_management)==null?void 0:e.accounts])}var S={badgeContainer:{backgroundColor:"x2bj2ny",borderTopColor:"x1aoij9j",borderInlineEndColor:"x5eh17s",borderBottomColor:"x2e7n7m",borderInlineStartColor:"xk1cdbz",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xamhcws",borderInlineEndWidth:"x1alpsbp",borderBottomWidth:"xlxy82",borderInlineStartWidth:"xyumdvf",bottom:"x1c7jfne",insetInlineEnd:"xz03a8w",left:null,right:null,paddingTop:"x1nn3v0j",paddingInlineEnd:"x14vy60q",paddingBottom:"x1120s5i",paddingInlineStart:"xyiysdx",position:"x10l6tqk",$$css:!0},facePileContainer:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0},overlappingPhoto:{marginInlineStart:"x162z183",$$css:!0},photosContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"xl56j7k",$$css:!0},photoWrapper:{position:"x1n2onr6",$$css:!0},profileContainer:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",position:"x1n2onr6",$$css:!0},profilePhoto:{backgroundColor:"x2bj2ny",borderTopColor:"x1aoij9j",borderInlineEndColor:"x5eh17s",borderBottomColor:"x2e7n7m",borderInlineStartColor:"xk1cdbz",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xmn4e3e",borderInlineEndWidth:"x1if355w",borderBottomWidth:"x2x41l1",borderInlineStartWidth:"xct1zlm",$$css:!0},zIndex1:{zIndex:"x1vjfegm",$$css:!0},zIndex2:{zIndex:"xhtitgo",$$css:!0}};function R(e){var t=e.accountType,n=e.profileImageUrl,o=e.showBadge,a=o===void 0?!0:o,i=e.size,l=i===void 0?75:i,s=_(function(){if(!a)return null;var e=t==="facebook"?"/images/facebook_logo/fb_icon_32x32.png":"/images/instagram-business/instagram-favicon-2016.png";return m.jsx(r("BaseView.react"),{xstyle:S.badgeContainer,children:m.jsx(r("CometImage.react"),{alt:t+" app badge",height:14.5,src:e,width:14.5})})},[t,a]);return m.jsxs(r("BaseView.react"),{xstyle:S.profileContainer,children:[m.jsx(r("CometImage.react"),{alt:t+" profile photo",cornerRadius:"large",onError:function(){},src:n,xstyle:[S.profilePhoto,{height:l,width:l}]}),s]})}R.displayName=R.name+" [from "+i.id+"]";function L(e){var t=e.accounts,n=e.maxPhotos,o=e.photoSize,a=o===void 0?60:o,i=_(function(){if(!t||t.length===0)return[];var e=n!=null?[].concat(t).slice(0,n):[].concat(t);return e.sort(function(e,t){return e.accountType==="instagram"&&t.accountType==="facebook"?-1:e.accountType==="facebook"&&t.accountType==="instagram"?1:0})},[t,n]);return i.length===0?null:m.jsx(r("BaseView.react"),{xstyle:S.facePileContainer,children:m.jsx(r("BaseView.react"),{xstyle:S.photosContainer,children:i.map(function(e,t){var n=t>0,o=t===0?S.zIndex2:S.zIndex1;return m.jsx(r("BaseView.react"),{xstyle:[S.photoWrapper,n&&S.overlappingPhoto,o],children:m.jsx(R,{accountType:e.accountType,profileImageUrl:e.profileImageUrl,showBadge:!0,size:a})},e.accountType+"-"+t)})})})}L.displayName=L.name+" [from "+i.id+"]";function E(e){var t,n,a=e.audienceBasedAdvertisingLink,i=e.loggingParams,l=e.onClose;return m.jsxs(r("XMDSDialogContainer.react"),{disableClosingWithMask:!1,fitToSize:!0,onClose:l,size:"small",children:[m.jsxs(r("BaseRow.react"),{xstyle:h.navbar,children:[m.jsx(r("BaseRow.react"),{expanding:!0}),m.jsx(r("CometPressable.react"),{"aria-label":s._(/*BTDS*/"Close"),onPress:l,children:m.jsx(r("XMDSIcon.react"),{color:"primary",icon:r("MetaBrandXOutline24.svg.react"),size:24})})]}),m.jsxs(t=r("BaseView.react"),{xstyle:[h.root,h.header],children:[m.jsx(n=r("XMDSText.react"),{color:"primaryText",isPrimaryHeading:!0,textAlign:"start",textStyle:"headline2",children:s._(/*BTDS*/"Other information that affects your ads")}),m.jsxs(t,{xstyle:[h.root,h.audienceDialogSection],children:[m.jsx(t,{xstyle:h.sectionParagraph,children:m.jsx(n,{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"This isn't the only kind of information from ad partners that can be used to show you ads.")})}),m.jsx(t,{xstyle:h.sectionParagraph,children:m.jsx(n,{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"For example, you may have signed up to receive emails from a business that partners with us. That business may then send us a list of customers who signed up, which can be used to show you ads.")})}),m.jsx(t,{xstyle:h.sectionParagraph,children:m.jsx(n,{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"Make sure to also review your {=m1} to make the right decisions about how your information is used.",[s._implicitParam("=m1",m.jsx(r("XMDSInlinePressableText.react"),{linkProps:{target:"_blank",url:a},onPress:function(){o("ConsentInteractionsLogger").logLinkOpen(i,a)},children:s._(/*BTDS*/"audience-based advertising setting")}))])})})]})]})]})}E.displayName=E.name+" [from "+i.id+"]";function k(){var e,t,a=g(!1),l=a[0],u=a[1],c=o("Actor").useActor(),d=c[0],y=o("CometRelay").useLazyLoadQuery(C,{}),S=_(function(){if((y==null?void 0:y.gpc_signal_reconciliation_logging_product_data)!=null)try{return JSON.parse(y.gpc_signal_reconciliation_logging_product_data)}catch(e){return{}}return{}},[y==null?void 0:y.gpc_signal_reconciliation_logging_product_data]),R=_(function(){return{config_enum:"gpc_signal_reconciliation_choice_prompt",flow_category:"gpc_signal_reconciliation",flow_name:"gpc_signal_reconciliation",owner:"gpc_signal_reconciliation",product_data:S,user_id:d}},[S,d]);p(function(){var e=window.setTimeout(function(){var e;(e=document.activeElement)==null||e.blur()},0);return function(){return window.clearTimeout(e)}},[]);var k=o("ConsentTemplateSurfaceContext").useConsentTemplateSurface(),I="",T="",D="";switch(k){case"facebook_comet":case"facebook_weblite":I="https://www.facebook.com/privacy/policy/?section_id=19-WhyAndHowWe",T="https://www.facebook.com/help/652751476243277",D="https://accountscenter.facebook.com/ad_preferences/ad_settings/audience_based_advertising/";break;default:I="https://privacycenter.instagram.com/policy/?section_id=19-WhyAndHowWe",T="https://help.instagram.com/544284327840525",D="https://accountscenter.instagram.com/ad_preferences/ad_settings/audience_based_advertising/"}var x=(e=(t=r("FXAccountsCenterAdPreferencesPageRouteBuilder").buildUri({}).getQualifiedUri())==null||(t=t.setSubDomain("accountscenter"))==null?void 0:t.toString())!=null?e:"#",$=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),P=$.onApproved,N=$.onDenied,M=$.onDismissed,w=o("CometRelay").useMutation(b),A=w[0],F=v(),O=F.accounts,B=F.hasLinkedAccounts,W=_(function(){return O.map(function(e){return{accountType:e.account_type,profileImageUrl:e.profile_picture_url}})},[O]),q=f(!1);return p(function(){q.current||(q.current=!0,o("ConsentInteractionsLogger").logImpression(R))},[]),m.jsxs(m.Fragment,{children:[m.jsx(r("CometPlaceholder.react"),{fallback:m.jsx(r("XMDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:m.jsxs(r("XMDSDialogContainer.react"),{disableClosingWithMask:!0,size:"medium",children:[m.jsxs(r("BaseRow.react"),{xstyle:h.navbar,children:[m.jsx(r("MetaLockupPrimary.react"),{size:12}),m.jsx(r("BaseRow.react"),{expanding:!0}),m.jsx(r("CometPressable.react"),{"aria-label":s._(/*BTDS*/"Close"),onPress:function(){o("ConsentInteractionsLogger").logDismissFlow(R),o("ConsentInteractionsLogger").logDismiss(R),M(),A({onCompleted:function(){},onError:function(){},variables:{}})},children:m.jsx(r("XMDSIcon.react"),{color:"primary",icon:r("MetaBrandXOutline24.svg.react"),size:24})})]}),m.jsx(r("BaseView.react"),{xstyle:[h.root,h.header],children:m.jsx(r("XMDSText.react"),{color:"primaryText",isPrimaryHeading:!0,textAlign:"start",textStyle:"headline1",children:s._(/*BTDS*/"Do you want us to show you ads that are more relevant by using your activity information from ad partners?")})}),m.jsx(r("BaseView.react"),{xstyle:h.facePileSection,children:m.jsx(L,{accounts:W,maxPhotos:4})}),m.jsxs(r("CometColumnItem.react"),{expanding:!0,children:[m.jsxs(r("BaseView.react"),{xstyle:[h.root,h.section],children:[m.jsx(r("BaseView.react"),{xstyle:h.sectionParagraph,children:m.jsx(r("XMDSText.react"),{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"A universal opt-out control has changed an ad setting that allows Meta to use your activity information from {=m1} to show you ads. You can choose to turn this ad setting back on for all accounts in this Accounts Center.",[s._implicitParam("=m1",m.jsx(r("XMDSInlinePressableText.react"),{linkProps:{target:"_blank",url:T},children:s._(/*BTDS*/"ad partners")}))])})}),m.jsxs(r("BaseView.react"),{xstyle:h.sectionIconTextList,children:[m.jsxs(r("BaseRow.react"),{align:"start",role:"listitem",xstyle:h.sectionIconTextListItem,children:[m.jsx(r("BaseRowItem.react"),{xstyle:h.sectionIconTextListItemIcon,children:m.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandGearOutline24.svg.react"),size:24})}),m.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:h.sectionIconTextListItemContent,children:m.jsx(r("BaseRow.react"),{children:m.jsx(r("XMDSText.react"),{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"This choice will continue to apply even if you change any universal opt-out controls. You can change this choice in {=m1} at any time",[s._implicitParam("=m1",m.jsx(r("XMDSInlinePressableText.react"),{linkProps:{target:"_blank",url:x},children:s._(/*BTDS*/"Ad preferences")}))])})})})]}),m.jsxs(r("BaseRow.react"),{align:"start",role:"listitem",xstyle:h.sectionIconTextListItem,children:[m.jsx(r("BaseRowItem.react"),{xstyle:h.sectionIconTextListItemIcon,children:m.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandPadlockClosedOutline24.svg.react"),size:24})}),m.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:h.sectionIconTextListItemContent,children:m.jsx(r("BaseRow.react"),{children:m.jsx(r("XMDSText.react"),{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"We always use strict security standards to keep your information safe")})})})]}),m.jsxs(r("BaseRow.react"),{align:"start",role:"listitem",xstyle:h.sectionIconTextListItem,children:[m.jsx(r("BaseRowItem.react"),{xstyle:h.sectionIconTextListItemIcon,children:m.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandSquareLinesStamperOutline24.svg.react"),size:24})}),m.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:h.sectionIconTextListItemContent,children:m.jsx(r("BaseRow.react"),{children:m.jsx(r("XMDSText.react"),{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"Some information may be anonymized and used to improve our products as described in our {=m1}, regardless of your choice",[s._implicitParam("=m1",m.jsx(r("XMDSInlinePressableText.react"),{linkProps:{target:"_blank",url:I},children:s._(/*BTDS*/"Privacy Policy")}))])})})})]}),m.jsxs(r("BaseRow.react"),{align:"start",role:"listitem",xstyle:h.sectionIconTextListItem,children:[m.jsx(r("BaseRowItem.react"),{xstyle:h.sectionIconTextListItemIcon,children:m.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandLinesRectangleCheckmarkOutline24.svg.react"),size:24})}),m.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:h.sectionIconTextListItemContent,children:m.jsx(r("BaseRow.react"),{children:m.jsx(r("XMDSText.react"),{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"This isn't the only kind of information from ad partners that can affect your ads. See details about {=m1}",[s._implicitParam("=m1",m.jsx(r("XMDSInlinePressableText.react"),{onPress:function(){u(!0)},children:s._(/*BTDS*/"audience-based advertising")}))])})})})]}),m.jsxs(r("BaseRow.react"),{align:"start",role:"listitem",xstyle:h.sectionIconTextListItem,children:[m.jsx(r("BaseRowItem.react"),{xstyle:h.sectionIconTextListItemIcon,children:m.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandExclamationCircleOutline24.svg.react"),size:24})}),m.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:h.sectionIconTextListItemContent,children:m.jsx(r("BaseRow.react"),{children:m.jsx(r("XMDSText.react"),{color:"primaryText",textAlign:"start",textStyle:"body",children:s._(/*BTDS*/"Learn more about {=m1}",[s._implicitParam("=m1",m.jsx(r("XMDSInlinePressableText.react"),{linkProps:{target:"_blank",url:T},children:s._(/*BTDS*/"ad partners")}))])})})})]})]})]}),m.jsx(r("BaseRow.react"),{expanding:!0}),m.jsx(r("CometColumnItem.react"),{xstyle:[h.root,h.footer],children:m.jsx(r("BaseView.react"),{xstyle:h.footerButtons,children:m.jsx(r("BaseRow.react"),{expanding:!0,children:m.jsxs(r("BaseView.react"),{xstyle:h.footerButtonsContainer,children:[m.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:h.primaryButton,children:m.jsx(r("XMDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Use this information"),onPress:function(){o("ConsentInteractionsLogger").logAcceptFlow(R),o("ConsentInteractionsLogger").logAccept(R),o("cdsPushToast").pushToast({message:s._(/*BTDS*/"All set. Your activity information will be used to show you ads."),withoutCloseButton:!0},void 0,"LONG"),window.setTimeout(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield P()}),200)},size:"large",type:"primary"})}),m.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:h.secondaryButton,children:m.jsx(r("XMDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Don't use this information"),onPress:function(){o("ConsentInteractionsLogger").logDenyFlow(R),o("ConsentInteractionsLogger").logDeny(R),N()},size:"large",type:"secondary"})})]})})})})]})]})}),l&&m.jsxs(m.Fragment,{children:[m.jsx(r("BaseView.react"),{xstyle:h.overlayBackdrop}),m.jsx(r("BaseView.react"),{xstyle:h.overlayContainer,children:m.jsx(E,{audienceBasedAdvertisingLink:D,loggingParams:R,onClose:function(){u(!1)}})})]})]})}k.displayName=k.name+" [from "+i.id+"]",l.default=k}),226);
__d("UOOMConsentTemplateConfigRecordOutcomeMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25421322587479527"}),null);
__d("UOOMConsentTemplateConfigRecordOutcomeMutation.graphql",["UOOMConsentTemplateConfigRecordOutcomeMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"outcome"}],t=[{alias:null,args:[{fields:[{kind:"Variable",name:"outcome",variableName:"outcome"}],kind:"ObjectValue",name:"input"}],concreteType:"XFBCTGpcSignalReconciliationRecordOutcomeData",kind:"LinkedField",name:"gpc_signal_reconciliation_record_outcome",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UOOMConsentTemplateConfigRecordOutcomeMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UOOMConsentTemplateConfigRecordOutcomeMutation",selections:t},params:{id:n("UOOMConsentTemplateConfigRecordOutcomeMutation_facebookRelayOperation"),metadata:{},name:"UOOMConsentTemplateConfigRecordOutcomeMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("UOOMConsentTemplateConfig",["$InternalEnum","CometRelay","ConsentTemplateFlow.type","FBLogger","UOOMConsentPromptScreen.react","UOOMConsentTemplateConfigRecordOutcomeMutation.graphql","UOOMFacebookIntroScreen.react","UOOMInstagramIntroScreen.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=n("$InternalEnum")({UOOM_CONSENT:"uoom",UOOM_CONSENT_PROMPT:"uoom_consent_prompt"}),d={flow:o("ConsentTemplateFlow.type").ConsentTemplateFlow.UOOM,getConsentTemplatePromptScreen:function(t,n){var e=c.cast(t);if(e==null)throw r("FBLogger")("ads_data_controls_and_platform").mustfixThrow("No matching consent template screen found for the given prompt %s",t);switch(e){case c.UOOM_CONSENT:return n==="instagram_web"?u.jsx(r("UOOMInstagramIntroScreen.react"),{}):u.jsx(r("UOOMFacebookIntroScreen.react"),{});case c.UOOM_CONSENT_PROMPT:return u.jsx(r("UOOMConsentPromptScreen.react"),{})}throw r("FBLogger")("ads_data_controls_and_platform").mustfixThrow("The consent prompt %s does not currently support the surface %s",t,n)},recordConsentOutcome:function(r,o){var t=n("CometRelay"),a=t.commitMutation,i=t.graphql,l=e!==void 0?e:e=n("UOOMConsentTemplateConfigRecordOutcomeMutation.graphql");a(o,{mutation:l,variables:{outcome:r}})}};l.ConsentTemplatePrompts=c,l.UOOMConsentTemplateConfig=d}),98);
__d("UOOMFacebookIntroScreenOnFlowEndMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24985083154490253"}),null);
__d("UOOMFacebookIntroScreenOnFlowEndMutation.graphql",["UOOMFacebookIntroScreenOnFlowEndMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"gpc_signal_reconciliation_on_flow_end",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMFacebookIntroScreenOnFlowEndMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMFacebookIntroScreenOnFlowEndMutation",selections:e},params:{id:n("UOOMFacebookIntroScreenOnFlowEndMutation_facebookRelayOperation"),metadata:{},name:"UOOMFacebookIntroScreenOnFlowEndMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("UOOMFacebookIntroScreenOnFlowStartMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24594167623599214"}),null);
__d("UOOMFacebookIntroScreenOnFlowStartMutation.graphql",["UOOMFacebookIntroScreenOnFlowStartMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"gpc_signal_reconciliation_on_flow_start",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMFacebookIntroScreenOnFlowStartMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMFacebookIntroScreenOnFlowStartMutation",selections:e},params:{id:n("UOOMFacebookIntroScreenOnFlowStartMutation_facebookRelayOperation"),metadata:{},name:"UOOMFacebookIntroScreenOnFlowStartMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("UOOMFacebookIntroScreenProductDataQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24949662238025127"}),null);
__d("UOOMFacebookIntroScreenProductDataQuery.graphql",["UOOMFacebookIntroScreenProductDataQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"gpc_signal_reconciliation_logging_product_data",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMFacebookIntroScreenProductDataQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMFacebookIntroScreenProductDataQuery",selections:e},params:{id:n("UOOMFacebookIntroScreenProductDataQuery_facebookRelayOperation"),metadata:{},name:"UOOMFacebookIntroScreenProductDataQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("UOOMFacebookIntroScreen.react",["fbt","ix","Actor","BaseRow.react","BaseRowItem.react","BaseView.react","CometBackgroundImage.react","CometColumn.react","CometColumnItem.react","CometPlaceholder.react","CometPressable.react","CometRelay","CometVariablesTheme.react","ConsentInteractionsLogger","ConsentTemplateActionCallbacksContext","CrossFilled24.svg.react","FDSButton.react","FDSCircleButton.react","FDSDialogContainer.react","FDSDialogLoadingState.react","FDSIcon.react","FDSText.react","UOOMConsentTemplateConfig","UOOMFacebookIntroScreenOnFlowEndMutation.graphql","UOOMFacebookIntroScreenOnFlowStartMutation.graphql","UOOMFacebookIntroScreenProductDataQuery.graphql","react","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d,m,p=m||(m=o("react")),_=m,f=_.useEffect,g=_.useMemo,h=_.useRef,y={bodyDesktop:{display:"x1lliihq x142wc1w",$$css:!0},bodyMobile:{display:"x1s85apg x1x77nfp",$$css:!0},closeButtonWrapper:{display:"x78zum5",$$css:!0},desktopCloseButton:{display:"x78zum5 x142wc1w",$$css:!0},dialogOverride:{"--dialog-corner-radius":"xq27zc8",alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",minHeight:"xg6iff7","@media (max-width: 679px)_paddingInlineStart":"x1rpp92y","@media (max-width: 679px)_paddingInlineEnd":"xwjh8uw","@media (max-width: 679px)_paddingLeft":null,"@media (max-width: 679px)_paddingRight":null,$$css:!0},footer:{paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib",paddingBottom:"xsag5q8","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},header:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"xz9dl7a","@media (max-width: 679px)_paddingTop":"x1y0ix2f",$$css:!0},headerTitle:{paddingTop:"x1p5oq8j",textAlign:"x2b8uid","@media (max-width: 679px)_paddingTop":"x1k902ro","@media (max-width: 679px)_textAlign":"x1j8oh5e",$$css:!0},imageThumbnail:{alignSelf:"xamitd3",height:"xpyat2d",maxHeight:"x569fbc",maxWidth:"xazcve0",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"x1exxlbk","@media (max-width: 679px)_marginTop":"xxtkh0h",$$css:!0},mobileCloseButton:{display:"x1s85apg xxx7516",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1qughib",minHeight:"x879a55",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},primaryButton:{paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,paddingTop:"x1iorvi4",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},section:{paddingBottom:"x10b6aqq",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},sectionParagraph:{paddingTop:"xyamay9",textAlign:"x2b8uid","@media (max-width: 679px)_paddingTop":"x1e8b02o","@media (max-width: 679px)_textAlign":"x1j8oh5e",$$css:!0}},C=e!==void 0?e:e=n("UOOMFacebookIntroScreenProductDataQuery.graphql"),b=c!==void 0?c:c=n("UOOMFacebookIntroScreenOnFlowStartMutation.graphql"),v=d!==void 0?d:d=n("UOOMFacebookIntroScreenOnFlowEndMutation.graphql");function S(e){var t=e.onDismiss,n=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),a=n.onBacked,l=n.onContinued,c=t!=null?t:a,d="headlineEmphasized2",m=r("useCurrentDisplayMode")(),_=m==="dark",S=o("Actor").useActor(),R=S[0],L=o("CometRelay").useLazyLoadQuery(C,{}),E=o("CometRelay").useMutation(b),k=E[0],I=o("CometRelay").useMutation(v),T=I[0],D=g(function(){if((L==null?void 0:L.gpc_signal_reconciliation_logging_product_data)!=null)try{return JSON.parse(L.gpc_signal_reconciliation_logging_product_data)}catch(e){return{}}return{}},[L==null?void 0:L.gpc_signal_reconciliation_logging_product_data]),x=g(function(){return{config_enum:"gpc_signal_reconciliation_intro_prompt",flow_category:"gpc_signal_reconciliation",flow_name:"gpc_signal_reconciliation",owner:"gpc_signal_reconciliation",product_data:D,user_id:R}},[D,R]);f(function(){var e=window.setTimeout(function(){var e;(e=document.activeElement)==null||e.blur()},0);return function(){return window.clearTimeout(e)}},[]);var $=h(!1);return f(function(){$.current||($.current=!0,o("ConsentInteractionsLogger").logFlowStart(x),o("ConsentInteractionsLogger").logImpression(x),k({onCompleted:function(){},onError:function(){},variables:{}}))},[]),p.jsx(r("CometVariablesTheme.react"),{children:p.jsx(r("CometPlaceholder.react"),{fallback:p.jsx(r("FDSDialogLoadingState.react"),{withCloseButton:!1}),name:i.id,children:p.jsxs(r("FDSDialogContainer.react"),{anchorXStyle:y.dialogOverride,disableClosingWithMask:!0,size:"medium",children:[p.jsxs(r("BaseRow.react"),{xstyle:y.navbar,children:[p.jsx(r("BaseRow.react"),{expanding:!0}),p.jsxs(r("BaseView.react"),{xstyle:y.closeButtonWrapper,children:[p.jsx(r("CometPressable.react"),{"aria-label":s._(/*BTDS*/"Close"),onPress:function(){o("ConsentInteractionsLogger").logDismissFlow(x),o("ConsentInteractionsLogger").logDismiss(x),T({onCompleted:function(){},onError:function(){},variables:{}}),c()},xstyle:y.mobileCloseButton,children:p.jsx(r("FDSIcon.react"),{icon:r("CrossFilled24.svg.react"),size:24})}),p.jsx(r("BaseView.react"),{xstyle:y.desktopCloseButton,children:p.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Close"),icon:r("CrossFilled24.svg.react"),iconRatio:"large",onPress:function(){o("ConsentInteractionsLogger").logDismissFlow(x),o("ConsentInteractionsLogger").logDismiss(x),T({onCompleted:function(){},onError:function(){},variables:{}}),c()},size:32})})]})]}),p.jsxs(r("BaseView.react"),{xstyle:[y.root,y.header],children:[p.jsx(r("CometColumn.react"),{align:"center",children:p.jsx(r("CometColumnItem.react"),{children:p.jsx(r("BaseView.react"),{xstyle:y.imageThumbnail,children:p.jsx(r("CometBackgroundImage.react"),{src:u(_?"870432":"870434")})})})}),p.jsx(r("BaseView.react"),{xstyle:y.headerTitle,children:p.jsx(r("FDSText.react"),{color:"primary",isPrimaryHeading:!0,type:d,children:s._(/*BTDS*/"Review your Ad preferences")})})]}),p.jsx(r("BaseView.react"),{xstyle:[y.root,y.section],children:p.jsxs(r("BaseView.react"),{xstyle:y.sectionParagraph,children:[p.jsx(r("BaseView.react"),{xstyle:y.bodyDesktop,children:p.jsx(r("FDSText.react"),{color:"secondary",type:"body1",children:s._(/*BTDS*/"A universal opt-out control has changed one of your ad settings. You can review and update this ad setting now.")})}),p.jsx(r("BaseView.react"),{xstyle:y.bodyMobile,children:p.jsx(r("FDSText.react"),{color:"secondary",type:"body3",children:s._(/*BTDS*/"A universal opt-out control has changed one of your ad settings. You can review and update this ad setting now.")})})]})}),p.jsx(r("BaseRow.react"),{expanding:!0}),p.jsx(r("BaseView.react"),{xstyle:[y.root,y.footer],children:p.jsx(r("BaseView.react"),{xstyle:y.footerButtons,children:p.jsx(r("BaseRow.react"),{expanding:!0,children:p.jsx(r("BaseView.react"),{xstyle:y.footerButtonsContainer,children:p.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:y.primaryButton,children:p.jsx(r("FDSButton.react"),{disabled:!1,label:s._(/*BTDS*/"Review now"),onPress:function(){o("ConsentInteractionsLogger").logAccept(x),l(o("UOOMConsentTemplateConfig").ConsentTemplatePrompts.UOOM_CONSENT_PROMPT)},size:"medium",type:"primary"})})})})})})]})})})}S.displayName=S.name+" [from "+i.id+"]",l.default=S}),226);
__d("UOOMInstagramIntroScreenOnFlowEndMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="32995009390142919"}),null);
__d("UOOMInstagramIntroScreenOnFlowEndMutation.graphql",["UOOMInstagramIntroScreenOnFlowEndMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"gpc_signal_reconciliation_on_flow_end",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMInstagramIntroScreenOnFlowEndMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMInstagramIntroScreenOnFlowEndMutation",selections:e},params:{id:n("UOOMInstagramIntroScreenOnFlowEndMutation_facebookRelayOperation"),metadata:{},name:"UOOMInstagramIntroScreenOnFlowEndMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("UOOMInstagramIntroScreenOnFlowStartMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="32361073063539388"}),null);
__d("UOOMInstagramIntroScreenOnFlowStartMutation.graphql",["UOOMInstagramIntroScreenOnFlowStartMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"gpc_signal_reconciliation_on_flow_start",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMInstagramIntroScreenOnFlowStartMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMInstagramIntroScreenOnFlowStartMutation",selections:e},params:{id:n("UOOMInstagramIntroScreenOnFlowStartMutation_facebookRelayOperation"),metadata:{},name:"UOOMInstagramIntroScreenOnFlowStartMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("UOOMInstagramIntroScreenProductDataQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24480138408335381"}),null);
__d("UOOMInstagramIntroScreenProductDataQuery.graphql",["UOOMInstagramIntroScreenProductDataQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"gpc_signal_reconciliation_logging_product_data",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UOOMInstagramIntroScreenProductDataQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UOOMInstagramIntroScreenProductDataQuery",selections:e},params:{id:n("UOOMInstagramIntroScreenProductDataQuery_facebookRelayOperation"),metadata:{},name:"UOOMInstagramIntroScreenProductDataQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("UOOMInstagramIntroScreen.react",["fbt","Actor","BaseRow.react","BaseRowItem.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometImage.react","CometPlaceholder.react","CometRelay","ConsentInteractionsLogger","ConsentTemplateActionCallbacksContext","IGDSBox.react","IGDSButton.react","IGDSDialogContainer.react","IGDSDialogLoadingState.react","IGDSIconButton.react","IGDSText.react","IGDSXPanoOutlineIcon.react","PolarisBaseThemeDisplayModeWrapper.react","PolarisIGTheme.react","UOOMConsentTemplateConfig","UOOMInstagramIntroScreenOnFlowEndMutation.graphql","UOOMInstagramIntroScreenOnFlowStartMutation.graphql","UOOMInstagramIntroScreenProductDataQuery.graphql","emptyFunction","react","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=d,_=p.useEffect,f=p.useMemo,g=p.useRef,h={desktop:{footer:64,header:64,navbar:16,section:64},mobile:32},y={footer:{paddingBottom:"x84yb8i xqhem2w",paddingInlineStart:"x7vhb2i x1t4wfpm",paddingLeft:null,paddingRight:null,paddingInlineEnd:"xli2wwf xnfz16y",paddingTop:"x1ow4hk9 x1y8xl2v",$$css:!0},footerButtons:{flexWrap:"x8hhl5t",justifyContent:"x1qughib","@media (max-width: 679px)_bottom":"xefnots","@media (max-width: 679px)_insetInlineEnd":"x438uni","@media (max-width: 679px)_insetInlineStart":"xxalm91","@media (max-width: 679px)_left":null,"@media (max-width: 679px)_right":null,"@media (max-width: 679px)_position":"xv7j57z",$$css:!0},footerButtonsContainer:{alignItems:"x1qjc9v5",flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},header:{marginTop:"xabbe9j",paddingInlineStart:"x7vhb2i x1t4wfpm",paddingLeft:null,paddingRight:null,paddingInlineEnd:"xli2wwf xnfz16y",paddingTop:"x1p5oq8j x1y0ix2f",$$css:!0},headerHero:{alignItems:"x6s0dn4",$$css:!0},headerTitle:{paddingTop:"x1cnzs8 x1gplw2q",$$css:!0},navbar:{alignItems:"x6s0dn4",justifyContent:"x1nhvcw1",minHeight:"x1qafhyn x1ujafp0",paddingInlineStart:"xf7dkkf x1t4wfpm",paddingLeft:null,paddingRight:null,paddingInlineEnd:"xv54qhq xnfz16y",paddingTop:"x1mvjyk6",$$css:!0},primaryButton:{paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0},section:{paddingBottom:"x1gan7if x12360ty",paddingInlineStart:"x7vhb2i x1t4wfpm",paddingLeft:null,paddingRight:null,paddingInlineEnd:"xli2wwf xnfz16y",$$css:!0},sectionParagraph:{paddingTop:"xyamay9 x1dj7lud",$$css:!0}},C=e!==void 0?e:e=n("UOOMInstagramIntroScreenProductDataQuery.graphql"),b=u!==void 0?u:u=n("UOOMInstagramIntroScreenOnFlowStartMutation.graphql"),v=c!==void 0?c:c=n("UOOMInstagramIntroScreenOnFlowEndMutation.graphql");function S(e){var t=e.onDismiss,n=o("ConsentTemplateActionCallbacksContext").useConsentTemplateActionCallbacks(),a=n.onBacked,l=n.onContinued,u=t!=null?t:a,c=r("useCurrentDisplayMode")(),d=c==="dark",p=o("Actor").useActor(),h=p[0],S=o("CometRelay").useLazyLoadQuery(C,{}),R=o("CometRelay").useMutation(b),L=R[0],E=o("CometRelay").useMutation(v),k=E[0],I=f(function(){if((S==null?void 0:S.gpc_signal_reconciliation_logging_product_data)!=null)try{return JSON.parse(S.gpc_signal_reconciliation_logging_product_data)}catch(e){return{}}return{}},[S==null?void 0:S.gpc_signal_reconciliation_logging_product_data]),T=f(function(){return{config_enum:"gpc_signal_reconciliation_intro_prompt",flow_category:"gpc_signal_reconciliation",flow_name:"gpc_signal_reconciliation",owner:"gpc_signal_reconciliation",product_data:I,user_id:h}},[I,h]);_(function(){var e=window.setTimeout(function(){var e;(e=document.activeElement)==null||e.blur()},0);return function(){return window.clearTimeout(e)}},[]);var D=g(!1);return _(function(){D.current||(D.current=!0,o("ConsentInteractionsLogger").logFlowStart(T),o("ConsentInteractionsLogger").logImpression(T),L({onCompleted:function(){},onError:function(){},variables:{}}))},[]),m.jsx(o("PolarisIGTheme.react").IGThemeProvider,{children:m.jsx(r("PolarisBaseThemeDisplayModeWrapper.react"),{children:m.jsx(r("CometPlaceholder.react"),{fallback:m.jsx(r("IGDSDialogLoadingState.react"),{onClose:r("emptyFunction")}),name:i.id,children:m.jsxs(r("IGDSDialogContainer.react"),{disableClosingWithMask:!0,onClose:u,size:"large",children:[m.jsx(r("BaseRow.react"),{xstyle:y.navbar,children:m.jsx(r("IGDSIconButton.react"),{onClick:function(){o("ConsentInteractionsLogger").logDismissFlow(T),o("ConsentInteractionsLogger").logDismiss(T),k({onCompleted:function(){},onError:function(){},variables:{}}),u()},padding:0,children:m.jsx(r("IGDSBox.react"),{alignItems:"center",height:20,justifyContent:"center",position:"relative",width:20,children:m.jsx(r("IGDSXPanoOutlineIcon.react"),{alt:s._(/*BTDS*/"Close"),size:20})})})}),m.jsxs(r("BaseView.react"),{xstyle:[y.root,y.header],children:[m.jsx(r("CometColumn.react"),{align:"stretch",xstyle:y.headerHero,children:m.jsxs(r("CometColumnItem.react"),{children:[m.jsx("div",{className:"x1lliihq x142wc1w",children:m.jsx(r("CometImage.react"),{alt:"",height:96,src:d?"/images/assets_DO_NOT_HARDCODE/oba_winback/OBAwinback-DM-IG_dark-4x.png":"/images/assets_DO_NOT_HARDCODE/oba_winback/OBAwinback-LM-IG_light-4x.png",width:96})}),m.jsx("div",{className:"x1s85apg x1x77nfp",children:m.jsx(r("CometImage.react"),{alt:"",height:64,src:d?"/images/assets_DO_NOT_HARDCODE/oba_winback/OBAwinback-DM-IG_dark-4x.png":"/images/assets_DO_NOT_HARDCODE/oba_winback/OBAwinback-LM-IG_light-4x.png",width:64})})]})}),m.jsxs(r("BaseView.react"),{xstyle:y.headerTitle,children:[m.jsx("div",{className:"x1lliihq x142wc1w",children:m.jsx(r("IGDSText.react"),{color:"primaryText",size:"headline2",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"Review your Ad preferences")})}),m.jsx("div",{className:"x1s85apg x1x77nfp",children:m.jsx(r("IGDSText.react"),{color:"primaryText",size:"headline3",textAlign:"start",weight:"bold",children:s._(/*BTDS*/"Review your Ad preferences")})})]})]}),m.jsx(r("BaseView.react"),{xstyle:[y.root,y.section],children:m.jsx(r("BaseView.react"),{xstyle:y.sectionParagraph,children:m.jsx("div",{className:"x1yc453h x10jh483",children:m.jsx(r("IGDSText.react"),{color:"primaryText",size:"body",textAlign:"start",weight:"normal",children:s._(/*BTDS*/"A universal opt-out control has changed one of your ad settings. You can review and update this ad setting now.")})})})}),m.jsx(r("BaseRow.react"),{expanding:!0}),m.jsx(r("BaseView.react"),{xstyle:[y.root,y.footer],children:m.jsx(r("BaseView.react"),{xstyle:y.footerButtons,children:m.jsx(r("BaseRow.react"),{expanding:!0,children:m.jsx(r("BaseView.react"),{xstyle:y.footerButtonsContainer,children:m.jsx(r("BaseRowItem.react"),{expanding:!0,xstyle:y.primaryButton,children:m.jsx(r("IGDSButton.react"),{display:"block",label:s._(/*BTDS*/"Review now"),onClick:function(){o("ConsentInteractionsLogger").logAccept(T),l(o("UOOMConsentTemplateConfig").ConsentTemplatePrompts.UOOM_CONSENT_PROMPT)},size:"large",variant:"primary"})})})})})})]})})})})}S.displayName=S.name+" [from "+i.id+"]",l.default=S}),226);
__d("useConsentTemplateFlowConfig",["ConsentTemplateFlowContext","ConsentTemplateFlows","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=o("ConsentTemplateFlowContext").useConsentTemplateFlow(),t=s(function(){return o("ConsentTemplateFlows").getConsentTemplateFlowConfig(e)},[e]);return t}l.default=u}),98);
__d("ConsentFlowName",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACV_FB_1ST_TIME_3PD_CONSENT:"acv_fb_1st_time_3pd_consent",ACV_FB_CONSENT_DEBUT_2ND:"acv_fb_consent_debut_2nd",ACV_FB_CONSENT_DEBUT_2ND_RECONSIDER:"acv_fb_consent_debut_2nd_reconsider",ACV_FB_CONSENT_DEBUT_BLOCKING:"acv_fb_consent_debut_blocking",ACV_FB_CONSENT_DEBUT_CONFIRMATION:"acv_fb_consent_debut_confirmation",ACV_FB_CONSENT_DEBUT_RECONSIDER:"acv_fb_consent_debut_reconsider",ACV_FB_HEADLINE:"acv_fb_headline",ACV_FB_OBA_WINBACK_NON_CONSENT_REGION:"acv_fb_oba_winback_non_consent_region",ACV_FB_OBA_WINBACK_NON_CONSENT_REGION_DISMISSIBLE:"acv_fb_oba_winback_non_consent_region_dismissible",ACV_FB_UNCONSENTED_WINBACK:"acv_fb_unconsented_winback",ACV_IG_CONSENT_DEBUT_CONFIRMATION:"acv_ig_consent_debut_confirmation",ACV_IG_OBA_WINBACK_NON_CONSENT_REGION:"acv_ig_oba_winback_non_consent_region",ACV_IG_OBA_WINBACK_NON_CONSENT_REGION_DISMISSIBLE:"acv_ig_oba_winback_non_consent_region_dismissible",ACV_INLINE_CONTROL_WINBACKS_HARDMATCHED:"acv_inline_control_winbacks_hardmatched",ACV_PCD_REFRESH_BLOCKING:"acv_pcd_refresh_blocking",ACV_PCD_REFRESH_DISMISSIBLE:"acv_pcd_refresh_dismissible",AD_FREE_SUBSCRIPTION:"ad_free_subscription",AD_FREE_SUBSCRIPTION_UK:"ad_free_subscription_uk",AD_FREE_SUBSCRIPTION_UPGRADE:"ad_free_subscription_upgrade",AD_FREE_SUBSCRIPTION_WAMO_LINKED:"ad_free_subscription_wamo_linked",AD_FREE_SUBSCRIPTION_WAMO_UNLINKED:"afs_wamo_unlinked",AD_FREE_SUBSCRIPTION_WAMO_UPGRADE:"ad_free_subscription_wamo_upgrade",AD_PREFERENCE_WAMO_UNLINKED:"ad_preference_wamo_unlinked",AFS_WAMO_INCLUDE_STATUS_CHANNELS:"afs_wamo_include_status_channels",AFS_WAMO_LINKED_GATEWAY:"afs_wamo_linked_gateway",ANDROID_LAT_OBA_3PD_BLOCKING:"android_lat_oba_3pd_blocking",ANDROID_LAT_OBA_3PD_DISMISSIBLE:"android_lat_oba_3pd_dismissible",ATT_IOS_DEMO:"att_ios_demo",BASIC_ADS_ONBOARDING:"basic_ads_onboarding",BUY_WITH_PRIME:"buy_with_prime",BUY_WITH_PRIME_JEWEL_WINBACK:"buy_with_prime_jewel_winback",BUY_WITH_PRIME_TEST:"buy_with_prime_test",BUY_WITH_PRIME_TWO_SCREEN:"buy_with_prime_two_screen",BUY_WITH_PRIME_UNIVERSAL_LINK:"buy_with_prime_universal_link",BUY_WITH_SHOPEE:"buy_with_shopee",BUY_WITH_SHOPEE_TWO_SCREEN:"buy_with_shopee_two_screen",CA_SETTLEMENT_AUSTRALIA:"ca_settlement_australia",CALENDAR_ACCESS:"calendar_access",CELEB_BAIT_EXPLICIT_CONSENT:"celeb_bait_explicit_consent",CONFIRMACCOUNTS:"confirmaccounts",CONFIRMACCOUNTS_TURKEY:"confirmaccounts_turkey",CONSENT_APP_BLOCKING_DEMO:"consent_app_blocking_demo",CONSENT_NEXT_3PD:"consent_next_3pd",CONSENT_REGION_TRANSITION_3PD_BLOCKING:"consent_region_transition_3pd_blocking",CONSENT_REGION_TRANSITION_3PD_DISMISSIBLE:"consent_region_transition_3pd_dismissible",CONSENTS_BROWSER_TECHNOLOGICAL:"consents_browser_technological",CONSENTZERO:"consentzero",CONTACT_IMPORT_M4A_DISCLOSURE:"contact_import_m4a_disclosure",CONTEXTUAL_META_FLOW:"contextual_meta_flow",CREATOR_INELIGIBLE_COUNTRY_APPEAL:"creator_ineligible_country_appeal",CUSTOM_GENDER_CONSENT:"custom_gender_consent",DATA_COMBINATION_CHAINED_FLOW:"data_combination_chained_flow",DATA_COMBINATION_DETAIL:"data_combination_detail",DATA_COMBINATION_QP_MSGR:"data_combination_qp_msgr",DATA_SLICE_3PD_DEPRECATION:"data_slice_3pd_deprecation",DEMA_DATA_COMBINATION_FLOW:"dema_data_combination_flow",DEMO_ACCOUNTS_CENTER_INTEGRATION:"demo_accounts_center_integration",DEMO_BACKGROUND_CUSTOM_ACTION:"demo_background_custom_action",DEMO_COMPONENT_LIBRARY:"demo_component_library",DEMO_CONTEXTUAL_FLOW:"demo_contextual_flow",DEMO_DYNAMIC:"demo_dynamic",DEMO_EXTRA_PARAMS:"demo_extra_params",DEMO_FLOW_CHAINING_FIRST:"demo_flow_chaining_first",DEMO_FLOW_CHAINING_SECOND:"demo_flow_chaining_second",DEMO_INFO:"demo_info",DEMO_MODULARIZED_GDPR:"demo_modularized_gdpr",DEMO_MULTISTEP:"demo_multistep",DEMO_PROMPT:"demo_prompt",DEMO_QP:"demo_qp",DEMO_RL_CONFIRM_ACCOUNTS:"demo_rl_confirm_accounts",DEMO_USER_ACTION_LAUNCH_ACCOUNTS_CENTER:"demo_user_action_launch_accounts_center",DEMO_USER_ACTION_REQUEST_PAYMENT:"demo_user_action_request_payment",DEMO_USER_ACTION_REQUEST_PERMISSION:"demo_user_action_request_permission",DEMO_USER_CUSTOM_ACTION:"demo_user_custom_action",DEPRECATED_FLOW_PLACEHOLDER:"deprecated_flow_placeholder",DEVICE_LOGIN:"device_login",DEVICE_LOGIN_INVALID_CODE:"device_login_invalid_code",DEVICE_PERMISSION_CAMERA:"device_permission_camera",DEVICE_PERMISSION_CONTACTS:"device_permission_contacts",DEVICE_PERMISSION_MICROPHONE:"device_permission_microphone",DEVICE_PERMISSION_PHOTOS:"device_permission_photos",DEVICE_PERMISSION_SETTINGS:"device_permission_settings",DEVICE_PERMISSIONS_INSTRUCTIONS:"device_permissions_instructions",DMA_ACCOUNT_REGISTRATION_DELAY_NOTIF_QP_FLOW:"dma_account_registration_delay_notif_qp_flow",DMA_CONFIRMATION:"dma_confirmation",DMA_DISMISSIBLE_APP_UPGRADE:"dma_dismissible_app_upgrade",DMA_FORCE_APP_UPGRADE:"dma_force_app_upgrade",EPD_MARKETPLACE_MESSAGING_UPDATE:"epd_marketplace_messaging_update",EVERGREEN_WINBACK_GDPR_INTERSTITIAL:"evergreen_winback_gdpr_interstitial",EVERGREEN_WINBACK_GDPR_JEWEL:"evergreen_winback_gdpr_jewel",EVERGREEN_WINBACK_GDPR_TOF:"evergreen_winback_gdpr_tof",EVERGREEN_WINBACK_HIGH_RISK_INTERSTITIAL:"evergreen_winback_high_risk_interstitial",EVERGREEN_WINBACK_HIGH_RISK_JEWEL:"evergreen_winback_high_risk_jewel",EVERGREEN_WINBACK_INLINE_CONTROL_INTERSTITIAL:"evergreen_winback_inline_control_interstitial",EXAMPLE_ACV:"example_acv",EXP_CONFIRM_ACCOUNTS_FLOW:"exp_confirm_accounts_flow",FB_AGE_COLLECTION:"fb_age_collection",FB_DMA_DATING:"fb_dma_dating",FB_DMA_GAMING:"fb_dma_gaming",FB_DMA_MARKETPLACE:"fb_dma_marketplace",FB_GEMSTONE:"fb_gemstone",FB_PROFILE_CUSTOM_GENDER:"fb_profile_custom_gender",FB_PROFILE_POLITICAL_VIEWS:"fb_profile_political_views",FB_PROFILE_RELIGIOUS_VIEWS:"fb_profile_religious_views",FIRST_PARTY_LOGIN:"first_party_login",FLM_AR_EFFECT:"flm_ar_effect",FLM_MK_AR_EFFECT_CHILD_ASK_PERMISSION:"flm_mk_ar_effect_child_ask_permission",FLM_MK_AR_EFFECT_PARENT_CONSENT:"flm_mk_ar_effect_parent_consent",FLORIDA_YOUTH_DATA_USE:"florida_youth_data_use",FRIEND_MAP_LOCATION_SHARING_DEVICE_PERMISSIONS:"friend_map_location_sharing_device_permissions",GAMING_GDP:"gaming_gdp",GDP:"gdp",GDP_COMPLETION:"gdp_completion",GDP_COOKIE:"gdp_cookie",GDP_COOKIE_ALLOWLIST:"gdp_cookie_allowlist",GDP_CRAYTA:"gdp_crayta",GDP_OPTIN:"gdp_optin",GDPR:"gdpr",GDPR_NEW_3PD:"gdpr_new_3pd",GDPR_SCD:"gdpr_scd",GPC_SIGNAL_RECONCILIATION:"gpc_signal_reconciliation",HORIZON_CALENDAR_APP_LINK:"horizon_calendar_app_link",HZW_DEAPP_PERMISSION_NOTICE_FLOW:"hzw_deapp_permission_notice_flow",HZW_DEAPP_PERMISSION_TELEMETRY_NOTICE_FLOW:"hzw_deapp_permission_telemetry_notice_flow",IG_ACV_AFN_META_INITIATED:"ig_acv_afn_meta_initiated",IG_ACV_CONSENT_DEBUT:"ig_acv_consent_debut",IG_ACV_CONSENT_DEBUT_2:"ig_acv_consent_debut_2",IG_ACV_CONSENT_DEBUT_BLOCKING:"ig_acv_consent_debut_blocking",IG_ACV_CONSENT_DEBUT_RECONSIDER:"ig_acv_consent_debut_reconsider",IG_ACV_CONSENT_DEBUT_RECONSIDER_2:"ig_acv_consent_debut_reconsider_2",IG_ACV_CONTEXTUAL_IAW:"ig_acv_contextual_iaw",IG_ACV_HIDE_AD:"ig_acv_hide_ad",IG_ACV_REELS_ADS_WINBACK:"ig_acv_reels_ads_winback",IG_ACV_WAIST_BACK_WINBACK:"ig_acv_waist_back_winback",IG_ACV_WAIST_MENU_WINBACK:"ig_acv_waist_menu_winback",IG_ACV_WINBACK:"ig_acv_winback",IG_BIZ_LOGIN_OAUTH:"ig_biz_login_oauth",IG_FIRST_TIME_CONSENT:"ig_first_time_consent",IG_IMAGINE_ME_CREATOR_TEMPLATES_CONSENT_FLOW:"ig_imagine_me_creator_templates_consent_flow",IG_MAGIC_MOD_CONSENT_FLOW:"ig_magic_mod_consent_flow",IG_THIRD_PARTY_OAUTH:"ig_third_party_oauth",IGAFSAPP_UPGRADE_BLOCKING_FLOW:"igafsapp_upgrade_blocking_flow",INLINE_3PD_CONTROL_LEARN_HOW:"inline_3pd_control_learn_how",INLINE_CONTROL_WINBACKS:"inline_control_winbacks",IOS14_ATT_FINAL_INTERSTITIAL:"ios14_att_final_interstitial",IOS14_ATT_FINAL_INTERSTITIAL_WITH_LEARN_MORE:"ios14_att_final_interstitial_with_learn_more",IOS14_ATT_WINBACKS:"ios14_att_winbacks",IOS14_ATT_WINBACKS_LEARN_MORE:"ios14_att_winbacks_learn_more",LGPD:"lgpd",LGPD_CONTEXTUAL_BIOMETRIC:"lgpd_contextual_biometric",LGPD_CONTEXTUAL_SCD:"lgpd_contextual_scd",LGPD_CONTEXTUAL_THIRD_PARTY:"lgpd_contextual_third_party",LGPD_MIGRATED:"lgpd_migrated",LIPSYNC_CONSENT_FLOW:"lipsync_consent_flow",LIVE_LOCATION_SHARING_DEVICE_PERMISSION:"live_location_sharing_device_permission",LOCAL_NETWORK:"local_network",LOCATION_ANDROID_10_BUCKET_1:"location_android_10_bucket_1",LOCATION_ANDROID_CUSTOM_BACKGROUND:"location_android_custom_background",LOCATION_ANDROID_DOWNGRADE:"location_android_downgrade",LOCATION_ANDROID_UNIFIED_LOGIN_NUX:"location_android_unified_login_nux",LOCATION_CHECK_IN:"location_check_in",LOCATION_DEVICE_PERMISSION:"location_device_permission",LOCATION_DEVICE_PERMISSION_FB:"location_device_permission_fb",LOCATION_DEVICE_PERMISSION_V2:"location_device_permission_v2",LOCATION_HISTORY_UPSELL:"location_history_upsell",LOCATION_IOS_DOWNGRADE:"location_ios_downgrade",LOCATION_LS_RESURRECTION:"location_ls_resurrection",LOCATION_NEARBY_FRIENDS_RESURRECTION:"location_nearby_friends_resurrection",LOCATION_SERVICES:"location_services",LOCATION_SERVICES_ALWAYS:"location_services_always",LOCATION_SERVICES_FOREGROUND:"location_services_foreground",LOYALTY_WELCOME_CONSENT:"loyalty_welcome_consent",LPA_TRANSPARENCY_FB_FLOW:"lpa_transparency_fb_flow",LPA_TRANSPARENCY_IG_FLOW:"lpa_transparency_ig_flow",MARKETPLACE_TRUSTED_PROGRAM_LOCATION_VERIFICATION:"marketplace_trusted_program_location_verification",MEDIA_ACCESS:"media_access",MESSAGING_TRANSPARENCY_IAB:"messaging_transparency_iab",MP_DMA_CONSENT:"mp_dma_consent",MPI_BUYER_LOCATION_VERIFICATION:"mpi_buyer_location_verification",MPILOCATION_VERIFICATION:"mpilocation_verification",MWA_DEMO_FLOW:"mwa_demo_flow",NDX:"ndx",NDX_EMAIL_ACQUISITION:"ndx_email_acquisition",NDX_LOCATION:"ndx_location",NDX_LOCATION_DPK:"ndx_location_dpk",NDX_PHONE_ACQUISITION:"ndx_phone_acquisition",NEARBY_FRIENDS:"nearby_friends",NEW_USERS_META_FLOW:"new_users_meta_flow",OBA_STATUS_RECONCILIATION_CONSENT_REGION_LOW_RISK_BLOCKING:"oba_status_reconciliation_consent_region_low_risk_blocking",OBA_STATUS_RECONCILIATION_CONSENT_REGION_LOW_RISK_DISMISSIBLE:"oba_status_reconciliation_consent_region_low_risk_dismissible",OBA_STATUS_RECONCILIATION_NON_CONSENT_REGION_BLOCKING:"oba_status_reconciliation_non_consent_region_blocking",OBA_STATUS_RECONCILIATION_NON_CONSENT_REGION_DISMISSIBLE:"oba_status_reconciliation_non_consent_region_dismissible",OPT_IN_TRIAL_PRE_CONSENT_INTERSTITIAL_3PD:"opt_in_trial_pre_consent_interstitial_3pd",PARENTAL_CONSENT_SCD:"parental_consent_scd",PARENTAL_CONSENT_THIRD_PARTY:"parental_consent_third_party",PDP_EMAIL_ACQUISITION:"email_acquisition",PDP_PREFILL_EMAIL_UPDATE:"prefill_email_update",PDPA:"pdpa",PE_CONSENT_RECONCILIATION:"pe_consent_reconciliation",PE_CONSENT_RECONCILIATION_INTERSTITIAL:"pe_consent_reconciliation_interstitial",PHONE_NUMBER_ACQUISITION:"phone_number_acquisition",PHONE_NUMBER_ACQUISITION_EVERGREEN_QP:"phone_number_acquisition_evergreen_qp",PHONE_NUMBER_UPDATE_EVERGREEN_QP:"phone_number_update_evergreen_qp",PHONE_NUMBER_UPDATE_EVERGREEN_QP_WITH_STACKED_CTA:"phone_number_update_evergreen_qp_with_stacked_cta",PIPA:"pipa",POPIA:"popia",PRIVACY_EDUCATION_ADS_TOO_PERSON_QP:"privacy_education_ads_too_person_qp",PRIVACY_INCIDENT_NOTICE_DEFAULT_INTERSTITIAL:"privacy_incident_notice_default_interstitial",PRIVACY_POLICY_NOTICE_BLOCKING:"privacy_policy_notice_blocking",PRIVACY_POLICY_NOTICE_IG_TOU_NOTIF:"privacy_policy_notice_ig_tou_notif",PRIVACY_POLICY_NOTICE_NON_BLOCKING:"privacy_policy_notice_non_blocking",PRIVACY_POLICY_NOTICE_NON_BLOCKING_ACCEPT:"privacy_policy_notice_non_blocking_accept",PRIVACY_POLICY_NOTICE_TEST_CMS:"privacy_policy_notice_test_cms",PRIVACY_POLICY_NOTICE_TEST_DEMO:"privacy_policy_notice_test_demo",PRIVACY_POLICY_NOTICE_USECASE:"privacy_policy_notice_usecase",PRIVACY_POLICY_NOTICE_USECASE_BUNDLED_TERMS_NOTICE_2024:"privacy_policy_notice_usecase_bundled_terms_notice_2024",PRIVACY_POLICY_NOTICE_USECASE_DSA_2023:"privacy_policy_notice_usecase_dsa_2023",PRIVACY_POLICY_NOTICE_USECASE_DSA_NETHERLANDS_NOTICE:"privacy_policy_notice_usecase_dsa_netherlands_notice",PRIVACY_POLICY_NOTICE_USECASE_GENAI_2024:"privacy_policy_notice_usecase_genai_2024",PRIVACY_POLICY_NOTICE_USECASE_GENAI_2025_STITCH:"privacy_policy_notice_usecase_genai_2025_stitch",PRIVACY_POLICY_NOTICE_USECASE_GENAI_EU_TRANSPARENCY_2025:"privacy_policy_notice_usecase_genai_eu_transparency_2025",PRIVACY_POLICY_NOTICE_USECASE_GENAI_UK_BRAZIL_2024:"privacy_policy_notice_usecase_genai_uk_brazil_2024",PRIVACY_POLICY_NOTICE_USECASE_INDIA_ITRULES:"privacy_policy_notice_usecase_india_itrules",PRIVACY_POLICY_NOTICE_USECASE_INTERNAL_QA_TERMS_ART14:"privacy_policy_notice_usecase_internal_qa_terms_art14",PRIVACY_POLICY_NOTICE_USECASE_NOYB_2023:"privacy_policy_usecase_noyb_2023",PRIVACY_POLICY_NOTICE_USECASE_SEMIANNUAL_WITH_OAK:"privacy_policy_notice_usecase_semiannual_with_oak",PRIVACY_POLICY_NOTICE_USECASE_SOUTH_KOREA2025:"privacy_policy_notice_usecase_south_korea2025",PRIVACY_POLICY_NOTICE_USECASE_UK_2023:"privacy_policy_notice_usecase_uk_2023",RECONCILIATION_3PD:"reconciliation_3pd",RECONCILIATION_3PD_BLOCKING:"reconciliation_3pd_blocking",RL_ARCATA_EYE_TRACKING:"rl_arcata_eye_tracking",RL_ARCATA_FACE_TRACKING:"rl_arcata_face_tracking",RL_CHECKPOINT:"rl_checkpoint",RL_CONSENTZERO_MR:"rl_consentzero_mr",RL_FC_ENHANCED_SPATIAL_SERVICES:"rl_fc_enhanced_spatial_services",RL_FC_QUEST_HAND_TRACKING:"rl_fc_quest_hand_tracking",RL_FC_QUEST_TELEMETRY:"rl_fc_quest_telemetry",RL_FC_SALSA_PERSONALIZATION:"rl_fc_salsa_personalization",RL_GENERIC_COOKIE:"rl_generic_cookie",RL_GENERIC_DMA:"rl_generic_dma",RL_INTERNAL_E2E_TEST:"rl_internal_e2e_test",RL_INTERNAL_E2E_TEST_RESET_ELIGIBILITY_CONSENT_ZERO:"rl_internal_e2e_test_reset_eligibility_consent_zero",RL_INTERNAL_E2E_TEST_RESET_ELIGIBILITY_ESS_V2:"rl_internal_e2e_test_reset_eligibility_essv2",RL_INTERNAL_E2E_TEST_RESET_ELIGIBILITY_HAND_BODY_TRACKING:"rl_internal_e2e_test_reset_eligibility_hand_body_tracking",RL_INTERNAL_E2E_TEST_RESET_ELIGIBILITY_HAND_BODY_TRACKING_TELEMETRY:"rl_internal_e2e_test_reset_eligibility_hand_body_tracking_telemetry",RL_INTERNAL_E2E_TEST_RESET_ELIGIBILITY_SOCIAL_PRIVACY:"rl_internal_e2e_test_reset_eligibility_social_privacy",RL_INTERNAL_E2E_TEST_RESET_ELIGIBILITY_YOUTH_CONSENT:"rl_internal_e2e_test_reset_eligibility_youth_consent",RL_MR_ESS_V2:"rl_mr_ess_v2",RL_MWA_LIFESTYLE_CONSENT_FLOW:"rl_mwa_lifestyle_consent_flow",RL_MWA_TELEMETRY:"rl_mwa_telemetry",RL_MWA_TEST_FLOW:"rl_mwa_test_flow",RL_NUX_ADDITIONAL_PRIVACY_DATA:"rl_nux_additional_privacy_data",RL_OCULUS_HAND_BODY_TRACKING:"rl_oculus_hand_body_tracking",RL_OCULUS_HAND_BODY_TRACKING_WITH_TELEMETRY:"rl_oculus_hand_body_tracking_with_telemetry",RL_OCULUS_SALSA_HAND_BODY_TRACKING:"rl_oculus_salsa_hand_body_tracking",RL_OCULUS_TWILIGHT_NUX:"rl_oculus_twilight_nux",RL_OCULUS_TWILIGHT_NUX_EUREKA:"rl_oculus_twilight_nux_eureka",RL_OCULUS_VR_NUX_ESCAPE_HATCH:"rl_oculus_vr_nux_escape_hatch",RL_SOCIAL_PRIVACY_SETTING_DEDUP:"rl_social_privacy_setting_dedup",RL_SOCIAL_PRIVACY_SETTING_DEDUP_SALSA:"rl_social_privacy_setting_dedup_salsa",RL_TEST_HELLO_WORLD:"rl_test_hello_world",RL_TWILIGHT_TELEMETRY_DATA_CONSENT:"rl_twilight_telemetry_data_consent",SHOP_WITH_X:"shop_with_x",SLV_AI_DISCLOSURE:"slv_ai_disclosure",SLV_DISCLOSURE_AI:"slv_disclosure_ai",SLV_DISCLOSURE_SOCIAL:"slv_disclosure_social",SLV_DISCLOSURE_VOICE:"slv_disclosure_voice",SLV_PJ_RECONSENT:"slv_pj_reconsent",SLV_VOICE_PRIVACY_CHECKUP:"slv_voice_privacy_checkup",SUPPORT_PERSONALIZED_ADS_ATT_WINBACKS:"support_personalized_ads_att_winbacks",TEST_ADHAM_PLAYGROUND_FLOW:"test_adham_playground_flow",TEST_ANASTASIA_PLAYGROUND_FLOW:"test_anastasia_playground_flow",TEST_AUTO_LAYOUT_FLOW:"test_auto_layout_flow",TEST_BATCH_FLOW:"test_batch_flow",TEST_CHRIS_PLAYGROUND_FLOW:"test_chris_playground_flow",TEST_CUSTOM_COMPONENTS_FLOW:"test_custom_components_flow",TEST_E2E:"test_e2e",TEST_FLOW:"test_flow",TEST_LAYOUT_FLOW:"test_layout_flow",TEST_PREDEFINED_OUTCOME_FLOW:"test_predefined_outcome_flow",THIRD_PARTY_ACCOUNT_LINKING:"third_party_account_linking",THIRD_PARTY_ACCOUNT_LINKING_WA_YUKON:"third_party_account_linking_wa_yukon",TWILIGHT_APP_TELEMETRY_CONSENT:"twilight_app_telemetry_consent",TWO_FAC_PHONE_ACQUISITION:"two_fac_phone_acquisition",UFAC_SMS_SCARCE_V2_PHONE_ACQUISITION:"ufac_sms_scarce_v2_phone_acquisition",UNIFIED_CLEANUP:"unified_cleanup",USER_COOKIE_CHOICE_META:"user_cookie_choice_meta",USER_COOKIE_CHOICE_META_V2:"user_cookie_choice_meta_v2",USER_COOKIE_CHOICE_V2:"user_cookie_choice_v2",VR_SPATIAL_DATA:"vr_spatial_data",WAMO_TEST:"wamo_test",WEATHER:"weather",WIFI_ACCESS:"wifi_access",XFAC_LOCATION:"xfac_location",YOUTH_REGULATION_TEEN_REGISTRATION:"youth_regulation_teen_registration",YUKON_CDS_TEST_CUSTOM_COMPONENTS_FLOW:"yukon_cds_test_custom_components_flow",YUKON_CDS_TEST_LAYOUT_FLOW:"yukon_cds_test_layout_flow"});i.default=e}),66);
__d("ConsentSurface",[],(function(t,n,r,o,a,i){var e=Object.freeze({BARCELONA_ANDROID:"barcelona_android",BARCELONA_IOS:"barcelona_ios",BARCELONA_WEB:"barcelona_web",FACEBOOK_ANDROID:"facebook_android",FACEBOOK_COMET:"facebook_comet",FACEBOOK_IOS:"facebook_ios",FACEBOOK_IOS_PLAYGROUND:"facebook_ios_playground",FACEBOOK_LITE_ANDROID:"facebook_lite_android",FACEBOOK_LITE_KAIOS:"facebook_lite_kaios",FACEBOOK_MBASIC:"facebook_mbasic",FACEBOOK_MTOUCH:"facebook_mtouch",FACEBOOK_WEBBLOKS:"facebook_webbloks",FACEBOOK_WEBLITE:"facebook_weblite",INSTAGRAM_ANDROID:"instagram_android",INSTAGRAM_CARBON:"instagram_carbon",INSTAGRAM_IOS:"instagram_ios",INSTAGRAM_WEB:"instagram_web",MESSENGER_ANDROID:"messenger_android",MESSENGER_DESKTOP_ZERATUL:"messenger_desktop_zeratul",MESSENGER_DOT_COM:"messenger_dot_com",MESSENGER_IOS_LIGHTSPEED:"messenger_ios_lightspeed",MESSENGER_LITE_ANDROID:"messenger_lite_android",MESSENGER_LITE_BURRITO_ANDROID:"messenger_lite_burrito_android",MESSENGER_KIDS_TALK_ANDROID:"messenger_kids_talk_android",MESSENGER_KIDS_TALK_IOS:"messenger_kids_talk_ios",META_COMET:"meta_comet",META_DOT_COM:"meta_dot_com",META_AI_WEB:"meta_ai_web",OCULUS_COMET:"oculus_comet",PAGE_ADMIN_ANDROID:"page_admin_android",PAGE_ADMIN_IOS:"page_admin_ios",REALITY_LABS_ARCATA:"reality_labs_arcata",REALITY_LABS_MIRAMAR:"reality_labs_miramar",REALITY_LABS_OFFLINE:"reality_labs_offline",REALITY_LABS_STINSON:"reality_labs_stinson",REALITY_LABS_VENTURA:"reality_labs_ventura",TWILIGHT_ANDROID:"twilight_android",TWILIGHT_IOS:"twilight_ios",WEARABLES_ANDROID:"wearables_android",WEARABLES_IOS:"wearables_ios",WHATSAPP_ANDROID:"whatsapp_android",WHATSAPP_IOS:"whatsapp_ios",WHATSAPP_WEB:"whatsapp_web",UNKNOWN:"unknown"});i.default=e}),66);
__d("ConsentTemplatePromptScreen.react",["ConsentTemplateGeneralizedConsentLoggingContext","useConsentTemplateFlowConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.currentConsentPrompt,n=e.surface,a=o("ConsentTemplateGeneralizedConsentLoggingContext").useConsentTemplateGeneralizedConsentLoggingCallback(t),i=r("useConsentTemplateFlowConfig")(),l=i.getConsentTemplatePromptScreen(t,n);return a("step_presented"),l}l.default=e}),98);
__d("FXFetaMigrationMomentPromptDialogRootQuery$Parameters",["cr:12310"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:12310")}),34);
__d("FXFetaMigrationMomentPromptDialog.entrypoint",["FXFetaMigrationMomentPromptDialogRootQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{query:{options:{fetchPolicy:"store-and-network"},parameters:r("FXFetaMigrationMomentPromptDialogRootQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("FXFetaMigrationMomentPromptDialog.react").__setRef("FXFetaMigrationMomentPromptDialog.entrypoint")};l.default=e}),98);
__d("FXFetaMigrationMomentPromptDialogRootQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="26386365157620759"}),null);
__d("FXFetaMigrationMomentPromptDialogRootQuery$Parameters.instagram",["FXFetaMigrationMomentPromptDialogRootQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("FXFetaMigrationMomentPromptDialogRootQuery_instagramRelayOperation"),metadata:{},name:"FXFetaMigrationMomentPromptDialogRootQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("FXFetaPreMigrationDialogRootQuery$Parameters",["cr:18509"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:18509")}),34);
__d("FXFetaPreMigrationDialog.entrypoint",["FXFetaPreMigrationDialogRootQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{query:{options:{fetchPolicy:"store-and-network"},parameters:r("FXFetaPreMigrationDialogRootQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("FXFetaPreMigrationDialog.react").__setRef("FXFetaPreMigrationDialog.entrypoint")};l.default=e}),98);
__d("FXFetaToSDialogRootQuery$Parameters",["cr:18511"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:18511")}),34);
__d("FXFetaToSDialog.entrypoint",["FXFetaToSDialogRootQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{query:{options:{fetchPolicy:"store-and-network"},parameters:r("FXFetaToSDialogRootQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("FXFetaToSDialog.react").__setRef("FXFetaToSDialog.entrypoint")};l.default=e}),98);
__d("IGDSLicensingPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"m20.414 7-5.412-5.412A2.01 2.01 0 0 0 13.586 1H6a3.003 3.003 0 0 0-3 3v16a3.003 3.003 0 0 0 3 3h12a3.003 3.003 0 0 0 3-3V8.414A1.99 1.99 0 0 0 20.414 7ZM15 4.414 17.586 7H15ZM19 20a1.001 1.001 0 0 1-1 1H6a1.001 1.001 0 0 1-1-1V4a1.001 1.001 0 0 1 1-1h7v4a2.002 2.002 0 0 0 2 2h4ZM8 10h2a1 1 0 0 0 0-2H8a1 1 0 0 0 0 2Zm8 6H8a1 1 0 0 0 0 2h8a1 1 0 0 0 0-2Zm-9-3a1 1 0 0 0 1 1h8a1 1 0 0 0 0-2H8a1 1 0 0 0-1 1Z"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("IGDSSVGIconBase.react"),babelHelpers.extends({},e,{viewBox:"0 0 24 24",children:n})),t[1]=e,t[2]=a):a=t[2],a}var c=s.memo(u);l.default=c}),98);
__d("IGDUBIUpsellInterstitialEntrypointQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9886512594745684"}),null);
__d("IGDUBIUpsellInterstitialEntrypointQuery$Parameters",["IGDUBIUpsellInterstitialEntrypointQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("IGDUBIUpsellInterstitialEntrypointQuery_instagramRelayOperation"),metadata:{},name:"IGDUBIUpsellInterstitialEntrypointQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("IGDUBIUpsellInterstitial.entrypoint",["IGDUBIUpsellInterstitialEntrypointQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryRef:{parameters:r("IGDUBIUpsellInterstitialEntrypointQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("IGDUBIUpsellInterstitialEntrypoint.react").__setRef("IGDUBIUpsellInterstitial.entrypoint")};l.default=e}),98);
__d("MDCXWwwHelpControllerRouteBuilder",["jsExtraRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsExtraRouteBuilder")("/{?locale}/help/{?*rest}/",Object.freeze({device_view:!1}),["/help/{?*rest}/","/{?locale}/help/","/help/"],void 0),s=e;l.default=s}),98);
__d("PolarisActorGatewayDialogQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9636967049672442"}),null);
__d("PolarisActorGatewayDialogQuery$Parameters",["PolarisActorGatewayDialogQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("PolarisActorGatewayDialogQuery_instagramRelayOperation"),metadata:{},name:"PolarisActorGatewayDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("PolarisActorGatewayDialog.entrypoint",["JSResourceForInteraction","PolarisActorGatewayDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{polarisActorGatewayDialogQuery:{options:{},parameters:r("PolarisActorGatewayDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("PolarisActorGatewayDialog.react").__setRef("PolarisActorGatewayDialog.entrypoint")};l.default=e}),98);
__d("PolarisNidoEnrollmentDialogQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24252703977684041"}),null);
__d("PolarisNidoEnrollmentDialogQuery$Parameters",["PolarisNidoEnrollmentDialogQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("PolarisNidoEnrollmentDialogQuery_instagramRelayOperation"),metadata:{},name:"PolarisNidoEnrollmentDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("PolarisNidoEnrollmentDialog.entrypoint",["JSResourceForInteraction","PolarisNidoEnrollmentDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{queryReference:{parameters:r("PolarisNidoEnrollmentDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("PolarisNidoEnrollmentDialog.react").__setRef("PolarisNidoEnrollmentDialog.entrypoint")};l.default=e}),98);
__d("PolarisNidoGraduationDialogQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="32067610436171650"}),null);
__d("PolarisNidoGraduationDialogQuery$Parameters",["PolarisNidoGraduationDialogQuery_instagramRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("PolarisNidoGraduationDialogQuery_instagramRelayOperation"),metadata:{},name:"PolarisNidoGraduationDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("PolarisNidoGraduationDialog.entrypoint",["JSResourceForInteraction","PolarisNidoGraduationDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{queryReference:{parameters:r("PolarisNidoGraduationDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("PolarisNidoGraduationDialog.react").__setRef("PolarisNidoGraduationDialog.entrypoint")};l.default=e}),98);
__d("PolarisQPActorGatewayInterstitial.react",["PolarisActorGatewayDialog.entrypoint","PolarisQPActions","PolarisReactRedux.react","react","react-compiler-runtime","useIGDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(9),n=o("PolarisReactRedux.react").useDispatch(),a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={routeParams:{},routeProps:{}},t[0]=a):a=t[0];var i=r("useIGDSEntryPointDialog")(r("PolarisActorGatewayDialog.entrypoint"),a),l=i[0],s=c(!1),d;t[1]!==e.slot?(d=function(n){return n.qp[e.slot].qpDismissed},t[1]=e.slot,t[2]=d):d=t[2];var m=o("PolarisReactRedux.react").useSelector(d),p,_;return t[3]!==n||t[4]!==m||t[5]!==e.slot||t[6]!==l?(p=function(){s.current===!1&&!m&&(s.current=!0,l({},function(){n(o("PolarisQPActions").dismissQP(e.slot))}))},_=[l,n,e.slot,m],t[3]=n,t[4]=m,t[5]=e.slot,t[6]=l,t[7]=p,t[8]=_):(p=t[7],_=t[8]),u(p,_),null}l.default=d}),98);
__d("PolarisQPHelperModule.react",["cx","invariant","$InternalEnum","ConstUriUtils","PolarisExternalLink.react","PolarisFastLink.react","PolarisGenericStrings","isStringNullOrEmpty","joinClasses","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=/igw:\/\/(.*)/,n=/igw:\/\/root\/(.*)/,r=e.match(t),o=e.match(n);return r?o?o[1]:r[1]:null}function m(e,t){if(!r("isStringNullOrEmpty")(t)){var n=d(t);if(!r("isStringNullOrEmpty")(n))return c.jsx(r("PolarisFastLink.react"),{href:n,children:e});var o=t;if(t.includes("webview")){if(o=decodeURIComponent(t.split("url=")[1]),o.includes("www.instagram.com"))return c.jsx(r("PolarisFastLink.react"),{href:o.split("www.instagram.com")[1],children:e});o.includes("https://")||(o="https://"+o)}return c.jsx(r("PolarisExternalLink.react"),{href:o,children:e})}return e}function p(e){var t=o("react-compiler-runtime").c(12),n=e.Button,r=e.callback,a=e.type;n||u(0,51593);var i=e[a+"Action"];if(!i)return null;var l=a[0].toUpperCase()+a.slice(1),s=e["on"+l+"ButtonClick"],d=a==="primary",p;t[0]!==i.dismiss_promotion||t[1]!==r||t[2]!==s?(p=function(t){r(s,i.dismiss_promotion,t)},t[0]=i.dismiss_promotion,t[1]=r,t[2]=s,t[3]=p):p=t[3];var _=p,f;t[4]!==n||t[5]!==i||t[6]!==_||t[7]!==d?(f=i?c.jsx(n,{action:i,isPrimary:d,onClick:_}):null,t[4]=n,t[5]=i,t[6]=_,t[7]=d,t[8]=f):f=t[8];var g=f,h;return t[9]!==i||t[10]!==g?(h=i&&g?m(g,i.url):null,t[9]=i,t[10]=g,t[11]=h):h=t[11],h}function _(e){var t=o("react-compiler-runtime").c(4),n=e.className,a=e.dismissAction,i=e.onClick,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=a?c.jsx("button",{className:r("joinClasses")(n,"_9_57","_a9_t"),onClick:i,children:c.jsx("span",{className:"_a9_u",children:o("PolarisGenericStrings").CLOSE_TEXT})}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}function f(e){var t=o("react-compiler-runtime").c(5),n=e.className,a=e.image,i=e.size;if(!a)return null;a.uri!=null&&a.uri!==""&&(a.spriteClass==null||a.spriteClass==="")||(a.uri==null||a.uri==="")&&a.spriteClass!=null&&a.spriteClass!==""||u(0,51604);var l;return t[0]!==n||t[1]!==a.spriteClass||t[2]!==a.uri||t[3]!==i?(l=a.uri!=null&&a.uri!==""?c.jsx("img",{alt:"",className:n,height:i,src:a.uri,width:i}):c.jsx("div",{className:r("joinClasses")(n,a.spriteClass),height:i,width:i}),t[0]=n,t[1]=a.spriteClass,t[2]=a.uri,t[3]=i,t[4]=l):l=t[4],l}function g(e){var t=o("react-compiler-runtime").c(3),n=e.className,r=e.text,a;return t[0]!==n||t[1]!==r?(a=r&&r.text!=null&&r.text!==""&&r.text!==!1&&r.text!==0?c.jsx("div",{className:n,children:r.text}):null,t[0]=n,t[1]=r,t[2]=a):a=t[2],a}var h=n("$InternalEnum")({FX_FETA_PRE_MIGRATION_DIALOG:"fx_feta_pre_migration_dialog",FX_FETA_TOS_DIALOG:"fx_feta_tos_dialog",IG_UBI_INBOX_UPSELL:"/ig_ubi_inbox_upsell/",OREGON_CUSTOM_GENDER_CONSENT_URL:"/consent/"});function y(e){var t,n,r=o("ConstUriUtils").getUri(e),a=Object.keys((t=r==null?void 0:r.getQueryData())!=null?t:{}),i=r==null?void 0:r.removeQueryParams(a);if(i==null)return null;var l=h.cast(i==null?void 0:i.toString());if(l==null)return null;var s=(n=r==null?void 0:r.getQueryData())!=null?n:{};return{action:l,actionData:s}}l.getQPDeepLinkUrl=d,l.QPButton=p,l.QPDismiss=_,l.QPImage=f,l.QPText=g,l.QPCustomActionURL=h,l.getQPCustomActionDataFromUrl=y}),98);
__d("PolarisQPCelebBaitDialog.react",["fbt","IGCoreDialog.react","IGDSBox.react","IGRouter_DO_NOT_USE.react","MDCXWwwHelpControllerRouteBuilder","PolarisIGCoreDialogCircleMedia","PolarisQPHelperModule.react","URI","browserHistory_DO_NOT_USE","isStringNullOrEmpty","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.state={hideDialog:!1},e.$3=function(t){e.props.primaryAction&&(e.$2(e.props.primaryAction),e.props.onPrimaryButtonClick&&e.props.onPrimaryButtonClick(t))},e.$4=function(t){e.props.secondaryAction&&(e.$2(e.props.secondaryAction),e.props.onSecondaryButtonClick&&e.props.onSecondaryButtonClick(t))},e.$5=function(){e.props.dismissAction&&(e.$1(),e.props.onDismissButtonClick&&e.props.onDismissButtonClick())},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.$1=function(){this.setState({hideDialog:!0})},a.$2=function(t){if(t.dismiss_promotion&&this.$1(),t.url){var e=o("PolarisQPHelperModule.react").getQPDeepLinkUrl(t.url);r("isStringNullOrEmpty")(e)?o("browserHistory_DO_NOT_USE").redirect(t.url):this.props.history.push(e)}},a.render=function(){var t,n;if(this.state.hideDialog)return null;var a=this.props,i=a.image,l=a.imageSize,u=a.primaryAction,d=a.secondaryAction,m=a.title,p=c.jsx(r("PolarisIGCoreDialogCircleMedia"),{icon:c.jsx(o("PolarisQPHelperModule.react").QPImage,{image:i,size:l})}),_=c.jsxs(c.Fragment,{children:[c.jsx(r("IGDSBox.react"),{marginBottom:6,children:s._(/*BTDS*/"We\u2019re using facial recognition technology to help detect and stop scams that use your image. Learn how we use this technology by choosing Learn more below.")}),c.jsx(r("IGDSBox.react"),{children:s._(/*BTDS*/"You can turn this off anytime in Accounts Center.")})]});return c.jsxs(o("IGCoreDialog.react").IGCoreDialog,{body:_,media:p,onModalClose:this.$5,title:m==null?void 0:m.text,children:[u&&c.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-primary-button",onClick:this.$3,children:(t=u.title)==null?void 0:t.text}),c.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:function(n){var t,o=(t=r("MDCXWwwHelpControllerRouteBuilder").buildUri({rest:"1265316287987507"}).getQualifiedUri())==null?void 0:t.setDomain("meta.com");o!=null&&(e||(e=r("URI"))).goURIOnWindow(o,window.open("","_blank"))},children:s._(/*BTDS*/"Learn more")}),d&&c.jsx(o("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.$4,children:(n=d.title)==null?void 0:n.text})]})},n})(c.Component),m=o("IGRouter_DO_NOT_USE.react").withIGRouter(d);l.default=m}),226);
__d("useConsentTemplatePromptHistory",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState;function u(e){var t=s([e]),n=t[0],r=t[1],o=function(t){r(function(e){return[].concat(e,[t])})},a=function(){var e=n[n.length-1];return r(function(e){return e.slice(0,-1)}),e},i=n[n.length-1];return{currentConsentPrompt:i,popConsentPrompt:a,pushConsentPrompt:o}}l.default=u}),98);
__d("PolarisQPConsentExperiencesKitDialog.react",["BaseModal.react","ConsentTemplateActionCallbacksContext","ConsentTemplateConsentExperienceIDContext","ConsentTemplateFlow.type","ConsentTemplateFlowContext","ConsentTemplateGeneralizedConsentLoggingContext","ConsentTemplatePromptScreen.react","ConsentTemplateSurfaceContext","react","react-compiler-runtime","useConsentTemplatePromptHistory"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(3),n=e.currentConsentPrompt,a=e.surface,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("ConsentTemplatePromptScreen.react"),{currentConsentPrompt:n,surface:a}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}function p(e){var t=o("react-compiler-runtime").c(21),n=e.onDismissButtonClick,a=e.parameters,i=e.promotionId,l=d(!1),u=l[0],c=l[1],p;if(t[0]!==a||t[1]!==i){var f,g,h;p=(f=(g=a==null||(h=a.find(_))==null?void 0:h.value)!=null?g:i)!=null?f:"consent_experience_kit_ig",t[0]=a,t[1]=i,t[2]=p}else p=t[2];var y=p,C=r("useConsentTemplatePromptHistory")(o("ConsentTemplateFlow.type").ConsentTemplateFlow.UOOM),b=C.currentConsentPrompt,v=C.popConsentPrompt,S=C.pushConsentPrompt,R;t[3]!==n?(R=function(){c(!0),n&&n()},t[3]=n,t[4]=R):R=t[4];var L=R,E;t[5]!==L?(E=function(){L()},t[5]=L,t[6]=E):E=t[6];var k=E;if(u||!b)return null;var I;t[7]!==b?(I=s.jsx(m,{currentConsentPrompt:b,surface:"instagram_web"}),t[7]=b,t[8]=I):I=t[8];var T;t[9]!==b||t[10]!==k||t[11]!==v||t[12]!==S||t[13]!==I?(T=s.jsx(o("ConsentTemplateSurfaceContext").ConsentTemplateSurfaceContextProvider,{surface:"instagram_web",children:s.jsx(o("ConsentTemplateFlowContext").ConsentTemplateFlowContextProvider,{flow:o("ConsentTemplateFlow.type").ConsentTemplateFlow.UOOM,children:s.jsx(o("ConsentTemplateActionCallbacksContext").ConsentTemplateActionCallbacksProvider,{currentConsentPrompt:b,onCloseDialog:k,popConsentPrompt:v,pushConsentPrompt:S,children:I})})}),t[9]=b,t[10]=k,t[11]=v,t[12]=S,t[13]=I,t[14]=T):T=t[14];var D;t[15]!==y||t[16]!==T?(D=s.jsx(o("ConsentTemplateGeneralizedConsentLoggingContext").ConsentTemplateGeneralizedConsentLoggingContextProvider,{gclExperienceID:y,gclSource:"quick_promotion",gclTarget:"templates_cek",children:T}),t[15]=y,t[16]=T,t[17]=D):D=t[17];var x;return t[18]!==y||t[19]!==D?(x=s.jsx(r("BaseModal.react"),{stackingBehavior:"above-nav",children:s.jsx(o("ConsentTemplateConsentExperienceIDContext").ConsentTemplateConsentExperienceIDContextProvider,{consentExperienceID:y,children:D})}),t[18]=y,t[19]=D,t[20]=x):x=t[20],x}function _(e){return e.key==="consent_experience_id"}l.default=p}),98);
__d("PolarisQPContainer.react",["PolarisLogger","PolarisQPConstants","nullthrows","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,t.$4=function(){t.$3(o("PolarisQPConstants").OBJECT_IDS.primary)},t.$5=function(){t.$3(o("PolarisQPConstants").OBJECT_IDS.secondary)},t.$6=function(){t.$3(o("PolarisQPConstants").OBJECT_IDS.dismiss)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$1=function(){var e=this.props,t=e.promotionId,n=e.surfaceId;return{nux_id:r("nullthrows")(n),promotion_id:t}},n.componentDidMount=function(){this.props.component&&this.$2()},n.$3=function(t){var e=this.$1();o("PolarisLogger").logQuickPromotionEvent(o("PolarisQPConstants").LOG_EVENTS.click,babelHelpers.extends({object_id:t},e))},n.$2=function(){o("PolarisLogger").logQuickPromotionEvent(o("PolarisQPConstants").LOG_EVENTS.view,this.$1())},n.render=function(){var e=this.props.component,t=this.props,n=t.body,r=t.bulletList,o=t.dismissAction,a=t.image,i=t.imageSize,l=t.parameters,u=t.primaryAction,c=t.refetchPromotions,d=t.secondaryAction,m=t.slot,p=t.title;return e!=null&&s.jsx(e,{body:n,bulletList:r,dismissAction:o,image:a,imageSize:i,onDismissButtonClick:this.$6,onPrimaryButtonClick:this.$4,onSecondaryButtonClick:this.$5,parameters:l,primaryAction:u,refetchPromotions:c,secondaryAction:d,slot:m,title:p})},t})(s.PureComponent);l.default=u}),98);
__d("PolarisQPFetaAccountAutoMigrationDialog.react",["FXFetaMigrationMomentPromptDialog.entrypoint","react","react-compiler-runtime","useIGDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useEffect,m=u.useRef;function p(){var e=o("react-compiler-runtime").c(4),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={},e[0]=t):t=e[0];var n=r("useIGDSEntryPointDialog")(r("FXFetaMigrationMomentPromptDialog.entrypoint"),t,void 0,_),a=n[0],i=m(!1),l,s;return e[1]!==a?(l=function(){i.current===!1&&(i.current=!0,a({routeProps:{noticeType:"IG_MIGRATION_MOMENT_NOTICE"}}))},s=[a],e[1]=a,e[2]=l,e[3]=s):(l=e[2],s=e[3]),d(l,s),null}function _(){return c.jsx("div",{})}_.displayName=_.name+" [from "+i.id+"]",l.default=p}),98);
__d("PolarisQPFetaSavePasswordInterstitial.react",["CAAFetaSavePasswordInterstitial.entrypoint","PolarisOneTapLogin","react","react-compiler-runtime","useIGDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useEffect,m=u.useRef;function p(e){var t=o("react-compiler-runtime").c(9),n=e.onDismissButtonClick,a=e.onPrimaryButtonClick,i=e.onSecondaryButtonClick,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={},t[0]=l):l=t[0];var s=r("useIGDSEntryPointDialog")(r("CAAFetaSavePasswordInterstitial.entrypoint"),l,void 0,_),u=s[0],c=m(!1),p;t[1]===Symbol.for("react.memo_cache_sentinel")?(p=o("PolarisOneTapLogin").isCAASpiDialogEligible(),t[1]=p):p=t[1];var f=p,g;t[2]!==n||t[3]!==a||t[4]!==i||t[5]!==u?(g=function(){!c.current&&f&&(c.current=!0,u({next:null,onDismissButtonClick:n,onPrimaryButtonClick:a,onSecondaryButtonClick:i}))},t[2]=n,t[3]=a,t[4]=i,t[5]=u,t[6]=g):g=t[6];var h;return t[7]!==u?(h=[u,c,f],t[7]=u,t[8]=h):h=t[8],d(g,h),null}function _(){return c.jsx("div",{})}_.displayName=_.name+" [from "+i.id+"]",l.default=p}),98);
__d("PolarisQPStandardMegaphone.react",["cx","IGDSBox.react","InstagramODS","PolarisIGCoreButton.react","PolarisQPHelperModule.react","PolarisReactRedux.react","PolarisUA","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(10),n=e.action,a=e.isPrimary,i=e.onClick,l=a?2:3,s=!a,c=(a?"_a9_v":"")+(a?"":" _a9_w"),d;t[0]!==c?(d={__className:c},t[0]=c,t[1]=d):d=t[1];var m;t[2]!==n.title.text||t[3]!==i||t[4]!==s||t[5]!==d?(m=u.jsx(r("PolarisIGCoreButton.react"),{borderless:s,dangerouslySetClassName:d,fullWidth:!0,onClick:i,children:n.title.text}),t[2]=n.title.text,t[3]=i,t[4]=s,t[5]=d,t[6]=m):m=t[6];var p;return t[7]!==l||t[8]!==m?(p=u.jsx(r("IGDSBox.react"),{marginTop:l,position:"relative",children:m}),t[7]=l,t[8]=m,t[9]=p):p=t[9],p}var d=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={hideMegaphone:!1},t.$1=function(e,n,r){n===void 0&&(n=!0),n&&t.setState({hideMegaphone:!0}),e&&e(r)},t.$2=function(e){e.preventDefault(),t.$1(t.props.onDismissButtonClick,!0,e)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){r("InstagramODS").incr("web.notifications.react_qp_render")},n.render=function(){if(this.props.showCookieModal===!0||this.state.hideMegaphone)return null;var e=this.props,t=e.body,n=e.dismissAction,a=e.image,i=e.title,l=e.type,s=l===void 0?"default":l;return u.jsx(r("IGDSBox.react"),{marginBottom:o("PolarisUA").isMobile()?0:8,position:"relative",children:u.jsx("section",{className:"_a9_x"+(s==="loggedOut"?" _a9_y":"")+(s==="loggedInHalfSheet"?" _a9_z":""),children:u.jsxs("div",{className:"_a9_-",children:[u.jsx(o("PolarisQPHelperModule.react").QPDismiss,{className:"_a9__",dismissAction:n,onClick:this.$2}),u.jsxs("div",{className:"_aa00",children:[u.jsx(o("PolarisQPHelperModule.react").QPImage,{className:"_aa01",image:a,size:this.props.imageSize}),u.jsxs("span",{className:"_aa02",children:[u.jsx(o("PolarisQPHelperModule.react").QPText,{className:"_aa03",text:i}),u.jsx(o("PolarisQPHelperModule.react").QPText,{className:"_aa04",text:t})]}),u.jsxs("span",{className:"_aa05",children:[u.jsx(o("PolarisQPHelperModule.react").QPButton,{Button:c,callback:this.$1,onPrimaryButtonClick:this.props.onPrimaryButtonClick,primaryAction:this.props.primaryAction,type:"primary"}),u.jsx(o("PolarisQPHelperModule.react").QPButton,{Button:c,callback:this.$1,onSecondaryButtonClick:this.props.onSecondaryButtonClick,secondaryAction:this.props.secondaryAction,type:"secondary"})]})]})]})})})},t})(u.Component);function m(e){return{showCookieModal:e.cookieModal.visible}}var p=o("PolarisReactRedux.react").connect(m)(d);l._QPStandardMegaphone=d,l.QPStandardMegaphone=p}),98);
__d("PolarisQPFooterBanner.react",["PolarisQPStandardMegaphone.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(12),n=e.body,r=e.dismissAction,a=e.image,i=e.imageSize,l=e.onDismissButtonClick,u=e.onPrimaryButtonClick,c=e.onSecondaryButtonClick,d=e.primaryAction,m=e.secondaryAction,p=e.slot,_=e.title,f;return t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==u||t[6]!==c||t[7]!==d||t[8]!==m||t[9]!==p||t[10]!==_?(f=s.jsx(o("PolarisQPStandardMegaphone.react").QPStandardMegaphone,{body:n,dismissAction:r,image:a,imageSize:i,onDismissButtonClick:l,onPrimaryButtonClick:u,onSecondaryButtonClick:c,primaryAction:d,secondaryAction:m,slot:p,title:_,type:"loggedOut"}),t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=l,t[5]=u,t[6]=c,t[7]=d,t[8]=m,t[9]=p,t[10]=_,t[11]=f):f=t[11],f}l.default=u}),98);
__d("PolarisQPFullscreenBulletListInterstitial.react",["cx","fbt","IGDSAdPanoOutline24Icon.react","IGDSIconButton.react","IGDSLicensingPanoOutline24Icon.react","IGDSMetaLogoPrimaryIcon.react","IGDSPaymentsPanoOutline24Icon.react","IGDSShieldPanoOutlineIcon.react","IGDSUserCirclePanoOutlineIcon.react","IGDSUsersPanoOutline24Icon.react","IGDSXPanoOutlineIcon.react","PolarisFXAccountCenterStrings","PolarisFastLink.react","PolarisGenericStrings","PolarisQPHelperModule.react","react"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={hideInterstitial:!1},t.$2=function(e){e.preventDefault(),t.$1(t.props.onDismissButtonClick,!0,e)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$1=function(t,n,r){n===void 0&&(n=!0),n&&(this.setState({hideInterstitial:!0}),this.props.refetchPromotions!=null&&this.props.refetchPromotions()),t&&t(r)},n.render=function(){var e,t,n;if(this.state.hideInterstitial)return null;var a=this.props.bulletList,i=[c.jsx(r("IGDSUserCirclePanoOutlineIcon.react"),{alt:u._(/*BTDS*/"User circle icon on Accounts Center Interstitial"),color:"ig-primary-text",size:24},"user-circle-pano"),c.jsx(r("IGDSUsersPanoOutline24Icon.react"),{alt:u._(/*BTDS*/"Users icon on Accounts Center Interstitial"),color:"ig-primary-text",size:24},"users-pano"),c.jsx(r("IGDSShieldPanoOutlineIcon.react"),{alt:u._(/*BTDS*/"Shield icon on Accounts Center Interstitial"),color:"ig-primary-text",size:24},"shield-pano"),c.jsx(r("IGDSLicensingPanoOutline24Icon.react"),{alt:u._(/*BTDS*/"Licensing icon on Accounts Center Interstitial"),color:"ig-primary-text",size:24},"licensing-pano"),c.jsx(r("IGDSAdPanoOutline24Icon.react"),{alt:u._(/*BTDS*/"Ad icon on Accounts Center Interstitial"),color:"ig-primary-text",size:24},"ad-pano"),c.jsx(r("IGDSPaymentsPanoOutline24Icon.react"),{alt:u._(/*BTDS*/"Payments icon on Accounts Center Interstitial"),color:"ig-primary-text",size:24},"payments-pano")];return c.jsx("div",{className:"_a9-g",children:c.jsxs("div",{className:"_a9-h",children:[c.jsx("div",{className:"_a9-i",children:c.jsx(r("IGDSIconButton.react"),{onClick:this.$2,padding:0,children:c.jsx(r("IGDSXPanoOutlineIcon.react"),{alt:o("PolarisGenericStrings").CLOSE_TEXT,color:"ig-primary-text",size:16})})}),c.jsx("div",{className:"_a9-j",children:c.jsx(r("IGDSMetaLogoPrimaryIcon.react"),{alt:o("PolarisFXAccountCenterStrings").WATERMARK_FAMILY_APPS_LOGO_ALT,color:"ig-primary-text",size:60})}),c.jsx(o("PolarisQPHelperModule.react").QPText,{className:"_a9-k",text:this.props.title}),c.jsx("div",{className:"_a9-l",children:c.jsxs("p",{className:"_a9-m",children:[(e=this.props.body)==null?void 0:e.text," ",c.jsx(r("PolarisFastLink.react"),{className:"_a9-n",href:(t=this.props.secondaryAction)==null?void 0:t.url,target:"_blank",children:(n=this.props.secondaryAction)==null?void 0:n.title.text})]})}),a!=null?c.jsx("ul",{children:a.map(function(e,t){return c.jsxs("li",{className:"_a9-o",children:[i[t],c.jsx(o("PolarisQPHelperModule.react").QPText,{className:"_a9-p",text:{text:e.title}})]},e.title)})}):null]})})},t})(c.Component);l.default=d}),226);
__d("PolarisQPFullscreenInterstitial.react",["cx","IGDSBox.react","IGDSIconButton.react","IGDSXPanoOutlineIcon.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisQPHelperModule.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(6),n=e.action,a=e.isPrimary,i=e.onClick,l;t[0]!==i?(l=function(t){i(),t.preventDefault()},t[0]=i,t[1]=l):l=t[1];var s=l,c=!a,d;return t[2]!==n.title.text||t[3]!==s||t[4]!==c?(d=u.jsx(r("PolarisIGCoreButton.react"),{borderless:c,fullWidth:!0,onClick:s,children:n.title.text}),t[2]=n.title.text,t[3]=s,t[4]=c,t[5]=d):d=t[5],d}var m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={hideInterstitial:!1},t.$1=function(e,n,r){n===void 0&&(n=!0),n&&t.setState({hideInterstitial:!0}),e&&e(r)},t.$2=function(e){e.preventDefault(),t.$1(t.props.onDismissButtonClick,!0,e)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){return this.state.hideInterstitial?null:u.jsx("div",{className:"_a9_4",children:u.jsxs("div",{className:"_a9_5",children:[u.jsx("div",{className:"_aqt-",children:u.jsx(r("IGDSIconButton.react"),{onClick:this.$2,padding:0,children:u.jsx(r("IGDSXPanoOutlineIcon.react"),{alt:o("PolarisGenericStrings").CLOSE_TEXT,color:"ig-primary-text",size:16})})}),u.jsx(o("PolarisQPHelperModule.react").QPImage,{className:"_a9_6",image:this.props.image,size:this.props.imageSize}),u.jsx(o("PolarisQPHelperModule.react").QPText,{className:"_a9_7",text:this.props.title}),u.jsx(o("PolarisQPHelperModule.react").QPText,{className:"_a9_8",text:this.props.body}),u.jsx(o("PolarisQPHelperModule.react").QPButton,{Button:d,callback:this.$1,onPrimaryButtonClick:this.props.onPrimaryButtonClick,primaryAction:this.props.primaryAction,type:"primary"}),u.jsx(r("IGDSBox.react"),{margin:2,position:"relative",children:u.jsx(o("PolarisQPHelperModule.react").QPButton,{Button:d,callback:this.$1,onSecondaryButtonClick:this.props.onSecondaryButtonClick,secondaryAction:this.props.secondaryAction,type:"secondary"})})]})})},t})(u.Component);l.default=m}),98);
__d("PolarisQPNidoEnrollmentInterstitial.react",["PolarisDismissEntry","PolarisNidoEnrollmentDialog.entrypoint","react","react-compiler-runtime","useIGDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(){var e=o("react-compiler-runtime").c(4),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={routeParams:{},routeProps:{}},e[0]=t):t=e[0];var n=r("useIGDSEntryPointDialog")(r("PolarisNidoEnrollmentDialog.entrypoint"),t),a=n[0],i=c(!1),l,s;return e[1]!==a?(l=function(){i.current===!1&&!o("PolarisDismissEntry").isDismissed(o("PolarisDismissEntry").NIDO_ENROLLMENT_TYPE)&&(i.current=!0,a({}))},s=[a],e[1]=a,e[2]=l,e[3]=s):(l=e[2],s=e[3]),u(l,s),null}l.default=d}),98);
__d("PolarisQPNidoGraduationInterstitial.react",["PolarisDismissEntry","PolarisNidoGraduationDialog.entrypoint","react","react-compiler-runtime","useIGDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(){var e=o("react-compiler-runtime").c(4),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={routeParams:{},routeProps:{}},e[0]=t):t=e[0];var n=r("useIGDSEntryPointDialog")(r("PolarisNidoGraduationDialog.entrypoint"),t),a=n[0],i=c(!1),l,s;return e[1]!==a?(l=function(){i.current===!1&&!o("PolarisDismissEntry").isDismissed(o("PolarisDismissEntry").NIDO_GRADUATION_TYPE)&&(i.current=!0,a({}))},s=[a],e[1]=a,e[2]=l,e[3]=s):(l=e[2],s=e[3]),u(l,s),null}l.default=d}),98);
__d("SaharaCometConsentExtractExperienceFromExtraParams",[],(function(t,n,r,o,a,i){"use strict";var e="__aectx__";function l(t){if(t==null||!Object.prototype.hasOwnProperty.call(t,e))return null;var n=t[e];if(typeof n!="string")return null;var r=JSON.parse(n);return r}i.maybeExtractConsentExperienceFromExtraParams=l}),66);
__d("SaharaCometConsentClientSupportedFeatures.entrypointutils",[],(function(t,n,r,o,a,i){"use strict";var e={components:["HEADER_TITLE","HEADER_CONTENT","BUTTONS_PRIMARY","BUTTONS_SECONDARY","CONTENT_PARAGRAPH","CONTENT_LIST","SECTION_TITLE","SECTION_CONTENT","CONTENT_TOGGLE"]};i.default=e}),66);
__d("SaharaCometConsentFlowContextualRootQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25425359160392612"}),null);
__d("SaharaCometConsentFlowContextualRootQuery$Parameters",["SaharaCometConsentFlowContextualRootQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("SaharaCometConsentFlowContextualRootQuery_facebookRelayOperation"),metadata:{},name:"SaharaCometConsentFlowContextualRootQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("SaharaCometConsentFlowContextual.entrypoint",["ConsentFlowName","ConsentSurface","FBLogger","JSResourceForInteraction","SaharaCometConsentClientSupportedFeatures.entrypointutils","SaharaCometConsentFlowContextualRootQuery$Parameters","WebPixelRatio","getGraphQLEnumSafe"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e,n=r("getGraphQLEnumSafe")(r("ConsentFlowName"),t.routeParams.flow);if(n==null){var a;throw r("FBLogger")("consent_ui_infra").mustfixThrow("Could not find associated GraphQL enum for flowName: "+((a=t.routeParams.flow)!=null?a:"null"),"consent_ui_infra")}var i=r("getGraphQLEnumSafe")(r("ConsentSurface"),t.routeParams.surface);if(i==null){var l;throw r("FBLogger")("consent_ui_infra").mustfixThrow("Could not find associated GraphQL enum for surface: "+((l=t.routeParams.surface)!=null?l:"null"),"consent_ui_infra")}return{queries:{saharaCometConsentContextualRootQueryRef:{parameters:r("SaharaCometConsentFlowContextualRootQuery$Parameters"),variables:{client_supported_features:r("SaharaCometConsentClientSupportedFeatures.entrypointutils"),device_id:t.routeParams.device_id,experience_id:t.routeParams.experience_id,extra_params_json:(e=t.routeParams.extra_params_json)!=null?e:"{}",flow_name:n,runtime:"SAHARA",scale:o("WebPixelRatio").get(),source:t.routeParams.source,surface:i}}}}},root:r("JSResourceForInteraction")("SaharaCometConsentFlowContextualRoot.react").__setRef("SaharaCometConsentFlowContextual.entrypoint")};l.default=e}),98);
__d("useBaseDynamicEntryPointDialog",["CometDialogContext","CometRelay","CometSuspendedDialogImpl.react","clearTimeout","react","setTimeout","tracePolicyFromResource","useCometRelayEntrypointContextualEnvironmentProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useRef;function _(e){var t=e.entryPoint,n=e.environmentProvider,a=e.onClose,i=e.otherProps,l=e.overrideRelayEnv,u=e.preloadedEntryPoint,c=e.preloadParams,d=o("CometRelay").useEntryPointLoader(n,t),_=d[0],f=d[1],g=d[2],h=_!=null?_:u,y=p(null);m(function(){return y.current!=null&&(r("clearTimeout")(y.current),y.current=null),h.isDisposed&&f(c),function(){y.current=r("setTimeout")(function(){_?g():u.dispose(),y.current=null},6e4)}},[g,h.isDisposed,u,c,f,_]);var C=babelHelpers.extends({},i,{onClose:a}),b=s.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:u,props:C});return l!=null?s.jsx(o("CometRelay").RelayEnvironmentProvider,{environment:l,children:b}):b}_.displayName=_.name+" [from "+i.id+"]";function f(e,t,n,a){var i=r("useCometRelayEntrypointContextualEnvironmentProvider")(a),l=d(r("CometDialogContext"));return c(function(s,u,c,d,m){var p=o("CometRelay").loadEntryPoint(i,e,s),f=_,g=function(){c&&c.apply(void 0,arguments),p.dispose()};l(r("CometSuspendedDialogImpl.react"),{dialog:f,dialogProps:{entryPoint:e,environmentProvider:i,otherProps:u,overrideRelayEnv:a,preloadedEntryPoint:p,preloadParams:s},fallback:n},{loadType:"entrypoint",preloadTrigger:t,tracePolicy:d!=null?d:r("tracePolicyFromResource")("comet.dialog",e.root)},g,{replaceCurrentDialog:m})},[i,e,l,n,t,a])}l.default=f}),98);
__d("useSaharaCometConsentFlowContextualAPI__EXPERIMENTAL",["SaharaCometConsentExtractExperienceFromExtraParams","SaharaCometConsentFlowContextual.entrypoint","cr:567","react","useBaseDynamicEntryPointDialog","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).useCallback;function d(e){e===void 0&&(e="facebook_comet");var t=r("useBaseDynamicEntryPointDialog")(r("SaharaCometConsentFlowContextual.entrypoint"),void 0,n("cr:567")!=null?n("cr:567"):function(){return u.jsx("div",{})}),a=c(function(n){var a,i=n.callbacks,l=n.device_id,s=n.flow,u=n.onError,c=n.params,d=n.source,m=o("SaharaCometConsentExtractExperienceFromExtraParams").maybeExtractConsentExperienceFromExtraParams(c),p=(a=m==null?void 0:m.id)!=null?a:r("uuidv4")(),_={device_id:l,experience_id:p,extra_params_json:JSON.stringify(c),flow:s,source:d,surface:e};t({routeParams:_,routeProps:{}},{flow:s,onClose:function(){},onError:u,source:d,userlandConsentExperienceCallbacks:i})},[t,e]);return a}l.default=d}),98);
__d("usePolarisQPCustomActionLaunchOregonCustomGenderConsent",["ConsentFlowName","FBLogger","emptyFunction","getJSEnumSafe","react-compiler-runtime","useSaharaCometConsentFlowContextualAPI__EXPERIMENTAL"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(2),t=r("useSaharaCometConsentFlowContextualAPI__EXPERIMENTAL")("instagram_web"),n;return e[0]!==t?(n=function(n){var e=u(n),o=s(e==null?void 0:e.flow);if(o==null){r("FBLogger")("consent_ui_infra").mustfix("cannot parse consent flow name: %s from custom action url for custom gender consent sent by QP config");return}var a=e==null?void 0:e.source;if(a==null){r("FBLogger")("consent_ui_infra").mustfix("cannot parse consent flow source: %s from custom action url for custom gender consent sent by QP config",a);return}t({flow:o,onError:r("emptyFunction"),source:a})},e[0]=t,e[1]=n):n=e[1],n}function s(e){var t=Object.keys(r("ConsentFlowName")).find(function(t){return r("ConsentFlowName")[t]===e});return t==null?null:r("getJSEnumSafe")(r("ConsentFlowName"),t)}function u(e){var t={};for(var n of Object.entries(e)){var r=n[0],o=n[1];t[r]=typeof o=="string"?o:String(o)}return t}l.default=e}),98);
__d("usePolarisQPCustomClickHandler",["FXFetaPreMigrationDialog.entrypoint","FXFetaToSDialog.entrypoint","IGDUBIUpsellInterstitial.entrypoint","PolarisQPHelperModule.react","react","react-compiler-runtime","useIGDSEntryPointDialog","usePolarisQPCustomActionLaunchOregonCustomGenderConsent"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react"));function u(){var e=o("react-compiler-runtime").c(8),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={routeProps:{entry_point:"fx_feta_pre_migration_dialog"}},e[0]=t):t=e[0];var n=r("useIGDSEntryPointDialog")(r("FXFetaPreMigrationDialog.entrypoint"),t,void 0,d),a=n[0],i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i={routeProps:{entry_point:"fx_feta_migration_tos_dialog"}},e[1]=i):i=e[1];var l=r("useIGDSEntryPointDialog")(r("FXFetaToSDialog.entrypoint"),i,void 0,c),s=l[0],u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u={},e[2]=u):u=e[2];var m=r("useIGDSEntryPointDialog")(r("IGDUBIUpsellInterstitial.entrypoint"),u),p=m[0],_=r("usePolarisQPCustomActionLaunchOregonCustomGenderConsent")(),f;return e[3]!==_||e[4]!==a||e[5]!==s||e[6]!==p?(f=function(t,n){e:switch(t){case o("PolarisQPHelperModule.react").QPCustomActionURL.FX_FETA_PRE_MIGRATION_DIALOG:{a({routeProps:{noticeType:"IG_PRE_MIGRATION_NOTICE",useDialog:!0}});break e}case o("PolarisQPHelperModule.react").QPCustomActionURL.FX_FETA_TOS_DIALOG:{s({routeProps:{noticeType:"IG_TERMS_OF_SERVICE_NOTICE",useDialog:!0}});break e}case o("PolarisQPHelperModule.react").QPCustomActionURL.IG_UBI_INBOX_UPSELL:{p({});break e}case o("PolarisQPHelperModule.react").QPCustomActionURL.OREGON_CUSTOM_GENDER_CONSENT_URL:_(n)}},e[3]=_,e[4]=a,e[5]=s,e[6]=p,e[7]=f):f=e[7],f}function c(){return s.jsx("div",{})}c.displayName=c.name+" [from "+i.id+"]";function d(){return s.jsx("div",{})}d.displayName=d.name+" [from "+i.id+"]",l.default=u}),98);
__d("useWebBloksIGHandleQPActionClick",["PolarisLogger","PolarisNavigationUtils","PolarisQPConstants","PolarisQPHelperModule.react","WebBloksAsyncActions","isStringNullOrEmpty","react","usePolarisQPCustomClickHandler"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e,t){var n=r("usePolarisQPCustomClickHandler")(),a=s(function(a,i,l){if(o("PolarisLogger").logQuickPromotionEvent(o("PolarisQPConstants").LOG_EVENTS.click,babelHelpers.extends({},t,{object_id:l.toLowerCase()})),l==="DISMISS"||i.length===0){e(!1);return}var s=o("PolarisQPHelperModule.react").getQPCustomActionDataFromUrl(i);if(l==="PRIMARY"&&s!=null){var u=s.action,c=s.actionData;u!=null&&n(u,c),e(!1);return}var d=i.replace(/\\/g,""),m=o("PolarisQPHelperModule.react").getQPDeepLinkUrl(d);if(!r("isStringNullOrEmpty")(m))o("PolarisNavigationUtils").openURL(m);else if(d.includes("webview")){var p=decodeURIComponent(d.split("url=")[1]);p.includes("www.instagram.com")&&(p=p.split("www.instagram.com")[1]),o("PolarisNavigationUtils").openURL(p)}else if(d.includes("instagram://run_bloks_action")){var _,f=(_=d.split("?")[1])!=null?_:"",g=new URLSearchParams(f),h=g.get("bloks_app_id");switch(h){case"com.bloks.www.privacy.consent.prompt.action":{var y=g.get("params");y!=null&&o("WebBloksAsyncActions").executeAsyncActionCatch(a,h,JSON.parse(y));break}case"com.bloks.www.yp.supervision_launch_qp_landing.async":{var C=g.get("page_type");C!=null&&o("WebBloksAsyncActions").executeAsyncActionCatch(a,h,{page_type:C});break}case"com.bloks.www.nido.how_teen_account_keeps_you_safe.async":{o("WebBloksAsyncActions").executeAsyncActionCatch(a,h);break}case"com.bloks.www.youth_ads.tier_two_onboarding.async":{o("WebBloksAsyncActions").executeAsyncActionCatch(a,h);break}}}else o("PolarisNavigationUtils").openURL(d)},[n,t,e]);return a}l.default=u}),98);
__d("PolarisQPWWWBloksRenderer.react",["cx","IGWebBloksApp","PolarisLogger","PolarisQPConstants","PolarisUA","gkx","react","react-compiler-runtime","useWebBloksIGHandleQPActionClick"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useMemo,p=c.useState;function _(e){var t=o("react-compiler-runtime").c(16),n=e.bloks_payload,a=e.encrypted_logging_data,i=e.logging_data,l=e.promotionId,s=e.surfaceId,c=e.triggers,m=p(!0),_=m[0],f=m[1],g,h;t[0]!==a||t[1]!==i||t[2]!==l||t[3]!==s?(h={encrypted_instance_log_data:a,instance_log_data:i,nux_id:s,promotion_id:l},t[0]=a,t[1]=i,t[2]=l,t[3]=s,t[4]=h):h=t[4],g=h;var y=g,C,b;t[5]!==y?(C=function(){o("PolarisLogger").logQuickPromotionEvent(o("PolarisQPConstants").LOG_EVENTS.view,y)},b=[y],t[5]=y,t[6]=C,t[7]=b):(C=t[6],b=t[7]),d(C,b);var v=r("useWebBloksIGHandleQPActionClick")(f,y),S,R;t[8]!==v?(R={"ig.action.quickpromotion.HandleQuickPromotionActionClick":v},t[8]=v,t[9]=R):R=t[9],S=R;var L=S;if(!_)return null;var E=c!=null&&c.includes(o("PolarisQPConstants").TRIGGERS.instagram_feed_header),k="_a9_9"+(o("PolarisUA").isDesktop()&&E?" _aeky":"")+(r("gkx")("9971")?" _atdf":""),I;t[10]!==L||t[11]!==n?(I=u.jsx("div",{className:"_a9_b",children:u.jsx(r("IGWebBloksApp"),{actionOverrides:L,payload:n})}),t[10]=L,t[11]=n,t[12]=I):I=t[12];var T;return t[13]!==k||t[14]!==I?(T=u.jsx("div",{className:k,children:I}),t[13]=k,t[14]=I,t[15]=T):T=t[15],T}var f=u.memo(_);l.default=f}),98);
__d("PolarisQPManager.react",["FBLogger","PolarisQPActions","PolarisQPActorGatewayInterstitial.react","PolarisQPCelebBaitDialog.react","PolarisQPConsentExperiencesKitDialog.react","PolarisQPConstants","PolarisQPContainer.react","PolarisQPFetaAccountAutoMigrationDialog.react","PolarisQPFetaSavePasswordInterstitial.react","PolarisQPFooterBanner.react","PolarisQPFullscreenBulletListInterstitial.react","PolarisQPFullscreenInterstitial.react","PolarisQPNidoEnrollmentInterstitial.react","PolarisQPNidoGraduationInterstitial.react","PolarisQPStandardMegaphone.react","PolarisQPWWWBloksRenderer.react","PolarisReactRedux.react","polarisLogAction","polarisQPSelectors","react","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=e.WrapperComponent,n=t===void 0?s.Fragment:t,a=e.filter,i=e.slot,l=e.triggerContext,c=o("PolarisReactRedux.react").useSelector(o("polarisQPSelectors").getValidPromotion({filter:a,slot:i})),d=o("PolarisReactRedux.react").useDispatch();u(function(){c||d(o("PolarisQPActions").fetchBatchQuickPromotionAction(i,o("PolarisQPConstants").SLOT_TO_SURFACES[i],l))},[d,c,i,l]);var m=function(t){var e=o("PolarisQPConstants").TEMPLATES;switch(t.name){case e.standard_megaphone_ig:case e.standard_megaphone:return r("vulture")("-rayh2SNhLEcf9KlbZo4K_TX94Q="),o("PolarisQPStandardMegaphone.react").QPStandardMegaphone;case e.iig_celeb_bait_dialog:return r("PolarisQPCelebBaitDialog.react");case e.consent_experience_kit_interstitial:return r("PolarisQPConsentExperiencesKitDialog.react");case e.iig_fullscreen_bullet_list:return r("PolarisQPFullscreenBulletListInterstitial.react");case e.iig_celebration_fullscreen:case e.iig_fullscreen:case e.iig_fullscreen_rectangular_image:return r("PolarisQPFullscreenInterstitial.react");case e.instagram_direct_launcher:return r("vulture")("rzWEOYlGmHKjT0tJR5nFV-T6I5Q="),r("FBLogger")("ig_web").mustfix("IG Web does not currently support the instagram_direct_launcher template"),null;case e.instagram_footer_banner:return r("vulture")("t7Rz0wHrejVyVyxpg0dc1vMBT3A="),r("PolarisQPFooterBanner.react");case e.feta_account_auto_migration_dialog:return r("PolarisQPFetaAccountAutoMigrationDialog.react");case e.feta_save_password_interstitial:return r("PolarisQPFetaSavePasswordInterstitial.react");case e.ig_nido_enrollment:return r("PolarisQPNidoEnrollmentInterstitial.react");case e.ig_nido_graduation:return r("PolarisQPNidoGraduationInterstitial.react");case e.actor_gateway_interstitial:return r("PolarisQPActorGatewayInterstitial.react");default:return r("FBLogger")("ig_web").mustfix("Attempted to render unsupported QP template type: %s",t.name),null}};if(!c)return null;var p=c.bloks_view_v2,_=c.creatives,f=c.encrypted_logging_data,g=c.id,h=c.logging_data,y=c.surface_id,C=c.template,b=c.triggers,v=_[0],S=v.bullet_list,R=v.content,L=v.dismiss_action,E=v.image,k=v.primary_action,I=v.secondary_action,T=v.title;if(p){r("polarisLogAction")("bloksRenderQP",{target_id:g});var D=s.jsx(r("PolarisQPWWWBloksRenderer.react"),{bloks_payload:p.component.bundle.bloks_bundle_tree,encrypted_logging_data:f,logging_data:h,promotionId:g,surfaceId:y,triggers:b});return C.name==="fixed_banner_ig"?s.jsx(n,{children:s.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf x1fj9vlw",children:D})}):s.jsx(n,{children:D})}return s.jsx(n,{children:s.jsx(r("PolarisQPContainer.react"),{body:R,bulletList:S,component:m(C),dismissAction:L,image:E,imageSize:o("PolarisQPConstants").IMAGE_SIZES[C.name],parameters:C.parameters,primaryAction:k,promotionId:g,refetchPromotions:i===o("PolarisQPConstants").SLOTS.settings?function(){return d(o("PolarisQPActions").fetchBatchQuickPromotionAction(i,o("PolarisQPConstants").SLOT_TO_SURFACES[i],l))}:null,secondaryAction:I,slot:i,surfaceId:y,title:T})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);/*FB_PKG_DELIM*/
__d("Cache",["TimeSlice"],(function(t,n,r,o,a,i,l){"use strict";var e=6e4,s=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.has=function(t){return this.$1.has(t)},n.get=function(t,n){var e=this.__getRaw(t);return e?e.$2:n},n.getAll=function(t,n){var e=this,r=new Map;return t.forEach(function(t){return r.set(t,e.get(t,n))}),r},n.delete=function(t){var e=this.__getRaw(t);return e&&e.$3&&clearTimeout(e.$3),this.$1.delete(t)},n.clear=function(){this.$1.forEach(function(e){e&&e.$3&&clearTimeout(e.$3)}),this.$1.clear()},n.set=function(n,o,a,i){if(!this.shouldUpdate(n,a))return!1;var t=this.__getRaw(n);return t||(t=this.__getNewRawObject()),delete t.$2,delete t.$4,t.$3&&clearTimeout(t.$3),delete t.$3,t.$2=o,a!=null&&(t.$4=a),i!=null&&i>=0&&(t.$3=setTimeout(r("TimeSlice").guard(this.delete.bind(this,n),"Cache expiration timeout"),i*e)),this.__setRaw(n,t),!0},n.shouldUpdate=function(t,n){var e=this.__getRaw(t);return e==null||e.$4==null||n==null||n>e.$4},n.size=function(){return this.$1.size},n.__getRaw=function(t){return this.$1.get(t)},n.__setRaw=function(t,n){this.$1.set(t,n)},n.__getNewRawObject=function(){return{$2:null,$3:null,$4:null,$5:null,$6:null}},n.__keys=function(){return this.$1.keys()},t})();l.default=s}),98);
__d("EBDBConsistencyApi",["$InternalEnum","EBDB","FBLogger","I64","QPLUserFlow","ReQL","asyncToGeneratorRuntime","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],u=null;function c(){return u}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){try{var a=yield o("EBDB").getEBDB(),l=BigInt((e||(e=o("I64"))).to_string(n));yield a.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.bulkPut([{deviceId:l,env:t}])},"EBDB - AddDevice",i.id+":54"),u=l}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on EBDB - AddDevice")}}),m.apply(this,arguments)}function p(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_client_state)).then(function(e){return e==null?void 0:e.deviceId})}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(n!=null)return d(t,n);try{var o=yield p(e);return o==null?void 0:d(t,o)}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on fetching secure_encrypted_backups_client_state")}}),f.apply(this,arguments)}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){r("QPLUserFlow").addPoint(t,"track_overprompting_start");try{var a=yield o("EBDB").getEBDB(),l=!1;yield a.runInTransaction(["device_state"],"readwrite",(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield t.stores.device_state.get(e);(n==null?void 0:n.deviceId)!=null&&(l=!0)});return function(e){return t.apply(this,arguments)}})(),"EBDB - AddDevice",i.id+":107"),r("QPLUserFlow").addAnnotations(t,{bool:{overprompting:l}}),r("QPLUserFlow").addPoint(t,"track_overprompting_end")}catch(e){r("QPLUserFlow").addPoint(t,"track_overprompting_fail"),r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on track overpropting")}}),h.apply(this,arguments)}var y=n("$InternalEnum")({Disabled:0,EbsmInconsistent:1,EbdbInconsistent:2,Enabled:3,Inconsistent:4});function C(e){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield p(t),r=n!=null?BigInt((e||(e=o("I64"))).to_string(n)):null;return r==null&&u==null?y.Disabled:r==null&&u!=null?y.EbsmInconsistent:r!=null&&u==null?y.EbdbInconsistent:r===u?y.Enabled:y.Inconsistent}),b.apply(this,arguments)}function v(e,t,n,r){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,o){var a=1/r("justknobx")._("3914");if(!(Math.random()>=a)){var i=r("qpl")._(521471316,"2831");try{r("QPLUserFlow").start(i);var l=yield C(e);o!=null&&r("QPLUserFlow").addAnnotations(i,o()),r("QPLUserFlow").endSuccess(i,{annotations:{int:{consistency:l,env:t,operation:n}}})}catch(e){r("QPLUserFlow").endFailure(i,"error"),r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on trackConsistency in %s",t)}}}),S.apply(this,arguments)}function R(){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("EBDB").clearDeviceState(),u=null}),L.apply(this,arguments)}var E;function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){E!=null&&E(),yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.encrypted_backups)).then(function(e){e!=null&&((e==null?void 0:e.backupId)==null||(e==null?void 0:e.isUserOptedOut)===!0)&&R()}).catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDBApi: EBLS error on fetching data from encrypted_backups")}),E=t.tables.encrypted_backups.subscribe(function(e,t){t.operation!=="delete"&&(t.value.backupId==null||t.value.isUserOptedOut===!0)&&R()});var a=yield o("EBDB").getEBDB(),l=yield a.runInTransaction(["device_state"],"readonly",function(e){return e.stores.device_state.get(n)},"EBDB - readDeviceState",i.id+":250").catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDB error: fetching device_state")});if(u=T(l==null?void 0:l.deviceId),u==null){var s=yield p(t);if(s==null)return;var c=BigInt((e||(e=o("I64"))).to_string(s));u=c,yield a.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.bulkPut([{deviceId:c,env:n}])},"EBDB - writeDeviceState",i.id+":272").catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDB error: write device_state")})}}),I.apply(this,arguments)}function T(t){if(t!=null){if(typeof t=="bigint")return t;if(typeof t=="number")return BigInt(t);if(typeof t=="string")try{return BigInt(t)}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("EBDBApi: Parsing string as BigInt"),R();return}if(Array.isArray(t))try{return BigInt((e||(e=o("I64"))).to_string(t))}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("EBDBApi: Parsing I64 as BigInt"),R();return}r("FBLogger")("wmi_eb").mustfix("EBDBApi: Parsing unknown as BigInt %s",String(t)),R()}}l.EB_STORES=s,l.getDeviceId=c,l.addNewDevice=_,l.trackOverprompting=g,l.EBConsistencyResult=y,l.checkRegistrationConsistency=C,l.trackConsistency=v,l.clearDeviceState=R,l.startListeningDeviceRegistrations=k}),98);
__d("EBEpochChangeListener",["EBIsEbEnabled","EBIsEbEnabledSubscriber","Promise","ReQL","WAPubSub","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e){this.$1=o("WAPubSub").simplePubSub(),this.$3=e}var t=e.prototype;return t.initialize=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this;(yield o("EBIsEbEnabled").isEbEnabledLS(this.$3.tables))&&this.$4(this.$3),yield o("EBIsEbEnabledSubscriber").isEbEnabledSubscriber().then(function(t){t.subscribe(function(t){t?e.$4(e.$3):e.$2==null||e.$2()})})});function t(){return e.apply(this,arguments)}return t})(),t.$4=function(t){var e=this;return this.$2==null&&(this.$2=o("ReQL").fromTableAscending(t.tables.secure_encrypted_backups_epochs).subscribe(function(t,n){e.$1.publish(n)})),this.$2},t.subscribe=function(t){return this.$1.subscribe(t)},e})(),u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(u!=null)return(e||(e=n("Promise"))).resolve();u=new s(t),yield u.initialize()}),d.apply(this,arguments)}function m(e){if(u==null)throw r("err")("EBEpochChangeListener is not initialized");return u.subscribe(e)}l.initEBEpochChangeListener=c,l.subscribeToEpochChanges=m}),98);
__d("EBSMProperties",[],(function(t,n,r,o,a,i){"use strict";var e=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],l=new Set(["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"]),s={dbVersion:5,mandatoryTables:l,persistedTables:new Set(e),persistedTablesArray:e},u=s;i.default=u}),66);
__d("MWEncryptedBackupsFirstRestoreUpsellTime",["EBAPIWorkerCheck","FBLogger","WebStorage","getErrorSafe","getMWEncryptedBackupsIsLocalStorageSupported"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mw_encrypted_backups_restore_upsell_first_impression_time_key";function u(){var t=Date.now().toString();if(o("EBAPIWorkerCheck").runningInWorker())return d(t);if(!o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported())return t;try{var n,a=(n=(e||(e=r("WebStorage"))).getLocalStorage())==null?void 0:n.getItem(s);if(a==null){var i;return(i=(e||(e=r("WebStorage"))).getLocalStorage())==null||i.setItem(s,t),t}return a}catch(e){return r("FBLogger")("wmi_eb").warn("[labyrinth][web] Failed to set EB session identifier due to %s",r("getErrorSafe")(e).message),t}}var c=null;function d(e){return c==null&&(c=e),c}l.getFirstRestoreUpsellTime=u,l.getFirstRestoreUpsellTimeForEBLS=d}),98);
__d("QPLMemoryUtils",["MemoryUtils","QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MemoryUtils").getCurrentMemory(),n=t.usedJSHeapSize;r("QPLUserFlow").addAnnotations(e,{int:{usedJSHeapSizeStart:n}})}function s(e){var t=o("MemoryUtils").getCurrentMemory(),n=t.usedJSHeapSize;r("QPLUserFlow").addAnnotations(e,{int:{usedJSHeapSizeEnd:n}})}l.logMemoryForQPLStart=e,l.logMemoryForQPLEnd=s}),98);
__d("MWBroadcastChannelPolyfill",["FBLogger","LocalStorageWrapper","MessengerLogHistory","Random","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MessengerLogHistory").getInstance("client_init");function s(t){e.debug("[MWBroadcastChannelPolyfill] "+t)}function u(e){r("FBLogger")("messenger_web").mustfix(e)}var c={},d=o("LocalStorageWrapper").getStorage(s);function m(e){var t="$BroadcastChannel$"+e+"$",n=!1,a=function(n){var e,r;if(n.storageArea===d){var o=n.newValue;if(!(o==null||o==="")&&((e=n.key)==null?void 0:e.substring(0,t.length))===t){var a=JSON.parse(o);(r=c[t])==null||r.forEach(function(e){e({data:a})})}}};return window.addEventListener("storage",a),{addEventListener:function(n,r){c[t]=c[t]||new Set,c[t].add(r)},close:function(){n||(n=!0,c={},window.removeEventListener("storage",a))},postMessage:function(a){if(n){r("FBLogger")("ls_web_init").mustfix("Broadcast channel is closed");return}var e=JSON.stringify(a),i=t+String(Date.now())+"$"+String(r("Random").uint32());o("LocalStorageWrapper").setItemGuarded(d,i,e,u),r("setTimeout")(function(){o("LocalStorageWrapper").removeItemGuarded(d,i,u)},500)},removeEventListener:function(n,r){var e;(e=c[t])==null||e.delete(r)}}}l.default=m}),98);
__d("MWBroadcastChannel",["MWBroadcastChannelPolyfill"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return self.BroadcastChannel!=null?new self.BroadcastChannel(e):r("MWBroadcastChannelPolyfill")(e)}l.MWBroadcastChannel=e}),98);
__d("MWLSDatabaseNames",[],(function(t,n,r,o,a,i){"use strict";var e="LightSpeed",l=e+"V3";i.name=e,i.lightspeedPrefix=l}),66);
__d("MWLSIndexedDBName",["MAWCurrentUser","MWLSDatabaseNames"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWCurrentUser").getID();return o("MWLSDatabaseNames").lightspeedPrefix+e}l.dbName=e}),98);
__d("ReStoreTabNotifier",["CurrentMessengerUser","FBLogger","MWBroadcastChannel","MWLSIndexedDBName","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("CurrentMessengerUser").getIDorEIMU();function s(t){var n=o("MWBroadcastChannel").MWBroadcastChannel(t==="restore-table-"+e+"-"+o("MWLSIndexedDBName").dbName()?"mwChat-"+e:t);function a(e,t){try{n.postMessage([e,t])}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("Failed to broadcast changes")}}function i(e,t){n.addEventListener("message",function(n){var r=n.data,o=r[0];o===e&&t(r[1])})}return{onEventReceive:i,postMessage:a}}l.default=s}),98);
__d("createReStoreEBSMTablesPersistence",["CurrentMessengerUser","EBLogger","MAWUnrecoverableDbErrors","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","ODS","Promise","QPLMemoryUtils","QPLUserFlow","Random","ReStorePersistence","ReStoreTabNotifier","WebSession","asyncToGeneratorRuntime","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("CurrentMessengerUser").getIDorEIMU(),m=r("ReStoreTabNotifier")==null?void 0:r("ReStoreTabNotifier")("mwChat-"+d),p=null,_=!1,f=!1,g=o("EBLogger").EBLogger().tags(["EBSM","Pesistence","MainThread"]);function h(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function y(t){var a=(c||(c=n("Promise"))).resolve(),i="flushChangesV2",l=new Map;function d(e){return h(l,e,function(){return new Map})}var y=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();r("QPLUserFlow").start(r("qpl")._(521481876,"1407"),{annotations:{string:{ebSessionIdentifier:y,sessionTabId:o("WebSession").getId()}}}),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").START),o("QPLMemoryUtils").logMemoryForQPLStart(r("qpl")._(521481876,"1407"));function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield t.rehydrateEBSMFromEBDB(d),o("QPLMemoryUtils").logMemoryForQPLEnd(r("qpl")._(521481876,"1407")),r("QPLUserFlow").endSuccess(r("qpl")._(521481876,"1407")),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").SUCCESS)}catch(t){r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED");var e=r("getErrorSafe")(t);g.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["An error occured in EBSM hydration when loading EB data: ",""])),e.message),r("QPLUserFlow").endFailure(r("qpl")._(521481876,"1407"),"Hydration failed."),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").FAIL)}}),b.apply(this,arguments)}return p=C(),m==null||m.onEventReceive("flushChangesV2",function(n){var a=n.changeSet,l=new Map;if(a.forEach(function(e,t){l.set(t,{toAdd:[],toDelete:[]});var n=d(t);e.forEach(function(e,r){if(o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)){var a;(a=l.get(t))==null||a.toDelete.push(n.get(r))}else{var i;(i=l.get(t))==null||i.toAdd.push(e)}})}),t.updateEBSM==null){g.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ebdbEbsmApi.updateEBSM is not defined"])));return}r("promiseDone")(t.updateEBSM(l,i))}),{flush:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){var a,l;if(e.size!==0&&(e.size>0&&e.forEach(function(t,n){t.size===0&&e.delete(n)}),e.size!==0)){var s=((a=n.actionSource)==null?void 0:a.type)==="user_initiated"&&((l=n.actionSource)==null?void 0:l.source)===i;if(s){e.forEach(function(e,t){var n=d(t);e.forEach(function(e,t){o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)?n.delete(t):n.set(t,e)})});return}var u=new Map;e.forEach(function(e,t){u.set(t,{toAdd:[],toDelete:[]});var n=d(t);e.forEach(function(e,r){if(o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)){var a;(a=u.get(t))==null||a.toDelete.push(n.get(r)),n.delete(r)}else{var i;(i=u.get(t))==null||i.toAdd.push(e),n.set(r,e)}})}),m==null||m.postMessage("flushChangesV2",{changeSet:e,fromVersion:"",sentinelDeleted:o("ReStorePersistence").sentinelDeleted,version:""});var c=o("Random").uint32(),_=Array.from(e.keys());r("QPLUserFlow").start(r("qpl")._(521485383,"2200"),{annotations:{bool:{ebsmv2:!0},string_array:{tables:_}},instanceKey:c}),yield p,yield t.flushEBSMtoEBDB(u).catch(function(){})}});function a(t,n){return e.apply(this,arguments)}return a})(),get:function(t,r,o){var e=d(r);return _?e.get(o):p==null?(c||(c=n("Promise"))).reject("rehydration is not complete"):p.then(function(){return _=!0,e.get(o)})},logError:function(n,a,i,l){if((u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_RESTORE_PERSISTENCE_ERROR,n),i==="dbCorruption"){var e,s;(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,n);var c="Got unexpected undefined in ebsm, mode: "+a+", table: "+n+", id: "+((e=l==null?void 0:l.id)!=null?e:"")+", deletedInThisTxn: "+((s=l==null?void 0:l.deletedInThisTxn)!=null?s:"")+". Deleting EBSM db";g.mustfix(c);var d=o("Random").uint32();o("MAWUnrecoverableDbErrors").setError(new(o("MAWUnrecoverableDbErrors")).EbsmHydrationError(c,!0,d,n),function(){r("promiseDone")(t.clearEbStores(),function(){(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,"db_deleted.main_thread")})}),f||(f=!0,o("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,"full"))}},queueCommitWork:void 0,runExclusively:function(t){return new(c||(c=n("Promise")))(function(e,r){a=a.then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield t(),o=n[0],a=n[1];try{e(yield o())}catch(e){r(e)}}))})},shouldApplySync:function(){return!1},shouldInline:function(t,n){return!1},shouldSync:function(t,n){return t!=="notifyInMemoryTable"},tabTablesNotifier:function(){return m},types:["ephemeral"],uniqueId:""}}l.default=y}),98);
__d("createReStoreTableNameAllowListPersistence",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r,o){var a;return{clearCache:function(){t.clearCache==null||t.clearCache(),r.clearCache==null||r.clearCache()},close:function(){t.close==null||t.close(),r.close==null||r.close()},flush:(function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a,i){var l=new Map,s=new Map;a.forEach(function(e,t){o.has(t)?s.set(t,e):l.set(t,e)}),yield(e||(e=n("Promise"))).all([t.flush(l,i),r.flush(s,i)])});function i(e,t){return a.apply(this,arguments)}return i})(),get:function(n,a,i,l){return o.has(a)?r.get(n,a,i,l):t.get(n,a,i,l)},isClosed:function(){return(t.isClosed==null?void 0:t.isClosed())||!1},isPersistenceSupported:t.isPersistenceSupported,logError:function(n,a,i,l){o.has(n)?r.logError==null||r.logError(n,a,i,l):t.logError==null||t.logError(n,a,i,l)},permitsSynchronousIO:function(n){if(o.has(n)){var e;return(e=r.permitsSynchronousIO==null?void 0:r.permitsSynchronousIO(n))!=null?e:!1}else{var a;return(a=t.permitsSynchronousIO==null?void 0:t.permitsSynchronousIO(n))!=null?a:!1}},runExclusively:function(a,i){return t.runExclusively(function(){return new(e||(e=n("Promise")))(function(t,o){var l=r.runExclusively(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var r=yield a(),o=r[0],i=r[1],s=new(e||(e=n("Promise")))(function(e){t([function(){return e(),l},i])});return[n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield s,o()}),i]}),i);l.catch(o)})},i)},shouldApplySync:function(n,a){return o.has(a)?r.shouldApplySync(n,a):t.shouldApplySync(n,a)},shouldInline:function(n,a){return o.has(n)?r.shouldInline(n,a):t.shouldInline(n,a)},shouldSync:function(n,a){return o.has(a)?r.shouldSync(n,a):t.shouldSync(n,a)},tabTablesNotifier:(a=t.tabTablesNotifier)!=null?a:r.tabTablesNotifier,types:[].concat(t.types,r.types),uniqueId:r.uniqueId+t.uniqueId}}i.default=l}),66);
__d("LSJSEBInMemoryStorage",["EBSMProperties","createLSReStoreEphemeralPersistence","createReStoreEBSMTablesPersistence","createReStoreTableNameAllowListPersistence"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("createReStoreTableNameAllowListPersistence")(o("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),r("createReStoreEBSMTablesPersistence")(e),r("EBSMProperties").persistedTables);return t}l.makeReStorePersistence=e}),98);
__d("EBWorkerAddDeviceUtils",["EBDB","EBDBEbsmApi","EBSMProperties","I64","LSAuthorityLevel","LSIntEnum","LSJSEBInMemoryStorage","LSMetadata","LSReStoreWrapper","MAWLSVaultingHooks","Promise","ReQL","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state));if(l!=null)return"dest_table_not_empty";var c={clearEbStores:o("EBDB").clearEbStores,flushEBSMtoEBDB:o("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:o("EBDBEbsmApi").rehydrateEBSMFromEBDB,updateEBSM:function(){return(u||(u=n("Promise"))).resolve()}},d=yield o("LSJSEBInMemoryStorage").makeReStorePersistence(c);if(d==null)throw r("err")("persistence is null");var m=o("LSReStoreWrapper").createLSReStore(d,o("LSMetadata").schema,[r("MAWLSVaultingHooks")],void 0),p=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(m.tables.secure_encrypted_backups_epochs));return p.filter(function(t){return(e||(e=o("I64"))).equal(t.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}).length===0?"source_epoch_not_authoritative":m.runInTransaction(function(e){return a.runInTransaction((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){var o=yield(u||(u=n("Promise"))).all(t.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=e[t],o=n.entries(new WeakMap),a=yield o.next();if(a.done)return"source_table_empty";for(var i=r[t];!a.done;){var l=a.value,s=l[0],u=l[1];yield i.upsert(s,u),a=yield o.next()}return"success"});return function(e){return t.apply(this,arguments)}})())),a=new Set(o);return a.has("source_table_empty")?"source_table_empty":a.has("success")&&a.size===1?"success":"fail"});return function(e){return r.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":91")},"readonly",void 0,void 0,i.id+":89")}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield e.runInTransaction(function(e){return(u||(u=n("Promise"))).all(r("EBSMProperties").persistedTablesArray.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){for(var n=e[t],r=n.entries(new WeakMap),o=yield r.next();!o.done;)yield n.delete.apply(n,o.value[0]),o=yield r.next()});return function(e){return t.apply(this,arguments)}})()))},"readwrite",void 0,void 0,i.id+":131")}),p.apply(this,arguments)}l.copyEBStateTablesFromMainthreadToWorker=c,l.clearLSEBSMTables=m}),98);
__d("LSDedicatedMqttChannel",["FBMqttChannel","cr:1232"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:1232")!=null&&n("cr:1232").shutdownAndClear()}function s(e,t,o,a,i,l){return function(s){return n("cr:1232")!=null?n("cr:1232").getInstance(s,e,t,o,a,i,l):r("FBMqttChannel")}}l.shutdownAndClear=e,l.getInstance=s}),98);
__d("MAWEBLSInWorkerSwitch",["MAWEBEnabledStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("MAWEBEnabledStateManager")).MAWEBEnabledStateManager,s=e;l.default=s}),98);
__d("LSIssueNewEbTaskAndGetTaskIDV2",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),e[0],e[1],e[2],void 0,void 0,t.i64.cast([0,0]),e[3],e[4],void 0,e[5],e[7]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueNewEbTaskAndGetTaskIDV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("MAWMainTraceUtils",["LSRequestId"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("LSRequestId").generate()}l.createTraceId=e}),98);
__d("EBLS",["EBDB","EBDBEbsmApi","EBEpochChangeListener","EBIsEbEnabled","EBIsEbEnabledSubscriber","EBLogger","EBReadyNotifier","EBReenrollmentTriggerListener","EBWorkerAddDeviceUtils","I64","LSAuthorityLevel","LSDataTraceFlushDeferred","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSDefaultSyncGroups","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSInternetConnectionState","LSJSEBInMemoryStorage","LSMetadata","LSPlatformDeviceId","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSPlatformRealtimeTransport","LSPlatformTaskSystemTransport","LSReStoreWrapper","LSVersion","MAWBridge","MAWEBLSInWorkerSwitch","MAWLSVaultingHooks","MAWODSProxy","MAWVaultMaterialsStorage","MWEncryptedBackupsListenForChangesToBackupStateInitPath","MWPlatformTaskSystem","MqttEnv","Promise","QPLUserFlow","ReQL","ServerAppID","WAAssertUnreachable","WAOdsEnums","WAPromiseDelays","WAResolvable","asyncToGeneratorRuntime","emptyFunction","err","getMWLSRegion","nullthrows","promiseDone","qpl","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P=o("EBLogger").EBLogger().tags(["EBLS"]),N=r("qpl")._(521478817,"2806");function M(){return O()}var w,A,F;function O(){return w?w.promise:B({copyKeys:!0,getNewDB:!1}).promise}function B(e){w!=null&&!w.isSettled&&w.reject(r("err")("LSClient is not settled")),A!=null&&!A.isSettled&&A.reject(r("err")("LSDBStorage is not settled"));var t=new(o("WAResolvable")).Resolvable;return w=t,A=null,W(e).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t}function W(e){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,a=e.getNewDB;o("EBReadyNotifier").resetEBReady(),(t=r("QPLUserFlow")).start(N,{timeoutInMs:6e4}),t.addPoint(N,"ls_storage_creation_start");var i=yield U(a);t.addPoint(N,"ls_storage_creation_end"),t.addPoint(N,"eb_worker_add_device_skipped"),t.endSuccess(N),o("EBReadyNotifier").markEBReady(),P.DEBUG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Initialised db"])));var l={appId:r("nullthrows")(r("ServerAppID").app_id),executeGraphQLLightSpeedRequest:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){r("vulture")("ZrOlCWyJ0L0hG2xX4QdNxz1doLM=");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=yield o("MAWBridge").getBridge().sendAndReceive("event","executeGraphQLLightSpeedRequest",{args:t});return a});function t(){return e.apply(this,arguments)}return t})(),getDb:U,getEval:function(){return r("LSDatascriptEvaluatorMaybeDeferred")()},platformName:"Messenger",realtimeUnderylingTransport:function(){return($||($=n("Promise"))).resolve(function(e,t){var n;return r("LSPlatformMqttRealtimeTransport")(r("LSVersion"),t,{getInstance:o("LSDedicatedMqttChannel").getInstance(function(){return!0},(n={},n[o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter]=!1,n),function(e,t){return t},r("emptyFunction")),shutdownAndClear:o("LSDedicatedMqttChannel").shutdownAndClear})})},region:r("getMWLSRegion")(),schemaVersion:r("LSVersion"),sendHardcodedInitSync:!1,syncParams:r("LSPlatformMessengerSyncParams")};P.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["created config"]))),r("QPLUserFlow").addAnnotations(N,{string:{appId:l.appId}});var s=o("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");r("QPLUserFlow").addPoint(N,"platform_client_init_start");var u=yield K(i,l,s);return r("QPLUserFlow").addPoint(N,"platform_client_init_end"),F=X(i),yield o("EBIsEbEnabledSubscriber").initIsEbEnabledPubSub(i),yield o("EBEpochChangeListener").initEBEpochChangeListener(i),yield o("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(i),P.DEBUG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["finished init successfully"]))),u}),q.apply(this,arguments)}function U(e){return V.apply(this,arguments)}function V(){return V=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e===void 0&&(e=!1),!e&&A!=null)return A.promise;var t=new(o("WAResolvable")).Resolvable;A=t,yield o("MAWVaultMaterialsStorage").setupVaultMaterials();var a={clearEbStores:o("EBDB").clearEbStores,flushEBSMtoEBDB:o("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:o("EBDBEbsmApi").rehydrateEBSMFromEBDB},l=yield o("LSJSEBInMemoryStorage").makeReStorePersistence(a),s=o("LSReStoreWrapper").createLSReStore(l,o("LSMetadata").schema,[r("MAWLSVaultingHooks")],void 0);return a.updateEBSM=o("EBDBEbsmApi").updateEBSM(s),yield s.runInTransaction((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("LSDefaultSyncGroups").seedDb(e,void 0)});return function(t){return e.apply(this,arguments)}})(),"readwrite","ui",void 0,i.id+":228"),t.resolve(s),s}),V.apply(this,arguments)}function H(){return G.apply(this,arguments)}function G(){return G=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){w!=null&&(yield o("EBWorkerAddDeviceUtils").clearLSEBSMTables(yield U()))}),G.apply(this,arguments)}function z(e){var t=r("MWEncryptedBackupsListenForChangesToBackupStateInitPath").listenForChangesToBackupState(e);return function(){t&&t()}}function j(t,n){var a=n==="Connected"?(D||(D=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").CONNECTED):(D||(D=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").NOT_CONNECTED);P.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status: ",""])),n),r("promiseDone")(t.runInTransaction(function(e){return r("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(r("LSFactory")(e),{internetConnectionState:a})},"readwrite",void 0,void 0,i.id+":268"),function(){P.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set successfully"])))},function(e){throw P.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set failed: ",""])),e==null?void 0:e.message),e})}function K(e,t,n){return Q.apply(this,arguments)}function Q(){return Q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){P.DEBUG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting..."])));var a=yield t.getEval();P.DEBUG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Getting datascript evaluator success"])));var i=a()(e);P.DEBUG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Clearing epoch before resume sync..."]))),P.DEBUG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["Starting realtime transport"])));var l=yield t.realtimeUnderylingTransport(),s=o("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(l,t.appId,n);P.DEBUG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["Starting task system"])));var u=new(r("MWPlatformTaskSystem"))(e,new(r("LSPlatformTaskSystemTransport"))(e,s,i,t.schemaVersion));P.DEBUG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["Starting backup state listeners"])));var c=null;r("QPLUserFlow").addPoint(N,"sync_system_creation_skipped");var d=z(e);P.DEBUG(E||(E=babelHelpers.taggedTemplateLiteralLoose(["Watching for expired traces"])));var m;return r("promiseDone")(o("LSDataTraceFlushDeferred").watchForExpiredTraces(e).then(function(e){m=e})),P.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Subscribing to mqtt sync status change events"]))),s.onConnectionStatusChange(function(t){j(e,t)}),P.DEBUG(I||(I=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting sucess"]))),{cleanup:function(){P.DEBUG(T||(T=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync cleaning up"]))),u==null||u.cleanup(),s.cleanup(),c==null||c.cleanup(),d(),m==null||m(),F.forEach(function(e){return e()})},db:e}}),Q.apply(this,arguments)}function X(e){var t=[],n=Y(e);return t.push(n),t}function Y(e){var t=null;function a(e){var a=t===null?"null":String(t),i=String(e);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.state_transition."+a+"_to_"+i}),P.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state transition: "," -> ",""])),a,i),t===!0&&e===!1&&(P.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch detected true->false transition, setting timeout to check self-correction"]))),o("WAPromiseDelays").delayMs(1e3).then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("EBIsEbEnabled").isEBEnabled(),t=e===!0;P.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch true->false correction check: corrected=",", current_state=",""])),String(t),String(e)),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.true_to_false_correction."+(t?"corrected":"not_corrected")});var n=r("MAWEBLSInWorkerSwitch").isEnabled(),a=e===n?"match":"mismatch";o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.true_to_false_check."+a})})).catch(function(e){P.catching(e).MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch failed to check true->false correction"])))})),r("MAWEBLSInWorkerSwitch").set(e),t=e}return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_client_state)).then(function(e){e!=null?a(J(e)):a(!1)}).catch(function(e){P.catching(e).MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Failed to get initial state for EBLS Switch"])))}),e.tables.secure_encrypted_backups_client_state.subscribe(function(e,t){switch(P.DEBUG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state changed. operation: ",""])),t.operation),t.operation){case"delete":a(!1);break;case"add":case"put":a(J(t.value));break;default:throw t.operation,r("WAAssertUnreachable")(t.operation)}})}function J(e){var t=e.authorityLevel,n=e.backupTenancy;if(t==null)return!1;var a=n!=null?n:(D||(D=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION);return(x||(x=o("I64"))).equal(a,(D||(D=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION))&&(x||(x=o("I64"))).equal(t,(D||(D=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}l.init=M,l.genLSClient=O,l.getLSStorage=U,l.clearEBSMStorage=H,l.platformClientInit=K}),98);
__d("EBMinosWasmDeriveAttachmentAccessTokenSecret",["EBMinosTypes","EBMinosWasm.pb","EBMinosWasmReactorSingleton","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(){function e(e){var t=e.attachmentAccessTokenSecret;return o("WAResultOrError").makeResult(o("EBMinosTypes").unsafeCastToAttachmentAccessTokenSecret(t))}return(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.mediaKey;return yield o("EBMinosWasmReactorSingleton").minosCommand({InputSpec:o("EBMinosWasm.pb").MinosCommandSpec,ResultSpec:o("EBMinosWasm.pb").DeriveAttachmentAccessTokenSecretResultSpec,validateResult:e},{deriveAttachmentAccessTokenSecret:{mediaKey:n}})});function r(e){return t.apply(this,arguments)}return r})()}var s=e();l.deriveAttachmentAccessTokenSecret=s}),98);
__d("EBMinosWasmDeriveAttachmentPrimaryKeySecret",["EBMinosTypes","EBMinosWasm.pb","EBMinosWasmReactorSingleton","WAResultOrError","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(){function e(e){var t=e.attachmentPrimaryKeySecret;return o("WAResultOrError").makeResult(o("EBMinosTypes").unsafeCastToAttachmentPrimaryKeySecret(t))}return(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.mediaKey;return yield o("EBMinosWasmReactorSingleton").minosCommand({InputSpec:o("EBMinosWasm.pb").MinosCommandSpec,ResultSpec:o("EBMinosWasm.pb").DeriveAttachmentPrimaryKeySecretResultSpec,validateResult:e},{deriveAttachmentPrimaryKeySecret:{mediaKey:n}})});function r(e){return t.apply(this,arguments)}return r})()}var s=e();l.deriveAttachmentPrimaryKeySecret=s}),98);
__d("EBWorkerEBDBApi",["EBDB","EBDBConsistencyApi","EBLS","LSAuthorityLevel","LSEncryptedBackupsBackupTenancy","WALogger","WAResolvable","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("EBLS").genLSClient();try{yield o("EBDBConsistencyApi").startListeningDeviceRegistrations(t.db,o("EBDB").EBDBEnvironment.Worker)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error on EBDB init in Worker: ",""])),t)}finally{s.resolve(t.db)}}),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("EBDBConsistencyApi").trackOverprompting(o("EBDB").EBDBEnvironment.Worker,e)}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield s.promise;yield o("EBDBConsistencyApi").addNewDevice(t,o("EBDB").EBDBEnvironment.Worker,e)}),_.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield s.promise;return o("EBDBConsistencyApi").trackConsistency(t,o("EBDB").EBDBEnvironment.Worker,e),o("EBDBConsistencyApi").getDeviceId()}),g.apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("EBDB").getEBDB(),t=yield e.store("secure_encrypted_backups_client_state").readAll();return t[0]}),y.apply(this,arguments)}function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("EBDB").getEBDB(),t=yield e.store("secure_encrypted_backups_client_state").readAll();if((t==null?void 0:t.length)===0)return!1;var n=t[0],a=n.authorityLevel,i=n.backupTenancy;if(a==null)return!1;var l=i!=null?i:r("LSEncryptedBackupsBackupTenancy").PRODUCTION;return Number(l)===r("LSEncryptedBackupsBackupTenancy").PRODUCTION&&Number(a)===r("LSAuthorityLevel").AUTHORITATIVE}),b.apply(this,arguments)}l.startListeningEBDeviceRegistrations=u,l.trackOverprompting=d,l.addNewDevice=p,l.trackConsistency=f,l.getSecureEBClientState=h,l.isEBEnabledEBDB=C}),98);
__d("EncryptedBackupsUtils",["FBLogger","WAJids","WAStanzaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return Date.now()-t>o("WATimeUtils").DAY_MILLISECONDS*30},s=function(t){return Date.now()-t>o("WATimeUtils").DAY_MILLISECONDS*30};function u(e,t,n,r,o){var a={frankingTag:r==null?void 0:r.frankingTag,reportingTag:r==null?void 0:r.reportingTag},i={frankingMetadata:a,messageId:t,senderId:e,timestampMs:n};return{encryptedTransportMessage:o,metadata:i}}function c(e){return JSON.stringify([e.author,e.chat,e.externalId])}function d(e){var t=JSON.parse(e);if(!Array.isArray(t))throw r("FBLogger")("wmi_eb").mustfixThrow("Unable to parse msg id string as proper json");if(t.length!==3)throw r("FBLogger")("wmi_eb").mustfixThrow("Parsed array should have 3 components");var n=o("WAJids").unsafeCoerceToUserJid(t[0]),a=o("WAJids").unsafeCoerceToChatJid(t[1]),i=o("WAStanzaUtils").toStanzaId(t[2]);return{author:n,chat:a,externalId:i}}l.entryOlderThan30Days=e,l.timestampOlderThan30Days=s,l.asBackupMessage=u,l.convertWAMsgIdToStringId=c,l.convertStringIdToWAMsgId=d}),98);
__d("LFUCache",["Cache","ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15,u=1,c=6e4,d=(function(t){function n(n,o){var a;return a=t.call(this)||this,a.$LFUCache2=n&&n>0?n:s,a.$LFUCache3=o&&o>0?o:u,((e||(e=r("ExecutionEnvironment"))).canUseDOM||(e||(e=r("ExecutionEnvironment"))).isInWorker)&&a.$LFUCache4(),a}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.$LFUCache4=function(){clearTimeout(this.$LFUCache1),this.$LFUCache1=setTimeout(this.purge.bind(this),this.$LFUCache2*c)},o.destroy=function(){clearTimeout(this.$LFUCache1)},o.get=function(n,r){return this.has(n)&&this.$LFUCache5(n),t.prototype.get.call(this,n,r)},o.set=function(n,r,o,a){var e=this.has(n),i=t.prototype.set.call(this,n,r,o,a);return i&&(e?this.$LFUCache5(n):this.$LFUCache6(n,this.$LFUCache3)),i},o.purge=function(){var e=this,t=Array.from(this.__keys());t.forEach(function(t){e.$LFUCache7(t)<e.$LFUCache3?e.delete(t):e.$LFUCache6(t,0)}),this.$LFUCache4()},o.$LFUCache5=function(t){var e=this.$LFUCache7(t)+1;return this.$LFUCache6(t,e),e},o.$LFUCache7=function(t){var e=this.__getRaw(t);return e&&e.$LFUCache8?e.$LFUCache8:0},o.$LFUCache6=function(t,n){var e=this.__getRaw(t);return e||(e=this.__getNewRawObject()),e.$LFUCache8=n,this.__setRaw(t,e),!0},n})(r("Cache"));l.default=d}),98);
__d("MAWArmadilloAppDataTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={};s.name="ProtocolMsgId",s.internalSpec={externalId:[1,(e=o("WAProtoConst")).TYPES.STRING],author:[2,e.TYPES.STRING],chat:[3,e.TYPES.STRING]},u.name="MetaSyncMessageKeyProto",u.internalSpec={fromMe:[1,e.TYPES.BOOL],id:[2,e.TYPES.STRING]},c.name="MetaSyncMessageProto",c.internalSpec={key:[1,e.TYPES.MESSAGE,u],ts:[2,e.TYPES.INT64]},d.name="MetaSyncMessageRangeProto",d.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c]},m.name="MetaSyncChatActionProto",m.internalSpec={type:[1,e.TYPES.STRING],chatJid:[2,e.TYPES.STRING],archived:[3,e.TYPES.BOOL],ts:[4,e.TYPES.INT64],messageRange:[5,e.TYPES.MESSAGE,d],read:[6,e.TYPES.BOOL]},p.name="MetaSyncMessageActionProto",p.internalSpec={type:[1,e.TYPES.STRING],protocolMsgId:[2,e.TYPES.MESSAGE,s]},_.name="MetaSyncActionProto",_.internalSpec={chatAction:[1,e.TYPES.MESSAGE,m],messageAction:[2,e.TYPES.MESSAGE,p],__oneofs__:{action:["chatAction","messageAction"]}},f.name="MetaSyncAppDataProto",f.internalSpec={actions:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_]},g.name="EncryptedBackupsSecretsEpochProto",g.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.INT32]},h.name="EncryptedBackupsSecretsProto",h.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,g],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},y.name="FingerprintProto",y.internalSpec={currentIndex:[1,e.TYPES.UINT32],deviceIndexes:[2,e.FLAGS.REPEATED|e.TYPES.UINT32],rawId:[3,e.TYPES.UINT32]},C.name="SyncKeyDataProto",C.internalSpec={keyId:[1,e.TYPES.BYTES],keyData:[2,e.TYPES.BYTES],keyEpoch:[3,e.TYPES.UINT32],timestamp:[4,e.TYPES.INT64],fingerprint:[5,e.TYPES.MESSAGE,y]},b.name="SyncKeyShareProto",b.internalSpec={keys:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,C],orphanKeys:[2,e.FLAGS.REPEATED|e.TYPES.BYTES]},v.name="SyncKeyRequestProto",v.internalSpec={keyIds:[1,e.FLAGS.REPEATED|e.TYPES.BYTES]},S.name="AppDataProto",S.internalSpec={type:[1,e.TYPES.STRING],actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_],encryptedBackupsSecrets:[3,e.TYPES.MESSAGE,h],syncKeyShare:[4,e.TYPES.MESSAGE,b],syncKeyRequest:[5,e.TYPES.MESSAGE,v]},R.name="IdentitiesPerDeviceProto",R.internalSpec={deviceJid:[1,e.TYPES.STRING],serializedPubKey:[2,e.TYPES.BYTES],baseKey:[3,e.TYPES.BYTES]},L.name="AppDataTableSchemaProto",L.internalSpec={externalId:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],contents:[3,e.TYPES.MESSAGE,S],permittedIdentitiesPerDevice:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],ack:[5,e.TYPES.INT32],appDataId:[6,e.TYPES.INT32],recipientDevices:[7,e.FLAGS.REPEATED|e.TYPES.STRING],sendPartial:[8,e.TYPES.BOOL]},l.ProtocolMsgIdSpec=s,l.MetaSyncMessageKeyProtoSpec=u,l.MetaSyncMessageProtoSpec=c,l.MetaSyncMessageRangeProtoSpec=d,l.MetaSyncChatActionProtoSpec=m,l.MetaSyncMessageActionProtoSpec=p,l.MetaSyncActionProtoSpec=_,l.MetaSyncAppDataProtoSpec=f,l.EncryptedBackupsSecretsEpochProtoSpec=g,l.EncryptedBackupsSecretsProtoSpec=h,l.FingerprintProtoSpec=y,l.SyncKeyDataProtoSpec=C,l.SyncKeyShareProtoSpec=b,l.SyncKeyRequestProtoSpec=v,l.AppDataProtoSpec=S,l.IdentitiesPerDeviceProtoSpec=R,l.AppDataTableSchemaProtoSpec=L}),98);
__d("MAWArmadilloAppMetaTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="DbAppMetaValuesProto",s.internalSpec={msgTypeVersion:[1,(e=o("WAProtoConst")).TYPES.INT32],hmacKey:[2,e.TYPES.BYTES],allowSecurityAlert:[3,e.TYPES.BOOL],hotlikeSticker:[4,e.TYPES.BYTES],isBackfilledForOccamadillo:[5,e.TYPES.BOOL],allowSecurityAlertForSelf:[11,e.TYPES.BOOL],hasMigratedFromDexie:[12,e.TYPES.BOOL],restoreMigrationAttempts:[13,e.TYPES.INT32],deviceJid:[14,e.TYPES.STRING],restoreToDexieMigrationComplete:[15,e.TYPES.BOOL],dbMigrationVersion:[16,e.TYPES.INT32]},u.name="AppMetaTableSchemaProto",u.internalSpec={key:[1,e.TYPES.STRING],value:[2,e.TYPES.MESSAGE,s]},l.DbAppMetaValuesProtoSpec=s,l.AppMetaTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloCollectionVersionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="CollectionVersionsTableSchemaProto",s.internalSpec={collection:[1,(e=o("WAProtoConst")).TYPES.STRING],version:[2,e.TYPES.INT32],state:[3,e.TYPES.STRING],finiteFailureStartTime:[4,e.TYPES.INT64],ltHash:[5,e.TYPES.BYTES],isCollectionInMacMismatchFatal:[6,e.TYPES.BOOL],isCollectionLthashInconsistent:[7,e.TYPES.BOOL]},l.CollectionVersionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloContactsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="EphemeralSettingProto",s.internalSpec={ephemeralExpirationInSec:[1,(e=o("WAProtoConst")).TYPES.UINT32],ephemeralLastUpdatedOrSetTimestamp:[2,e.TYPES.INT64]},u.name="EphemeralSyncResponseBackoffInfo",u.internalSpec={syncResponseRetries:[1,e.TYPES.INT32],syncResponseSentTs:[2,e.TYPES.INT64]},l.EphemeralSettingProtoSpec=s,l.EphemeralSyncResponseBackoffInfoSpec=u}),98);
__d("MAWArmadilloDeletedMessagesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="DeletedMessagesTableSchemaProto",s.internalSpec={author:[1,(e=o("WAProtoConst")).TYPES.STRING],chat:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],reason:[4,e.TYPES.STRING]},l.DeletedMessagesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloDeviceChangeAlertsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="DeviceChangeAlertsTableSchemaProto",s.internalSpec={action:[1,(e=o("WAProtoConst")).TYPES.STRING],isArchived:[2,e.TYPES.BOOL],deviceChangeAlertsId:[3,e.TYPES.INT64],location:[4,e.TYPES.STRING],model:[5,e.TYPES.STRING],ts:[6,e.TYPES.INT64],loggedOut:[7,e.TYPES.BOOL],deviceJid:[8,e.TYPES.STRING],identity:[9,e.TYPES.BYTES],platform:[10,e.TYPES.STRING],latitude:[11,e.TYPES.STRING],longitude:[12,e.TYPES.STRING],isConfirmed:[13,e.TYPES.BOOL],isNotified:[14,e.TYPES.BOOL]},l.DeviceChangeAlertsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloDyiBatchTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={BACKUP_RESTORE:0,E2E_DYI:1},u={};u.name="DyiBatchTableSchemaProto",u.internalSpec={batchId:[1,(e=o("WAProtoConst")).TYPES.INT32],numMessages:[2,e.TYPES.INT32],oldestTs:[3,e.TYPES.INT64],threadId:[4,e.TYPES.STRING],isThread:[5,e.TYPES.BOOL],numMessagesRestored:[6,e.TYPES.INT32],qplInstanceKeyForThread:[7,e.TYPES.INT64],qplFlowDescriptor:[8,e.TYPES.ENUM,s],qplInstanceKeyE2E:[9,e.TYPES.INT64],numThreadsRestored:[10,e.TYPES.INT64]},l.DYI_BATCH_TABLE_SCHEMA_PROTO_QPL_FLOW_DESCRIPTOR=s,l.DyiBatchTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloEBMsgRangesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="EBMsgRangesTableSchemaProto",s.internalSpec={rangeId:[1,(e=o("WAProtoConst")).TYPES.UINT32],threadJid:[2,e.TYPES.STRING],minMsgExternalId:[3,e.TYPES.STRING],maxMsgExternalId:[4,e.TYPES.STRING],minMsgSortOrderMs:[5,e.TYPES.UINT64],maxMsgSortOrderMs:[6,e.TYPES.UINT64],creationTime:[7,e.TYPES.INT64]},l.EBMsgRangesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={};s.name="MsgContentProto",s.internalSpec={content:[1,(e=o("WAProtoConst")).TYPES.STRING],adminMsgContent:[2,e.FLAGS.REPEATED|e.TYPES.STRING],adminType:[3,e.TYPES.STRING],obsoleteExpiration:[4,e.TYPES.INT32],obsoleteTs:[5,e.TYPES.INT64],subtype:[6,e.TYPES.STRING],protobuf:[7,e.TYPES.BYTES],screenshotActionType:[8,e.TYPES.INT32],authorName:[9,e.TYPES.STRING],version:[10,e.TYPES.INT32],mentionedJids:[11,e.FLAGS.REPEATED|e.TYPES.STRING],commands:[12,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u]},u.name="MsgContentCommandProto",u.internalSpec={commandType:[1,e.TYPES.INT32],offset:[2,e.TYPES.INT32],length:[3,e.TYPES.INT32],validationToken:[4,e.TYPES.STRING]},c.name="ReportingMetaProto",c.internalSpec={frankingTag:[1,e.TYPES.BYTES],frankingVersion:[2,e.TYPES.INT32],reportingContent:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES],frankingKey:[5,e.TYPES.BYTES]},d.name="DbQuotedMsgProto",d.internalSpec={remoteJid:[1,e.TYPES.STRING],content:[2,e.TYPES.MESSAGE,h]},m.name="VideoMsgContentProto",m.internalSpec={duration:[1,e.TYPES.INT32],width:[2,e.TYPES.INT32],height:[3,e.TYPES.INT32],mimetype:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],jpegThumbnailHeight:[6,e.TYPES.INT32],jpegThumbnailWidth:[7,e.TYPES.INT32]},p.name="ImageMsgContentProto",p.internalSpec={width:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],jpegThumbnail:[3,e.TYPES.BYTES],jpegThumbnailHeight:[4,e.TYPES.INT32],jpegThumbnailWidth:[5,e.TYPES.INT32]},_.name="AudioMsgContentProto",_.internalSpec={duration:[1,e.TYPES.INT32],mimetype:[2,e.TYPES.STRING],played:[3,e.TYPES.BOOL],waveform:[4,e.TYPES.BYTES]},f.name="DocumentFileMsgContentProto",f.internalSpec={filename:[1,e.TYPES.STRING],mimetype:[2,e.TYPES.STRING]},g.name="QuotedDbMediaProto",g.internalSpec={mediaType:[1,e.TYPES.STRING],plaintextHash:[2,e.TYPES.STRING],size:[3,e.TYPES.INT32],ts:[4,e.TYPES.INT64],mediaEntry:[5,e.TYPES.BYTES],validatedVideoInfo:[6,e.TYPES.MESSAGE,m],validatedImageInfo:[7,e.TYPES.MESSAGE,p],validatedAudioInfo:[8,e.TYPES.MESSAGE,_],validatedDocumentFileInfo:[9,e.TYPES.MESSAGE,f]},h.name="DbQuotedMsgContentProto",h.internalSpec={type:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],author:[4,e.TYPES.STRING],msgContent:[5,e.TYPES.MESSAGE,s],obsoleteMedia:[6,e.TYPES.MESSAGE,g],msgId:[7,e.TYPES.STRING],mediaId:[8,e.TYPES.INT32],sourceId:[9,e.TYPES.STRING],xmaMessageType:[10,e.TYPES.INT32],specialTextSize:[11,e.TYPES.INT32],plaintextHash:[12,e.TYPES.STRING],expirationTs:[13,e.TYPES.INT64]},y.name="MessagesTableSchemaProto",y.internalSpec={type:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],author:[5,e.TYPES.STRING],ack:[6,e.TYPES.INT32],resendCount:[7,e.TYPES.INT32],msgContent:[8,e.TYPES.MESSAGE,s],altIndex:[9,e.TYPES.STRING],forwardingScore:[10,e.TYPES.INT32],quote:[11,e.TYPES.MESSAGE,d],messageExpirationTs:[12,e.TYPES.INT64],ephemeralSetting:[13,e.TYPES.MESSAGE,o("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],revokedExternalId:[14,e.TYPES.STRING],isForwarded:[15,e.TYPES.BOOL],originalTs:[17,e.TYPES.INT64],sortOrderMs:[18,e.TYPES.INT64],reportingMeta:[19,e.TYPES.MESSAGE,c],messageDeleteTs:[20,e.TYPES.INT64],ephemeralCounterStarted:[21,e.TYPES.BOOL],quoteExternalId:[22,e.TYPES.STRING],unsendMsgContentDeleteTs:[23,e.TYPES.INT64],rowId:[24,e.TYPES.INT32],thread:[25,e.TYPES.INT32],mediaId:[26,e.TYPES.INT32],ephemeralMsgDisappeared:[27,e.TYPES.BOOL],threadJid:[28,e.TYPES.STRING],xmaId:[29,e.TYPES.INT32],specialTextSize:[30,e.TYPES.INT32],xmaMessageType:[31,e.TYPES.INT32],isExpiredXmaMsg:[32,e.TYPES.BOOL],ravenEphemeralType:[33,e.TYPES.INT32],ravenEphemeralMediaState:[34,e.TYPES.INT32],editCount:[35,e.TYPES.INT32],groupId:[36,e.TYPES.STRING],groupIndex:[37,e.TYPES.INT64],groupSize:[38,e.TYPES.INT64],receiverFetchId:[39,e.TYPES.STRING],source:[40,e.TYPES.STRING],quoteExpirationTs:[41,e.TYPES.INT64],applicationErrorCode:[42,e.TYPES.INT32],hdType:[43,e.TYPES.INT32],pollStanzaId:[44,e.TYPES.STRING],collapsibleId:[45,e.TYPES.STRING],isCollapsed:[46,e.TYPES.BOOL]},l.MsgContentProtoSpec=s,l.MsgContentCommandProtoSpec=u,l.ReportingMetaProtoSpec=c,l.DbQuotedMsgProtoSpec=d,l.VideoMsgContentProtoSpec=m,l.ImageMsgContentProtoSpec=p,l.AudioMsgContentProtoSpec=_,l.DocumentFileMsgContentProtoSpec=f,l.QuotedDbMediaProtoSpec=g,l.DbQuotedMsgContentProtoSpec=h,l.MessagesTableSchemaProtoSpec=y}),98);
__d("MAWArmadilloEditMsgHistoryTableSchema.pb",["MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="EditMsgHistoryTableSchemaProto",s.internalSpec={author:[1,(e=o("WAProtoConst")).TYPES.STRING],editMsgHistoryId:[2,e.TYPES.INT32],editTs:[3,e.TYPES.INT64],msgContent:[4,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").MsgContentProtoSpec],originalMsgExternalId:[5,e.TYPES.STRING],specialTextSize:[6,e.TYPES.INT32],threadJid:[7,e.TYPES.STRING],editExternalId:[8,e.TYPES.STRING],sendStatus:[9,e.TYPES.INT32]},l.EditMsgHistoryTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloGroupInfoTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="GroupInfoSchemaProto",s.internalSpec={groupJid:[1,(e=o("WAProtoConst")).TYPES.STRING],threadId:[2,e.TYPES.INT32],creator:[3,e.TYPES.STRING],creationTs:[4,e.TYPES.INT64],name:[5,e.TYPES.STRING],nameOwner:[6,e.TYPES.STRING],nameTs:[7,e.TYPES.INT64],msgExpiration:[8,e.TYPES.INT32],participantVersion:[9,e.TYPES.STRING],inviter:[10,e.TYPES.STRING],memberAddMode:[11,e.TYPES.STRING]},l.GroupInfoSchemaProtoSpec=s}),98);
__d("MAWArmadilloGroupInvitesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="GroupInvitesTableSchemaProto",s.internalSpec={inviterJid:[1,(e=o("WAProtoConst")).TYPES.STRING],invitedParticipantId:[2,e.TYPES.STRING],inviteCode:[3,e.TYPES.STRING],inviteExpirationTs:[4,e.TYPES.INT64],caption:[5,e.TYPES.STRING]},l.GroupInvitesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloMediaTablesSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={},c={},d={},m={},p={},_={},f={},g={},h={};u.name="ChunkTableSchemaProto",u.internalSpec={plaintextHash:[1,(e=o("WAProtoConst")).TYPES.STRING],blobData:[2,e.TYPES.BYTES],mimetype:[3,e.TYPES.STRING],hashedPlaintextHash:[4,e.TYPES.STRING],chunkId:[5,e.TYPES.INT32]},c.name="MediaBackupSchemaProto",c.internalSpec={mediaBackupId:[1,e.TYPES.INT32],mediaId:[2,e.TYPES.INT32],objectId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],fbid:[5,e.TYPES.STRING]},d.name="MediaEntriesProto",d.internalSpec={msgId:[1,e.TYPES.STRING],mediaEntryData:[2,e.TYPES.BYTES]},m.name="VideoMsgContentProto",m.internalSpec={duration:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],height:[3,e.TYPES.UINT32],mimetype:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],jpegThumbnailHeight:[6,e.TYPES.UINT32],jpegThumbnailWidth:[7,e.TYPES.UINT32],thumbnailPlaintextHash:[8,e.TYPES.STRING],gifPlayback:[9,e.TYPES.BOOL]},p.name="ImageMsgContentProto",p.internalSpec={width:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],jpegThumbnail:[3,e.TYPES.BYTES],jpegThumbnailHeight:[4,e.TYPES.UINT32],jpegThumbnailWidth:[5,e.TYPES.UINT32],thumbnailPlaintextHash:[6,e.TYPES.STRING],hdType:[7,e.TYPES.ENUM,s]},_.name="AudioMsgContentProto",_.internalSpec={duration:[1,e.TYPES.UINT32],mimetype:[2,e.TYPES.STRING],played:[3,e.TYPES.BOOL],waveform:[4,e.TYPES.BYTES]},f.name="DocumentFileMsgContentProto",f.internalSpec={filename:[1,e.TYPES.STRING],mimetype:[2,e.TYPES.STRING]},g.name="ValidatedResult",g.internalSpec={validatedMimeType:[1,e.TYPES.STRING],videoStreamType:[2,e.TYPES.STRING],videoCalculatedFps:[3,e.TYPES.UINT32],videoNominalFps:[4,e.TYPES.UINT32],videoWidth:[5,e.TYPES.UINT32],videoHeight:[6,e.TYPES.UINT32],videoDuration:[7,e.TYPES.UINT32],videoAvgBitsPerSecond:[8,e.TYPES.UINT32],audioStreamType:[9,e.TYPES.STRING],audioSamplingRate:[10,e.TYPES.UINT32],audioNumberOfChannels:[11,e.TYPES.UINT32],audioAvgBitsPerSecond:[12,e.TYPES.UINT32]},h.name="MediaTableSchemaProto",h.internalSpec={mediaType:[1,e.TYPES.STRING],plaintextHash:[2,e.TYPES.STRING],size:[3,e.TYPES.UINT64],mediaEntries:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],ts:[5,e.TYPES.INT64],validatedVideoInfo:[6,e.TYPES.MESSAGE,m],validatedImageInfo:[7,e.TYPES.MESSAGE,p],validatedAudioInfo:[8,e.TYPES.MESSAGE,_],hashedPlaintextHash:[9,e.TYPES.STRING],mediaId:[10,e.TYPES.INT32],msgIds:[11,e.FLAGS.REPEATED|e.TYPES.STRING],objectId:[12,e.TYPES.STRING],fbid:[13,e.TYPES.STRING],validatedDocumentFileInfo:[14,e.TYPES.MESSAGE,f],validatedResult:[15,e.TYPES.MESSAGE,g],accessibilitySummaryText:[16,e.TYPES.STRING],isVideoGif:[17,e.TYPES.BOOL]},l.HD_TYPE=s,l.ChunkTableSchemaProtoSpec=u,l.MediaBackupSchemaProtoSpec=c,l.MediaEntriesProtoSpec=d,l.VideoMsgContentProtoSpec=m,l.ImageMsgContentProtoSpec=p,l.AudioMsgContentProtoSpec=_,l.DocumentFileMsgContentProtoSpec=f,l.ValidatedResultSpec=g,l.MediaTableSchemaProtoSpec=h}),98);
__d("MAWArmadilloMissingKeysTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="DeviceResponse",s.internalSpec={deviceId:[1,(e=o("WAProtoConst")).TYPES.INT32],deviceResponse:[2,e.TYPES.BOOL]},u.name="MissingKeysTableSchemaProto",u.internalSpec={keyHex:[1,e.TYPES.STRING],keyId:[2,e.TYPES.BYTES],timestamp:[3,e.TYPES.INT64],deviceResponses:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s]},l.DeviceResponseSpec=s,l.MissingKeysTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloParticipantsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ParticipantsTableSchemaProto",s.internalSpec={id:[1,(e=o("WAProtoConst")).TYPES.STRING],userJid:[2,e.TYPES.STRING],deliveredWatermarkTs:[3,e.TYPES.INT64],lastReadWatermarkTs:[4,e.TYPES.INT64],type:[5,e.TYPES.STRING],addressable:[6,e.TYPES.BOOL],lastReadActionTs:[7,e.TYPES.INT64],threadId:[9,e.TYPES.INT32],threadJid:[10,e.TYPES.STRING]},l.ParticipantsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloPendingMutationsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={SET:0,REMOVE:1},u={};u.name="PendingMutationsTableSchemaProto",u.internalSpec={id:[1,(e=o("WAProtoConst")).TYPES.INT32],collection:[2,e.TYPES.STRING],index:[3,e.TYPES.STRING],binarySyncAction:[4,e.TYPES.BYTES],version:[5,e.TYPES.INT32],operation:[6,e.TYPES.ENUM,s],timestamp:[7,e.TYPES.INT64],action:[8,e.TYPES.STRING]},l.SYNCD_MUTATION_SYNCD_OPERATION=s,l.PendingMutationsTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="PersonalSenderKeyStatusTableSchemaProto",s.internalSpec={groupJid:[1,(e=o("WAProtoConst")).TYPES.STRING],senderKeyId:[2,e.TYPES.INT32],rotateSenderKey:[4,e.TYPES.BOOL],senderKeyTs:[5,e.TYPES.INT64],hasSenderKey:[6,e.FLAGS.REPEATED|e.TYPES.STRING]},l.PersonalSenderKeyStatusTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloPollTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={OPEN:0,FROZEN:1},u={},c={},d={},m={};u.name="PollOptionProto",u.internalSpec={optionText:[1,(e=o("WAProtoConst")).TYPES.STRING],voteAuthors:[2,e.FLAGS.REPEATED|e.TYPES.STRING]},c.name="PollOptionsProto",c.internalSpec={pollOptionHash:[1,e.TYPES.STRING],pollOption:[2,e.TYPES.MESSAGE,u]},d.name="LatestSenderTimestampsMsProto",d.internalSpec={author:[1,e.TYPES.STRING],latestSenderTimestampMs:[2,e.TYPES.INT64]},m.name="PollTableSchemaProto",m.internalSpec={chatJid:[1,e.TYPES.STRING],encKey:[2,e.TYPES.BYTES],pollAuthor:[3,e.TYPES.STRING],pollStanzaId:[4,e.TYPES.STRING],pollOptions:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c],pollParticipantCount:[6,e.TYPES.UINT32],pollState:[7,e.TYPES.ENUM,s],selectableOptionsCount:[8,e.TYPES.UINT32],title:[9,e.TYPES.STRING],latestSenderTimestampsMs:[10,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d]},l.POLL_STATE=s,l.PollOptionProtoSpec=u,l.PollOptionsProtoSpec=c,l.LatestSenderTimestampsMsProtoSpec=d,l.PollTableSchemaProtoSpec=m}),98);
__d("MAWArmadilloReactionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ReactionsTableSchemaProto",s.internalSpec={ack:[1,(e=o("WAProtoConst")).TYPES.INT32],author:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],reactionId:[4,e.TYPES.STRING],reactToExternalId:[5,e.TYPES.STRING],reactToAuthor:[6,e.TYPES.STRING],reactToMsgId:[7,e.TYPES.STRING],threadJid:[8,e.TYPES.STRING],reaction:[9,e.TYPES.STRING],groupingKey:[10,e.TYPES.STRING],ts:[11,e.TYPES.INT64],rowId:[12,e.TYPES.INT32],senderTimestampMs:[13,e.TYPES.INT64]},l.ReactionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloReceiptTablesSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={};s.name="DbUserStatusTsProto",s.internalSpec={deliveredTs:[1,(e=o("WAProtoConst")).TYPES.INT64],readTs:[2,e.TYPES.INT64]},u.name="StatusTsPerUserProto",u.internalSpec={userJid:[1,e.TYPES.STRING],dbUserStatusTs:[2,e.TYPES.MESSAGE,s]},c.name="IdentitiesPerDeviceProto",c.internalSpec={deviceJid:[1,e.TYPES.STRING],serializedPubKey:[2,e.TYPES.BYTES],baseKey:[3,e.TYPES.BYTES]},d.name="RetryCountPerDeviceProto",d.internalSpec={deviceJid:[1,e.TYPES.STRING],count:[2,e.TYPES.INT32]},m.name="ReceiptsTableSchemaProto",m.internalSpec={msgId:[1,e.TYPES.STRING],statusTsPerUser:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u],permittedIdentitiesPerDevice:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c],recipientDevices:[4,e.FLAGS.REPEATED|e.TYPES.STRING],retryCountsPerDevice:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],waMsgId:[6,e.TYPES.STRING]},p.name="Receipts",p.internalSpec={device:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64]},_.name="PendingReceiptsTableSchemaProto",_.internalSpec={pendingReceiptId:[1,e.TYPES.STRING],thread:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],author:[4,e.TYPES.STRING],deliveryReceipts:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p],readReceipts:[6,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p]},l.DbUserStatusTsProtoSpec=s,l.StatusTsPerUserProtoSpec=u,l.IdentitiesPerDeviceProtoSpec=c,l.RetryCountPerDeviceProtoSpec=d,l.ReceiptsTableSchemaProtoSpec=m,l.ReceiptsSpec=p,l.PendingReceiptsTableSchemaProtoSpec=_}),98);
__d("MAWArmadilloReceiverFetchInfoTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ReceiverFetchInfoTableSchemaProto",s.internalSpec={mimetype:[1,(e=o("WAProtoConst")).TYPES.STRING],previewHeight:[2,e.TYPES.UINT32],previewWidth:[3,e.TYPES.UINT32],receiverFetchId:[4,e.TYPES.STRING],type:[5,e.TYPES.STRING],previewUrl:[6,e.TYPES.STRING],previewUrlExpirationTimestampMs:[7,e.TYPES.UINT64],accessibilitySummaryText:[8,e.TYPES.STRING]},l.ReceiverFetchInfoTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloSyncActionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="SyncActionsTableSchemaProto",s.internalSpec={index:[1,(e=o("WAProtoConst")).TYPES.STRING],binarySyncData:[2,e.TYPES.BYTES],actionState:[3,e.TYPES.STRING],version:[4,e.TYPES.INT32],keyId:[5,e.TYPES.BYTES],modelId:[6,e.TYPES.STRING],modelType:[7,e.TYPES.STRING],indexMac:[8,e.TYPES.BYTES],valueMac:[9,e.TYPES.BYTES],collection:[10,e.TYPES.STRING],timestamp:[11,e.TYPES.INT64],action:[12,e.TYPES.STRING]},l.SyncActionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloSyncKeysTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="SyncKeyFingerprint",s.internalSpec={currentIndex:[1,(e=o("WAProtoConst")).TYPES.INT32],deviceIndexes:[2,e.FLAGS.REPEATED|e.TYPES.INT32],rawId:[3,e.TYPES.INT64]},u.name="SyncKeysTableSchemaProto",u.internalSpec={id:[1,e.TYPES.BYTES],keyId:[2,e.TYPES.BYTES],keyData:[3,e.TYPES.BYTES],keyEpoch:[4,e.TYPES.INT64],timestamp:[5,e.TYPES.INT64],fingerprint:[6,e.TYPES.MESSAGE,s]},l.SyncKeyFingerprintSpec=s,l.SyncKeysTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloTasksTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="TasksTableSchemaProto",e.internalSpec={taskName:[1,o("WAProtoConst").TYPES.STRING],scheduledTime:[2,o("WAProtoConst").TYPES.INT64]},l.TasksTableSchemaProtoSpec=e}),98);
__d("MAWArmadilloThreadsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ThreadsTableSchemaProto",s.internalSpec={jid:[1,(e=o("WAProtoConst")).TYPES.STRING],threadOrder:[2,e.TYPES.STRING],folder:[4,e.TYPES.INT32],newestMsg:[5,e.TYPES.STRING],oldestMsg:[6,e.TYPES.STRING],lastReadMsg:[7,e.TYPES.STRING],lastReadMsgReceiptSent:[8,e.TYPES.STRING],lastReadMsgTs:[9,e.TYPES.INT64],newestMsgTs:[10,e.TYPES.INT64],muteExpireTimeMs:[11,e.TYPES.INT64],muteCallsExpireTimeMs:[12,e.TYPES.INT64],archived:[13,e.TYPES.BOOL],cannotReplyReason:[14,e.TYPES.STRING],chatId:[15,e.TYPES.INT32],optimisticThreadKey:[16,e.TYPES.STRING],isMigratedLocally:[17,e.TYPES.BOOL],snippetMsg:[18,e.TYPES.STRING],deduplicationKey:[19,e.TYPES.STRING],authoritativeThreadKey:[20,e.TYPES.STRING],snippetMsgTs:[21,e.TYPES.INT64],didInsertDualThreadCutoverAdminMsg:[22,e.TYPES.BOOL],unbumpFromTs:[23,e.TYPES.INT64],unbumpToTs:[24,e.TYPES.INT64]},l.ThreadsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloUnrenderedMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="UnrenderedMessagesTableSchemaProto",s.internalSpec={type:[1,(e=o("WAProtoConst")).TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],author:[5,e.TYPES.STRING],ack:[6,e.TYPES.INT32],resendCount:[7,e.TYPES.INT32],ephemeralSetting:[8,e.TYPES.MESSAGE,o("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],messageDeleteForMeTs:[9,e.TYPES.INT64],rowId:[10,e.TYPES.INT32],thread:[11,e.TYPES.INT32],mediaId:[12,e.TYPES.INT32],msgContent:[13,e.TYPES.STRING],threadJid:[14,e.TYPES.STRING],reportingMeta:[15,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").ReportingMetaProtoSpec],invitedParticipantUserJid:[16,e.TYPES.STRING],groupName:[17,e.TYPES.STRING],quote:[18,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").DbQuotedMsgProtoSpec],xmaMessageType:[19,e.TYPES.INT32],sortOrderMs:[20,e.TYPES.INT64]},l.UnrenderedMessagesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloXMATableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="XMATableSchemaProto",s.internalSpec={associatedMessageId:[1,(e=o("WAProtoConst")).TYPES.STRING],author:[2,e.TYPES.STRING],ctas:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u],defaultCTA:[4,e.TYPES.MESSAGE,u],defaultPreviewMediaId:[5,e.TYPES.INT32],externalId:[6,e.TYPES.STRING],faviconMediaId:[7,e.TYPES.INT32],headerMediaId:[8,e.TYPES.INT32],headerTitle:[9,e.TYPES.STRING],isTombstoned:[10,e.TYPES.BOOL],maxSubtitleNumOfLines:[11,e.TYPES.INT32],maxTitleNumOfLines:[12,e.TYPES.INT32],msgId:[13,e.TYPES.STRING],overlayDescription:[14,e.TYPES.STRING],overlayIconGlyph:[15,e.TYPES.INT32],overlayTitle:[16,e.TYPES.STRING],previewMediaIds:[17,e.FLAGS.REPEATED|e.TYPES.INT32],subtitleText:[18,e.TYPES.STRING],targetExpiringAtSec:[19,e.TYPES.INT64],targetId:[20,e.TYPES.STRING],targetType:[21,e.TYPES.INT32],targetUsername:[22,e.TYPES.STRING],threadJid:[23,e.TYPES.STRING],titleText:[24,e.TYPES.STRING],xmaId:[25,e.TYPES.INT32],xmaLayoutType:[26,e.TYPES.INT32],defaultPreviewMediaPlaintextHash:[27,e.TYPES.STRING],faviconPlaintextHash:[28,e.TYPES.STRING],headerMediaPlaintextHash:[29,e.TYPES.STRING]},u.name="CTAProto",u.internalSpec={buttonType:[1,e.TYPES.INT32],title:[2,e.TYPES.STRING],actionUrl:[3,e.TYPES.STRING],nativeUrl:[4,e.TYPES.STRING],ctaType:[5,e.TYPES.STRING]},l.XMATableSchemaProtoSpec=s,l.CTAProtoSpec=u}),98);
__d("MAWAuthoritativeThreadsCache",[],(function(t,n,r,o,a,i){"use strict";var e=new Set;i.AuthoritativeThreadsCache=e}),66);
__d("MAWBridgeReceiverFetchInfo",["WALogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r,o){var a=o.accessibilitySummaryText,i=o.mimetype,l=o.previewHeight,s=o.previewUrl,u=o.previewUrlExpirationTimestampMs,m=o.previewWidth,p=o.receiverFetchId,_=o.type;return{accessibilitySummaryText:a,mimetype:i,msgId:t,previewHeight:l,previewUrl:s,previewUrlExpirationTimestampMs:d(u),previewWidth:m,receiverFetchId:p,sortOrderMs:c(n,r),threadJid:e,type:_}}function u(e,t,n,r,o){var a=o.mimetype,i=o.previewHeight,l=o.previewWidth,s=o.receiverFetchId,u=o.type;return{mimetype:a,msgId:t,previewHeight:i,previewWidth:l,receiverFetchId:s,sortOrderMs:c(n,r),threadJid:e,type:u}}function c(e,t){return o("WATimeUtils").castToMillisTime(e!=null?e:t*1e3)}function d(t){if(t!=null)try{return o("WATimeUtils").castLongIntToMillisTime(t)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast previewUrlExpirationTimestampMs to millis time: ",""])),t);return}}l.createBridgeReceiverFetchInfoPayloadFromDbInfo=s,l.createBridgeReceiverFetchInfoPayloadFromUnstoredInfo=u}),98);
__d("MAWBridgeTypesCreators",["FBLogger","MAWAudioUtils","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","WAJids","WAMediaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{threadJid:e}}function s(e){var t,n=e.ts;switch(e.type){case o("MAWMsgType").MSG_TYPE.REVOKED:n=(t=e.originalTs)!=null?t:e.ts;break;default:n=o("MAWDbMsg").getCanonicalTsFromMsg(e)}return{msgId:e.msgId,ts:n}}function u(e,t){var n=t.map(s);return{messages:n,threadJid:e}}function c(e){return{ravenMsgId:e.msgId,threadJid:e.threadJid}}function d(e,t){return e.filter(function(e){return t===e.threadJid}).map(function(e){return e.msgId})}function m(e){var t,n,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R=e.chatJid,L=e.filteredMsgIds,E=e.hasMediaForUI,k=e.hdTypes,I=e.media,T=e.offlineAttachmentId,D=e.ravenSettings,x=e.sortOrderMs,$=e.transportKey;switch(I.mediaType){case"Image":return{duration:null,ephemeralMediaState:D==null?void 0:D.ephemeralMediaState,ephemeralMediaViewMode:D==null?void 0:D.ephemeralMediaViewMode,filesize:I.size,hasMedia:E,hasPreviewMedia:((t=I.validatedImageInfo)==null?void 0:t.jpegThumbnail)!=null,hdTypes:k,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(n=I.validatedImageInfo)==null?void 0:n.jpegThumbnailHeight,previewHeightLarge:(a=I.validatedImageInfo)==null?void 0:a.height,previewWidth:(i=I.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth,previewWidthLarge:(l=I.validatedImageInfo)==null?void 0:l.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Video":return{duration:((s=I.validatedVideoInfo)==null?void 0:s.duration)!=null?((u=I.validatedVideoInfo)==null?void 0:u.duration)*1e3:0,ephemeralMediaState:D==null?void 0:D.ephemeralMediaState,ephemeralMediaViewMode:D==null?void 0:D.ephemeralMediaViewMode,filesize:I.size,gifPlayback:((c=I.validatedVideoInfo)==null?void 0:c.gifPlayback)===!0||I.isVideoGif===!0,hasMedia:E,hasPreviewMedia:((d=I.validatedVideoInfo)==null?void 0:d.jpegThumbnail)!=null,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(m=I.validatedVideoInfo)==null?void 0:m.jpegThumbnailHeight,previewHeightLarge:(p=I.validatedVideoInfo)==null?void 0:p.height,previewWidth:(_=I.validatedVideoInfo)==null?void 0:_.jpegThumbnailWidth,previewWidthLarge:(f=I.validatedVideoInfo)==null?void 0:f.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Ptt":return{duration:(g=I.validatedAudioInfo)!=null&&g.duration?I.validatedAudioInfo.duration*1e3:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts),waveformData:((h=I.validatedAudioInfo)==null?void 0:h.waveform)!=null?o("MAWAudioUtils").serializeWaveform(I.validatedAudioInfo.waveform):void 0};case"Gif":return{accessibilitySummaryText:(y=I.accessibilitySummaryText)!=null?y:void 0,duration:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:I.msgIds,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(C=I.validatedImageInfo)==null?void 0:C.jpegThumbnailHeight,previewHeightLarge:(b=I.validatedImageInfo)==null?void 0:b.height,previewWidth:(v=I.validatedImageInfo)==null?void 0:v.jpegThumbnailWidth,previewWidthLarge:(S=I.validatedImageInfo)==null?void 0:S.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Sticker":{var P,N,M,w=o("MAWImageUtils").boundHeightWidth((P=I.validatedImageInfo)==null?void 0:P.jpegThumbnailHeight,(N=I.validatedImageInfo)==null?void 0:N.jpegThumbnailWidth,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),A=w.height,F=w.width;return{accessibilitySummaryText:(M=I.accessibilitySummaryText)!=null?M:void 0,duration:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:I.msgIds,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:A,previewHeightLarge:A,previewWidth:F,previewWidthLarge:F,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)}}case"DocumentFile":{var O,B={};for(var W of I.mediaEntries){var q=W[0],U=W[1],V=o("WAMediaUtils").mediaEntryDataToRawData(I.plaintextHash,U),H=V.filename;H!=null&&(B[q]=H)}return{defaultFilename:(O=I.validatedDocumentFileInfo)==null?void 0:O.filename,duration:null,filenames:B,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)}}default:throw I.mediaType,r("FBLogger")("messenger_web").mustfixThrow("[createBridgeMedia] Unsupported media type: "+I.mediaType)}}function p(e,t,n){return{chatJid:e,deliveredWatermarkTs:n!=null?n:o("WATimeUtils").castToUnixTime(0),fbid:t,lastReadActionTs:o("WATimeUtils").castToUnixTime(0),lastReadWatermarkTs:o("WATimeUtils").castToUnixTime(0)}}function _(e){var t=e.cannotReplyReason,n=e.folder,r=e.snippetParams,o=e.snippetSenderContactId,a=e.snippetType,i=e.threadJid;return{cannotReplyReason:t,folder:n,snippetContactIDs:r==null?void 0:r.contactIDs,snippetMentionJIDs:r==null?void 0:r.mentionJIDs,snippetParams:r==null?void 0:r.strings,snippetSenderContactId:o,snippetType:a,threadJid:i}}function f(e){return{chatJid:e.groupJid,memberAddMode:e.memberAddMode,threadName:e.name}}var g={snippetContactIDs:[],snippetMentionJIDs:[],snippetParams:[],snippetSenderContactId:null,snippetType:null};function h(e){var t,n=e.bumpTimestampMs,r=e.description,o=e.isMessageAuthorMe,a=e.isUnbump,i=e.skipBumpTimestampValidation,l=e.skipServerThreadBump,s=e.snippetData,u=e.threadJid,c=s==null?g:{snippetContactIDs:s.params.contactIDs,snippetMentionJIDs:(t=s.params.mentionJIDs)!=null?t:[],snippetParams:s.params.strings,snippetSenderContactId:s.senderContactId,snippetType:s.type};return babelHelpers.extends({},c,{bumpTimestampMs:n,description:r,isMessageAuthorMe:o,isUnbump:a,skipBumpTimestampValidation:i!=null?i:!1,skipServerThreadBump:l!=null?l:!1,threadJid:u})}function y(e){var t=e.author,n=e.chatJid,r=e.reaction,a=e.reactToMsgId,i=e.ts;return{actorId:o("WAJids").authorToUserId(t,o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid())),chatJid:n,messageId:a,reaction:r,ts:i}}function C(e){var t=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),n=e.author,r=e.chatJid,a=e.reactToMsgId;return{actorId:o("WAJids").authorToUserId(n,t),chatJid:r,messageId:a}}function b(e){return{creationTs:e.creationTs,creator:e.creator,groupJid:e.groupJid,msgExpiration:e.msgExpiration,name:e.name,nameOwner:e.nameOwner,nameTs:e.nameTs,participantVersion:e.participantVersion}}function v(e){var t=e.threadJid,n=e.inviteeJid;return{caption:e.caption,inviteCode:e.inviteCode,inviteeId:n,inviteExpireTs:e.inviteExpirationTs,inviterId:o("WAJids").extractUserId(e.inviterJid),threadJid:t}}function S(e){return{threadJid:e}}function R(e,t,n){return{senderId:o("WAJids").extractUserId(t),state:n,threadJid:e}}l.createBridgeUpdateE2EEMetadataParticipants=e,l.createBridgeDeletedMessage=s,l.createBridgeDeleteMessages=u,l.createBridgeRavenAction=c,l.getMsgIdsFilteredByJid=d,l.createBridgeMedia=m,l.createBridgeReceivedReceipt=p,l.createBridgeUpdatedThread=_,l.createBridgeUpdatedGroupInfo=f,l.createBridgeBumpedThreadV2=h,l.createBridgeUpsertReaction=y,l.createBridgeDeleteReaction=C,l.createBridgeGroupInfo=b,l.createBridgeGroupInvite=v,l.createBridgeDeleteGroupInvite=S,l.createBridgeReceivedChatState=R}),98);
__d("MAWCacheServiceBase",["MAWCacheServiceDB","MAWUICacheServicesBase","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"],s=(function(){function t(e){this.$1=new Map,this.namespace=e}var r=t.prototype;return r.$2=function(t){var e;return(e=this.$1.get(t))!=null?e:null},r.updateInMemoryCache=function(t,n){this.$1.set(t,n)},r.updateInMemoryCacheBulk=function(t){var e=this;t.forEach(function(t){var n=t[0],r=t[1];e.updateInMemoryCache(n,r)})},r.getValueFromCache=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=this,r=this.$2(t);if(r!=null)return r;var a=yield o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),i=yield a.runInTransaction([this.namespace],"readonly",function(e){return e.stores[n.namespace].getByIndex("key",[o("MAWUICacheServicesBase").adjustCacheKey(t)])},"read_from_persisted_"+this.namespace);if(i==null)return null;var l=i.id,s=babelHelpers.objectWithoutPropertiesLoose(i,e);return this.updateInMemoryCache(t,s),s});function r(e){return t.apply(this,arguments)}return r})(),t})();l.default=s}),98);
__d("MAWDbParticipant",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e+"_"+t}i.craftParticipantId=e}),66);
__d("MAWDbThread",["MAWHexUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWHexUtils").orderPreservingHex(e)+"_"+t}l.craftThreadOrder=e}),98);
__d("MAWDexie",["cr:10766"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:10766")}),34);
__d("MAWDexieTable",["MAWDexie","Promise","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=n("Promise"))).resolve(t)}function u(e){return e.reduce(function(e,t,n){return e.then(function(e){return t(n).then(function(t){return e.push(t),e})})},g([]))}function c(e){return r("MAWDexie").Promise.all(e)}function d(e){return r("MAWDexie").Promise.allSettled(e)}function m(e){return r("MAWDexie").Promise.PSD[e]}function p(e,t){r("MAWDexie").Promise.PSD[e]=t}function _(e){r("MAWDexie").Promise.PSD[e]=void 0}var f=(function(){function e(e,t,n,o){n===void 0&&(n=!0);var a=new(r("MAWDexie"))(e,babelHelpers.extends({},o,{chromeTransactionDurability:"relaxed",modifyChunkSize:r("justknobx")._("3166")}));t(a),this.name=e,this.stores=a,n&&this.open()}var t=e.prototype;return t.open=function(){this.stores.open()},t.close=function(){this.stores.close()},t.transact=function(t,r,o){var e=this;return s(this.stores.transaction(t,r.map(function(t){return e.stores[t]}),n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o();return e})))},babelHelpers.createClass(e,[{key:"tables",get:function(){return this.stores.tables}}])})();function g(e){return r("MAWDexie").Promise.resolve(e)}l.DEXIE_MIN_KEY=o("MAWDexie").Dexie.minKey,l.DEXIE_MAX_KEY=o("MAWDexie").Dexie.maxKey,l.undexify=s,l.dexieSequentialAll=u,l.dexieAll=c,l.dexieAllSettled=d,l.getDexiePSDItem=m,l.setDexiePSDItem=p,l.clearDexiePSDItem=_,l.DexieTable=f,l.dexieResolve=g}),98);
__d("MAWDbSchema.dexie",["FBLogger","MAWDbMsg","MAWDbParticipant","MAWDbThread","MAWDbVersionList","MAWDexie","MAWDexieTable","MAWFolderTypes","MAWLocalizationType","MAWODSProxy","MAWTimeUtils","WAJids","WALogger","WAMsg","WAMsgType","WAOdsEnums","WAStanzaUtils","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(t){var e=function(t){var e,n=(e=t.quote)==null?void 0:e.content;return t.quoteExternalId!=null&&(n==null?void 0:n.media)!=null};return t.messages.where("quoteExternalId").between(o("WAStanzaUtils").toStanzaId("0"),o("WAStanzaUtils").toStanzaId("["),!0,!0).filter(e).toArray().catch(function(){return t.messages.filter(e).toArray()}).then(function(e){var n=new Set(e.map(function(e){var t,n,r=(t=e.quote)==null?void 0:t.content;return r==null||(n=r.media)==null?void 0:n.plaintextHash}).filter(Boolean)),r=e.map(function(e){var t=e.msgId;return t});return t.media.filter(function(e){var t=e.plaintextHash;return n.has(t)}).toArray().then(function(e){var n=new Map(e.map(function(e){var t=e.mediaId,n=e.plaintextHash;return[n,t]}));return t.messages.where("msgId").anyOf(r).modify(function(e){var t,r=(t=e.quote)==null?void 0:t.content;e.quote.content.mediaId=n.get(r.media.plaintextHash),delete e.quote.content.media})})})},c=function(t){return t.groupInfo.toCollection().modify(function(e){typeof e.inviter=="number"&&delete e.inviter})},d=function(){return o("MAWDexieTable").dexieResolve()},m=function(t){return t.threads.filter(function(e){return o("WAJids").switchOnMsgrChatJidType(e.jid,{group:function(){return!1},user:function(){return e.oldestMsg!=null}})}).toArray().then(function(e){var n=[];return e.forEach(function(e){n.push(e.oldestMsg),n.push(o("MAWDbMsg").toMsgId__UNSAFE_DO_NOT_USE(e.newestMsg))}),t.messages.where("msgId").anyOf(n.filter(Boolean)).toArray().then(function(n){var r=new Map,a=[],i=[];n.forEach(function(e){r.set(e.msgId,e)}),e.forEach(function(e){var n=r.get(e.oldestMsg),l=r.get(e.newestMsg);return(n==null?void 0:n.type)==="Admin"&&(l==null?void 0:l.type)==="Admin"&&(n.msgId===l.msgId?i.push(e.chatId):a.push(e)),o("MAWDexieTable").dexieAll(a.map(function(e){return t.messages.where("thread").equals(e.chatId).toArray()})).then(function(e){return e.forEach(function(e){if(e.length!==0){var t=e[0].thread,n=e.filter(function(e){return e.type!=="Admin"});n.length>0||i.push(t)}}),o("MAWDexieTable").dexieAll([t.threads.bulkDelete(i),t.messages.where("thread").anyOf(i).delete()])})})})})},p=function(t){return t.unrenderedMessages.toCollection().modify(function(e){if(e.type===o("WAMsgType").MSG_TYPE.DELETE_FOR_ME){var t=e.messageDeleteForMeTs;e.messageDeleteForMeTs=t}})},_=function(t){var e=0,n=0,a=r("MAWDexie").currentTransaction;if(a==null)throw r("FBLogger")("maw_db").mustfixThrow("transaction does not exist");return a.on("complete",function(){e>0&&o("MAWODSProxy").odsBumpEntityKey({amount:e,entity:o("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),n>0&&o("MAWODSProxy").odsBumpEntityKey({amount:n,entity:o("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})}),t.threads.toArray().then(function(r){var a=r.reduce(function(e,t){return t!=null&&e.set(t.chatId,t),e},new Map);return o("MAWDexieTable").dexieAll([t.messages.toCollection().modify(function(t){if(t!=null){var r=a.get(t.thread);r!=null?t.threadJid=r.jid:e+=1}else n+=1}),t.unrenderedMessages.toCollection().modify(function(t){if(t!=null){var r=a.get(t.thread);r!=null?t.threadJid=r.jid:e+=1}else n+=1})])})},f=function(t){return t.isDualSend.toCollection().modify(function(e){e.version==null&&(e.version=1)})},g=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION&&(e.altIndex=o("MAWDbMsg").craftE2eeAdminMsgAltIndex(e.thread))})},h=function(t){return t.messages.toCollection().modify(function(e){e.sortOrderMs=o("MAWDbMsg").getSortOrderWithFallback(e)})},y=function(t){return t.threads.toCollection().modify(function(e){e.folder==null&&(e.folder=o("MAWFolderTypes").FOLDER_ID.INBOX)})},C=function(t){return t.messages.toCollection().modify(function(e){e.sortOrderMs=o("MAWDbMsg").getSortOrderWithFallback(e)})},b=function(t){return t.personalSenderKeyStatuses.toCollection().modify(function(e){e.rotateSenderKey=!0,e.hasSenderKey=new Set})},v=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&e.sortOrderMs!=null&&e.sortOrderMs>0&&(e.sortOrderMs=0)})},S=function(t){return t.messages.toCollection().modify(function(e){!(e.type===o("WAMsgType").MSG_TYPE.ADMIN&&(e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION))&&e.sortOrderMs!=null&&e.sortOrderMs<1661204086&&(e.sortOrderMs=o("MAWDbMsg").getCanonicalTsFromMsg(e)*1e3)})},R=function(t){return t.threads.filter(function(e){return e.isMigratedLocally===!0&&e.newestMsg!=null}).toArray().then(function(e){var n=e.map(function(e){return e.chatId}),r=new Map;return o("MAWDexieTable").dexieAll(e.map(function(e){return t.messages.where(["thread","sortOrderMs"]).between([e.chatId,0],[e.chatId,Number.MAX_VALUE]).last().then(function(e){e!=null&&r.set(e.thread,e.msgId)})})).then(function(){return t.threads.where("chatId").anyOf(n)})})},L=function(){return o("MAWDexieTable").dexieResolve()},E=function(t){return t.threads.toCollection().modify(function(e){if(e.lastReadMsgTs!=null&&e.lastReadMsgTs<o("WATimeUtils").MAX_INT&&(e.lastReadMsgTs=o("MAWTimeUtils").ensureValidMillisTime(e.lastReadMsgTs)),e.newestMsgTs!=null&&e.newestMsgTs<o("WATimeUtils").MAX_INT){var t=o("MAWTimeUtils").ensureValidMillisTime(e.newestMsgTs);e.newestMsgTs=t,t!=null&&(e.threadOrder=o("MAWDbThread").craftThreadOrder(t,e.jid))}})},k=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&(e.altIndex=o("MAWDbMsg").craftCutoverAdminMsgAltIndex(e.thread))})},I=function(){return o("MAWDexieTable").dexieResolve()},T=function(){return o("MAWDexieTable").dexieResolve()},D=function(){return o("MAWDexieTable").dexieResolve()},x=function(t){return t.participants.toCollection().modify(function(e){var t;e==null||((t=e.userJid)==null?void 0:t.indexOf("@msgr@msgr"))===!1||(e.id=e.id.replace("@msgr@msgr","@msgr"),e.userJid=e.userJid.replace("@msgr@msgr","@msgr"))}).then(r("emptyFunction"))},$=function(t){var e=t.threads.filter(function(e){return e.snippetMsg!=null&&e.snippetMsgTs==null});return e.toArray().then(function(n){var r=n.reduce(function(e,t){return t!=null&&t.snippetMsg!=null&&e.set(t.jid,t.snippetMsg),e},new Map),a=Array.from(r.values());return t.messages.where("msgId").anyOf(a).toArray().then(function(t){var n=t.reduce(function(e,t){return t!=null&&t.serverTs!=null&&e.set(t.msgId,t.serverTs),e},new Map);e.modify(function(e){var t=r.get(e.jid);if(t!=null){var a=n.get(t);a!=null&&(e.snippetMsgTs=o("WATimeUtils").castUnixTimeToMillisTime(a))}})})})},P=function(t){return t.threads.toArray().then(function(e){return o("MAWDexieTable").dexieAll(e.map(function(e){return t.participants.where("threadId").equals(e.chatId).modify(function(t){var n;t.threadJid=(n=t.threadJid)!=null?n:e.jid})}))})},N=P,M=function(t){var e=[];return t.groupInvites.toArray().then(function(n){var r=n.map(function(e){return e.invitedParticipantId});return t.participants.bulkGet(r).then(function(r){r.forEach(function(t,r){if(t==null){var o=n[r];e.push(o)}});var o=r.filter(Boolean);return t.groupInvites.bulkPut(n.map(function(t){var n=o.find(function(e){return e.id===t.invitedParticipantId});return n!=null?(t.inviteeJid=n.userJid,t.threadJid=n.threadJid,babelHelpers.extends({},t,{inviteeJid:n.userJid,threadJid:n.threadJid})):(e.push(t),t)}))})}).then(function(){return t.groupInvites.bulkDelete(e.map(function(e){return[e.invitedParticipantId,e.inviterJid]}))})},w=function(n){var t=new Map;return n.receipts.toArray().then(function(a){return o("MAWDexieTable").dexieAll(a.map(function(a){return n.messages.get({msgId:a.msgId}).then(function(i){if(i==null)return n.receipts.delete(a.msgId).then(r("emptyFunction"));var l=o("WAMsg").craftWAMsgIdString({author:i.author,chat:i.threadJid,externalId:i.externalId});if(t.has(l)){var s,u=(s=t.get(l))!=null?s:1;return t.set(l,u),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Duplicate waMsgId found for receipt, number of duplicates: ",""])),u),n.receipts.delete(a.msgId).then(r("emptyFunction"))}else return t.set(l,1),n.receipts.where("msgId").equals(i.msgId).modify(function(e){e.waMsgId=l}).then(r("emptyFunction"))})}))})},A=function(){return o("MAWDexieTable").dexieResolve()},F=function(t){return t.participants.toArray().then(function(e){var n=e.map(function(e){return babelHelpers.extends({},e,{id:o("MAWDbParticipant").craftParticipantId(e.threadJid,e.userJid)})}),r=e.map(function(e){return e.id});return t.participants.bulkDelete(r).then(function(){t.participants.bulkPut(n)})})},O=function(t){return t.reactions.toCollection().modify(function(e){e.ts=e.ts})},B=new Map([[(s=o("MAWDbVersionList")).VERSION.V26,u],[s.VERSION.V27,c],[s.VERSION.V28,d],[s.VERSION.V29,m],[s.VERSION.V30,p],[s.VERSION.V31,_],[s.VERSION.V43,f],[s.VERSION.V44,g],[s.VERSION.V45,h],[s.VERSION.V46,y],[s.VERSION.V47,C],[s.VERSION.V53,b],[s.VERSION.V54,v],[s.VERSION.V55,S],[s.VERSION.V56,R],[s.VERSION.V57,L],[s.VERSION.V58,E],[s.VERSION.V60,k],[s.VERSION.V66,I],[s.VERSION.V68,T],[s.VERSION.V71,D],[s.VERSION.V72,x],[s.VERSION.V82,$],[s.VERSION.V85,P],[s.VERSION.V87,N],[s.VERSION.V90,M],[s.VERSION.V91,w],[s.VERSION.V101,A],[s.VERSION.V104,F],[s.VERSION.V116,O]]);l.dbUpgrades=B}),98);
__d("MAWDbSchemaReStoreDexieUtils",["FBLogger","MAWDbSchema","MAWDbSchema.dexie","sortBy"],(function(t,n,r,o,a,i,l){"use strict";var e=r("sortBy")(Array.from(new Set([].concat(Array.from(o("MAWDbSchema").dbSchema.keys()),Array.from(o("MAWDbSchema.dexie").dbUpgrades.keys())))).map(function(e){return{schema:o("MAWDbSchema").dbSchema.get(e),upgrade:o("MAWDbSchema.dexie").dbUpgrades.get(e),version:e}}),function(e){var t=e.version;return t}),s=function(t,n){return Array.from(t.filter(function(e){return e.version<=n&&e.schema!=null}).reduce(function(e,t){var n;return(n=t.schema)==null||n.forEach(function(t){e.set(t.name,t)}),e},new Map).values())},u=function(t,n){return s(t,n).reduce(function(e,t){var n=t.autoIncrement,o=t.dexieOnly_primaryKeyUnique,a=t.name,i=t.primaryKey,l=t.removed,s=a.replace(/^e2ee_/,"");if(l===!0)return e[s]=null,e;if(n&&o===!0)throw r("FBLogger")("messenger_web").mustfixThrow("Invalid schema, cannot have both autoincremnet and unique constraints "+JSON.stringify(t));var u=n?"++":"",c=o===!0?"&":"",d=(i.length>1?"[":"")+i.join("+")+(i.length>1?"]":""),m=Object.values(t.indexes).map(function(e){var t=e.columns,n=e.unique!==!1,r=t.length>1,o=e.multiEntry_DO_NOT_USE===!0,a=n&&!o?"&":"",i=o?"*":"",l=""+a+i;return""+l+(r?"[":"")+t.join("+")+(r?"]":"")}).join(",");return e[s]=[""+u+c+d,m].filter(Boolean).join(","),e},{})},c=function(n){return u(e,n)};l.MAW_DB_VERSION_CHANGES=e,l.getDexieSchemaForVersion=u,l.getCompleteDexieSchemaForVersion=c}),98);
__d("MAWDbVersion",["MAWCurrentUser","MAWDbSchemaReStoreDexieUtils","MAWDbVersionList","MAWGetDbVersion","MAWIndexedDbMetadata","MAWODSProxy","MWFBLogger","Promise","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h=o("MWFBLogger").MWLogger().tags(["db","getDexieDbVersion"]),y=o("MAWGetDbVersion").getArmadilloDbVersion(),C=o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(Math.min(o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version,y>0?y:1/0));function b(e,t){var n=t.schema,r=t.upgrade,o=t.version;return n!=null&&r!=null?e.version(o).stores(n).upgrade(r):n!=null?e.version(o).stores(n):r!=null?e.version(o).upgrade(r):e.version(o),o}function v(t){return new(g||(g=n("Promise")))(function(n){if(!indexedDB){n();return}var r=indexedDB.open(t);r.onupgradeneeded=function(r){r.target.transaction.abort();var o=r.target.result;h.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," onupgradeneeded - closing db"])),t),o==null||o.close(),n()},r.onsuccess=function(e){var r=e.target.result,a=r==null?void 0:r.version;h.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose([""," version: ",""])),t,a!=null?a:"null"),r==null||r.close(),a!=null?(a%10>=1&&o("MAWODSProxy").odsBumpEntityKey({amount:1,entity:o("WAOdsEnums").Entity.MAW_DB_UNEXPECTED_VERSION,key:"fail_"+a%10}),n(o("MAWDbVersionList").toVersion(a/10))):n()},r.onerror=function(e){var r;h.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose([""," error ",""])),t,e==null||(r=e.target)==null||(r=r.error)==null?void 0:r.message),n()},r.onblocked=function(e){var n=e.target.result,r=n==null?void 0:n.version;h.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose([""," blocked, version: ",""])),t,r!=null?r:"null"),n==null||n.close()}})}function S(){var e=o("MAWCurrentUser").getID();return v(o("MAWIndexedDbMetadata").dbName(e))}function R(e,t){if(e.upgrade!=null||t.upgrade!=null)return!0;var n=Object.keys((e==null?void 0:e.schema)||{}),r=Object.keys((t==null?void 0:t.schema)||{}),o=[].concat(n,r),a=new Set(o);return a.size!==o.length}function L(e){return e.reduce(function(e,t,n){if(n===0)return[babelHelpers.extends({},t,{schema:o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(t.version)})];var r=e[e.length-1],a=babelHelpers.extends({},t,{schema:t.schema!=null?o("MAWDbSchemaReStoreDexieUtils").getDexieSchemaForVersion([t],t.version):null});return R(r,a)?(e.push(a),e):(e.splice(e.length-1,1,babelHelpers.extends({},r,a,{schema:babelHelpers.extends({},r==null?void 0:r.schema,a==null?void 0:a.schema)})),e)},[])}function E(e,t,n,r){var a=r!=null?r:o("MAWGetDbVersion").getArmadilloDbVersion==null?void 0:o("MAWGetDbVersion").getArmadilloDbVersion();h.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["current db version: ",", target db version: ",""])),n,a),a==null&&h.WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["version is not set in QE"]))),n!=null&&n>a&&(h.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["current db version is greater than target db version"]))),a=n);var i=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(e){var t=e.version;return n==null||t>n}).filter(function(e){var t=e.version;return a==null||a>=t}),l=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(e){var t=e.version;return a==null||a>=t});if(i.length===0||i.length===l.length){h.DEBUG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Skipping db upgrade and just applying latest schema"]))),t.addAnnotations({bool:{isUpgradeNeeded:!1}});var s=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version,u=Math.min(a!=null&&a>0?a:s,s);return e.version(u).stores(o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(u)),u}var c=L(i);h.DEBUG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Applying "," updates between "," and ",""])),c.length,i[0].version,i[i.length-1].version);var g=c.filter(function(e){return!!e.upgrade}).map(function(e){return e.version.toString()}),y=c.filter(function(e){return!!e.schema}).map(function(e){return e.version.toString()});g.length&&t.addAnnotations({string_array:{dataMigrationVersions:g}}),y.length&&t.addAnnotations({string_array:{schemaUpgradeVersions:y}}),t.addAnnotations({bool:{isUpgradeNeeded:!0}});var C=0;return c.forEach(function(t){var n;C=Math.max((n=b(e,t))!=null?n:0,C!=null?C:0)}),C}l.CURRENT_MAW_STORES=C,l.getDexieDbVersion=v,l.getDBVersion=S,l.updateDB=E}),98);
__d("MAWDexieError",[],(function(t,n,r,o,a,i){"use strict";var e="ModifyError",l="BulkError",s="OpenFailedError",u="VersionChangeError",c="SchemaError",d="UpgradeError",m="InvalidTableError",p="MissingAPIError",_="NoSuchDatabaseError",f="InvalidArgumentError",g="SubTransactionError",h="UnsupportedError",y="InternalError",C="DatabaseClosedError",b="PrematureCommitError",v="ForeignAwaitError",S="UnknownError",R="ConstraintError",L="DataError",E="TransactionInactiveError",k="ReadOnlyError",I="VersionError",T="NotFoundError",D="InvalidStateError",x="InvalidAccessError",$="AbortError",P="TimeoutError",N="QuotaExceededError",M="SyntaxError",w="DataCloneError",A={AbortError:$,BulkError:l,ConstraintError:R,DatabaseClosedError:C,DataCloneError:w,DataError:L,ForeignAwaitError:v,InternalError:y,InvalidAccessError:x,InvalidArgumentError:f,InvalidStateError:D,InvalidTableError:m,MissingAPIError:p,ModifyError:e,NoSuchDatabaseError:_,NotFoundError:T,OpenFailedError:s,PrematureCommitError:b,QuotaExceededError:N,ReadOnlyError:k,SchemaError:c,SubTransactionError:g,SyntaxError:M,TimeoutError:P,TransactionInactiveError:E,UnknownError:S,UnsupportedError:h,UpgradeError:d,VersionChangeError:u,VersionError:I};i.DEXIE_ERROR=A}),66);
__d("MAWIDbSetupQplEventListener",["MAWDexieError","MAWQplProxy","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(t){var n=new Set(Object.keys(o("MAWDexieError").DEXIE_ERROR));n.has(t.reason)&&e!=null&&(e.endFail(t.reason),o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25310776,"6155"),"database_setup_failed"),s!=null&&(s(),s=null))}var c=function(r,o){return e=r,s=o,t.addEventListener("unhandledrejection",u),function(){return t.removeEventListener("unhandledrejection",u)}};l.trackDbSetupFailure=c}),98);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o){return indexedDB==null||t==null?(e||(e=n("Promise"))).resolve():new(e||(e=n("Promise")))(function(e,n){var a=indexedDB.deleteDatabase(t);a.onsuccess=function(){r("FBLogger")("maw_db").warn("%s db was deleted",o),e()},a.onblocked=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",o)},a.onerror=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db",o),n(a.error)}})}function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=o("CurrentMessengerUser").getID();yield(e||(e=n("Promise"))).all([s(o("MAWIndexedDbMetadata").dbName(t),"maw_v1"),s(o("MAWIndexedDbMetadata").restoreDbName2(t),"maw_v3"),s(o("MAWIndexedDbMetadata").jobsDbName(t),"signal"),s(o("MAWIndexedDbMetadata").logDbName(t),"logDb")])}),c.apply(this,arguments)}l.deleteDB=s,l.deleteMAWPersistence=u}),98);
__d("MAWLowLevelApiTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e={EXISTING_GROUP_INVITE:"existing_group_invite",MISSING_GROUP:"missing_group"},l={EXPIRED_GROUP_INVITE:"expired_group_invite",MISSING_GROUP:"missing_group",MISSING_GROUP_INVITE:"missing_group_invite"},s=n("$InternalEnum")({Initializing:"initializing",Open:"open",Closed:"closed",Error:"error",Upgrading:"upgrading"});i.WRITE_GROUP_INVITE_ERROR=e,i.GET_GROUP_INVITE_ERROR=l,i.DatabaseState=s}),66);
__d("MAWDbFactory",["ClientConsistencyEventEmitter","Deferred","MAWCurrentUser","MAWDbVersion","MAWDexieTable","MAWGetDbVersion","MAWIDbSetupQplEventListener","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWLowLevelApiTypes","MAWQplProxy","MAWReliabilityMonitor","MWFBLogger","Promise","asyncToGeneratorRuntime","getErrorSafe","gkx","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=["backendInitPromise","middleware","onDbPopulate"],h;function y(t,a){var i=null,l=o("MWFBLogger").MWLogger().tags(["db",t,a]),y=new(r("Deferred")),C=!1,b=!1,v,S=!1,R=null,L=a!=="worker"?null:o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("DB_"+t+"_"+a,function(){return{extra:{isMakingDB:String(C),willBeSetup:String(b)},reason:String(R),state:(function(){if(R==null)return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN;switch(R){case o("MAWLowLevelApiTypes").DatabaseState.Initializing:case o("MAWLowLevelApiTypes").DatabaseState.Upgrading:return o("MAWReliabilityMonitor").HealthReportState.PENDING;case o("MAWLowLevelApiTypes").DatabaseState.Open:return o("MAWReliabilityMonitor").HealthReportState.OK;case o("MAWLowLevelApiTypes").DatabaseState.Closed:case o("MAWLowLevelApiTypes").DatabaseState.Error:return o("MAWReliabilityMonitor").HealthReportState.ERROR}})()}});function E(){y=new(r("Deferred")),v==null||v(),C=!1,b=!1}function k(){return b}function I(){return y.getPromise().then(function(){return S})}function T(e,t,n){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,h,k){var I=h.backendInitPromise,T=h.middleware,D=h.onDbPopulate,x=babelHelpers.objectWithoutPropertiesLoose(h,g),$=o("MAWCurrentUser").getID(),P=o("MAWIndexedDbMetadata").dbName($),N=r("qpl")._(25310776,"6155");function M(e){R=e,L==null||L.updateState()}if(i!=null){l.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["DB exists"]))),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_exsists");return}var w=o("MAWQplProxy").startQplUserFlow(r("qpl")._(1056836116,"905"),{string:{db:t,name:P}});if(b=!0,C)return o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_in_progress"),y.getPromise();l.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Starting DB Setup"]))),C=!0,o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_started"),v=o("MAWIDbSetupQplEventListener").trackDbSetupFailure(w,function(){M(o("MAWLowLevelApiTypes").DatabaseState.Error),y.reject("DB setup failed"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_setup_failed"),E()}),M(o("MAWLowLevelApiTypes").DatabaseState.Initializing);var A=yield o("MAWDbVersion").getDexieDbVersion(P);A==null&&(S=!0),w.addAnnotations({int:{currentVersion:A}});var F=k!=null?k:o("MAWGetDbVersion").getArmadilloDbVersion();if(w.addAnnotations({int:{targetVersion:F}}),I&&(A||0)<F){w.addPoint("separate_read_waiting_on_worker_upgrade"),l.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Waiting for worker to upgrade schema..."])));try{yield I}catch(e){throw l.catching(r("getErrorSafe")(e)).mustfixThrow("Worker startup promise rejected, schema upgrade failed.")}var O=yield o("MAWDbVersion").getDexieDbVersion(P);if(O!==F)throw l.mustfixThrow("Main thread waiting on worker schema upgrade from %s to %s, upgrade failed with version %s",A,F,O);A=O}else a==="worker"&&(o("MAWQplProxy").sendQPLIntAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"dbVersion",A!=null?A:0),o("MAWQplProxy").sendQPLIntAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"useSentBytesCache",r("gkx")("33008")?1:0));var B=function(n){var e=o("MAWDbVersion").updateDB(n,w,A,k);return!I&&a==="worker"&&o("MAWQplProxy").sendQPLBoolAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"dbUpgradeNeeded",A!==e),l.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["latest pushed version: ",", current: ",", requested: ",""])),e,A,k!=null?k:"<latest>"),a==="worker"&&(A!==e?o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_version_upgraded"):o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_version_upgrade_not_required")),e};return i=new(o("MAWDexieTable")).DexieTable(P,function(e){T.forEach(function(t){e.use(t(n))});var i=B(e);e.on("populate",function(e){if(!e){M(o("MAWLowLevelApiTypes").DatabaseState.Error),y.reject("Missing DB for populate event"),w.endFail("on_populata-missing_txn"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_on_populate_missing_txn");return}l.info("MAWDB populated. HasPopulateEvent: %s",!!D),D==null||D(e)}),e.on("blocked",function(){l.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["DB Open blocked"]))),M(o("MAWLowLevelApiTypes").DatabaseState.Error),y.reject("DB Open blocked"),w.endFail("db_blocked"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_blocked"),E()}),e.on("ready",function(e){if(l.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["MAW DB setup complete"]))),C=!1,e==null){M(o("MAWLowLevelApiTypes").DatabaseState.Error),l.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["DB is null"]))),y.reject("DB is null"),w.endFail("db_null"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_null"),E();return}M(o("MAWLowLevelApiTypes").DatabaseState.Open),v==null||v(),y.resolve(),w.endSuccess({int:{dbVersion:i}}),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_ready")}),e.on("close",function(){M(o("MAWLowLevelApiTypes").DatabaseState.Closed),l.WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["DB forcibly closed"]))),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_forcibly_closed")}),e.on("versionchange",function(e){l.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Versionchange detected: ("," -> "," (event version: ",", highestUsed: (","), name: ",""])),e==null?void 0:e.oldVersion,e==null?void 0:e.newVersion,String(e==null?void 0:e.version),i,e==null?void 0:e.name),M(o("MAWLowLevelApiTypes").DatabaseState.Upgrading),a!=="worker"&&r("ClientConsistencyEventEmitter").emit("softRefresh","mawdb_versionchange"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_versionchange")})},void 0,x),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_requested"),y.getPromise()}),D.apply(this,arguments)}function x(e){if(i==null)throw l.mustfixThrow('IndexDB has not been initialized before executing "'+(e!=null?e:"unnamed")+'"');return i}function $(e){return i!=null&&!C?(h||(h=n("Promise"))).resolve(i):(y=y||new(r("Deferred")),y.getPromise().then(function(){return x(e)}))}function P(){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield $();e!=null&&(e.close(),i=null),E()}),N.apply(this,arguments)}function M(){i=null,E()}function w(e){r("promiseDone")(P());var t=o("MAWIndexedDbMetadata").dbName(e!=null?e:o("MAWCurrentUser").getID());r("promiseDone")(o("MAWIndexedDBDeletion").deleteDB(t,"maw")),L==null||L.stopMonitoring()}return{closeDB:P,deleteDb:w,getDB:$,getDBExn:x,isNewDb:I,makeDB:T,reset_singleton_INTERNAL_ONLY:M,setupPromise:function(){return y.getPromise()},willSetupDB:k}}l.makeIDBFactory=y}),98);
__d("MAWIndexedDbUI",["ExecutionEnvironment","MAWDbFactory","MAWDbMutationMiddleware","MAWDbProtocolMsgIdMiddleware","MAWDexieTable","MAWIndexedDb","MAWTransactor","Promise","cr:3527","gkx","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){var e=o("MAWDbFactory").makeIDBFactory("ui_idb","main");return{closeDB:e.closeDB,deleteDb:e.deleteDb,getDB:e.getDB,makeDB:function(a,i,l){var t=[o("MAWDbMutationMiddleware").getMAWDbMutationMiddleware];r("gkx")("1760")&&t.push(o("MAWDbProtocolMsgIdMiddleware").MAWDbProtocolMsgIdMiddleware),n("cr:3527")!=null&&t.push(n("cr:3527"));var s=e.makeDB(a,{autoOpen:r("gkx")("6817"),backendInitPromise:i.backendInitPromise,cache:"disabled",middleware:t,onDbPopulate:i.onDbPopulate},l);return s},reset_singleton_INTERNAL_ONLY:e.reset_singleton_INTERNAL_ONLY}}var d=c(),m=d.makeDB,p=d.closeDB,_=d.getDB,f=d.deleteDb,g=d.reset_singleton_INTERNAL_ONLY,h=(s||(s=r("ExecutionEnvironment"))).isInBrowser?_("MawDbInUISingleton_INTERNAL_ONLY").then(function(e){return{openReadonlyTransaction:function(n,a,i){return e.stores.transaction("r",a,function(){return o("MAWDexieTable").setDexiePSDItem("transactorName",n),o("MAWDexieTable").setDexiePSDItem("transactionRequested",(u||(u=r("performance"))).now()+u.timeOrigin),i(e.stores)})},openReadWriteTransaction:function(n,a,i){return e.stores.transaction("rw",a,function(){return o("MAWDexieTable").setDexiePSDItem("transactorName",n),o("MAWDexieTable").setDexiePSDItem("transactionRequested",(u||(u=r("performance"))).now()+u.timeOrigin),i(e.stores)})}}}):new(e||(e=n("Promise")))(function(){});l.makeMsgrTransactor=o("MAWTransactor").makeMsgrUITransactor_IMPORT_FROM_MAWIndexedDbUI_INSTEAD,l.afterTransaction=o("MAWIndexedDb").afterTransaction,l.makeMAWIndexedDBFactory=c,l.makeDB=m,l.closeDB=p,l.getDB=_,l.deleteDb=f,l.reset_singleton_INTERNAL_ONLY=g,l.MawDbInUISingleton=h}),98);
__d("MAWWorkerCacheServiceRegistry",["MAWSnippetsCacheService"],(function(t,n,r,o,a,i,l){"use strict";var e={snippets:o("MAWSnippetsCacheService").getMAWSnippetsCacheService()};function s(){return e}l.getWorkerRegistry=s}),98);
__d("MAWDbMsgOrReaction",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function l(e,t){return e==null?t.forNull():e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function s(e,t){return e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function u(e,t){return e==null?t.forNull():e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}i.switchOnMsgOrReaction=e,i.switchOnMsgOrReactionNullish=l,i.switchOnMsgOrReactionMaybeUnstored=s,i.switchOnMsgOrReactionMaybeUnstoredNullish=u}),66);
__d("MAWWorkerCacheServices",["FBLogger","MAWBridge","MAWCacheServiceDB","MAWCacheServiceQPL","MAWCacheServiceUtils","MAWDbMsgOrReaction","MAWLoggerUtils","MAWSnippetsCacheCalculateDelta","MAWWorkerCacheServiceRegistry","Promise","WorkerScheduler","asyncToGeneratorRuntime","cr:2354","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$1=o("MAWCacheServiceUtils").getMAWCacheServiceBroadcastChannel();var e=o("MAWWorkerCacheServiceRegistry").getWorkerRegistry();this.registry=e,this.schedulerRegistry=Object.keys(e).reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t]=o("WorkerScheduler").makeScheduler(o("MAWCacheServiceUtils").getSchedulerName(t),o("MAWCacheServiceUtils").SCHEDULER_CONFIG),n))},{})}var a=t.prototype;return a.$2=function(t,n,r,a){var e={cache:n,instanceKey:a,namespace:t,source:r};this.$1==null?o("MAWBridge").getBridge().fireAndForget("event","broadcastChannelFallback",{event:{data:e},namespace:o("MAWCacheServiceUtils").MAW_CACHE_SERVICE_BROADCAST_CHANNEL}):this.$1.postMessage(e)},a.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i){var l=o("MAWCacheServiceUtils").findDuplicates(t,function(e){var t=e[0],n=e[1];return t});if(l.length>0&&(r("FBLogger")("MAWCacheService").mustfix("Found duplicate keys in cache: %s. Original keys: %s, Namespace: %s, Source: %s",l.map(function(e){var t=e[0],n=e[1];return t}).join(", "),t.map(function(e){var t=e[0],n=e[1];return t}).join(", "),e,n),a!=null&&r("MAWCacheServiceQPL").addAnnotationsQPL(a,{bool:{hasDuplicateKeys:!0},string_array:{duplicateKeys:r("MAWCacheServiceQPL").redactKeysForNonEmployee(l.map(function(e){var t=e[0],n=e[1];return t}))}})),t.length===0){a!=null&&(r("MAWCacheServiceQPL").addPointQPL(a,"nothing_to_update_in_cache",n),r("MAWCacheServiceQPL").endSuccessQPL(a));return}a!=null&&r("MAWCacheServiceQPL").addPointQPL(a,"updating_cache_in_persisted_start",n);var s=this.registry[e];s.updateInMemoryCacheBulk(t);try{var u=o("MAWCacheServiceDB").convertCacheValueToDBRawValue(t),c=yield o("MAWCacheServiceDB").getOrSetupMAWCacheDB();yield c.runInTransaction([e],"readwrite",function(t){var n=u.map(function(e){return{item:e,selector:[e.key]}});return t.stores[e].bulkUpsert("key",n)},"update_cache_"+e),i==null||i(u.map(function(e){var t=e.key;return t})),a!=null&&r("MAWCacheServiceQPL").addPointQPL(a,"updating_cache_in_persisted_end",n)}catch(e){var d=r("getErrorSafe")(e);a!=null&&(r("MAWCacheServiceQPL").addAnnotationsQPL(a,{string:{error:d.message}}),r("MAWCacheServiceQPL").addPointQPL(a,"updating_cache_in_persisted_failed",n)),r("FBLogger")("MAWCacheService").catching(d).mustfix("Failed to update persisted cache")}a!=null&&r("MAWCacheServiceQPL").addPointQPL(a,"broadcasting_to_ui_start",n),this.$2(e,t,n,a)});function t(t,n,r,o,a){return e.apply(this,arguments)}return t})(),a.calculateDelta=function(a){var t=this,i=Object.values(this.registry).map(function(e){var i=e.shouldDropDelta(a);return i.then(function(i){if(!i){var l=t.schedulerRegistry[e.namespace];return l.runTask({fn:function(){return e.calculateDelta(a).then(function(i){var s=i.map(function(e){var t=e[0],n=e[1];return t}),c=o("MAWLoggerUtils").getInstanceKey();i.length!==0&&(r("MAWCacheServiceQPL").startQPL(c,e.namespace),r("MAWCacheServiceQPL").addAnnotationsQPL(c,{bool:{isRealtimeUpdate:!0},int:{instanceKey:c},string_array:{realtimeUpdatedKeys:s}}));var d=u(a);return t.$3(e.namespace,i,"realtime-update",c,function(e){n("cr:2354")==null||n("cr:2354").notifyCacheWrite(e,l,d)})}).catch(function(t){r("FBLogger")("MAWCacheService").catching(t).warn("Failed to calculate delta for: %s",e.namespace)})},name:"maw_calculate_delta",priority:o("WorkerScheduler").REGULAR_PRIORITY})}})});(e||(e=n("Promise"))).all([].concat(i)).catch(function(e){r("FBLogger")("MAWCacheService").catching(e).mustfix("Failed to calculate delta for all services")})},a.computeCachePayloadFromScratch=function(t,n,a,i){var e=this;i!=null&&r("MAWCacheServiceQPL").registerInstanceKeyInWorker(i),r("MAWCacheServiceQPL").addPointQPL(i,"compute_from_scratch_start",a),r("MAWCacheServiceQPL").addAnnotationsQPL(i,{string_array:{keysReceivedInWorker:r("MAWCacheServiceQPL").redactKeysForNonEmployee(n)}});var l=this.registry[t],s=this.schedulerRegistry[l.namespace];if(l==null)throw r("FBLogger")("messenger_web").mustfixThrow("No service found for namespace: "+t);return s.runTask({fn:function(){return l.computeCachePayloadFromScratch(n).then(function(n){return r("MAWCacheServiceQPL").addPointQPL(i,"compute_from_scratch_end",a),e.$3(t,n,a,i)}).catch(function(e){r("MAWCacheServiceQPL").endFailureQPL(i,"compute_from_scratch_failed",a),r("FBLogger")("MAWCacheService").catching(e).warn("Failed to compute cache payload from scratch")})},name:"maw_compute_cache_payload_from_scratch",priority:o("WorkerScheduler").REGULAR_PRIORITY})},t})();function u(e){var t=e.filter(function(e){var t=e[0];return["messages","reactions"].includes(t)}),n=o("MAWSnippetsCacheCalculateDelta").parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids(t.map(function(e){var t=e[0],n=e[1];return n})),r=n.values().every(function(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e.value,{forMessage:function(t){return t.source==="eb_restore"},forReaction:function(){return!0}})});return r?"eb_restore":"whatsapp"}var c=null,d=function(){return c==null&&(c=new s),c};l.getMAWWorkerCacheServices=d}),98);
__d("MAWExtractMsFromExternalId",["I64","MAWExternalId","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=2199023255551;function c(t){try{var n=(s||(s=o("I64"))).of_string_opt(t);if(n!=null){var r;return(r=d(n))!=null?r:0}}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert externalId to number: ",""])),t)}return 0}function d(e){var t=Number((s||(s=o("I64"))).to_string(s.and_(s.lsr_(e,22),s.of_float(u))));return o("MAWExternalId").getThreeMostSignificantDigitsForSortOrderTimestamp(t)}l.extractMsFromStanzaId=c,l.extractMsFromExternalId=d}),98);
__d("MAWGetBumpTimestampMs",["I64","MAWAckLevel","MAWDbMsgOrReaction","MAWExtractMsFromExternalId","MAWTimeUtils","WALongInt","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r=n==null?null:o("MAWExtractMsFromExternalId").extractMsFromExternalId(n);return(e||(e=o("I64"))).add(o("MAWTimeUtils").millisTimeToTimestamp(t),e.of_int32(r!=null?r:0))}function u(t){var n=t.msg,a=t.throwIfNoServerTs,i=a?r("nullthrows")(n.serverTs):n.serverTs;return s(o("WATimeUtils").castUnixTimeToMillisTime(i!=null?i:n.ts),(e||(e=o("I64"))).of_string(n.externalId))}function c(t){return t.senderTimestampMs!=null?(e||(e=o("I64"))).of_string(o("WALongInt").longIntToDecimalString(t.senderTimestampMs)):s(o("WATimeUtils").castUnixTimeToMillisTime(t.ts),(e||(e=o("I64"))).of_string(t.externalId))}function d(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstoredNullish(t,{forMessage:function(n){return o("MAWAckLevel").isMsgAuthoritative(n.ack)&&n.sortOrderMs!=null?(e||(e=o("I64"))).of_float(n.sortOrderMs):u({msg:n,throwIfNoServerTs:!1})},forNull:function(){return(e||(e=o("I64"))).zero},forReaction:c})}l.calculateBumpTimestampMs=s,l.getBumpTimestampMs=d}),98);
__d("MAWSnippetsCacheServiceUtils",["I64","MAWDbMsgOrReaction","MAWGetBumpTimestampMs"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionNullish(t,{forMessage:function(n){return{msgAckLevel:n.ack,msgId:n.msgId,reactionId:void 0,timestamp:n.sortOrderMs!=null?n.sortOrderMs:(e||(e=o("I64"))).to_float(o("MAWGetBumpTimestampMs").getBumpTimestampMs(n))}},forNull:function(){return{msgAckLevel:void 0,msgId:void 0,reactionId:void 0,timestamp:Number.MIN_SAFE_INTEGER}},forReaction:function(n){return{msgAckLevel:void 0,msgId:void 0,reactionId:n.reactionId,timestamp:(e||(e=o("I64"))).to_float(o("MAWGetBumpTimestampMs").getBumpTimestampMs(n))}}})}l.getMsgOrReactionIdAndTimestamp=s}),98);
__d("MAWUpdateThreadListItemUtils",["MAWAckLevel","MAWDbMsg","MAWDbMsgOrReaction","MAWMsgType","MAWXMAUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(e,{forMessage:function(t){return t.altIndex===o("MAWDbMsg").SPAM_ALT_INDEX||t.altIndex===o("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX},forReaction:function(){return!1}})}function s(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(e,{forMessage:function(t){return t.ack===o("MAWAckLevel").ACK.clock},forReaction:function(){return!1}})}function u(e){var t;return e.msgId!=null&&e.type===o("MAWMsgType").MSG_TYPE.XMA&&((t=e.msgContent)==null?void 0:t.content)===""}function c(e){return e.type===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isRtcXMA(e==null?void 0:e.xmaMessageType)}l.isSpamMessage=e,l.isOptimisticMessage=s,l.isXMAThreadSnippet=u,l.isRTCXMAMessage=c}),98);
__d("MAWSnippetsCacheCalculateDelta",["FBLogger","MAWDbMsgOrReaction","MAWGetThreadUpdateType","MAWSnippetsCacheServiceUtils","MAWUpdateThreadListItemUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="[SnippetsCacheService][Worker]";function s(e){var t=new Set(e.map(function(e){var t,n,r=(t=e.decryptedValues)!=null?t:[],o=(n=e.deletedValues)!=null?n:[];return[].concat(r,o)}).flat().map(function(e){return o("MAWUpdateThreadListItemUtils").isOptimisticMessage(e)?null:e.msgId}).filter(Boolean));return e.reduce(function(e,n){var r=n.type==="delete"?n.deletedValues:n.decryptedValues,o=p(r);return o=_(t,o),o.length===0||o.forEach(function(t){var r=t.threadJid,o=e.get(r),a=m({type:n.type,value:t},o);e.set(r,a)}),e},new Map)}function u(e){return e.some(function(e){var t=e.chatJid,n=e.lastComputedCacheValue,r=e.mutateReq;return!c(r)||d(r.value)})}function c(e){return!(e.type==="delete"||e.type==="deleteRange"||o("MAWUpdateThreadListItemUtils").isXMAThreadSnippet(e.value)||h(e.value)||y(e.value))}function d(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return!1},forReaction:function(t){return t.reaction!=null&&o("MAWGetThreadUpdateType").canReactionAffectBump(t)}})}function m(e,t){if(t==null)return e;var n=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(e.value),r=n.timestamp,a=e.value.externalId,i=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t.value),l=i.timestamp,s=t.value.externalId;return r===l?e.type==="delete"||e.type==="deleteRange"?e:t.type==="delete"||t.type==="deleteRange"?t:a.localeCompare(s)>0?e:t:r==null?t:l==null||r>l?e:t}function p(e){return e==null||e.length===0?[]:e.filter(function(e){return f(e)})}function _(e,t){return t.reduce(function(t,n){var r=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(n),a=r.msgId;return a!=null&&o("MAWUpdateThreadListItemUtils").isOptimisticMessage(n)&&e.has(a)?t:[].concat(t,[n])},[])}function f(e){var t=g(e)&&!o("MAWUpdateThreadListItemUtils").isSpamMessage(e);return t||C(e),t}function g(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(n){return o("MAWGetThreadUpdateType").isThreadUpdateTypeEligibleForSnippet(e)},forReaction:function(n){return o("MAWGetThreadUpdateType").canReactionAffectBump(n)&&h(n)||o("MAWGetThreadUpdateType").isThreadUpdateTypeEligibleForSnippet(e)}})}function h(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return!1},forReaction:function(t){return t.reaction==null}})}function y(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return t.ephemeralMsgDisappeared===!0},forReaction:function(t){return!1}})}function C(t){var n=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t),a=n.msgId,i=n.reactionId;r("FBLogger")("MAWCacheService").info(e+" msg or reaction is not eligible for snippet update, msgId: %s, reactionId: %s",a,i)}l.parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids=s,l.isDbTransactionRequiredForSnippetUpdate=u,l.canCalculateSnippetUpdateFromDelta=c,l.isNeededToCheckMessageExistence=d}),98);
__d("MAWSnippetsCacheService",["FBLogger","MAWAckLevel","MAWCacheServiceBase","MAWDbMsgOrReaction","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWSnippetsCacheCalculateDelta","MAWSnippetsCacheServiceUtils","MAWThreadSnippetBuildTxns","MAWThreadSnippetUtils","MAWTransactionMode","MAWUpdateThreadListItemUtils","MAWVault","Promise","WAJids","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["messages","reactions"],u="[SnippetsCacheService][Worker]",c=(function(t){function r(){return t.call(this,"snippets")||this}babelHelpers.inheritsLoose(r,t);var a=r.prototype;return a.$MAWSnippetsCacheService$p_1=function(r){var t=this,a=r.filter(function(e){var t=e[0];return s.includes(t)}),i=o("MAWSnippetsCacheCalculateDelta").parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids(a.map(function(e){var t=e[0],n=e[1];return n}));return(e||(e=n("Promise"))).all(Array.from(i.entries()).map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e[0],r=e[1],o=yield t.getValueFromCache(n);return{chatJid:n,lastComputedCacheValue:o,mutateReq:r}});return function(t){return e.apply(this,arguments)}})()))},a.calculateDelta=function(r){var t=this;return this.$MAWSnippetsCacheService$p_1(r).then(function(r){return r.length===0?(e||(e=n("Promise"))).resolve([]):o("MAWSnippetsCacheCalculateDelta").isDbTransactionRequiredForSnippetUpdate(r)?o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY,reactions:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"MAWSnippetsCacheService:calculateDelta",function(e){return(function(n){return t.$MAWSnippetsCacheService$p_2(e,n)})})(r):t.$MAWSnippetsCacheService$p_3(r)})},a.computeCachePayloadFromScratch=function(t){var e=this;return o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY,reactions:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"MAWSnippetsCacheService:computeCachePayloadFromScratch",function(t){return function(n){return o("MAWDexieTable").dexieAll(n.map(function(n){var r=o("WAJids").unsafeCoerceToChatJid(n);return e.$MAWSnippetsCacheService$p_4(t,r,"from-scratch")})).then(function(e){return e.filter(Boolean)})}})(t)},a.$MAWSnippetsCacheService$p_5=function(t,n){if(n==null)return"no-value-calculated-from-scratch";if(o("MAWUpdateThreadListItemUtils").isOptimisticMessage(t.value))return null;var e=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t.value),r=e.msgAckLevel,a=e.msgId,i=e.reactionId,l=e.timestamp;return l==null?"missing-timestamp":a!=null&&a===n.value.snippetMsgId||i!=null&&i===n.value.snippetReactionId?null:a!=null&&r!==o("MAWAckLevel").ACK.received&&n.value.snippetMsgAckLevel===o("MAWAckLevel").ACK.clock?"optimistic-snippet-in-cache":l<n.timestamp?"older-than-last-snippet-value":null},a.shouldDropDelta=function(r){var t=this;return this.$MAWSnippetsCacheService$p_1(r).then(function(r){return r.length===0?(e||(e=n("Promise"))).resolve(!0):(e||(e=n("Promise"))).all(r.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e.chatJid,r=e.lastComputedCacheValue,o=e.mutateReq,a=yield t.$MAWSnippetsCacheService$p_5(o,r);return a!=null?(m({dropReason:a,key:n,msgOrReaction:o.value,operation:o.type}),!0):!1});return function(t){return e.apply(this,arguments)}})())).then(function(e){return!!e.every(function(e){return e===!0})})})},a.$MAWSnippetsCacheService$p_4=function(t,n,r){var e=this;return o("MAWThreadSnippetUtils").getThreadSnippetFromScratch(t,n).then(function(t){var a=e.$MAWSnippetsCacheService$p_6(n,t,r);if(a!=null)return o("MAWDexieTable").dexieResolve([n,a])})},a.$MAWSnippetsCacheService$p_3=function(t){var e=this;return t.map(function(t){var n=e.$MAWSnippetsCacheService$p_7(t);if(n!=null)return[t.chatJid,n]}).filter(Boolean)},a.$MAWSnippetsCacheService$p_2=function(t,n){var e=this;return o("MAWDexieTable").dexieAll(n.map(function(n){return o("MAWSnippetsCacheCalculateDelta").canCalculateSnippetUpdateFromDelta(n.mutateReq)?e.$MAWSnippetsCacheService$p_8(t,n.mutateReq.value).then(function(t){if(!t){var r=e.$MAWSnippetsCacheService$p_7(n);if(r!=null)return o("MAWDexieTable").dexieResolve([n.chatJid,r])}}):e.$MAWSnippetsCacheService$p_4(t,n.chatJid,"realtime-from-scratch")})).then(function(e){return e.filter(Boolean)})},a.$MAWSnippetsCacheService$p_7=function(t){var e=o("MAWThreadSnippetBuildTxns").buildThreadSnippetForMsgOrIncomingReaction(t.chatJid,t.mutateReq.value),n=this.$MAWSnippetsCacheService$p_6(t.chatJid,{snippet:e,snippetMsgOrReaction:t.mutateReq.value},"realtime-calculate-delta");return n},a.$MAWSnippetsCacheService$p_6=function(t,n,r){if(n==null){d({flow:r,key:t,threadSnippetResult:n});return}var e=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(n.snippetMsgOrReaction),a=e.msgAckLevel,i=e.msgId,l=e.reactionId,s=e.timestamp;if(d({flow:r,key:t,msgAckLevel:a,msgId:i,reactionId:l,threadSnippetResult:n,timestamp:s}),s!=null){var u=babelHelpers.extends({},n.snippet.snippetParams,{strings:n.snippet.snippetParams.strings.map(function(e){return o("MAWVault").unvault(e)})});return{key:t,timestamp:s,value:{snippet:babelHelpers.extends({},n.snippet,{snippetParams:u}),snippetMsgAckLevel:a,snippetMsgId:i,snippetReactionId:l}}}},a.$MAWSnippetsCacheService$p_8=function(t,n){if(!o("MAWSnippetsCacheCalculateDelta").isNeededToCheckMessageExistence(n))return o("MAWDexieTable").dexieResolve(!1);var e=o("MAWDbMsgOrReaction").switchOnMsgOrReaction(n,{forMessage:function(t){return null},forReaction:function(t){return t.reactToMsgId}});return e==null?o("MAWDexieTable").dexieResolve(!0):o("MAWDbMsgTxns").getMsgsByMsgIds(t,[e]).then(function(e){return e.length===0})},r})(r("MAWCacheServiceBase"));function d(e){var t=e.flow,n=e.key,o=e.msgAckLevel,a=e.msgId,i=e.reactionId,l=e.threadSnippetResult,s=e.timestamp;if(l==null){r("FBLogger")("MAWCacheService").warn(u+"["+t+"] Failed to calculate thread snippet, key: %s",n);return}if(s==null){r("FBLogger")("MAWCacheService").warn(u+"["+t+"] No timestamp found for the thread snippet, key: %s,\n      msgId: %s, reactionId: %s",n,a,i);return}r("FBLogger")("MAWCacheService").info(u+"["+t+"] Snippet successfully calculated, key: %s,\n    timestamp: %s, msgId: %s, reactionId: %s, ack level %s",n,s,a,i,o)}function m(e){var t=e.dropReason,n=e.key,a=e.msgOrReaction,i=e.operation,l=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(a),s=l.msgAckLevel,c=l.msgId,d=l.reactionId,m=l.timestamp;r("FBLogger")("MAWCacheService").info(u+" Drop update for msg or reaction, reason: %s, key: %s, msgId: %s, reactionId: %s, timestamp: %s, ackLevel: %s, operation: %s",t,n,c,d,m,s,i)}var p=new c,_=function(){return p};l.getMAWSnippetsCacheService=_}),98);
__d("MAWDataSyncQueue",["Promise","WALogger","asyncToGeneratorRuntime","getErrorSafe","qex","throttle"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("qex")._("853")||1e3,d=r("qex")._("855")||1e3,m=function(){return f=!1,b({isUnloading:!0})},p=[],_=[],f=!1,g=[],h=function(){var e,t=p.splice(0,p.length);(e=_).push.apply(e,t)},y=function(){return _.splice(0,c)},C=function(r){var t=y();if(t.length!==0)return(u||(u=n("Promise"))).all(g.map(function(n,a){return n(t,r).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unhandled exception caught in middleware "," sync: ",""])),a,t)})})).then(function(){return C(r)})},b=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!f){f=!0,h();try{yield C(e)}catch(e){var t,n=r("getErrorSafe")(e);throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[MAWIndexedDbMiddleware] error handling queue batch: ",""])),(t=n==null?void 0:n.message)!=null?t:n.toString()),e}finally{f=!1,p.length>0&&v()}}});return function(n){return e.apply(this,arguments)}})(),v=r("throttle")(b,d),S=function(t,n){p.push({type:t,value:n}),v()},R=function(t){g.some(function(e){return e===t})||g.push(t)},L=function(){g=[]},E=function(){p=[],_=[]},k=function(){return p};l.forceFlushDataSyncQueue=m,l.addSyncItem=S,l.registerDataSyncCallback=R,l.clearDataSyncCallbacks=L,l.clearDataSyncQueue_FOR_TESTING_ONLY=E,l.getDataSyncQueue_FOR_TESTING_ONLY=k}),98);
__d("MAWDataSyncMiddleware",["FBLogger","MAWDataSyncQueue","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set(["contacts","groupInfo","messages","participants","threads","reactions","xma","pendingStanzas"]);function s(t,n){var r=t.table(n);return e.has(n)?babelHelpers.extends({},r,{mutate:function(t){return r.mutate(t).then(function(e){return t.type==="delete"?(t.keys.forEach(function(e){o("MAWDataSyncQueue").addSyncItem(t.type,{key:e,tableName:n})}),e):(e.results!=null?e.results.forEach(function(e){o("MAWDataSyncQueue").addSyncItem(t.type,{key:e,tableName:n,values:t.values})}):e.lastResult!=null&&o("MAWDataSyncQueue").addSyncItem(t.type,{key:e.lastResult,tableName:n,values:t.values}),e)})}}):r}function u(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return s(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying DataSync Middleware, messages made during this session will not be properly synced to registered consumers"),t}},name:"MAWDataSyncMiddleware",stack:"dbcore"}}l.getDataSyncMiddleware=u}),98);
__d("MAWIndexedDb",["ExecutionEnvironment","FBLogger","MAWBridge","MAWCacheServiceMiddleware","MAWDataSyncMiddleware","MAWDbFactory","MAWDbMutationMiddleware","MAWDbMutationValidator","MAWDbProtocolMsgIdMiddleware","MAWDbSchema","MAWDexie","MAWLSDataSyncMiddleware","MAWMpsGating","MAWTransactor","MWFBLogger","asyncToGeneratorRuntime","cr:10181","cr:10182","cr:17239","cr:3527","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){e===void 0&&(e="idb");var t=o("MAWDbFactory").makeIDBFactory(e,"worker");function a(e){return t.setupPromise().then(function(){return t.getDBExn(e)})}return babelHelpers.extends({},t,{getSignalDB:a,makeDB:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,a,i){var l=[o("MAWDbMutationMiddleware").getMAWDbMutationMiddleware];return o("MAWMpsGating").isMpsMessageRendering()||l.push(o("MAWLSDataSyncMiddleware").getMAWLSDataSyncMiddleware),r("gkx")("1760")&&l.push(o("MAWDbProtocolMsgIdMiddleware").MAWDbProtocolMsgIdMiddleware),l.push(r("MAWCacheServiceMiddleware")),a.enableDataSyncMiddleware&&l.push(o("MAWDataSyncMiddleware").getDataSyncMiddleware),a.enableMutationValidator===!0&&l.push(o("MAWDbMutationValidator").getMutationValidatorMiddleware),n("cr:3527")!=null&&l.push(n("cr:3527")),r("justknobx")._("4087")&&n("cr:17239")!=null&&(yield n("cr:17239")(e)),t.makeDB(e,{autoOpen:!0,middleware:l,onDbPopulate:a.onDbPopulate},i)});function a(t,n,r){return e.apply(this,arguments)}return a})()})}var c=u(),d="idle",m=c.isNewDb,p=c.willSetupDB,_=function(t,n,r){return c.makeDB(t,n,r).then(function(){d="ready"})},f=c.closeDB,g=c.getDBExn,h=c.getSignalDB,y=c.getDB,C=function(t){return c.reset_singleton_INTERNAL_ONLY()},b=c.deleteDb;function v(){return d}function S(e){var t=d;return d="migrating",e.finally(function(){d=t})}var R=new WeakMap,L=new WeakMap,E=o("MWFBLogger").MWLogger().tags(["db","afterTransaction"]);function k(e){var t=r("MAWDexie").currentTransaction;if(t==null)throw E.mustfixThrow("afterTransactionEffect called outside of dexie transaction");if(typeof e=="function"){var n=R.get(t)||[];n.push(e),R.set(t,n),n.length===1&&t.on("complete",function(){var e=R.get(t)||[];e.forEach(function(e){e()}),R.delete(t)})}}function I(e){var t=r("MAWDexie").currentTransaction;if(t==null)throw E.mustfixThrow("afterTransaction called outside of dexie transaction","maw_db");var a=L.get(t);if(a!=null)a.push(e);else{var i=[e];L.set(t,i),t.on("complete",function(){L.delete(t),r("gkx")("5675")&&(s||(s=r("ExecutionEnvironment"))).isInMainThread&&n("cr:10182")!==null&&n("cr:10181")!==null?n("cr:10182").handleEvents(n("cr:10181").LSDatabaseSingleton,i):o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:i})})}}var T=new Set(["NewMsg","NewMsgs","MsgUpdated","NewMedia","NewMediaRange","MediaExpired","XMAShareExpired","DeleteMessagesOfThread","UpsertReaction","DeleteReaction","DeleteMessages","NewXMA","EditMsgHistoryAdded","MsgsStartCountdown","MsgClearCountdown","XMAShareTombstoned","NewReceiverFetchInfo","NewXMAs","NewPoll","RavenActionUpdate"]);function D(t,n){if(n!==!0&&o("MAWMpsGating").isMpsMessageRendering()&&T.has(t.tag)){r("FBLogger")("wmi").INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MpsMessageRendering] Ignoring afterTxn event: ",""])),t.tag);return}if(t.tag==="UpdateThreadActivity"&&r("FBLogger")("wmi").mustfix("Thread consistency uses MAW DB mechanism instead of new one"),t.tag==="ThreadUpdated")try{var a=t.value.snippetContactIDs;a!=null&&a.some(function(e){return e==="Facebook User"})&&(E.mustfix('Something is still setting a contact id as "Facebook User"'),t.value=babelHelpers.extends({},t.value,{snippetContactIDs:a.map(function(e){return e==="Facebook User"?"0":e})}))}catch(e){}I(t)}function x(e,t){var n=r("MAWDexie").currentTransaction;if(n==null)throw E.mustfixThrow("afterTransactionForThreadEvent called outside of dexie transaction","maw_db");n.on("complete",function(){o("MAWBridge").getBridge().fireAndForget("threadEvent",t,e)})}l.TABLES_TO_ENCRYPT=o("MAWDbSchema").TABLES_TO_ENCRYPT,l.makeMsgrTransactor=o("MAWTransactor").makeMsgrTransactor,l.makeMAWIndexedDBFactory=u,l.isNewDb=m,l.willSetupDB=p,l.makeDB=_,l.closeDB=f,l.getDBExn=g,l.getSignalDB=h,l.getDB=y,l.setDB_INTERNAL_USE_ONLY=C,l.deleteDb=b,l.getDbStatus=v,l.updateStatusDuringMigration=S,l.afterTransactionEffect=k,l.afterTransaction=D,l.afterTransactionThreadEvent=x}),98);
__d("MAWLLAMigrationUtils",["Random","gkx","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("652"),s=Math.max(e,10),u=s*10,c=new Map([["FTS",u]]);function d(e){if(r("gkx")("9340"))return 1;var t=c.get(e);return t!=null?t:s}function m(e,t){t===void 0&&(t={});var n=d(e);return e==="debug"||e==="test"?[]:r("gkx")("23956")&&o("Random").coinflip(n)?[r("qpl")._(1056839327,"560"),babelHelpers.extends({double:{sampleRate:1/n},string:{transactor:e}},t)]:[]}l.getTransactorQPLParam=m}),98);
__d("MAWTransactor",["MAWDexie","MAWDexieTable","MAWErrorObject","MAWIndexedDb","MAWIndexedDbUI","MAWLLAMigrationUtils","MAWQplProxy","MAWTransactionMode","MWFBLogger","WAExceededStorageQuota","WALogger","gkx","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=["MWPTransactor"],d=o("MWFBLogger").MWLogger();function m(t,n,a,i,l,s){return i!=null&&r("MAWDexie").currentTransaction!=null&&i.endFail("invoked_in_nested_transaction",{string:{current_transaction_mode:r("MAWDexie").currentTransaction.mode},string_array:{current_transaction_store_names:r("MAWDexie").currentTransaction.storeNames}}),r("MAWDexie").currentTransaction!=null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["makeMsgrTransactor "," should not be called inside another transaction. The transaction will be forced to execute on top-level"])),l),t.transact(n,a,s)}function p(e){var t=o("MAWLLAMigrationUtils").getTransactorQPLParam(e),n=t.length===2?t:[null,void 0],r=n[0],a=n[1];return r!=null?o("MAWQplProxy").startQplUserFlow(r,a,{sendThroughBridge:!1}):null}function _(e,t,n,r){return C(e,t,function(e){return o("MAWIndexedDb").getDB(e)},n,r)}function f(e,t,n){return C(e,t,o("MAWIndexedDbUI").getDB,n)}function g(e,t,n){return C(e,t,o("MAWIndexedDbUI").getDB,n)}var h=0,y=new Map;function C(e,t,n,a,i){var l=Object.keys(e),_=l.some(function(t){return e[t]===o("MAWTransactionMode").READWRITE})?o("MAWTransactionMode").READWRITE:o("MAWTransactionMode").READONLY;return function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var C=p(t),S=null,R=function(){return self.clearInterval(S)};if(C!=null&&(C.addAnnotations({string:{mode:_===o("MAWTransactionMode").READWRITE?"readwrite":"readonly"},string_array:{stores:l}}),r("gkx")("1006")&&t==="bulkCreateThreadByJid")){var L=1e3,E=Date.now();S=self.setInterval(function(){C.addAnnotations({int:{heartbeatLatestAliveSinceStartMs:Date.now()-E}})},L),self.setTimeout(R,o("MAWQplProxy").DEFAULT_WORKER_QPL_TIMEOUT_MS)}var k=(u||(u=r("performance"))).now()+u.timeOrigin;return n(t).then(function(e){var n=Array.from(y.values());C==null||C.addPoint("lock_wait_start",{string_array:{maybeLockedOn:n}});var p=(u||(u=r("performance"))).now();return i==null||i.onTxnRequestedCb==null||i.onTxnRequestedCb.apply(i,f),m(e,_,l,C,t,function(){o("MAWDexieTable").setDexiePSDItem("transactionRequested",k),o("MAWDexieTable").setDexiePSDItem("transactorName",t),C==null||C.addPoint("dexie_transaction_start"),h+=1;var m=h;y.set(m,t);var _=C!=null?e.stores[l[0]].get("").then(function(){C==null||C.addPoint("lock_wait_end"),C==null||C.addPoint("transaction_opened"),C==null||C.addPoint("transactor_execution_start")}):o("MAWDexieTable").dexieResolve();return _.then(function(){return a(e.stores).apply(void 0,f)}).then(function(e){if(r("gkx")("6795")&&(i==null?void 0:i.explicitlyCloseTxn)===!0){var a;(a=r("MAWDexie").currentTransaction)==null||(a=a.idbtrans)==null||a.commit==null||a.commit()}y.delete(m),C==null||C.addPoint("transactor_execution_end"),C==null||C.endSuccess(),R();var l=(u||(u=r("performance"))).now()-p;return l>5e3&&(o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[Slow maw transaction] "," took ","ms to complete. Potentially waiting for locks on ",""])),t,l,n.join(", ")),d.mustfix("[Slow maw transaction] %s took long to complete. Potentially waiting for locks on $s",t,n.join(", "))),e}).catch(function(e){y.delete(m),o("WAExceededStorageQuota").checkQuotaExceededError(e);var n=e.name==="AbortError"?e==null?void 0:e.inner:null,r=b(n);if(C==null||C.markError("transaction_error",null,e),e instanceof Error){var a=e,i=typeof(a==null?void 0:a.stack)=="string"?a.stack:typeof(a==null?void 0:a.stack),l=typeof(a==null?void 0:a.message)=="string"?a.message:typeof(a==null?void 0:a.message);C==null||C.addAnnotations({string:{errMessage:l,errStack:i,innerError:r}})}C==null||C.endFail("transaction_fail"),R();var s=o("MAWErrorObject").getErrorObject(e);throw v(s).mustfixThrow("[%s] Error performing %s transaction. Inner error: %s",c.join("|"),t!=null?t:"",r!=null?r:"unknown")})})}).catch(function(e){o("WAExceededStorageQuota").checkQuotaExceededError(e),C==null||C.endFail("transaction_fail"),R();var n=o("MAWErrorObject").getErrorObject(e);throw v(n).mustfixThrow("[%s] Error performing %s transaction",c.join("|"),t!=null?t:"")})}}function b(e){if(typeof e=="string")return e;if(e instanceof Error)return e.name+": "+e.message;if(typeof e=="object")try{return JSON.stringify(e)}catch(e){}return null}function v(e){return e?d.catching(e):d}l.makeMsgrTransactor=_,l.makeMsgrUITransactor_IMPORT_FROM_MAWIndexedDbUI_INSTEAD=f,l.makeMsgrUIWritableTransactor=g}),98);
__d("MAWThreadUpdateType",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=Object.freeze({BUMP_THREAD:s,MARK_THREAD_AS_UNREAD:u,NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:e,SNIPPET_ONLY:l});i.THREAD_UPDATE_TYPE=c}),66);
__d("MAWGetThreadUpdateTypeForAdminMsg",["FBLogger","MAWAdminMsgTypesGrouped","MAWLocalizationType","MAWThreadUpdateType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e;return t==null?(r("FBLogger")("messenger_web").mustfix("nullAdminType"),o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE):s(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:u(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:c(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:(d(t)||r("FBLogger")("messenger_web").mustfix("unsupportedAdminMsgType"),o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE)}function s(e){return o("MAWAdminMsgTypesGrouped").otherUserAddRemoveParticipant.includes(e)||o("MAWAdminMsgTypesGrouped").chatCustomizedByOtherUser.includes(e)||o("MAWAdminMsgTypesGrouped").callActionToNotifyAbout.includes(e)||o("MAWAdminMsgTypesGrouped").twoUsersConnected.includes(e)||o("MAWAdminMsgTypesGrouped").fallbackMsgFromOtherUser.includes(e)||o("MAWAdminMsgTypesGrouped").otherUserBumpsMessage.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToBeMarkedAsUnread.includes(e)||e===o("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR}function u(e){return o("MAWAdminMsgTypesGrouped").currentUserAddRemoveParticipant.includes(e)||o("MAWAdminMsgTypesGrouped").chatCustomizedByCurrentUser.includes(e)||o("MAWAdminMsgTypesGrouped").callActionNotToNotifyAbout.includes(e)||o("MAWAdminMsgTypesGrouped").fallbackMsgFromCurrentUser.includes(e)||o("MAWAdminMsgTypesGrouped").currentUserBumpsMessage.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToBeBumped.includes(e)||o("MAWAdminMsgTypesGrouped").limitSharingUpdate.includes(e)}function c(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||o("MAWAdminMsgTypesGrouped").dualThreadCutoverAdminMsgs.includes(e)||o("MAWAdminMsgTypesGrouped").ephemeralSettingChanges.includes(e)||o("MAWAdminMsgTypesGrouped").groupPermissionsChanged.includes(e)||o("MAWAdminMsgTypesGrouped").participantLeftGroup.includes(e)||o("MAWAdminMsgTypesGrouped").pinnedMessageUpdate.includes(e)}function d(e){return o("MAWAdminMsgTypesGrouped").cutoverAdminMsgs.includes(e)||o("MAWAdminMsgTypesGrouped").deviceChanges.includes(e)||o("MAWAdminMsgTypesGrouped").icdcAlerts.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToNotTriggerUpdate.includes(e)||e===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||e===o("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET||e===o("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG||e===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE}l.getThreadUpdateTypeForAdminMsg=e}),98);
__d("MAWGetThreadUpdateType",["FBLogger","MAWDbMsgOrReaction","MAWGetThreadUpdateTypeForAdminMsg","MAWThreadSnippetUtils","MAWThreadUpdateType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.reaction==null;return u(e,t)}function s(e){return c(e.reactToAuthor)&&!c(e.author)}function u(e,t){return s(e)&&!t?e.senderTimestampMs==null?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE}function c(e){return e===o("WAJids").AUTHOR_ME||e===o("MAWUserJidWrapper").getMyUserJid()}function d(e){var t=e.adminType,n=e.author,a=e.msgType,i=e.xmaMessageType,l=function(t){var e=t.me,r=t.other;return o("WAJids").isAuthorMe(n)?e:r};switch(a){case"Text":case"ReceiverFetch":case"Sticker":case"Unavailable":case"Video":case"Futureproof":case"DocumentFile":case"EphemeralScreenshotAction":case"Gif":case"Image":case"Ptt":case"RavenAction":case"Raven":case"GroupPollCreate":case"GroupPollUpdate":case"BumpExistingMessage":return l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD});case"XMA":return o("MAWThreadSnippetUtils").shouldIgnoreXMAMsgForSnippet(i)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD});case"Revoked":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;case"DeleteForMe":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;case"EditAction":return l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE});case"GroupInvite":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"Admin":{if(a==="Admin")return o("MAWGetThreadUpdateTypeForAdminMsg").getThreadUpdateTypeForAdminMsg(t);throw r("FBLogger")("messenger_web").mustfixThrow("Non-admin msg passed in "+(a!=null?a:"UNKNOWN"))}case"SenderKeyDistribution":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;case"AlertICDC":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"Ciphertext":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"EphemeralSettingAdmin":case"EphemeralSettingChangeFromCurrentDevice":case"EphemeralSyncResponse":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWGetThreadUpdateType] Unexpected message type: %s",a!=null?a:"UNKNOWN")}}function m(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstoredNullish(t,{forMessage:function(t){var e;return d({adminType:(e=t.msgContent)==null?void 0:e.adminType,author:t.author,msgType:t.type,xmaMessageType:t.xmaMessageType})},forNull:function(){return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE},forReaction:function(n){return e(n)}})}function p(e){var t=m(e);switch(t){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:return!1;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return!0;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate][snippet] Unhandled threadUpdateType: "+t)}}function _(e){var t=m(e);switch(t){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:return!1;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return!0;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate][bump] Unhandled threadUpdateType: "+t)}}l.getThreadUpdateTypeForReaction=e,l.canReactionAffectBump=s,l.getReactionThreadUpdateType=u,l.getThreadUpdateTypeForMsg=d,l.getThreadUpdateTypeForMsgOrReaction=m,l.isThreadUpdateTypeEligibleForSnippet=p,l.isThreadUpdateTypeEligibleForBump=_}),98);
__d("MAWCacheServiceMiddleware",["FBLogger","MAWIndexedDb","MAWMpsGating","MAWWorkerCacheServices","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=["messages","reactions"],s=["messages","reactions"];function u(e,t,n){var r,o,a=n.trans,i=(r=(o=a._transactorMeta)==null?void 0:o.mawCacheServiceAccumulatedRequests)!=null?r:[];if(n.type==="delete"&&s.includes(t.name))return p(e,t.name,n).then(function(e){var r=babelHelpers.extends({},n,{deletedValues:e});return i.push([t.name,r]),a._transactorMeta=babelHelpers.extends({},a._transactorMeta,{mawCacheServiceAccumulatedRequests:i}),t.mutate(n)});var l=babelHelpers.extends({},n,{decryptedValues:n.values?n.values:void 0});return i.push([t.name,l]),a._transactorMeta=babelHelpers.extends({},a._transactorMeta,{mawCacheServiceAccumulatedRequests:i}),t.mutate(n)}function c(e){var t,n=e.trans;((t=n._transactorMeta)==null?void 0:t.mawCacheServiceAfterTransactionScheduled)!==!0&&(o("MAWIndexedDb").afterTransactionEffect(function(){var e,t,r=(e=(t=n._transactorMeta)==null?void 0:t.mawCacheServiceAccumulatedRequests)!=null?e:[];r.length!==0&&o("MAWWorkerCacheServices").getMAWWorkerCacheServices().calculateDelta(r)}),n._transactorMeta=babelHelpers.extends({},n._transactorMeta,{mawCacheServiceAfterTransactionScheduled:!0}))}function d(t,n){var r=t.table(n);return!e.includes(n)||o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()?r:babelHelpers.extends({},r,{mutate:function(n){return c(n),u(t,r,n)}})}function m(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return d(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("MAWCacheService").catching(e).mustfix("Error applying MAW Cache Service Middleware"),t}},name:"MAWCacheServiceMiddleware",stack:"dbcore"}}function p(e,t,n){var r=n.keys,o=n.trans;return e.table(t).getMany({keys:r,trans:o}).then(function(e){return e.filter(Boolean)})}l.default=m}),98);
__d("MAWVaultDb",["FBLogger","MAWQplProxy","MAWVault","getErrorSafe","gkx","isObject","isPlainObject","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=.001,s=new WeakMap;function u(e,t){return t[e]!=null}var c=r("gkx")("23909");function d(t,n,a){if(!r("isPlainObject")(t)||!c||!u(n,a)||t==null)return t;var i=s.get(t);if(i!=null)return i;var l=Math.random()<e?o("MAWQplProxy").startQplUserFlow(r("qpl")._(25301509,"119")):null;try{var d=a[n],m=p(t,d,o("MAWVault").vault);return l==null||l.endSuccess(),s.set(t,m),m}catch(e){l==null||l.endFail("vault_fail");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("%s - Failed to vault an entity in the table: %s",_.message,n)}}function m(t,n,a){if(!r("isPlainObject")(t)||!c||!u(n,a)||t==null)return t;var i=Math.random()<e?o("MAWQplProxy").startQplUserFlow(r("qpl")._(741087294,"2028")):null;try{var l=p(t,a[n],o("MAWVault").unvault);return i==null||i.endSuccess(),l}catch(e){i==null||i.endFail("unvault_fail");var s=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("%s - Unvaulting failed for an entity in the table: %s",s.message,n)}}function p(e,t,n){if(e==null)return e;var o=Object.entries(t).filter(function(t){var n=t[0];return e[n]!=null});return o.length===0?e:o.reduce(function(e,t){var o=t[0],a=t[1];return typeof a!="boolean"&&r("isObject")(a)?e[o]=p(e[o],a,n):a===!0&&(e[o]=n(e[o])),e},babelHelpers.extends({},e))}l.vaultDbRow=d,l.unvaultDbRow=m,l.setInPath=p}),98);
__d("MAWVaultDefinitions",[],(function(t,n,r,o,a,i){"use strict";var e={editMsgHistory:{msgContent:{content:!0}},messages:{msgContent:{content:!0},quote:{content:{msgContent:{content:!0}}}},unrenderedMessages:{msgContent:!0}},l={edit_message_history:{messageContent:!0},messages:{replyMessageText:!0,text:!0},threads:{snippet:!0}};i.ARMADILLO_IDB_VAULT_DEFINITIONS=e,i.PERSISTED_DB_VAULT_DEFINITIONS=l}),66);
__d("isEncryptionAtRestEnabled",["isInstamadillo","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("507")===!0?!0:r("isInstamadillo")()}l.default=e}),98);
__d("MAWDbMiddlewareMutations",["MAWDbObjEncryption","MAWVaultDb","MAWVaultDefinitions","gkx","isEncryptionAtRestEnabled"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("23909");function s(t,n,a){if(!e&&!(r("isEncryptionAtRestEnabled")()||r("gkx")("23910")))return t;var i=babelHelpers.extends({},t);return i=o("MAWVaultDb").unvaultDbRow(i,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS),i=o("MAWDbObjEncryption").encryptDbObj(i,n,a),i}function u(t,n){return e?o("MAWVaultDb").unvaultDbRow(babelHelpers.extends({},t),n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):t}function c(t,n,r){var a=o("MAWDbObjEncryption").decryptDbObj(babelHelpers.extends({},t),n,r);return e?o("MAWVaultDb").vaultDbRow(a,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):a}function d(t,n){if(t!=null)return e?o("MAWVaultDb").vaultDbRow(t,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):t}l.mutateValue=s,l.mutateVaultedValue=u,l.getValue=c,l.getVaultedValue=d}),98);
__d("MAWDbMutationValidator",["FBLogger","MAWIndexedDb","MAWMessageHasNonNullServerTsOnReceivedAckValidator","MAWMessageHasUniqueExternalIdValidator","MAWODSProxy","MAWParticipantMatchOneOnOneThreadValidator","MAWReactionHasUniqueProtocolMsgIdValidator","Promise","Random","WAOdsEnums","getErrorSafe","gkx","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[o("MAWMessageHasUniqueExternalIdValidator").MAWMessageHasUniqueExternalIdValidator,o("MAWParticipantMatchOneOnOneThreadValidator").MAWParticipantMatchOneOnOneThreadValidator,o("MAWReactionHasUniqueProtocolMsgIdValidator").MAWReactionHasUniqueProtocolMsgIdValidator,o("MAWMessageHasNonNullServerTsOnReceivedAckValidator").MAWMessageHasNonNullServerTsOnReceivedAckValidator],u=r("justknobx")._("2610"),c=r("gkx")("5906"),d=function(t){return o("Random").coinflip(t!=null?t:u)||c};function m(t,a){var i=t.table(a),l=s.filter(function(e){return e.table===a});return l.length===0?i:babelHelpers.extends({},i,{mutate:function(a){return o("MAWIndexedDb").getDbStatus()!=="ready"?i.mutate(a):i.mutate(a).then(function(t){var i=l.filter(function(e){var t=e.sampleRate,n=e.type;return n.includes(a.type)&&d(t)});return o("MAWIndexedDb").afterTransactionEffect(function(){var l=i.flatMap(function(e){var n,r=e.description,o=e.isValid;return((n=t.results)!=null?n:[]).map(function(e){return o(e).then(function(e){return babelHelpers.extends({validatorName:r},e)})})});r("promiseDone")((e||(e=n("Promise"))).all(l).then(function(e){e.forEach(function(e){switch(e.result){case"valid":o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:e.validatorName+"."+a.type+".valid"});break;case"invalid":o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:e.validatorName+"."+a.type+".invalid"}),r("FBLogger")("maw_mutation_validator").mustfix("Validator %s failed for %s mutation, with description: %s",e.validatorName,a.type,e.description);break;case"skipped":break}})}))}),t})}})}function p(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return m(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying Mutation Validator Middleware"),t}},name:"MAWMutationValidatorMiddleware",stack:"dbcore"}}l.getMutationValidatorMiddleware=p}),98);
__d("MAWDbProtocolMsgIdMiddleware",["FBLogger","MAWDBMigrationUtils","MAWJidUtils","MAWODSProxy","Random","WAOdsEnums","getErrorSafe","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3300");function s(t){return babelHelpers.extends({},t,{get:function(n){return t.get(n).then(function(e){return d(e,"get"),e})},getMany:function(n){return t.getMany(n).then(function(e){return e==null?void 0:e.map(function(e){return d(e,"getMany"),e})})},mutate:function(a){return a.type==="add"?a.values.map(function(e){return u(e)}):a.type==="put"&&r("gkx")("11791")&&r("justknobx")._("3947")&&a.values.map(function(t){t.protocolMsgId==null&&(o("MAWDBMigrationUtils").mawDbMigrationVersion.version>=o("MAWDBMigrationUtils").MAWDB_DEDUPE_MSGS_MIGRATION_VERSION?(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_after_migration_complete.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)):t.rowId<o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.cursorValue?(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_below_migration_cursor.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)):o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.isRunning&&t.rowId<o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.cursorValue+o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.batchSize&&(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_in_current_migration_batch.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)))}),t.mutate(a)},query:function(n){return t.query(n).then(function(e){var t;return e==null||(t=e.result)==null||t.map(function(e){d(e,"query")}),e})}})}function u(e){e.protocolMsgId=o("MAWJidUtils").toProtocolMsgIdStringForMAWStorage(e)}function c(e){return(e==null?void 0:e.rowId)==null&&(e==null?void 0:e.externalId)==null}function d(t,n){try{var a=r("justknobx")._("3947");if(c(t)){n!=="get"&&o("Random").coinflip(e)&&r("FBLogger")("messenger_web").warn("Corrupted message row returned from DB, msg is null:%s, queryType: %s",t==null,n);return}(t==null?void 0:t.protocolMsgId)==null&&o("Random").coinflip(e)&&(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version+".append_protocol_msg_id_for_put_operation_jk_"+String(a)}),o("MAWDBMigrationUtils").mawDbMigrationVersion.version>=o("MAWDBMigrationUtils").MAWDB_DEDUPE_MSGS_MIGRATION_VERSION&&r("FBLogger")("maw_db_migration").warn("Message with null protocolMsgId after the msg dedupe migration. type: %s, rowId: %s, externalId: %s",t==null?void 0:t.type,t==null?void 0:t.rowId,t==null?void 0:t.externalId)),t!=null&&t.protocolMsgId!=null&&t.protocolMsgId!==o("MAWJidUtils").toProtocolMsgIdStringForMAWStorage(t)&&o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"inconsistent_protocol_msg_id."+(t==null?void 0:t.type)+".migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version+".append_protocol_msg_id_for_put_operation_jk_"+String(a)})}catch(e){var i=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(i).mustfix("Error while checking protocol msg id")}}function m(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return n!=="messages"?t.table(n):s(t.table(n))}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying Protocol MsgId Middleware"),t}},name:"MAWDbProtocolMsgIdMiddleware",stack:"dbcore"}}l.appendProtocolMsgId=u,l.isCorruptedMsgRow=c,l.MAWDbProtocolMsgIdMiddleware=m}),98);
__d("MAWLSDataSyncMiddleware",["FBLogger","MAWBridge","MAWLSEditMsgHistoryAddedDataSyncHandler","MAWLSMsgsDataSync","MAWLSReactionsDataSyncHandler","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(){var t=new Set;t.add(o("MAWLSReactionsDataSyncHandler").mawLSReactionsDataSyncHandler),t.add(o("MAWLSEditMsgHistoryAddedDataSyncHandler").mawLSEditHistoryDataSyncHandler),t.add(o("MAWLSMsgsDataSync").mawLSMsgsDataSyncHandler),t.forEach(function(t){e.set(t.tableName,t)})}function u(t){return babelHelpers.extends({},t,{mutate:function(r){var n=e.get(t.name);return n!=null?n.performAndSyncMutation(r,t):t.mutate(r)}})}function c(){return s(),{create:function(n){try{return babelHelpers.extends({},n,{table:function(r){return e.has(r)?u(n.table(r)):n.table(r)}})}catch(e){var t=r("getErrorSafe")(e);return r("FBLogger")("maw_db").catching(t).mustfix("Error applying MAW to LS data sync middleware"),n}},name:"MAWLSDataSyncMiddleware",stack:"dbcore"}}function d(e){o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[e]})}l.getMAWLSDataSyncMiddleware=c,l.syncToLS=d}),98);
__d("MAWLSEditMsgHistoryAddedDataSyncHandler",["MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.map(function(e){return babelHelpers.extends({},e)});o("MAWLSDataSyncMiddleware").syncToLS({tag:"EditMsgHistoryAdded",value:t})}var s={performAndSyncMutation:function(n,r){switch(n.type){case"put":case"add":{var t=[].concat(n.values);o("MAWIndexedDb").afterTransactionEffect(function(){return e(t)})}break}return r.mutate(n)},tableName:"editMsgHistory"};l.mawLSEditHistoryDataSyncHandler=s}),98);
__d("MAWLSMsgsDataSync",["MAWBridgeTypesCreators","MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.keys,r=t.trans;return e.getMany({keys:n,trans:r}).then(function(e){return e.filter(Boolean)})}function s(e){var t=e.reduce(function(e,t){var n,r=o("MAWBridgeTypesCreators").createBridgeDeletedMessage(t);return e.has(t.threadJid)||e.set(t.threadJid,[]),(n=e.get(t.threadJid))==null||n.push(r),e},new Map);t.entries().forEach(function(e){var t=e[0],n=e[1],r={messages:n,threadJid:t};o("MAWLSDataSyncMiddleware").syncToLS({tag:"DeleteMessages",value:r})})}var u={performAndSyncMutation:function(n,r){switch(n.type){case"delete":return e(r,n).then(function(e){return o("MAWIndexedDb").afterTransactionEffect(function(){return s(e)}),r.mutate(n)});default:return r.mutate(n)}},tableName:"messages"};l.mawLSMsgsDataSyncHandler=u}),98);
__d("MAWLSReactionsDataSyncHandler",["MAWBridgeTypesCreators","MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.reaction,r=e.reactToMsgId,a=e.threadJid,i=e.ts;r!=null&&o("MAWLSDataSyncMiddleware").syncToLS({tag:"UpsertReaction",value:o("MAWBridgeTypesCreators").createBridgeUpsertReaction({author:t,chatJid:a,reaction:n||"",reactToMsgId:r,ts:i})})}function s(e){var t=e.author,n=e.reactToMsgId,r=e.threadJid;n!=null&&o("MAWLSDataSyncMiddleware").syncToLS({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:r,reactToMsgId:n})})}function u(t){t.forEach(function(t){t.reaction==null?s(t):e(t)})}var c={performAndSyncMutation:function(t,n){switch(t.type){case"put":case"add":{var e=[].concat(t.values);o("MAWIndexedDb").afterTransactionEffect(function(){return u(e)})}break}return n.mutate(t)},tableName:"reactions"};l.mawLSReactionsDataSyncHandler=c}),98);
__d("MAWDbReaction",["FBLogger","I64","MAWAckLevel","MAWGetBumpTimestampMs","MAWUserJidWrapper","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.author,n=e.reaction,r=e.reactToAuthor,a=o("MAWUserJidWrapper").getMyUserJid();return!(n==null||n===""||r!=="@me"&&r!==a||t==="@me"||t==="@system"||t===a)}function u(e){var t=o("MAWUserJidWrapper").getMyUserJid();if(e.reactToAuthor!=="@me"&&e.reactToAuthor!==t||e.reaction==null)return null;var n=e.author==="@me"||e.author==="@system"?null:e.author;return n==null?null:babelHelpers.extends({},e,{author:n,reaction:e.reaction,reactToAuthor:"@me"})}function c(e){var t=u(e);if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot cast reaction to incomingDbReaction");return t}function d(e,t,n){var r=o("MAWUserJidWrapper").getMyUserJid();return e.find(function(e){return e.threadJid===t&&o("WAJids").authorToUserId(e.author,r)===o("WAJids").authorToUserId(n,r)})}function m(e){return e}function p(e,t,n,r,a,i,l,s,u,c,d,m,p){m===void 0&&(m=o("MAWAckLevel").ACK.clock);var _={ack:m,author:c,externalId:t,groupingKey:i,reaction:a,reactionId:n,reactToAuthor:l,reactToExternalId:r,reactToMsgId:s,senderTimestampMs:p,threadJid:e,ts:u};return d!=null?babelHelpers.extends({},_,{rowId:d}):_}function _(t){var n=o("MAWGetBumpTimestampMs").getBumpTimestampMs(t);return o("WATimeUtils").castToMillisTime((e||(e=o("I64"))).to_float(n))}l.isIncomingReaction=s,l.maybeCastToIncomingDbReaction=u,l.castToIncomingDbReaction=c,l.findMatchingReaction=d,l.reactionIdToMsgId=m,l.formatReactionForDb=p,l.getReactionTimeMs=_}),98);
__d("MAWThreadNewestMsgOrReactionUtils",["FBLogger","MAWDbMsg","MAWDbMsgTxns","MAWDbReaction","MAWDbReactionsTxns","MAWDexieTable","MAWGetThreadUpdateType","MAWODSProxy","MAWThreadUpdateType","WALogger","WAMsg","WAOdsEnums","WATimeUtils","first","last"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return _(e,t,u)}function u(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType to create filter function : "+e)}}function c(e,t){return _(e,t,m)}function d(e){var t=e.db,n=e.jid,r=e.limit;return o("MAWDbMsgTxns").fetchMessagesFromDbWithSortOrderMs(t,n,null,!0,r,function(e){var t;return p(o("MAWGetThreadUpdateType").getThreadUpdateTypeForMsg({adminType:(t=e.msgContent)==null?void 0:t.adminType,author:e.author,msgType:e.type,xmaMessageType:e.xmaMessageType}),e.ephemeralMsgDisappeared===!0)},"before")}function m(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType to create filter function : %s",e)}}function p(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCacheService] Unhandled threadUpdateType to create filter function : %s",e)}}function _(t,n,r){var a=function(a){return a==null?o("MAWDexieTable").dexieResolve(null):g(t,n,r,a)};return f(t,n,r).then(function(t){return a(t).then(function(r){if(t==null&&r==null)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[CentralizedThreadUpdate] No Reaction or Message in "," is eligible for snippet"])),n),null;if(r==null)return t;if(t==null)return r;var a=o("WATimeUtils").castToMillisTime(o("MAWDbMsg").getSortOrderWithFallback(t)),i=o("MAWDbReaction").getReactionTimeMs(r);return a>=i?t:r})})}function f(e,t,n){return o("MAWDbMsgTxns").fetchMessagesFromDbWithSortOrderMs(e,t,null,!0,1,function(e){var t;return n(o("MAWGetThreadUpdateType").getThreadUpdateTypeForMsg({adminType:(t=e.msgContent)==null?void 0:t.adminType,author:e.author,msgType:e.type,xmaMessageType:e.xmaMessageType}),e.ephemeralMsgDisappeared===!0)},"before").then(r("first"))}function g(e,t,n,a){var i=o("MAWDbMsg").getSortOrderWithFallback(a),l=function(a,l){return o("MAWDbReactionsTxns").fetchReactionsFromDbWithTimestamp(e,t,o("WATimeUtils").castToMillisTime(i),l,l==null,a,function(e){return n(o("MAWGetThreadUpdateType").getThreadUpdateTypeForReaction(e),!1)&&o("MAWDbReaction").getReactionTimeMs(e)>i})},s=[1,10],u=100,c=new Set,d=function(n,a){var t;return l((t=s[n])!=null?t:u,a).then(function(t){var a=t.filter(function(e){return!c.has(C(e))});return a.length===0?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_THREAD_GET_NEWEST_REACTION_BATCH_NUM,key:"new."+n}),null):h(e,a).then(function(e){var a=e.newestReaction,i=e.nullMsgIds;return a!=null?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_THREAD_GET_NEWEST_REACTION_BATCH_NUM,key:"new."+n}),a):(i.forEach(function(e){return c.add(e)}),d(n+1,r("last")(t)))})})};return d(0,null)}function h(e,t){return o("MAWDbMsgTxns").getUniqueMsgsByProtocolMsgIds(e,t.map(y)).then(function(e){var n=new Set(e.map(b)),r=new Set,o=null;return t.forEach(function(e){var t=C(e);n.has(t)?o=v(o,e):r.add(t)}),{newestReaction:o,nullMsgIds:r}})}function y(e){return{author:e.reactToAuthor,chat:e.threadJid,externalId:e.reactToExternalId}}function C(e){return o("WAMsg").craftWAMsgIdString(y(e))}function b(e){return o("WAMsg").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId})}function v(e,t){return e==null?t:t==null||o("MAWDbReaction").getReactionTimeMs(e)>o("MAWDbReaction").getReactionTimeMs(t)?e:t}l.getNewestMsgOrReactionForBump=s,l.filterForBump=u,l.getNewestMsgOrReactionForSnippet=c,l.getNewestIncomingMsgsForSnippet=d,l.filterForSnippet=m,l.filterForSnippetNewestIncomingMessages=p,l.getNewestReactionToNonNullMsg=h}),98);
__d("MAWLocalizationUtils",["MAWAckLevel","MAWLocalizationType","MAWMsgType","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set([(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,e.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,e.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.POLL_UNSENT_UPDATE]);function u(e,t,n,r,a,i){return{ack:o("MAWAckLevel").ACK.sent,altIndex:a!=null?a:void 0,author:o("WAJids").AUTHOR_SYSTEM,externalId:n,msgContent:e,sortOrderMs:i,threadJid:t,ts:r!=null?r:o("WATimeUtils").unixTime(),type:o("MAWMsgType").MSG_TYPE.ADMIN}}function c(e){if(s.has(e))return!0;switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return!0}return!1}function d(e){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return!0}return!1}function m(e){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:return!0}return!1}l.POLL_ADMIN_MSG_TYPES=s,l.buildUnstoredDbAdminMsg=u,l.isAdminMsgNormalized=c,l.isDeviceChangeAdminMsg=d,l.isParticipantChangeAdminMsg=m}),98);
__d("MAWThreadSnippetForAdminOrEphemeralMsg",["FBLogger","MAWAdminMsgNormalized","MAWLocalizationType","MAWLocalizationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.adminMsgContent,n=e.adminType,a=e.snippetSenderContactId,i=n;if(i==null||t==null)return r("FBLogger")("GroupPollsE2EE").mustfix("MAWThreadSnippetForAdminOrEphemeralMsg: snippetType or adminMsgContent is null"),{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:a,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET};var l=o("MAWLocalizationUtils").isAdminMsgNormalized(i)?o("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(i,t):{contactIds:[],contents:t},s=l.contactIds,u=l.contents;return{snippetParams:{contactIDs:[].concat(s.map(function(e){return e==="Facebook User"?"0":e})),strings:[].concat(u)},snippetSenderContactId:a,snippetType:i}}l.default=e}),98);
__d("MAWThreadSnippetForBumpExistingMessageMsg",["MAWLocalizationType","WAGlobals","WAJids","WALogger","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n){return{snippetParams:{contactIDs:n!=null?n:[],strings:[]},snippetSenderContactId:e,snippetType:t}}var m=function(t){return d(t,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)};function p(t){var n=t.author,r=t.replyAuthor,a=t.replyType,i=t.snippetSenderContactId;if(o("WAJids").isAuthorSystem(n))return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Bumped message can not have AUTHOR_SYSTEM"]))),m(i);var l=a;if(l===o("WAMsgType").UNAVAILABLE)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Bump message has unavailable content type"]))),m(i);var p=r;return p==null?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Bump message has no quoted author"]))),m(i)):o("WAJids").isAuthorMe(n)||n===o("WAGlobals").getMyUserJid()?o("WAJids").isAuthorMe(p)||p===o("WAGlobals").getMyUserJid()?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE):d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,[o("WAJids").userIdFromJid(p)]):i==null?(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Bump message sender is null"]))),m(i)):o("WAJids").isAuthorMe(p)||p===o("WAGlobals").getMyUserJid()?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,[i]):p===n?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,[i]):d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE,[i,o("WAJids").userIdFromJid(p)])}l.default=p}),98);
__d("MAWThreadSnippetForCiphertextMsg",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:e,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK}}l.default=e}),98);
__d("MAWThreadSnippetForDocumentFileMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Document file message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForFallbackMessageMsg",["MAWLocalizationType","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return{snippetParams:{contactIDs:n!=null?n:[],strings:[]},snippetSenderContactId:e,snippetType:t}}function s(t){var n=t.author,r=t.snippetSenderContactId,a=t.unsupportedType;if(o("WAJids").isAuthorMe(n))switch(a){case"liveLocationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK);case"locationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK);case"contactShareMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK);case"storyMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK);case"postMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POST_MENTION_FALLBACK);case"pollCreationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK);case"bumpMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE);case"stickerReceiverFetchMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK);case"messengerMemory":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK);default:return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)}else switch(a){case"liveLocationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK);case"locationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK);case"contactShareMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK);case"storyMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK);case"postMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POST_MENTION_FALLBACK);case"pollCreationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK);case"bumpMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE);case"metaAiMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK);case"stickerReceiverFetchMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK);case"messengerMemory":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK);default:return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)}}l.default=s}),98);
__d("MAWThreadSnippetForGifMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForImageMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Image message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForPttMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ptt message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForRavenMsg",["MAWLocalizationType","MAWMsg","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.ravenMediaType,i=t.snippetSenderContactId,l=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,s={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?l=a===o("MAWMsg").MAWRavenMsgMediaType.IMAGE?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:o("WAJids").isAuthorSystem(n)||i==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]))):(l=a===o("MAWMsg").MAWRavenMsgMediaType.IMAGE?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,s.contactIDs.push(i)),{snippetParams:s,snippetSenderContactId:i,snippetType:l}}l.default=s}),98);
__d("MAWThreadSnippetForMsgUtils",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r){var a=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,i={contactIDs:[],mentionJIDs:n!=null?n:[],strings:[]};return o("WAJids").isAuthorMe(t)?a=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:o("WAJids").isAuthorSystem(t)||r==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Sticker message can not have AUTHOR_SYSTEM"]))):(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,i.contactIDs.push(r)),{snippetParams:i,snippetSenderContactId:r,snippetType:a}}l.getMAWThreadSnippetForStickerMsg=s}),98);
__d("MAWThreadSnippetForReceiverFetchMsg",["MAWThreadSnippetForMsgUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.mentionedJids,r=e.snippetSenderContactId;return o("MAWThreadSnippetForMsgUtils").getMAWThreadSnippetForStickerMsg(t,n,r)}l.default=e}),98);
__d("MAWThreadSnippetForRevokedMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Revoked message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForStickerMsg",["MAWThreadSnippetForMsgUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.mentionedJids,r=e.snippetSenderContactId;return o("MAWThreadSnippetForMsgUtils").getMAWThreadSnippetForStickerMsg(t,n,r)}l.default=e}),98);
__d("MAWThreadSnippetForTextMsg",["MAWLocalizationType","MAWVault","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.content,a=t.isGroup,i=t.mentionedJids,l=t.snippetSenderContactId,s=t.specialTextSize,u=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,c={contactIDs:[],mentionJIDs:i,strings:[]};if(o("WAJids").isAuthorMe(n)?u=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Text message can not have AUTHOR_SYSTEM"]))):(u=a?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,c.contactIDs.push(l)),r!=null)if(s===1||s===2||s===3){var d=o("MAWVault").unvault(r);c.strings.push(d==="\uD83D\uDC4D"?"(Y)":r)}else c.strings.push(r);return{snippetParams:c,snippetSenderContactId:l,snippetType:u}}l.default=s}),98);
__d("MAWThreadSnippetForVideoMsg",["MAWLocalizationType","WAJids","WALogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,a=t.gifPlayback,i=t.mentionedJids,l=t.snippetSenderContactId,s=a===!0&&r("gkx")("5398"),u=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,c={contactIDs:[],mentionJIDs:i,strings:[]};return o("WAJids").isAuthorMe(n)?u=s?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Video message can not have AUTHOR_SYSTEM"]))):(u=s?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,c.contactIDs.push(l)),{snippetParams:c,snippetSenderContactId:l,snippetType:u}}l.default=s}),98);
__d("MAWThreadSnippetForXMAMsg",["MAWLocalizationType","WAArmadilloXMA.pb","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P;function N(t){var n=t.author,r=t.chatJid,a=t.content,i=t.mentionedJids,l=t.snippetSenderContactId,N=t.xmaMessageType,w=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,A={contactIDs:[],mentionJIDs:i,strings:[]};switch(N==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["XMA message does not have xmaMessageType"]))),N){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:if(o("WAJids").isAuthorMe(n))if(a!=null){var F=a;w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT,F!=null&&A.strings.push(F)}else w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT;else if(o("WAJids").isAuthorSystem(n)||l==null)o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"])));else{w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,A.contactIDs.push(l);var O=a;O!=null&&A.strings.push(O)}break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POST_MENTION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POST_MENTION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_MEMORIES_SHARE:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_MEMORIES_SHARE;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG;var B;if(r!=null&&(B=o("WAJids").interpretAsUserJid(r)),B!=null){var W=o("WAJids").userIdFromJid(B);A.contactIDs.push(W)}else o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["XMA story mentions must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)?o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED;var q=M(r);q!=null?A.contactIDs.push(q):o("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:if(o("WAJids").isAuthorMe(n)&&l!=null){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED;var U=M(r);U!=null?A.contactIDs.push(U):o("WALogger").ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL;var V=M(r);V!=null?A.contactIDs.push(V):o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL;var H=M(r);H!=null?A.contactIDs.push(H):o("WALogger").ERROR(I||(I=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(T||(T=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:o("WAJids").isAuthorMe(n)&&l!=null?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(D||(D=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:o("WAJids").isAuthorMe(n)&&l!=null?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(x||(x=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR($||($=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,A.contactIDs.push(l));break;default:o("WALogger").ERROR(P||(P=babelHelpers.taggedTemplateLiteralLoose(["Encountered unexpected XMAMessageType when building a thread snippet: ",""])),N)}return{snippetParams:A,snippetSenderContactId:l,snippetType:w}}function M(e){var t=e!=null?o("WAJids").interpretAsUserJid(e):null;return t!=null?o("WAJids").userIdFromJid(t):null}l.default=N}),98);
__d("MAWThreadSnippet",["FBLogger","MAWLocalizationType","MAWMsgType","MAWThreadSnippetForAdminOrEphemeralMsg","MAWThreadSnippetForBumpExistingMessageMsg","MAWThreadSnippetForCiphertextMsg","MAWThreadSnippetForDocumentFileMsg","MAWThreadSnippetForFallbackMessageMsg","MAWThreadSnippetForGifMsg","MAWThreadSnippetForImageMsg","MAWThreadSnippetForPttMsg","MAWThreadSnippetForRavenMsg","MAWThreadSnippetForReceiverFetchMsg","MAWThreadSnippetForRevokedMsg","MAWThreadSnippetForStickerMsg","MAWThreadSnippetForTextMsg","MAWThreadSnippetForVideoMsg","MAWThreadSnippetForXMAMsg","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return/^\d+$/.test(e)}function s(t){if(!o("WAJids").isAuthorSystem(t)){var n=o("WAJids").isAuthorMe(t)?o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid()):o("WAJids").userIdFromJid(t);if(!e(n)){r("FBLogger")("messenger_web").mustfix("[MAWThreadSnippetBuildTxns] Snippet sender contact id is invalid");return}return n}}function u(e){var t=e.adminMsgContent,n=e.adminType,a=e.author,i=e.chatJid,l=e.content,u=e.gifPlayback,c=e.mentionedJids,d=e.msgType,m=e.ravenMediaType,p=e.replyAuthor,_=e.replyType,f=e.specialTextSize,g=e.unsupportedType,h=e.xmaMessageType,y=o("WAJids").switchOnMsgrChatJidType(i,{group:function(t){return!0},user:function(t){return!1}}),C=s(a);switch(d){case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return r("MAWThreadSnippetForCiphertextMsg")(C);case o("MAWMsgType").MSG_TYPE.TEXT:return r("MAWThreadSnippetForTextMsg")({author:a,content:l,isGroup:y,mentionedJids:c,snippetSenderContactId:C,specialTextSize:f});case o("MAWMsgType").MSG_TYPE.IMAGE:return r("MAWThreadSnippetForImageMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.VIDEO:return r("MAWThreadSnippetForVideoMsg")({author:a,gifPlayback:u,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.PTT:return r("MAWThreadSnippetForPttMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return r("MAWThreadSnippetForAdminOrEphemeralMsg")({adminMsgContent:t,adminType:n,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.GIF:return r("MAWThreadSnippetForGifMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.STICKER:return r("MAWThreadSnippetForStickerMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return r("MAWThreadSnippetForDocumentFileMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.REVOKED:return r("MAWThreadSnippetForRevokedMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.XMA:return r("MAWThreadSnippetForXMAMsg")({author:a,chatJid:i,content:l,mentionedJids:c,snippetSenderContactId:C,xmaMessageType:h});case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return r("MAWThreadSnippetForBumpExistingMessageMsg")({author:a,replyAuthor:p,replyType:_,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return r("MAWThreadSnippetForFallbackMessageMsg")({author:a,snippetSenderContactId:C,unsupportedType:g});case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return r("MAWThreadSnippetForReceiverFetchMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.RAVEN:return r("MAWThreadSnippetForRavenMsg")({author:a,mentionedJids:c,ravenMediaType:m,snippetSenderContactId:C});default:return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:C,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET}}}l.getSnippetContactId=s,l.buildThreadSnippet=u}),98);
__d("WAProtocolMsgId",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.externalId===t.externalId&&e.author===t.author&&e.chat===t.chat}i.equals=e}),66);
__d("MAWThreadSnippetBuildTxns",["FBLogger","MAWDbMsg","MAWDbMsgOrReaction","MAWDbReaction","MAWDexieTable","MAWJidUtils","MAWLocalizationType","MAWThreadSnippet","MAWThreadSnippetUtils","MAWUserJidWrapper","WAJids","WAProtocolMsgId","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return o("WAJids").switchOnMsgrChatJidType(n,{group:function(r){return u(e,t,!0)},user:function(r){return u(e,t,!1)}})}function s(t,n){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(n,{forMessage:function(n){var e,r,a,i,l,s,u;return o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(e=n.msgContent)==null?void 0:e.adminMsgContent,adminType:(r=n.msgContent)==null?void 0:r.adminType,author:n.author,chatJid:t,content:(a=n.msgContent)==null?void 0:a.content,mentionedJids:(i=n.msgContent)==null?void 0:i.mentionedJids,msgType:n.type,ravenMediaType:n.ravenMediaType,replyAuthor:(l=n.quote)==null?void 0:l.content.author,replyType:(s=n.quote)==null?void 0:s.content.type,specialTextSize:n.specialTextSize,unsupportedType:(u=n.msgContent)==null?void 0:u.subtype,xmaMessageType:n.xmaMessageType})},forReaction:function(n){var t=o("MAWDbReaction").castToIncomingDbReaction(n);return e(t.author,t.reaction,t.threadJid)}})}function u(e,t,n){var a;o("WAJids").isAuthorMe(e)?(r("FBLogger")("messenger_web").warn("[MAWThreadSnippetBuildTxns] Reaction snippet author should not be @me"),a=o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())):a=o("WAJids").userIdFromJid(e);var i={contactIDs:[],strings:[]},l=n?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE;return i.contactIDs.push(a),i.strings.push(t),{snippetParams:i,snippetSenderContactId:a,snippetType:l}}function c(e,t,n,r){var a,i=n.newestReaction,l=n.reactionsToClear;if(i!=null&&o("WATimeUtils").castUnixTimeToMillisTime(i.ts)>((a=t.snippetMsgTs)!=null?a:0))return o("MAWDexieTable").dexieResolve({newestReaction:i,thread:d(t,i,r)});var s=l!=null&&l.length>0;return s&&t.snippetMsg!=null?e.reactions.get({reactionId:t.snippetMsg}).then(function(n){var r=!1;if(n==null)r=!0;else{var a=o("MAWJidUtils").maybeToProtocolMsgId(n.author,n.threadJid,n.reactToExternalId);a!=null&&(r=l.some(function(e){var t=o("MAWJidUtils").maybeToProtocolMsgId(e.author,e.threadJid,e.reactToExternalId);return t!=null&&o("WAProtocolMsgId").equals(t,a)}))}return r?m(e,t).then(function(e){return{newestReaction:null,thread:e}}):o("MAWDexieTable").dexieResolve({newestReaction:null,thread:t})}):o("MAWDexieTable").dexieResolve({newestReaction:null,thread:t})}function d(e,t,n){return babelHelpers.extends({},e,{snippetMsg:t.reactionId,snippetMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(t.ts)})}function m(e,t){return o("MAWThreadSnippetUtils").recalculateSnippetFromScratch_EXPENSIVE(e,t).then(function(e){if(e==null)return r("FBLogger")("messenger_web").mustfix("[Occamadillo] ThreadUpdated handler called for clear snippet when centralized thread bump is enabled"),babelHelpers.extends({},t,{snippetMsg:void 0,snippetMsgTs:void 0});var n=o("WATimeUtils").castUnixTimeToMillisTime(o("MAWDbMsg").getCanonicalTsFromMsg(e));return babelHelpers.extends({},t,{snippetMsg:e.msgId,snippetMsgTs:n})})}function p(e,t){return m(e,t).then(function(t){return e.threads.put(t).then(r("emptyFunction"))})}l.buildReactionThreadSnippet=e,l.buildThreadSnippetForMsgOrIncomingReaction=s,l.getReactionSnippetParams=u,l.getThreadChangesetForReactionChanges=c,l.getThreadChangesetForNewReaction=d,l.refreshThreadSnippet=p}),98);
__d("MAWEphemeralMsgUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return function(t){return!e.has(t.msgId)&&t.ephemeralMsgDisappeared!==!0}}i.filterNonExpiredMsg=e}),66);
__d("MAWThreadSnippetUtils",["MAWDbReaction","MAWEphemeralMsgUtils","MAWJidUtils","MAWLocalizationType","MAWLocalizationUtils","MAWMsgType","MAWThreadNewestMsgOrReactionUtils","MAWThreadSnippet","MAWThreadSnippetBuildTxns","MAWXMAUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;if(d(e.xmaMessageType))return!0;var n=((t=e.msgContent)==null?void 0:t.adminType)!=null?o("MAWLocalizationUtils").isDeviceChangeAdminMsg(e.msgContent.adminType):!1;if(e.type!==o("MAWMsgType").MSG_TYPE.ADMIN)return!1;var r=e.msgContent.adminType;return r===o("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG?!0:n}function s(t,n,r){return t.messages.where("[threadJid+sortOrderMs]").between([n.jid,Number.MIN_SAFE_INTEGER],[n.jid,Number.MAX_SAFE_INTEGER],!1,!1).filter(function(t){return(r==null||o("MAWEphemeralMsgUtils").filterNonExpiredMsg(r)(t))&&!e(t)}).reverse().first()}var u={snippetParams:{contactIDs:[],mentionJIDs:[],strings:[]},snippetSenderContactId:null,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET};function c(e,t){return o("MAWThreadNewestMsgOrReactionUtils").getNewestMsgOrReactionForSnippet(e,t).then(function(e){return e==null?{snippet:u}:m(t,e)})}function d(e){return o("MAWXMAUtils").isXMAStoryReply(e)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e)}function m(e,t){var n,r,a,i,l,s,c;if(t.reactionId!=null){var d=o("MAWDbReaction").maybeCastToIncomingDbReaction(t);return d==null?{snippet:u}:{snippet:o("MAWThreadSnippetBuildTxns").buildReactionThreadSnippet(d.author,d.reaction,e),snippetMsgOrReaction:t}}switch(t.type){case o("MAWMsgType").MSG_TYPE.XMA:{var m,p,_,f,g,h,y,C=o("MAWJidUtils").toProtocolMsgId(t);return C==null?{snippet:u}:{snippet:o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(m=t.msgContent)==null?void 0:m.adminMsgContent,adminType:(p=t.msgContent)==null?void 0:p.adminType,author:t.author,chatJid:t.threadJid,content:(_=t.msgContent)==null?void 0:_.content,mentionedJids:(f=t.msgContent)==null?void 0:f.mentionedJids,msgType:t.type,ravenMediaType:t.ravenMediaType,replyAuthor:(g=t.quote)==null?void 0:g.content.author,replyType:(h=t.quote)==null?void 0:h.content.type,specialTextSize:t.specialTextSize,unsupportedType:(y=t.msgContent)==null?void 0:y.subtype,xmaMessageType:t.xmaMessageType}),snippetMsgOrReaction:t}}default:return{snippet:o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(n=t.msgContent)==null?void 0:n.adminMsgContent,adminType:(r=t.msgContent)==null?void 0:r.adminType,author:t.author,chatJid:t.threadJid,content:(a=t.msgContent)==null?void 0:a.content,mentionedJids:(i=t.msgContent)==null?void 0:i.mentionedJids,msgType:t.type,ravenMediaType:t.ravenMediaType,replyAuthor:(l=t.quote)==null?void 0:l.content.author,replyType:(s=t.quote)==null?void 0:s.content.type,specialTextSize:t.specialTextSize,unsupportedType:(c=t.msgContent)==null?void 0:c.subtype,xmaMessageType:t.xmaMessageType}),snippetMsgOrReaction:t}}}l.isDbMsgDisabledForThreadSnippet=e,l.recalculateSnippetFromScratch_EXPENSIVE=s,l.EMPTY_SNIPPET_DATA=u,l.getThreadSnippetFromScratch=c,l.shouldIgnoreXMAMsgForSnippet=d}),98);
__d("MAWDbAppMeta",[],(function(t,n,r,o,a,i){"use strict";var e={allowSecurityAlert:"allowSecurityAlert",allowSecurityAlertForSelf:"allowSecurityAlertForSelf",dbMigrationVersion:"dbMigrationVersion",deviceJid:"deviceJid",hasMigratedFromDexie:"hasMigratedFromDexie",hmacKey:"hmacKey",hotlikeSticker:"hotlikeSticker",isBackfilledForOccamadillo:"isBackfilledForOccamadillo",msgTypeVersion:"msgTypeVersion",restoreMigrationAttempts:"restoreMigrationAttempts",restoreToDexieMigrationComplete:"restoreToDexieMigrationComplete"};i.AppMetaKeysEnum=e}),66);
__d("MAWDBMigrationUtils",["MAWDbAppMeta","MAWIndexedDb","MAWTransactionMode"],(function(t,n,r,o,a,i,l){"use strict";var e={batchSize:0,cursorValue:0,isRunning:!1},s={version:0},u=o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY},"getMigrationVersion",function(e){return function(){return e.appMeta.get(o("MAWDbAppMeta").AppMetaKeysEnum.dbMigrationVersion).then(function(e){var t,n=(t=e==null?void 0:e.value.dbMigrationVersion)!=null?t:0;return s.version=n,n})}}),c=6;l.mawDbDedupeMsgsMigrationStatus=e,l.mawDbMigrationVersion=s,l.getMigrationVersion=u,l.MAWDB_DEDUPE_MSGS_MIGRATION_VERSION=c}),98);
__d("MAWLoadReplyMediaTxns",["MAWBridgeReceiverFetchInfo","MAWDbMedia","MAWDbMsg","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWMediaUtils","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MWPBumpEntityKey","WAAssertUnreachable","WAJids","WALogger","WAMsgType","WAResultOrError","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_;function f(e,t,n){if(r("gkx")("2419")&&n!=null){var a=o("MAWMediaUtils").genHMACPlaintextHash(n);return e.media.where("hashedPlaintextHash").equals(a).first()}else return e.media.get(t)}var g=new Set([(_=o("MAWDbMedia")).MEDIA_TYPE.IMAGE,_.MEDIA_TYPE.GIF,_.MEDIA_TYPE.PTT,_.MEDIA_TYPE.STICKER,_.MEDIA_TYPE.VIDEO,_.MEDIA_TYPE.DOCUMENT_FILE]);function h(e){var t;switch(e.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:case o("MAWDbMedia").MEDIA_TYPE.GIF:case o("MAWDbMedia").MEDIA_TYPE.STICKER:t=e.validatedImageInfo;break;case o("MAWDbMedia").MEDIA_TYPE.VIDEO:t=e.validatedVideoInfo;break}var n=t||{},r=n.height,a=n.jpegThumbnailHeight,i=n.jpegThumbnailWidth,l=n.width;return{replyMediaPreviewHeight:a!=null?a:r,replyMediaPreviewWidth:i!=null?i:l}}function y(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case o("MAWMsgType").MSG_TYPE.XMA:return r("gkx")("9921")?!0:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType);case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("WAMsgType").NOTE_REPLY:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RAVEN:return!1;default:return r("WAAssertUnreachable")(e.type)}}function C(t,n,r){if(n==null)return o("MAWDexieTable").dexieResolve();var a=f(t,n,r).then(function(e){if(e==null)return o("WAResultOrError").makeError("reply_media_not_found");if(!g.has(e.mediaType))return o("WAResultOrError").makeError("reply_media_type_unknown");var t=h(e),r=t.replyMediaPreviewHeight,a=t.replyMediaPreviewWidth;return n!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","load_reply_media_txns_for_reply_type_'unknown'}"),o("WAResultOrError").makeResult({replyMediaId:n,replyMediaPreviewHeight:r,replyMediaPreviewWidth:a,replyPlaintextHash:e.plaintextHash})});return a.then(function(t){if(t.success!==!0){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to fetch reply media with id ",": ",""])),n,t.error);return}return t.value})}function b(e,t){var n=t.defaultPreviewMediaId;if(n==null)return o("MAWDexieTable").dexieResolve({replyXMAId:t.xmaId});var r=f(e,n).then(function(e){if(e==null)return o("WAResultOrError").makeError("reply_xma_media_not_found - "+t.targetType);if(!g.has(e.mediaType))return o("WAResultOrError").makeError("reply_xma_media_type_unknown");var n=h(e),r=n.replyMediaPreviewHeight,a=n.replyMediaPreviewWidth;return o("WAResultOrError").makeResult({replyMediaPreviewHeight:r,replyMediaPreviewWidth:a,replyPlaintextHash:e.plaintextHash,replyXMAId:t.xmaId})});return r.then(function(e){if(e.success!==!0){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to fetch reply media XMA with id ",": ",""])),t.xmaId,e.error);return}return e.value})}function v(e,t,n){var a,i,l;n===void 0&&(n=!1);var s=((a=t.quote)==null?void 0:a.content)||{},u=s.author,c=s.externalId,d=s.mediaId,m=s.msgId,p=s.plaintextHash,_=s.type,f=s.xmaMessageType;if(((i=t.quote)==null?void 0:i.content)==null||!y((l=t.quote)==null?void 0:l.content))return o("MAWDexieTable").dexieResolve();var g=t.threadJid,h=u===o("MAWUserJidWrapper").getMyUserJid(),b=h?o("WAJids").AUTHOR_ME:u;return(r("gkx")("9921")?_===o("MAWMsgType").MSG_TYPE.XMA:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(f))?S(e,o("MAWJidUtils").maybeToProtocolMsgId(b,g,c)):_===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?E(e,m):C(e,d,n?null:p)}function S(e,t){return t==null?o("MAWDexieTable").dexieResolve():o("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(e,t).then(function(t){if(!(t==null||o("MAWXMAUtils").isXMAExpired(t.isTombstoned,t.targetExpiringAtSec)))return b(e,t)})}function R(e,t){var n=t.author,a=t.externalId,i=t.mediaId,l=t.plaintextHash,s=t.threadJid,u=t.type,c=t.xmaMessageType,d=r("gkx")("9921")?u===o("MAWMsgType").MSG_TYPE.XMA:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(c),m=u===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH;return!o("MAWDbMsg").isMediaMsg(t)&&!d&&!m?o("MAWDexieTable").dexieResolve():d?S(e,o("MAWJidUtils").maybeToProtocolMsgId(n,s,a)):m?L(e,t.receiverFetchId):C(e,i,l)}function L(e,t,n){return t==null?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Missing receiverFetchId for getReplyMediaForReceiverFetchWithReceiverFetchId"]))),o("MAWDexieTable").dexieResolve()):e.receiverFetchInfo.get({receiverFetchId:t}).then(function(e){if(e==null){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Missing receiverFetchInfo for getReplyMediaForReceiverFetchWithReceiverFetchId"])));return}try{var t=o("MAWDbMedia").convertNumberToMediaId(parseInt(e.receiverFetchId,10));return n!=null&&o("MAWIndexedDb").afterTransaction({tag:"NewReceiverFetchInfo",value:o("MAWBridgeReceiverFetchInfo").createBridgeReceiverFetchInfoPayloadFromDbInfo(n.threadJid,n.msgId,n.sortOrderMs,n.ts,e)}),{replyMediaId:t,replyMediaPreviewHeight:e.previewHeight,replyMediaPreviewWidth:e.previewWidth}}catch(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert receiver fetch id to media id: ",""])),e);return}})}function E(e,t){return t==null?(o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Missing msgId for getReplyMediaForReceiverFetch"]))),o("MAWDexieTable").dexieResolve()):e.messages.get({msgId:t}).then(function(t){if(t==null||t.type!==o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH||t.receiverFetchId==null){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Invalid msg for getReplyMediaForReceiverFetch with type: ",""])),t==null?void 0:t.type);return}return L(e,t.receiverFetchId,t)})}l.getMedia=f,l.MSG_MEDIA_TYPE=g,l.getImageAttributes=h,l.isMediaReplyContent=y,l.getReplyMediaForMsgQuote=v,l.getReplyMediaForMsg=R}),98);
__d("MAWDbChunkTxns",["MAWDexieTable","MAWMediaUtils","MAWODSProxy","MWFBLogger","WAErrorMessage","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["maw_db","txn","MAWDbChunkTxns"]),m=function(t,n,r,a,i,l){l===void 0&&(l=0);var e=o("MAWMediaUtils").genHMACPlaintextHash(n);return p(t,n,e,r,a,i,l)},p=function(n,r,a,i,l,m,_){return _===void 0&&(_=0),n.chunk.where("hashedPlaintextHash").equals(a).first().then(function(t){var f={blobData:i,hashedPlaintextHash:a,isProgressivePreview:m!=null?m:void 0,mimetype:l,plaintextHash:r};if(t){_>0&&d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Chunk found after retry for hashedPlaintextHash: ",""])),a);var g=m!==!0&&t.isProgressivePreview===!0;if(g){var h=babelHelpers.extends({},f,{chunkId:t.chunkId});return n.chunk.put(h).then(function(){return h})}else return t}return n.chunk.add(f).then(function(e){return babelHelpers.extends({},f,{chunkId:e})}).catch(function(e){var t=o("WAErrorMessage").maybeGetMessageFromError(e);if(_>0)throw d.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk for hashedPlaintextHash: ",". Error: ",""])),a,t),d.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk after retry. Error: ",""])),t),e;return d.WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk. Possible duplicate? Will attempt a retry. For hashedPlaintextHash: ",". Error: ",""])),a,t),o("MAWODSProxy").odsBumpEntityKey({amount:1,entity:o("WAOdsEnums").Entity.MAW_MEDIA_DB_DUPLICATE_CHUNK,key:"retry"}),p(n,r,a,i,l,m,_+1)})})},_=function(t,n){return t.chunk.where("hashedPlaintextHash").equals(n)},f=function(t,n){return _(t,n).count().then(function(e){return e>0})},g=function(t,n){return o("MAWDexieTable").dexieAll(n.map(function(e){return f(t,e).then(function(t){return[e,t]})})).then(function(e){return new Map(e)})},h=function(t,n){return _(t,n).first()},y=function(t,n){return t.chunk.where("hashedPlaintextHash").anyOf(n).toArray().then(function(e){return new Map(e.map(function(e){return[e.hashedPlaintextHash,e]}))})},C=function(t,n){var e=n.map(o("MAWMediaUtils").genHMACPlaintextHash);return t.chunk.where("hashedPlaintextHash").anyOf(e).toArray().then(function(e){return new Map(e.map(function(e){return[e.plaintextHash,e]}))})};function b(e,t){return e.chunk.bulkGet(t)}var v=function(t,n){var e=o("MAWMediaUtils").genHMACPlaintextHash(n);return t.chunk.get({hashedPlaintextHash:e})};l.getOrCreateMediaChunkWithPlaintextHash=m,l.getOrCreateMediaChunkWithHashedPlaintextHash=p,l.hasMediaChunk=f,l.hasMediaChunks=g,l.maybeGetChunkFromHash=h,l.maybeBulkGetChunksFromHash=y,l.maybeBulkGetChunksFromPlaintextHash=C,l.bulkGetChunks=b,l.maybeGetChunkByPlaintextHash=v}),98);
__d("MAWDbMediaTxns",["MAWDbMsg","MAWDexieTable","MAWMediaUtils","MAWMsgType","MAWODSProxy","WAHashUtils","WALogger","WAOdsEnums","WAResultOrError","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.media.get({mediaId:t})}function m(e,t){return t.length===0?o("MAWDexieTable").dexieResolve(new Map):e.media.bulkGet(t).then(function(e){return new Map(e.filter(Boolean).map(function(e){return[e.mediaId,e]}))})}function p(e,t){return e.media.where("hashedPlaintextHash").equals(t).first()}function _(e,t){var n=o("MAWMediaUtils").genHMACPlaintextHash(t);return p(e,n)}function f(e,t){var n=t.map(function(e){return o("MAWMediaUtils").genHMACPlaintextHash(e)});return g(e,n)}function g(e,t){return e.media.where("hashedPlaintextHash").anyOf(t).toArray()}function h(e,t){return t==null?o("MAWDexieTable").dexieResolve():y(e,t).then(function(n){var r=n==null?void 0:n.mediaId;return r!=null?e.media.get({mediaId:r}):e.media.get({objectId:t})})}function y(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.mediaBackup.get({objectId:t})}function C(e,t){if(t==null)return o("MAWDexieTable").dexieResolve();var n=e.mediaBackup.where("msgId").equals(t).toArray();return n}function b(t,n){var a=n.filter(o("MAWDbMsg").isMediaMsg);if(a.length===0)return o("MAWDexieTable").dexieResolve([]);o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[getMsgMediaPairFromMsgs] msgs: ",""])),a.map(function(e){return""+e.msgId}));var i=a.reduce(function(e,t){return t.mediaId==null?(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["mediaId is null for media msg with msgId: "," and msg type ",""])),t.msgId,t.type),e):e.set(t.mediaId,t)},new Map),l=Array.from(i.keys());return R(t,l).then(function(e){var t=[];return e.forEach(function(e){if(e==null)throw r("err")("Error missing media");var n=i.get(e.mediaId);if(n==null)throw r("err")("Error missing media");var a=o("MAWMediaUtils").genHMACPlaintextHash(e.plaintextHash);a!==e.hashedPlaintextHash&&(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[getMsgMediaPairFromMsgs] encountered mismatched hashedPlaintextHash for media. PlaintextHash: ",""])),o("WAHashUtils").sanitisePlaintextHash(e.plaintextHash)),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MEDIA_MISMATCH_HASHED_PLAINTEXT_HASH,key:"mismatch."+n.type})),t.push([n,e])}),t})}function v(e,t){if(t.length===0)return o("MAWDexieTable").dexieResolve([]);var n=t.filter(o("MAWDbMsg").isMediaMsg).map(function(e){var t=e.mediaId;if(t==null)throw o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["mediaId is null for media msg with msgId: ",""])),e.msgId),r("err")("mediaId is missing");return t});return R(e,n).then(function(e){var t=[];return e.forEach(function(e){e!=null&&t.push(e)}),t})}function S(e,t){if(t.type===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME||o("MAWDbMsg").isMediaMsg(t)){var n=t.mediaId;return n==null?t.type===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME?o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeResult()):o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeError("missing")):e.media.get(n).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}else return o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeResult())}function R(e,t){return e.media.bulkGet(t)}function L(e,t){var n=t.previewMediaIds!=null?R(e,t.previewMediaIds):o("MAWDexieTable").dexieResolve(),r=t.headerMediaId!=null?e.media.get(t.headerMediaId):o("MAWDexieTable").dexieResolve(),a=t.faviconMediaId!=null?e.media.get(t.faviconMediaId):o("MAWDexieTable").dexieResolve(),i=t.defaultPreviewMediaId!=null?e.media.get(t.defaultPreviewMediaId):o("MAWDexieTable").dexieResolve();return o("MAWDexieTable").dexieAll([n,r,a,i]).then(function(e){var n=e[0],r=e[1],a=e[2],i=e[3];if(t.headerMediaId!=null&&r==null||t.faviconMediaId!=null&&a==null||n==null)return o("WAResultOrError").makeError("missing");var l=[];for(var s of n){if(s==null)return o("WAResultOrError").makeError("missing");l.push(s)}return o("WAResultOrError").makeResult({defaultPreview:i,favicon:a,header:r,previews:l})})}function E(e,t,n){var r=babelHelpers.extends({},t,n);return e.media.put(r)}l.maybeGetMediaFromMediaId=d,l.maybeBulkGetMediaFromMediaId=m,l.maybeGetMediaFromHashedPlaintextHash=p,l.maybeGetMediaFromPlaintextHash=_,l.maybeBulkGetMediaFromPlaintextHash=f,l.maybeBulkGetMediaFromHashedPlaintextHash=g,l.maybeGetMediaFromObjectId=h,l.maybeGetMediaBackupRowFromObjectId=y,l.maybeGetMediaBackupRowFromMsgId=C,l.getMsgMediaPairFromMsgs=b,l.getMediaFromMsgs=v,l.getAndCheckMediaFromMsg=S,l.bulkGetMedias=R,l.getMediaForXMA=L,l.updateMedia=E}),98);
__d("WAMsgMap",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){var t=this;this.$1=new Map,e==null||e.forEach(function(e){var n=e[0],r=e[1];t.set(n,r)})}var t=e.prototype;return t.clear=function(){this.$1.clear()},t.delete=function(t){var e;(e=this.$1.get(t.externalId))==null||(e=e.get(t.author))==null||e.delete(t.chat)},t.get=function(t){var e;return(e=this.$1.get(t.externalId))==null||(e=e.get(t.author))==null?void 0:e.get(t.chat)},t.has=function(t){var e,n;return(e=(n=this.$1.get(t.externalId))==null||(n=n.get(t.author))==null?void 0:n.has(t.chat))!=null?e:!1},t.set=function(t,n){var e,r,o=(e=this.$1.get(t.externalId))!=null?e:new Map;this.$1.has(t.externalId)||this.$1.set(t.externalId,o);var a=(r=o.get(t.author))!=null?r:new Map;return o.has(t.author)||o.set(t.author,a),a.set(t.chat,n),this},t.keys=function(){var e=[],t=this.$1;for(var n of t.keys()){var r,o=(r=t.get(n))!=null?r:new Map;for(var a of o.keys()){var i,l=(i=o.get(a))!=null?i:new Map;for(var s of l.keys())e.push({externalId:n,author:a,chat:s})}}return e},t.entries=function(){var e=[],t=this.$1;for(var n of t.keys()){var r,o=(r=t.get(n))!=null?r:new Map;for(var a of o.keys()){var i,l=(i=o.get(a))!=null?i:new Map;for(var s of l.keys()){var u=l.get(s);u!=null&&e.push([{externalId:n,author:a,chat:s},u])}}}return e},t.values=function(){return this.entries().map(function(e){return e[1]})},e})();i.MsgMap=e}),66);
__d("MAWDbMsgUtil",["WAJids","WALogger","WAMsgMap"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return t.reduce(function(t,n){var r=n.threadJid;return r==null?(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Missing jid prevents adding message to array map"]))),t):n.author==="@system"?(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Invalid author when converting msg array to map"]))),t):(t.set({author:n.author,chat:r,externalId:n.externalId},n),t)},new(o("WAMsgMap")).MsgMap)}function c(e){return o("WAJids").isAuthorSystem(e.author)||e.threadJid==null?null:{author:e.author,chat:e.threadJid,externalId:e.externalId}}l.convertMsgArrayToMap=u,l.getProtocolMsgIdFromDbMsg=c}),98);
__d("MAWDbUnrenderedMsgTxns",["MAWAckLevel","MAWDbMsg","MAWDbMsgUtil","MAWDexieTable","WAJids","WALogger","WAMsgMap","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){var n=t.author,r=t.chat,a=t.externalId;return e.threads.get({jid:r}).then(function(t){return t==null?o("WAResultOrError").makeError("missing_thread_unrendered_msg"):m(e,a,r,n).then(function(e){return e==null?o("WAResultOrError").makeError("missing_unrendered_msg"):o("WAResultOrError").makeResult(e)})})}function d(e,t){var n=t.map(function(e){var t=e.externalId;return t});return e.unrenderedMessages.where("externalId").anyOf(n).toArray().then(function(e){var n=o("MAWDbMsgUtil").convertMsgArrayToMap(e),r=new(o("WAMsgMap")).MsgMap;return t.forEach(function(e){var t=n.get(e);t!=null&&r.set(e,t)}),r})}function m(e,t,n,r){return e.unrenderedMessages.where("externalId").equals(t).filter(function(e){return e.author===r&&e.threadJid===n}).first()}function p(e,t){return e+"_"+t}function _(e,t){var n=t.map(function(e){var t=e.externalId;return t}),r=Array.from(new Set(t.map(function(e){return e.chat})));return o("MAWDexieTable").dexieAll([e.threads.where("jid").anyOf(r).toArray(),e.unrenderedMessages.where("externalId").anyOf(n).toArray()]).then(function(e){var n=e[0],r=e[1];if(r.length===0||n.length===0)return[];var o=new Map;return t.forEach(function(e){var t=e.author,n=e.chat,r=e.externalId,a=o.get(r)||new Set;a.add(p(t,n)),o.set(r,a)}),r.filter(function(e){var t=e.author,n=e.externalId,r=e.threadJid,a=o.get(n);return a!=null&&r!=null&&a.has(p(t,r))})})}function f(t,n,r){return g(t,[{ack:r,msgId:n}]).then(function(t){var n=t[0];return n==null?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["updateSystemAckForUnrenderedMsg on non existing message"]))),null):n})}function g(e,t){var n=t.map(function(e){return e.msgId}),r=new Map;return t.forEach(function(e){return r.set(e.msgId,{ack:e.ack})}),e.unrenderedMessages.where("msgId").anyOf(n).toArray().then(function(t){if(t.length===0)return t;var n=[],a=[];return t.forEach(function(e){var t;if(e.author!==o("WAJids").AUTHOR_ME){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck on incoming message"]))),n.push(e);return}if(e.ack>o("MAWAckLevel").ACK.clock){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck on sent message"]))),n.push(e);return}var i=(t=r.get(e.msgId))==null?void 0:t.ack;if(i==null)return null;var l=babelHelpers.extends({},e,{ack:i});i===o("MAWAckLevel").ACK.sent&&delete l.resendCount,a.push(l)}),e.unrenderedMessages.bulkPut(a).then(function(){return[].concat(a,n)})})}function h(e,t){var n=t.map(function(t){return e.unrenderedMessages.get({msgId:t})});return o("MAWDexieTable").dexieAll(n)}function y(e,t){return e.unrenderedMessages.where("msgId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.msgId);return t+1})}l.maybeGetUnrenderedMsgByProtocolMsgId=c,l.getUnrenderedMsgMapByProtocolMsgId=d,l.maybeGetUnrenderedMsgByExternalId=m,l.getUnrenderedMsgsByProtocolMsgId=_,l.updateSystemAckForUnrenderedMsg=f,l.bulkUpdateSystemAckForUnrenderedMsgs=g,l.getUnrenderedMsgsByMsgIds=h,l.getNextUnrenderedMsgIdNumberForThread=y}),98);
__d("MAWMessageSortOrderUtils",["I64","MAWDbMsg","MAWExtractMsFromExternalId","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d;function m(t){var n=t.revokedExternalId!=null?t.revokedExternalId:t.externalId;n==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["generateAuthoritativeMessageSortOrder called without ID"])));var r=(d||(d=o("I64"))).of_string_opt(n);if(t.serverTs==null){var a;if(t.sortOrderMs!=null)return t.sortOrderMs;r==null&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] ExternalId is not present"])));var i=r==null?null:o("MAWExtractMsFromExternalId").extractMsFromExternalId(r);return Math.floor((a=t.originalTs)!=null?a:o("MAWDbMsg").getCanonicalTsFromMsg(t))*1e3+(i!=null?i:0)}if(r!=null){var l=o("MAWExtractMsFromExternalId").extractMsFromExternalId(r);if(l!=null){var m=t.originalTs!=null?t.originalTs:t.serverTs;return Number(m)*1e3+l}else o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] Timestamp bits in externalId not valid"])))}else o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] externalId is not a valid int64"])));return o("MAWDbMsg").getSortOrderWithFallback(t)}l.generateAuthoritativeMessageSortOrder=m}),98);
__d("WAArrayGroupBy",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=new Map,r=0;r<e.length;r++){var o=t(e[r]),a=n.get(o);a==null?n.set(o,[e[r]]):a.push(e[r])}return Array.from(n.entries())}i.groupBy=e}),66);
__d("MAWDbMsgTxns",["EncryptedBackupsUtils","FBLogger","MAWAckLevel","MAWBridgeMsg","MAWDbMsg","MAWDbMsgUtil","MAWDbThreadTxns","MAWDbUnrenderedMsgTxns","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWLoadReplyMediaTxns","MAWMessageSortOrderUtils","MAWMsgType","MAWODSProxy","MAWTransactionMode","MAWTransactor","Random","WAArrayGroupBy","WAJids","WALogger","WAMsg","WAMsgMap","WAOdsEnums","WAResultOrError","WATimeUtils","emptyFunction","gkx","justknobx","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g;function h(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.messages.get({msgId:t})}function y(e,t){return e.messages.where("threadJid").equals(t).count().then(function(e){return e===0})}function C(e,t,n){return e.messages.where("threadJid").equals(t).filter(n).first().then(function(e){return e!=null})}function b(e,t,n,r){return e.messages.where(["threadJid","sortOrderMs"]).between([t,Number.MIN_SAFE_INTEGER],[t,Number.MAX_SAFE_INTEGER],n,r)}function v(e,t){return b(e,t,!1,!1).last()}function S(e,t){return v(e,t).then(function(e){return e==null?void 0:e.msgId})}function R(e,t){return v(e,t).then(function(e){return(e==null?void 0:e.sortOrderMs)==null?null:o("WATimeUtils").castToMillisTime(e.sortOrderMs)})}function L(e,t,n){return r("vulture")("ST6o7qk-BKGl46ZXS71LYr_2y6I="),b(e,t,!1,!1).reverse().limit(n).toArray()}function E(e,t){return b(e,t,!1,!1).first()}function k(e,t){return E(e,t).then(function(e){return e==null?void 0:e.msgId})}function I(e,t){return e.messages.where("externalId").equals(t.externalId).filter(function(e){return e.author===t.author&&e.threadJid===t.chat}).toArray().then(D)}function T(e,t){var n=new Set(t.map(function(e){var t=e.author,n=e.chat,r=e.externalId;return o("WAMsg").craftWAMsgIdString({author:t,chat:n,externalId:r})}));return e.messages.where("externalId").anyOf(t.map(function(e){var t=e.externalId;return t})).filter(function(e){var t=e.author,r=e.externalId,a=e.threadJid;return n.has(o("WAMsg").craftWAMsgIdString({author:t,chat:a,externalId:r}))}).toArray().then(function(e){return o("WAArrayGroupBy").groupBy(e,function(e){return o("WAMsg").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId})}).map(function(e){var t=e[0],n=e[1];return D(n)}).filter(Boolean)})}function D(t){if(t.length>1){var n=t.map(function(e){var t,n;return e.type+":"+((t=e.serverTs)!=null?t:0).toString()+":"+((n=e.ts)!=null?n:0).toString()}),a=new Set(n).size===1;a?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[maybeGetMsgByProtocolMsgId] Suspected multiple instances of same message!"]))):o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[maybeGetMsgByProtocolMsgId] Can't have "," messages with the same protocolMsgId!"])),t.length),(r("gkx")("5039")||o("Random").coinflip(r("justknobx")._("3594")))&&x(t)}return t[0]}function x(e){var t=e.length;if(!(t<=1)){var n=t-1,a=e[n],i={editCount:0,mediaId:0,revokedStatus:0,serverTs:0,sortOrderMs:0,ts:0,type:0};e.slice(0,n).forEach(function(e){var t=[];if((e==null?void 0:e.editCount)!==(a==null?void 0:a.editCount)){var n,l;i.editCount++,t.push("editCount, reference: "+((n=a==null?void 0:a.editCount)!=null?n:"")+", duplicate: "+((l=e==null?void 0:e.editCount)!=null?l:"")+". ")}if((e==null?void 0:e.mediaId)!==(a==null?void 0:a.mediaId)&&(i.mediaId++,t.push("mediaId, reference: "+((a==null?void 0:a.mediaId)!=null?String(a.mediaId):"")+", duplicate: "+((e==null?void 0:e.mediaId)!=null?String(e.mediaId):"")+". ")),e.sortOrderMs!==a.sortOrderMs&&(i.sortOrderMs++,t.push("sortOrderMs, reference: "+String(a.sortOrderMs)+", duplicate: "+String(e.sortOrderMs)+". ")),e.serverTs!==a.serverTs&&(i.serverTs++,t.push("serverTs, reference: "+String(a.serverTs)+", duplicate: "+String(e.serverTs)+". ")),e.ts!==a.ts&&(i.ts++,t.push("ts, reference: "+String(a.ts)+", duplicate: "+String(e.ts)+". ")),e.type!==a.type){var s,u;(e.type===o("MAWMsgType").MSG_TYPE.REVOKED||a.type===o("MAWMsgType").MSG_TYPE.REVOKED)&&(i.revokedStatus++,r("FBLogger")("MAWDuplicateMessageComparison").info("Revoked duplicate msg conflict, duplicate message, %s, has type: %s, externalId: %s, revokedExternalId: %s, sortOrderMs: %s, serverTs: %s, ts: %s, rowId: %s, reference msg, %s, has type: %s, externalId: %s, revokedExternalId: %s, sortOrderMs: %s, serverTs: %s, ts: %s, rowId: %s",e.msgId,e.type,e.externalId,e.revokedExternalId,e.sortOrderMs,e.serverTs,e.ts,e.rowId,a.msgId,a.type,a.externalId,a.revokedExternalId,e.sortOrderMs,e.serverTs,e.ts,e.rowId)),i.type++,t.push("type, reference: "+((s=a.type)!=null?s:"")+", duplicate: "+((u=e.type)!=null?u:"")+". ")}var c=t.join("");c.length>0?r("FBLogger")("MAWDuplicateMessageComparison").info("Duplicate msg, %s, has conflicting field values to reference msg, %s: %s",e.msgId,a.msgId,c):r("FBLogger")("MAWDuplicateMessageComparison").info("Duplicate msg, %s, has no conflicting field values to reference msg, %s",e.msgId,a.msgId)}),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"sets_of_duplicate_msgs"}),Object.keys(i).forEach(function(e){var t=i[e];t>0&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"sets_of_duplicate_msgs_with_"+e+"_field_differences"})}),o("MAWODSProxy").odsBumpEntityKey({amount:t-1,entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"number_of_duplicate_msgs"}),Object.keys(i).forEach(function(e){var t=i[e];t>0&&o("MAWODSProxy").odsBumpEntityKey({amount:t,entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"number_of_duplicate_msgs_with_"+e+"_field_differences"})})}}function $(e,t,n,r){var o={author:r,chat:n,externalId:t};return I(e,o)}function P(e,t){return e.messages.where("msgId").equals(t).toArray()}function N(e,t){return A(e,t).then(function(e){return e.success,e})}function M(e,t){var n=t.map(function(e){var t=e.externalId;return t});return e.messages.where("externalId").anyOf(n).toArray().then(function(e){var n=o("MAWDbMsgUtil").convertMsgArrayToMap(e),r=new(o("WAMsgMap")).MsgMap;return t.forEach(function(e){var t=n.get(e);t!=null&&r.set(e,t)}),r})}function w(e,t){return e.messages.where("msgId").equals(t).first().then(function(e){return e==null?void 0:e.sortOrderMs})}function A(e,t){var n=t.author,r=t.chat,a=t.externalId;return e.threads.get({jid:r}).then(function(t){return t==null?o("WAResultOrError").makeError("missing_thread_msg"):$(e,a,t.jid,n).then(function(e){return e==null?o("WAResultOrError").makeError("missing_msg"):o("WAResultOrError").makeResult(e)})})}function F(e,t){var n=t.author,r=t.chat,o=t.externalId;return e.threads.get({jid:r}).then(function(t){if(t!=null)return e.messages.where("revokedExternalId").equals(o).filter(function(e){return e.author===n&&e.threadJid===t.jid&&e.type==="Revoked"}).first()})}function O(e,t,n,r){var a=e.messages.where("revokedExternalId").equals(t).filter(function(e){return e.author===r&&e.threadJid===n&&e.type===o("MAWMsgType").MSG_TYPE.REVOKED}).first(),i=o("MAWDbUnrenderedMsgTxns").maybeGetUnrenderedMsgByExternalId(e,t,n,r).then(function(e){if((e==null?void 0:e.type)===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME)return e});return o("MAWDexieTable").dexieAll([a,i]).then(function(e){var t=e[0],n=e[1];return t!=null||n!=null})}function B(e,t){var n=new Array(t.length),r=new Set;return t.forEach(function(e){n.push(e.externalId),r.add(o("EncryptedBackupsUtils").convertWAMsgIdToStringId(e))}),e.messages.where("externalId").anyOf(n).filter(function(e){return r.has(o("EncryptedBackupsUtils").convertWAMsgIdToStringId({author:e.author,chat:e.threadJid,externalId:e.externalId}))}).toArray()}function W(e,t,n,r,a,i){return q(e,[{ack:n,applicationErrorCode:i,msgId:t,reportingMeta:a,serverTs:r}]).then(function(e){var n=e.find(function(e){return e.msgId===t});return n==null?(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["updateSystemAck on non existing message"]))),null):n})}function q(e,t){var n=t.map(function(e){return e.msgId});return o("MAWDbXMATxns").getXMAMsgIdsFromAssociatedMsgIds(e,n).then(function(r){var a=new Map;t.forEach(function(e){a.set(e.msgId,{ack:e.ack,applicationErrorCode:e.applicationErrorCode,reportingMeta:e.reportingMeta,serverTs:e.serverTs});var t=r.get(e.msgId);t!=null&&a.set(t,{ack:e.ack,applicationErrorCode:e.applicationErrorCode,reportingMeta:e.reportingMeta,serverTs:e.serverTs})});var i=Array.from(new Set(n.concat(Array.from(r.values()))));return e.messages.where("msgId").anyOf(i).toArray().then(function(t){if(t.length===0)return t;var n=[],r=[];return t.forEach(function(e){var t,i,l;if(e.author!==o("WAJids").AUTHOR_ME||e.ack>o("MAWAckLevel").ACK.clock){n.push(e);return}var s=(t=a.get(e.msgId))==null?void 0:t.ack,u=(i=a.get(e.msgId))==null?void 0:i.serverTs;if(s==null)return null;var c=babelHelpers.extends({},e,{ack:s});U(c,u);var d=(l=a.get(e.msgId))==null?void 0:l.reportingMeta;d!=null&&(c.reportingMeta=d),s===o("MAWAckLevel").ACK.sent&&delete c.resendCount,r.push(c)}),n.length>0&&o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck: not updating ",""])),n.map(function(e){return e.msgId}).toString()),e.messages.bulkPut(r).then(function(){return o("MAWDexieTable").dexieAll(r.map(function(t){return o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,t)}))}).then(function(e){return r.forEach(function(t,n){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(t,e[n])})}),[].concat(r,n)})})})}function U(e,t){if(t!=null){e.serverTs=t;var n=e.sortOrderMs;e.type===o("MAWMsgType").MSG_TYPE.REVOKED&&r("justknobx")._("3841")||(e.sortOrderMs=o("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder(e),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Message was acked by server (serverTs = ","), override sortOrderMs: "," -> ",""])),t,n,e.sortOrderMs))}}function V(e,t,n,a){return o("MAWDbThreadTxns").getThread(e,t).then(function(t){if(!(!t.success||a==null)){var i=t.value,l=[e.messages.where(["threadJid","sortOrderMs"]).above([i.jid,a]).first(),e.messages.where(["threadJid","sortOrderMs"]).below([i.jid,a]).last()];return o("MAWDexieTable").dexieAll(l).then(function(t){var a=t[0],l=t[1];return o("MAWDbThreadTxns").updateThread(e,babelHelpers.extends({},i,{newestMsgTs:(l==null?void 0:l.ts)==null?i.newestMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(l.ts),oldestMsg:i.oldestMsg===n?a==null?void 0:a.msgId:i.oldestMsg})).then(r("emptyFunction"))})}})}function H(e){return e.messages.where("altIndex").equals(o("MAWDbMsg").FUTUREPROOF_ALT_INDEX).toArray().then(function(e){var t=[];return e.forEach(function(e){if(e.type!==o("MAWMsgType").MSG_TYPE.FUTUREPROOF){o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["getFutureproofMsg gets a message "," with unsupported type ",""])),e.msgId,e.type);return}t.push(e)}),t})}function G(e){return e.toString()}function z(e,t,n,a){var i=t.mediaId;if(i===n)return o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["updateMediaId on message "," that already has this mediaId ",""])),t.msgId,n),o("MAWDexieTable").dexieResolve();var l=i!=null?e.media.get(i):o("MAWDexieTable").dexieResolve();return l.then(function(i){i&&o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Replacing mediaId for message with pre-existing media. type=",""])),t.type);var l=a!=null?a:void 0,s=babelHelpers.extends({},t,{mediaId:n,plaintextHash:l});return e.messages.put(s).then(r("emptyFunction"))})}function j(e,t){var n=Array.from(t.keys());return e.messages.where("msgId").anyOf(n).toArray().then(function(n){var a=[];return n.map(function(e){var n=t.get(e.msgId),i=e.mediaId;if(i!=null&&i!==n){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("mediaId "+G(i)+" in message "+e.msgId+" is different with the "+G(n)+" in bulkUpdateMediaId");o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["updateMediaId on message "," that already has this mediaId ",""])),e.msgId,n);return}var l=babelHelpers.extends({},e,{mediaId:n,plaintextHash:e.plaintextHash});a.push(l)}),e.messages.bulkPut(a).then(r("emptyFunction"))})}function K(e,t){return Q(e,[t]).then(r("emptyFunction"))}function Q(e,t){return e.messages.where("msgId").anyOf(t).toArray().then(function(t){var n=t.map(function(e){return babelHelpers.extends({},e,{isExpiredXmaMsg:!0})});return e.messages.bulkPut(n).then(function(){return n})})}function X(e,t,n,r){if(r!=null&&r<=0)return o("MAWDexieTable").dexieResolve([]);var a=e.messages.where("altIndex").equals(o("MAWDbMsg").craftToBeReadAltIndex(t)).filter(function(e){return o("MAWDbMsg").getSortOrderWithFallback(e)<=n});return r!=null&&(a=a.limit(r)),a.toArray()}function Y(e,t,n){return X(e,t,n).then(function(t){var n=t.map(function(e){return babelHelpers.extends({altIndex:null},e)});return e.messages.bulkPut(n).then(function(){return n})})}function J(e,t){return e.messages.delete(t)}function Z(e,t){return e.messages.bulkDelete(t)}function ee(e,t,n){var r=t.map(function(e){return e.rowId}),a=n!=null?t.map(function(e){var t=o("MAWJidUtils").toProtocolMsgId(e);if(t)return babelHelpers.extends({},t,{reason:n})}).filter(Boolean):[];return o("MAWDexieTable").dexieAll([e.deletedMessages.bulkAdd(a),e.messages.bulkDelete(r)]).then(function(e){var t=e[0],n=e[1];o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Successfull deleted "," messages"])),n)})}function te(e,t){return e.messages.where("msgId").anyOf(t).toArray()}function ne(e){return e.messages.where("altIndex").anyOf([o("MAWDbMsg").SPAM_ALT_INDEX,o("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX]).toArray()}function re(e,t,n,r,a,i,l,s){l===void 0&&(l="before"),s===void 0&&(s=null);var u=n==null?null:o("MAWDbMsg").getSortOrderWithFallback(n);return l==="before"?e.messages.where(["threadJid","sortOrderMs"]).between([t,s!=null?s:Number.MIN_SAFE_INTEGER],[t,u!=null?u:Number.MAX_SAFE_INTEGER],!0,r).reverse().filter(i).limit(a).toArray():e.messages.where(["threadJid","sortOrderMs"]).between([t,u!=null?u:Number.MIN_SAFE_INTEGER],[t,s!=null?s:Number.MAX_SAFE_INTEGER],r,!0).filter(i).limit(a).toArray().then(function(e){return e.sort(function(e,t){return t.ts-e.ts})})}function oe(e,t,n,r){var o=n.msgId;if(r==null){var a;return{oldestMsg:(a=e==null?void 0:e.msgId)!=null?a:o}}var i=[e,t,n].filter(Boolean);return{oldestMsg:i.reduce(function(e,t){return ae(e,o,r)<ae(t,o,r)?e:t}).msgId}}function ae(e,t,n){return e.msgId===t?n:o("MAWDbMsg").getSortOrderWithFallback(e)}function ie(e,t){return e.messages.where("msgId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.msgId);return t+1})}function le(e){return o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"checkMessagesExistenceByProtocolMsgIds",function(t){return function(){return o("MAWDexieTable").dexieAll(e.map(function(e){return t.messages.get({protocolMsgId:e.chat+"."+e.externalId})}))}})()}function se(e,t){return e.messages.where("externalId").anyOf(t).toArray()}l.maybeGetMsg=h,l.getIsThreadEmpty=y,l.doesThreadHaveMsgsMatchCriteria=C,l.getThreadMessagesBySortOrder=b,l.getThreadNewestMessageBySortOrder=v,l.getThreadNewestMessageId=S,l.getThreadNewestMessageMs=R,l.getThreadNewestNumMessagesBySortOrder=L,l.getThreadOldestMessageBySortOrder=E,l.getThreadOldestMessageId=k,l.maybeGetMsgByProtocolMsgId=I,l.getUniqueMsgsByProtocolMsgIds=T,l.maybeGetMsgByExternalId=$,l.maybeGetMsgListByMsgId_I_KNOW_WHAT_I_AM_DOING=P,l.maybeGetMsgResultByProtocolMsgId=N,l.getMsgMapByProtocolMsgId=M,l.getSortOrderFromMsgId=w,l.maybeGetRevokedMsgByProtocolMsgId=F,l.checkIfMsgIsDeletedForMeOrRevoked=O,l.getMsgsByProtocolMsgId=B,l.updateSystemAck=W,l.bulkUpdateSystemAck=q,l.maybeUpdateThreadMsgsForDeleteForMe=V,l.getFutureProofMsgs=H,l.updateMediaId=z,l.bulkUpdateMediaId=j,l.updateDbMsgXMAExpiration=K,l.bulkUpdateDbMsgXMAExpired=Q,l.getMsgsNeedingRetroactiveReadReceiptsUpTo=X,l.clearRetroactiveReadReceiptStatusFromMsgsUpTo=Y,l.deleteDbMsg=J,l.bulkDeleteDbMsg=Z,l.deleteMessages=ee,l.getMsgsByMsgIds=te,l.getSpamMsgs=ne,l.fetchMessagesFromDbWithSortOrderMs=re,l.calculateOldestMsg=oe,l.getNextMsgIdNumberForThread=ie,l.checkMessagesExistenceByProtocolMsgIds=le,l.UNSAFE_getMultipleMsgsByExternalId=se}),98);
__d("MAWDbMsgTypeVersionTxns",["MAWDbAppMeta","MAWDexieTable","MAWTransactionMode","MAWTransactor","MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion}).then(function(e){return e==null?void 0:e.value.msgTypeVersion})}function u(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:t}})}function c(e,t){return e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:t}})}function d(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.hmacKey,value:{hmacKey:t}})}function m(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.hmacKey}).then(function(e){return e==null?void 0:e.value.hmacKey})}function p(e,t){return e.appMeta.get({key:t})}function _(e,t){return o("MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor").setCachedShouldSaveSecurityAlert(t),e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert,value:{allowSecurityAlert:t}}).then(r("emptyFunction"))}function f(e,t){return e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf,value:{allowSecurityAlertForSelf:t}}).then(r("emptyFunction"))}function g(){return o("MAWTransactor").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY},"handleInstructions",function(e){return function(){return h(e)}})()}function h(e){return p(e,o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlert)!=null?t:!1})}function y(e){return p(e,o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlertForSelf)!=null?t:!0})}function C(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.hotlikeSticker,value:{hotlikeSticker:t}})}function b(e){return o("MAWDexieTable").dexieAll([y(e),h(e)]).then(function(e){var t=e[0],n=e[1];return{allowSecurityAlertForContact:n,allowSecurityAlertForSelf:t}})}l.MSG_TYPE_VERSION=(e=o("MAWDbAppMeta")).AppMetaKeysEnum.msgTypeVersion,l.ALLOW_SECURITY_ALERT_FOR_CONTACT=e.AppMetaKeysEnum.allowSecurityAlert,l.ALLOW_SECURITY_ALERT_FOR_SELF=e.AppMetaKeysEnum.allowSecurityAlertForSelf,l.HOT_LIKE=e.AppMetaKeysEnum.hotlikeSticker,l.getMsgTypeVersion=s,l.addMsgTypeVersion=u,l.updateMsgTypeVersion=c,l.addHMACKey=d,l.getHMACKey=m,l.getAppMetaValue=p,l.updateSecurityAlertValueForContact=_,l.updateSecurityAlertValueForSelf=f,l.getSecuritySettingForContactTxn=g,l.getSecuritySettingForContact=h,l.getSecuritySettingForSelf=y,l.addHotLike=C,l.maybeBulkGetSecuritySetting=b}),98);
__d("MAWDbReactionsTxns",["FBLogger","MAWAuthor","MAWBridgeTypesCreators","MAWDbMsg","MAWDexieTable","MAWIndexedDb","WALogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=function(t){return t};function d(e,t){return e.reactions.put(c(t))}function m(t,n){return t.reactions.delete(n.rowId).then(function(){var t=n.author,r=n.reactionId,a=n.reactToMsgId,i=n.threadJid;a!=null&&(o("MAWIndexedDb").afterTransaction({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:i,reactToMsgId:a})}),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted reaction with id : ","."])),r))})}function p(e,t){var n=o("MAWAuthor").getAuthorUserJid(t.author);return e.reactions.where("reactToExternalId").equals(t.externalId).filter(function(e){return(e.reactToAuthor===n||e.reactToAuthor===t.author)&&e.threadJid===t.chat}).toArray()}function _(e,t){var n=t.reduce(function(e,t){return e.set(t.msgId,t),e},new Map);return e.reactions.where("reactToMsgId").anyOf(t.map(function(e){return e.msgId})).toArray().then(function(e){var t=e.filter(function(e){var t,r=e.reactToExternalId,o=e.reactToMsgId;return o!=null&&r===((t=n.get(o))==null?void 0:t.externalId)});return t.length<e.length&&r("FBLogger")("messenger_web").mustfix("Reactions query by reactToMsgId returns reactions with mismatching externalId"),t})}function f(e,t){return e.reactions.where("reactToMsgId").equals(t.msgId).toArray().then(function(e){var n=e.filter(function(e){var n=e.reactToExternalId;return n===t.externalId});return n.length<e.length&&r("FBLogger")("messenger_web").mustfix("Reactions query by reactToMsgId returns reactions with mismatching externalId"),n})}function g(e,t){return _(e,[t])}function h(e,t){var n=t.author,r=t.chat,o=t.externalId;return e.reactions.where("externalId").equals(o).filter(function(e){return e.author===n&&e.threadJid===r}).first()}function y(e,t){return o("MAWDexieTable").dexieAll(t.map(function(t){var n=t.author,r=t.externalId,a=o("MAWAuthor").getAuthorUserJid(n);return e.reactions.where("reactToExternalId").equals(r).filter(function(e){return o("MAWAuthor").getAuthorUserJid(e.reactToAuthor)===a}).toArray()})).then(function(t){var n=t.flat();if(n.forEach(function(e){var t=e.author,n=e.reactToMsgId,r=e.threadJid;n!=null&&o("MAWIndexedDb").afterTransaction({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:r,reactToMsgId:n})})}),n.length!==0)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted: "," reactions rows."])),n.length),e.reactions.bulkDelete(n.map(function(e){return e.rowId}))})}function C(e,t){return e.reactions.where("reactToMsgId").anyOf(t.map(function(e){return e.msgId})).delete().then(function(e){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Deleted "," reactions"])),e)})}function b(e,t){return e.reactions.where("reactionId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.reactionId);return t+1})}function v(e,t,n,r,a,i,l){var s,u,c=(s=r==null?void 0:r.ts)!=null?s:o("WATimeUtils").unixTime();return e.reactions.where(["threadJid","ts"]).between([t,(u=o("WATimeUtils").castMillisTimeToUnixTime(n))!=null?u:o("WATimeUtils").castToUnixTime(0)],[t,c],!0,a).reverse().filter(l).limit(i).toArray()}l.coerceToReaction=c,l.putReaction=d,l.deleteReaction=m,l.getReactionForEcho=p,l.getReactionsFromMessages=_,l.getReactionsForMessage=f,l.getReactionsFromMessage=g,l.maybeGetReactionByProtocolMsgId=h,l.deleteReactionsByUniqueMsgIdentifiers=y,l.deleteAllReactionsForMessages=C,l.getNextReactionIdNumberForThread=b,l.fetchReactionsFromDbWithTimestamp=v}),98);
__d("MaybeCreateOrUpdateThreadResultCache",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){e.delete(t)}i.cache__I_KNOW_WHAT_I_AM_DOING=e,i.deleteCachedThreadResult=l}),66);
__d("MAWDbThreadTxns",["MAWAuthoritativeThreadsCache","MAWBridgeTypesCreators","MAWDbMsgTxns","MAWDexieTable","MAWFolderTypes","MAWIndexedDb","MaybeCreateOrUpdateThreadResultCache","WAArrayZip","WALogger","WAResultOrError","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return e.threads.get({deduplicationKey:t}).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function d(e,t){return e.threads.get({jid:t}).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function m(e,t){return e.threads.where("jid").anyOf(t).toArray()}function p(e,t){return e.threads.where("jid").startsWith(t+"@").first().then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function _(e){o("MaybeCreateOrUpdateThreadResultCache").deleteCachedThreadResult(e),o("MAWAuthoritativeThreadsCache").AuthoritativeThreadsCache.delete(e)}function f(e,t){return e.threads.where("jid").equals(t).delete().then(function(){return _(t)})}function g(e,t){return e.participants.where("userJid").equals(t).toArray().then(function(t){var n=t.map(function(e){return e.threadJid});return m(e,n)})}function h(e,t){return e.participants.where("userJid").anyOf(t).toArray().then(function(t){var n=new Map,r=new Set;return t.forEach(function(e){var t,o=e.userJid,a=(t=n.get(o))!=null?t:[];a.push(e.threadJid),n.set(o,a),r.add(e.threadJid)}),m(e,Array.from(r)).then(function(e){var t=e.reduce(function(e,t){return e.set(t.jid,t),e},new Map);return new Map(Array.from(n.entries()).map(function(e){var n=e[0],r=e[1];return[n,r.map(function(e){return t.get(e)}).filter(Boolean)]}))})})}function y(e,t,n){return(t==null?void 0:t.lastReadMsgReceiptSent)==null?o("MAWDexieTable").dexieResolve(!1):o("MAWDbMsgTxns").getSortOrderFromMsgId(e,t.lastReadMsgReceiptSent).then(function(e){return n.sortOrderMs==null||e==null?!1:n.sortOrderMs<=e})}function C(e,t){return e.threads.get({jid:t.threadJid}).then(function(n){return y(e,n,t)})}function b(e,t){return e.threads.where("jid").anyOf(t.map(function(e){return e.threadJid})).toArray().then(function(n){return o("MAWDexieTable").dexieAll(o("WAArrayZip").zip(t,n).map(function(t){var n=t[0],r=t[1];return y(e,r,n)}))})}function v(e,t,n){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var r=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{archived:!0,cannotReplyReason:n?"viewer_not_subscribed":e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.ARCHIVED})});return e.threads.bulkPut(r).then(function(){r.forEach(function(e){n&&o("WALogger").LOG(["[Occamadillo] Leaving a group thread\n          "+e.jid.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]),o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.ARCHIVED,threadJid:e.jid})})})})})}function S(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{cannotReplyReason:null})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){var t={cannotReplyReason:null,threadJid:e.jid};o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread(t)})})})})}function R(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{archived:!1,cannotReplyReason:e.cannotReplyReason==="viewer_not_subscribed"?e.cannotReplyReason:null,folder:o("MAWFolderTypes").FOLDER_ID.INBOX})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.INBOX,threadJid:e.jid})})})})})}function L(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{cannotReplyReason:"viewer_not_subscribed"})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){var t={cannotReplyReason:"viewer_not_subscribed",threadJid:e.jid};o("WALogger").LOG(["[Occamadillo] User is unsubscribed from thread\n          "+e.jid.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]),o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread(t)})})})})}function E(t,n){return d(t,n).then(function(n){if(!n.success){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["markThreadAsMigratedLocally failed to get the thread"])));return}var a=n.value;if(a.isMigratedLocally===!0){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["markThreadAsMigratedLocally failed because thread is already migrated"])));return}var i=babelHelpers.extends({},a,{isMigratedLocally:!0});return t.threads.put(i).then(r("emptyFunction"))})}function k(e,t){if(t.isMigratedLocally===!1)return o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["markCutoverThreadAsNotMigratedLocally failed because thread is already unmigrated"]))),o("MAWDexieTable").dexieResolve(t);var n=babelHelpers.extends({},t,{isMigratedLocally:!1});return e.threads.put(n).then(function(){return n})}function I(e,t){return e.threads.put(t).then(r("emptyFunction"))}function T(e,t,n,r,a){return I(e,babelHelpers.extends({},t,{newestMsgTs:(a==null?void 0:a.ts)==null?t.newestMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(a.ts),oldestMsg:r==null?void 0:r.msgId}))}l.getThreadByDeduplicationKey=c,l.getThread=d,l.getThreads=m,l.getThreadPrimaryId=p,l.deleteThread=f,l.getAllThreadsForUser=g,l.getAllThreadsForUsers=h,l.needsRetroactiveReadReceiptInThread=C,l.bulkNeedsRetroactiveReadReceiptInThread=b,l.archiveThreads=v,l.subscribeToThreads=S,l.unarchiveThreads=R,l.unsubscribeFromThreads=L,l.markCutoverThreadAsMigratedLocally=E,l.markCutoverThreadAsNotMigratedLocally=k,l.updateThread=I,l.updateThreadMsgsForUndefinedOldestOrNewestMsgs=T}),98);
__d("MAWDbXMATxns",["MAWDbChunkTxns","MAWDbMediaTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbThreadTxns","MAWDexieTable","MAWJidUtils","MAWXMAUtils","WAResultOrError","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return e.xma.bulkGet(t)}function s(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.get({xmaId:t})}function u(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.where("associatedMessageId").equals(t).first()}function c(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.where("externalId").equals(t.externalId).filter(function(e){return e.author===t.author&&e.threadJid===t.chat}).first()}function d(e,t){return c(e,t).then(function(t){return t==null?o("WAResultOrError").makeError("missing"):o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").getMediaForXMA(e,t),o("MAWDbMsgTxns").maybeGetMsg(e,t.associatedMessageId)]).then(function(e){var n=e[0],r=e[1];if(!n.success)return o("WAResultOrError").makeError("missing");var a=n.value,i=a.defaultPreview,l=a.favicon,s=a.header,u=a.previews;return o("WAResultOrError").makeResult({associatedMessage:r,defaultPreview:i,favicon:l,header:s,previews:u,xma:t})})})}function m(e,t){return u(e,t).then(function(t){if(t!=null)return o("MAWDbMsgTxns").maybeGetMsg(e,t.msgId)})}function p(e,t){if(t.length===0)return o("MAWDexieTable").dexieResolve([]);var n=t.filter(o("MAWDbMsg").isXMAMsg).map(function(e){return o("MAWJidUtils").maybeToProtocolMsgId(e.author,e.threadJid,e.externalId)}).filter(Boolean),r=n.map(function(t){return c(e,t)});return o("MAWDexieTable").dexieAll(r).then(function(e){return e.filter(Boolean)})}function _(e,t){return e.xma.where("associatedMessageId").anyOf(t).toArray().then(function(e){var t=e.filter(function(e){return e.msgId!=null&&r("gkx")("9841")?e.targetType!=null:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(e.targetType)});return t.reduce(function(e,t){return t.associatedMessageId!=null&&t.msgId!=null?e.set(t.associatedMessageId,t.msgId):e},new Map)})}function f(e,t){return e.xma.where("associatedMessageId").equals(t).first()}function g(e,t){return e.xma.where("associatedMessageId").equals(t).first().then(function(t){if(t!=null){var n=o("MAWJidUtils").maybeToProtocolMsgId(t.author,t.threadJid,t.externalId);if(n!=null)return o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(e,n)}})}function h(e,t){return f(e,t).then(function(t){return t==null?o("WAResultOrError").makeResult():o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").getMediaForXMA(e,t),o("MAWDbMsgTxns").maybeGetMsg(e,t.associatedMessageId)]).then(function(e){var n=e[0],r=e[1];if(!n.success)return o("WAResultOrError").makeError("missing");var a=n.value,i=a.defaultPreview,l=a.favicon,s=a.header,u=a.previews;return o("WAResultOrError").makeResult({associatedMessage:r,defaultPreview:i,favicon:l,header:s,previews:u,xma:t})})})}function y(e,t,n){return o("MAWDbThreadTxns").getThread(e,n).then(function(n){if(n.success){var r=n.value;if(t==null)return o("MAWDexieTable").dexieResolve();var a={author:t.author,chat:r.jid,externalId:t.externalId};return o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(e,a)}})}function C(e,t){return c(e,t).then(function(t){if(t==null)return o("MAWDexieTable").dexieResolve();if(!o("MAWXMAUtils").isXMAStoryReply(t.targetType))return o("MAWDbMediaTxns").maybeGetMediaFromMediaId(e,t.defaultPreviewMediaId).then(function(n){return n==null?{hasMedia:!1,xma:t}:o("MAWDexieTable").dexieAll([n,o("MAWDbChunkTxns").hasMediaChunk(e,n.hashedPlaintextHash)]).then(function(e){var n=e[0],r=e[1];return{hasMedia:r,previewMedia:n,xma:t}})})})}function b(e,t){return e.xma.where("externalId").anyOf(t).toArray()}l.bulkGetXMAs=e,l.maybeGetXMAFromXMAId=s,l.maybeGetXMAFromAssociatedMsgId=u,l.maybeGetXMAFromProtocolMsgId=c,l.maybeGetXMAPayloadFromProtocolMsgId=d,l.getDbXMAMsgFromAssociatedMsgId=m,l.getXMAFromMsgs=p,l.getXMAMsgIdsFromAssociatedMsgIds=_,l.maybeGetDbXMAMsgByAssociatedMsgId=g,l.maybeGetXMAPayloadFromAssociatedMsgId=h,l.maybeGetAssociatedXMAMsg=y,l.maybeGetXMAAndDefaultPreviewMediaFromProtocolMsg=C,l.getMultipleXMAByExternalId=b}),98);
__d("MAWMessageHasNonNullServerTsOnReceivedAckValidator",["MAWAckLevel","MAWTransactionMode","MAWTransactor"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"isMessageHasNonNullServerTsOnReceivedAckValidator",function(e){return function(t){return e.messages.get(t).then(function(e){return e==null||e.ack<o("MAWAckLevel").ACK.sent?{key:t,result:"skipped"}:e.serverTs!=null?{key:t,result:"valid"}:{description:"Message with "+e.ack+" ack has empty serverTs.",key:t,result:"invalid"}})}}),s={description:"MAWMessageHasNonNullServerTsOnReceivedAckValidator",isValid:e,table:"messages",type:["add","put"]};l.MAWMessageHasNonNullServerTsOnReceivedAckValidator=s}),98);
__d("MAWMessageHasUniqueExternalIdValidator",["MAWDexieTable","MAWTransactionMode","MAWTransactor","WAStanzaUtils","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3288"),s=o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"isMessageWithUniqueExternalIdValidator",function(e){return function(t){return e.messages.get(t).then(function(n){var r=n==null?void 0:n.externalId;return n==null||r==null?o("MAWDexieTable").dexieResolve({key:t,result:"skipped"}):e.messages.where("externalId").equals(o("WAStanzaUtils").toStanzaId(r)).filter(function(e){return e.author===n.author&&e.threadJid===n.threadJid}).toArray().then(function(e){if(e.length===1)return{key:t,result:"valid"};var r=u(t,n,e);return{description:r,key:t,result:"invalid"}})})}});function u(e,t,n){var r,o=n.every(function(e){return e.serverTs===t.serverTs}),a=n.filter(function(t){return t.rowId!==e}),i="Message has duplicate externalId."+("New message type: "+((r=t.type)!=null?r:"")+". ")+("Existing message types: "+a.map(function(e){return e.type}).join(", ")+". ")+("Messages have same serverTS: "+o.toString()+". ")+("Message has null protocolMsgId: "+(t.protocolMsgId==null).toString()+". ");return i}var c={description:"MAWMessageHasUniqueExternalIdValidator",isValid:s,sampleRate:e,table:"messages",type:["add","put"]};l.MAWMessageHasUniqueExternalIdValidator=c}),98);
__d("MAWParticipantMatchOneOnOneThreadValidator",["MAWIndexedDb","MAWTransactionMode","MAWUserJidWrapper","WAJids","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3121"),s=o("MAWIndexedDb").makeMsgrTransactor({participants:o("MAWTransactionMode").READONLY},"isParticipantMatchingOneOnOneThreadValidator",function(e){return function(t){return e.participants.get(t).then(function(e){return e==null?{key:t,result:"skipped"}:o("WAJids").switchOnMsgrChatJidType(e.threadJid,{group:function(){return{key:t,result:"skipped"}},user:function(r){return e.userJid!==r&&e.userJid!==o("MAWUserJidWrapper").getMyUserJid()?{description:"Participants added to 1:1 thread is neither self or the other user",key:t,result:"invalid"}:{key:t,result:"valid"}}})})}}),u={description:"MAWParticipantMatchOneOnOneThreadValidator",isValid:s,sampleRate:e,table:"participants",type:["add","put"]};l.MAWParticipantMatchOneOnOneThreadValidator=u}),98);
__d("MAWReactionHasUniqueProtocolMsgIdValidator",["MAWDexieTable","MAWTransactionMode","MAWTransactor","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWTransactor").makeMsgrTransactor({reactions:o("MAWTransactionMode").READONLY},"isReactionWithUniqueProtocolMsgIdValidator",function(e){return function(t){return e.reactions.get(t).then(function(n){var r=n==null?void 0:n.externalId;return r==null?o("MAWDexieTable").dexieResolve({key:t,result:"skipped"}):e.reactions.where("externalId").equals(o("WAStanzaUtils").toStanzaId(r)).filter(function(e){return e.threadJid===(n==null?void 0:n.threadJid)}).toArray().then(function(e){if(e.length===1)return{key:t,result:"valid"};var r=e.find(function(e){return e.author!==(n==null?void 0:n.author)})!=null;return{description:"Reaction has duplicate protocolMsgId, has existing with different author: "+r.toString(),key:t,result:"invalid"}})})}}),s={description:"MAWReactionHasUniqueProtocolMsgIdValidator",isValid:e,table:"reactions",type:["add","put"]};l.MAWReactionHasUniqueProtocolMsgIdValidator=s}),98);
__d("MAWDbMutationMiddleware",["FBLogger","MAWDbMiddlewareMutations","getErrorSafe","vulture"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{create:function(n){return babelHelpers.extends({},n,{table:function(a){var t=n.table(a);try{return babelHelpers.extends({},t,{get:function(r){return t.get(r).then(function(t){if(t!=null)return o("MAWDbMiddlewareMutations").getValue(t,a,e)})},getMany:function(r){return t.getMany(r).then(function(t){return t.map(function(t){if(t!=null)return o("MAWDbMiddlewareMutations").getValue(t,a,e)})})},mutate:function(r){var n=null;switch(r.type){case"add":case"put":n=r.values.map(function(t){return o("MAWDbMiddlewareMutations").mutateValue(t,a,e)});break;case"delete":break;case"deleteRange":break}return r.type==="delete"||r.type==="deleteRange"||n==null?t.mutate(r):(r.values=n,t.mutate(r).then(function(e){return e}))},openCursor:function(r){return t.openCursor(r).then(function(t){return t==null||t.value==null?t:u(t,a,e)})},query:function(r){return t.query(r).then(function(t){if(t.result.length===0||typeof t.result[0]!="object")return t;var n=t.result.map(function(t){return o("MAWDbMiddlewareMutations").getValue(t,a,e)});return t.result=n,t})}})}catch(e){var i=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(i).mustfix("Error applying MAWDbMiddleware"),t}}})},name:"MAWDbMutationMiddleware",stack:"dbcore"}}function s(){return{create:function(t){return babelHelpers.extends({},t,{table:function(n){var e=t.table(n);try{return babelHelpers.extends({},e,{get:function(r){return e.get(r).then(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})},getMany:function(a){return e.getMany(a).then(function(e){return r("vulture")("SMxI1wxhqOhNsUbqaKEGeOiO21w="),e.map(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})})},mutate:function(r){return r.type==="delete"||r.type==="deleteRange"||(r.values=r.values.map(function(e){return o("MAWDbMiddlewareMutations").mutateVaultedValue(e,n)})),e.mutate(r)},openCursor:function(r){return e.openCursor(r).then(function(e){return e==null||e.value==null?e:c(e,n)})},query:function(r){return e.query(r).then(function(e){return e.result.length===0||typeof e.result[0]!="object"?e:babelHelpers.extends({},e,{result:e.result.map(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})})})}})}catch(t){var a=r("getErrorSafe")(t);return r("FBLogger")("messenger_web").catching(a).mustfix("Error applying MAWDbMiddleware"),e}}})},name:"getMAWVaultMiddleware",stack:"dbcore"}}function u(e,t,n){var r;return Object.create(e,{continue:{get:function(){return e.continue}},continuePrimaryKey:{get:function(){return e.continuePrimaryKey}},key:{get:function(){return e.key}},primaryKey:{get:function(){return e.primaryKey}},start:{value:function(i){return e.start(function(){r=o("MAWDbMiddlewareMutations").getValue(e.value,t,n);try{e.value=r}catch(e){}i()})}},value:{get:function(){return r}}})}function c(e,t){var n;return Object.create(e,{continue:{get:function(){return e.continue}},continuePrimaryKey:{get:function(){return e.continuePrimaryKey}},key:{get:function(){return e.key}},primaryKey:{get:function(){return e.primaryKey}},start:{value:function(a){return e.start(function(){n=o("MAWDbMiddlewareMutations").getVaultedValue(e.value,t);try{e.value=n}catch(e){}a()})}},value:{get:function(){return n}}})}l.getMAWDbMutationMiddleware=e,l.getMAWVaultMiddleware=s}),98);
__d("MAWDbEncryptObjContent",["MAWKeychainNaClCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return o("MAWKeychainNaClCrypto").encryptTweetNaClArrayBuffer(e,t,n)}l.encryptContent=e}),98);
__d("MAWXMACTAUtil",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.actionUrl,n=e.buttonType,r=e.ctaType,o=e.nativeUrl,a=e.title;return{actionUrl:t,buttonType:n,ctaType:r,nativeUrl:o,title:a}}function l(e){var t=e.actionUrl,n=e.buttonType,r=e.ctaType,o=e.nativeUrl,a=e.title;return{actionUrl:t,buttonType:n,ctaType:r,nativeUrl:o,title:a}}i.toMAWCTAEncode=e,i.fromMAWCTAEncode=l}),66);
__d("WAServerSync.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({SET:0,REMOVE:1}),u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={};u.name="SyncdVersion",u.internalSpec={version:[1,(e=o("WAProtoConst")).TYPES.UINT64]},c.name="ExitCode",c.internalSpec={code:[1,e.TYPES.UINT64],text:[2,e.TYPES.STRING]},d.name="SyncdIndex",d.internalSpec={blob:[1,e.TYPES.BYTES]},m.name="SyncdValue",m.internalSpec={blob:[1,e.TYPES.BYTES]},p.name="KeyId",p.internalSpec={id:[1,e.TYPES.BYTES]},_.name="SyncdRecord",_.internalSpec={index:[1,e.TYPES.MESSAGE,d],value:[2,e.TYPES.MESSAGE,m],keyId:[3,e.TYPES.MESSAGE,p]},f.name="ExternalBlobReference",f.internalSpec={mediaKey:[1,e.TYPES.BYTES],directPath:[2,e.TYPES.STRING],handle:[3,e.TYPES.STRING],fileSizeBytes:[4,e.TYPES.UINT64],fileSha256:[5,e.TYPES.BYTES],fileEncSha256:[6,e.TYPES.BYTES]},g.name="SyncdSnapshot",g.internalSpec={version:[1,e.TYPES.MESSAGE,u],records:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_],mac:[3,e.TYPES.BYTES],keyId:[4,e.TYPES.MESSAGE,p]},h.name="SyncdMutations",h.internalSpec={mutations:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,y]},y.name="SyncdMutation",y.internalSpec={operation:[1,e.TYPES.ENUM,s],record:[2,e.TYPES.MESSAGE,_]},C.name="SyncdPatch",C.internalSpec={version:[1,e.TYPES.MESSAGE,u],mutations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,y],externalMutations:[3,e.TYPES.MESSAGE,f],snapshotMac:[4,e.TYPES.BYTES],patchMac:[5,e.TYPES.BYTES],keyId:[6,e.TYPES.MESSAGE,p],exitCode:[7,e.TYPES.MESSAGE,c],deviceIndex:[8,e.TYPES.UINT32],clientDebugData:[9,e.TYPES.BYTES]},l.SyncdMutation$SyncdOperation=s,l.SyncdVersionSpec=u,l.ExitCodeSpec=c,l.SyncdIndexSpec=d,l.SyncdValueSpec=m,l.KeyIdSpec=p,l.SyncdRecordSpec=_,l.ExternalBlobReferenceSpec=f,l.SyncdSnapshotSpec=g,l.SyncdMutationsSpec=h,l.SyncdMutationSpec=y,l.SyncdPatchSpec=C}),98);
__d("MAWDbObjDecode",["FBLogger","MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloCollectionVersionsTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMissingKeysTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPendingMutationsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloPollTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloReceiverFetchInfoTableSchema.pb","MAWArmadilloSyncActionsTableSchema.pb","MAWArmadilloSyncKeysTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWODSProxy","MAWXMACTAUtil","WAOdsEnums","WAServerSync.pb","decodeProtobuf"],(function(t,n,r,o,a,i,l){var e={appData:function(t){return I(t)},appMeta:function(t){return T(t)},chunk:function(t){return D(t)},collectionVersions:function(t){return O(t)},deletedMessages:function(t){return _(t)},deviceChangeAlerts:function(t){return u(t)},dualSendMedia:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},dyiBatch:function(t){return N(t)},ebMessageRestoreTasks:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ebMsgRanges:function(t){return M(t)},ebRestoreQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ebUploadQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},editMsgHistory:function(t){return q(t)},encryptionMetaV3:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ephemeralSettings:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},existingUsers:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsBackloggedMessages:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsEncryptionMeta:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsIndexV3:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsPurgeBacklog:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsPurgeThreadBacklog:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},groupInfo:function(t){return h(t)},groupInvites:function(t){return L(t)},historySyncQRCodeData:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},historySyncQRCodeSecretKey:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},igMessageAuxiliaryInfo:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},isDualSend:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},media:function(t){return $(t)},mediaBackup:function(t){return x(t)},mediaKeys:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},messages:function(t){return p(t)},missingKeys:function(t){return A(t)},participants:function(t){return R(t)},pendingMessageStanzaQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},pendingMutations:function(t){return F(t)},pendingReceipts:function(t){return v(t)},pendingStanzas:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},personalSenderKeyStatuses:function(t){return k(t)},poll:function(t){return V(t)},reactions:function(t){return P(t)},receipts:function(t){return b(t)},receiverFetchInfo:function(t){return U(t)},sentBytesCache:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},staleQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},syncActions:function(t){return w(t)},syncKeys:function(t){return B(t)},tasks:function(t){return E(t)},threads:function(t){return S(t)},unrenderedMessages:function(t){return f(t)},xma:function(t){return W(t)}};function s(t,n){var o=null;if(Object.prototype.hasOwnProperty.call(e,n))o=e[n](t);else throw r("FBLogger")("messenger_web").mustfixThrow("not a valid table name");return o}function u(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,e);return{action:t.action,deviceJid:t.deviceJid,identity:t.identity,isArchived:t.isArchived,latitude:t.latitude,location:t.location,loggedOut:t.loggedOut,longitude:t.longitude,model:t.model,platform:t.platform,ts:t.ts}}function c(e){var t=e.quote,n;if(t!=null){if(t.content==null)throw r("FBLogger")("messenger_web").mustfixThrow("QuotedMsgContent missing upon decoding");var o=t.content,a=o.author,i=o.expirationTs,l=o.externalId,s=o.mediaId,u=o.msgContent,c=o.msgId,d=o.plaintextHash,m=o.sourceId,p=o.specialTextSize,_=o.ts,f=o.type,g=o.xmaMessageType;n={content:babelHelpers.extends({},t.content,{author:a,expirationTs:i,externalId:l,mediaId:s,msgContent:u,msgId:c,plaintextHash:d,sourceId:m,specialTextSize:p,ts:_,type:f,xmaMessageType:g}),remoteJid:t.remoteJid}}return n}function d(e){return e==null?e:new Uint8Array(e)}function m(e){return e==null||e.length===0?new Set:new Set(e)}function p(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,e),n=t.msgContent;if(t.type===o("MAWMsgType").MSG_TYPE.FUTUREPROOF){if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("MsgContent missing upon decoding futureproof message");n.subtype=n.subtype}var a=c(t),i=g(t.reportingMeta);return babelHelpers.extends({},t,{msgContent:n,quote:a,reportingMeta:i})}function _(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,e);return babelHelpers.extends({},t)}function f(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,e),n=c(t),r=g(t.reportingMeta);return babelHelpers.extends({},t,{quote:n,reportingMeta:r})}function g(e){if(e!=null)return{frankingKey:e.frankingKey!=null?new Uint8Array(e.frankingKey):e.frankingKey,frankingTag:e.frankingTag!=null?new Uint8Array(e.frankingTag):e.frankingTag,frankingVersion:e.frankingVersion,reportingContent:e.reportingContent,reportingTag:e.reportingTag!=null?new Uint8Array(e.reportingTag):e.reportingTag}}function h(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,e);return{creationTs:t.creationTs,creator:t.creator,inviter:t.inviter,memberAddMode:t.memberAddMode,msgExpiration:t.msgExpiration,name:t.name,nameOwner:t.nameOwner,nameTs:t.nameTs,participantVersion:t.participantVersion}}function y(e){return e.length===0?null:new Map(e.map(function(e){var t=e.deviceJid;if(t==null||e.serializedPubKey==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceJid or serializedPubKey are missing ");var n=new Uint8Array(e.serializedPubKey),o=d(e.baseKey),a={baseKey:o,pubKey:n};return[t,a]}))}function C(e){return e==null?null:new Map(e.map(function(e){var t;if(e.deviceJid==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceJID is missing ");return[e.deviceJid,(t=e.count)!=null?t:0]}))}function b(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,e),n=t.recipientDevices,r=m(n);return{permittedIdentitiesPerDevice:y(t.permittedIdentitiesPerDevice),recipientDevices:r,retryCountsPerDevice:C(t.retryCountsPerDevice)}}function v(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,e)}function S(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,e);return{archived:t.archived,cannotReplyReason:t.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:t.didInsertDualThreadCutoverAdminMsg,folder:t.folder,isMigratedLocally:t.isMigratedLocally,lastReadMsg:t.lastReadMsg,lastReadMsgReceiptSent:t.lastReadMsgReceiptSent,muteCallsExpireTimeMs:t.muteCallsExpireTimeMs,muteExpireTimeMs:t.muteExpireTimeMs,newestMsg:t.newestMsg,newestMsgTs:t.newestMsgTs,oldestMsg:t.oldestMsg,optimisticThreadKey:t.optimisticThreadKey,snippetMsg:t.snippetMsg,snippetMsgTs:t.snippetMsgTs}}function R(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,e)}function L(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,e)}function E(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,e)}function k(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,e),n=t.hasSenderKey,r=m(n);return{hasSenderKey:r,rotateSenderKey:t.rotateSenderKey,senderKeyId:t.senderKeyId,senderKeyTs:t.senderKeyTs}}function I(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,e);return{ack:t.ack,contents:t.contents,permittedIdentitiesPerDevice:y(t.permittedIdentitiesPerDevice),recipientDevices:new Set(t.recipientDevices),sendPartial:t.sendPartial,ts:t.ts}}function T(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,e)}function D(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,e)}function x(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,e)}function $(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,e),n,a=t.mediaEntries;return a==null?n=new Map:n=new Map(a.map(function(e){if(e.msgId==null||e.mediaEntryData==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected msgId or mediaEntryData are missing ");return[e.msgId,new Uint8Array(e.mediaEntryData)]})),{accessibilitySummaryText:t.accessibilitySummaryText,isVideoGif:t.isVideoGif,mediaEntries:n,mediaType:t.mediaType,plaintextHash:t.plaintextHash,size:t.size,ts:t.ts,validatedAudioInfo:t.validatedAudioInfo,validatedDocumentFileInfo:t.validatedDocumentFileInfo,validatedImageInfo:t.validatedImageInfo,validatedResult:t.validatedResult,validatedVideoInfo:t.validatedVideoInfo}}function P(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,e);return t.ts!=null&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MIGRATE_REACTION_TS_AS_INDEX,key:"reaction_ts_encrypted"}),babelHelpers.extends({ack:t.ack,author:t.author,groupingKey:t.groupingKey,reaction:t.reaction,reactToAuthor:t.reactToAuthor,senderTimestampMs:t.senderTimestampMs},t.ts!=null?{ts:t.ts}:{})}function N(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,e);return{isThread:t.isThread,numMessages:t.numMessages,numMessagesRestored:t.numMessagesRestored,numThreadsRestored:t.numThreadsRestored,oldestTs:t.oldestTs,qplFlowDescriptor:t.qplFlowDescriptor,qplInstanceKeyE2E:t.qplInstanceKeyE2E,qplInstanceKeyForThread:t.qplInstanceKeyForThread,threadId:t.threadId}}function M(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,e);return{creationTime:t.creationTime,maxMsgExternalId:t.maxMsgExternalId,maxMsgSortOrderMs:t.maxMsgSortOrderMs,minMsgExternalId:t.minMsgExternalId,minMsgSortOrderMs:t.minMsgSortOrderMs}}function w(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloSyncActionsTableSchema.pb").SyncActionsTableSchemaProtoSpec,e);return{binarySyncData:t.binarySyncData,keyId:t.keyId,timestamp:t.timestamp,valueMac:t.valueMac,version:t.version}}function A(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMissingKeysTableSchema.pb").MissingKeysTableSchemaProtoSpec,e),n;return t.deviceResponses==null?n=new Map:n=new Map(t.deviceResponses.map(function(e){if(e.deviceId==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceId is missing");return[e.deviceId,e.deviceResponse]})),{deviceResponses:n,keyId:t.keyId,timestamp:t.timestamp}}function F(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPendingMutationsTableSchema.pb").PendingMutationsTableSchemaProtoSpec,e),n;switch(t.operation){case o("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.SET:n=o("WAServerSync.pb").SyncdMutation$SyncdOperation.SET;break;case o("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.REMOVE:n=o("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE;break;default:throw r("FBLogger")("messenger_web").mustfixThrow("operation missing when decoding PendingMutation")}return{binarySyncAction:t.binarySyncAction,operation:n,timestamp:t.timestamp,version:t.version}}function O(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloCollectionVersionsTableSchema.pb").CollectionVersionsTableSchemaProtoSpec,e);return{finiteFailureStartTime:t.finiteFailureStartTime,isCollectionInMacMismatchFatal:t.isCollectionInMacMismatchFatal,isCollectionLthashInconsistent:t.isCollectionLthashInconsistent,ltHash:t.ltHash,state:t.state,version:t.version}}function B(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloSyncKeysTableSchema.pb").SyncKeysTableSchemaProtoSpec,e);return{fingerprint:t.fingerprint,keyData:t.keyData,timestamp:t.timestamp}}function W(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,e);return{author:t.author,ctas:t.ctas.map(function(e){return o("MAWXMACTAUtil").fromMAWCTAEncode(e)}),defaultCTA:t.defaultCTA==null?t.defaultCTA:o("MAWXMACTAUtil").fromMAWCTAEncode(t.defaultCTA),defaultPreviewMediaPlaintextHash:t.defaultPreviewMediaPlaintextHash,faviconPlaintextHash:t.faviconPlaintextHash,headerMediaPlaintextHash:t.headerMediaPlaintextHash,headerTitle:t.headerTitle,isTombstoned:t.isTombstoned,maxSubtitleNumOfLines:t.maxSubtitleNumOfLines,maxTitleNumOfLines:t.maxTitleNumOfLines,msgId:t.msgId,overlayDescription:t.overlayDescription,overlayIconGlyph:t.overlayIconGlyph,overlayTitle:t.overlayTitle,previewMediaIds:t.previewMediaIds,subtitleText:t.subtitleText,targetId:t.targetId,targetType:t.targetType,targetUsername:t.targetUsername,threadJid:t.threadJid,titleText:t.titleText,xmaLayoutType:t.xmaLayoutType}}function q(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,e);return{author:t.author,editExternalId:t.editExternalId,editTs:t.editTs,msgContent:t.msgContent,sendStatus:t.sendStatus,specialTextSize:t.specialTextSize}}function U(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiverFetchInfoTableSchema.pb").ReceiverFetchInfoTableSchemaProtoSpec,e);return{accessibilitySummaryText:t.accessibilitySummaryText,mimetype:t.mimetype,previewHeight:t.previewHeight,previewUrl:t.previewUrl,previewUrlExpirationTimestampMs:t.previewUrlExpirationTimestampMs,previewWidth:t.previewWidth,type:t.type}}function V(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPollTableSchema.pb").PollTableSchemaProtoSpec,e),n=new Map(t.pollOptions.map(function(e){var t=e.pollOptionHash;if(t==null||e.pollOption==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected pollOptionHash or pollOption is missing");return[t,{optionText:e.pollOption.optionText,voteAuthors:new Set(e.pollOption.voteAuthors)}]}).filter(Boolean)),a=new Map(t.latestSenderTimestampsMs.map(function(e){if(e.author==null||e.latestSenderTimestampMs==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected author or latestSenderTimestampMs are missing");return[e.author,e.latestSenderTimestampMs]}));return{encKey:t.encKey,latestSenderTimestampsMs:a,pollAuthor:t.pollAuthor,pollOptions:n,pollParticipantCount:t.pollParticipantCount,pollState:t.pollState,selectableOptionsCount:t.selectableOptionsCount,title:t.title}}l.decodeDbObj=s}),98);
__d("WASyncdKeyTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e){return e}function u(e){return e}i.toSyncKeyId=e,i.fromSyncKeyId=l,i.toSyncKeyData=s,i.fromSyncKeyData=u}),66);
__d("MAWDbObjEncode",["FBLogger","MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloPollTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloReceiverFetchInfoTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWXMACTAUtil","WASyncdKeyTypes","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e=["ack","altIndex","collapsibleId","externalId","messageDeleteTs","messageExpirationTs","msgId","pollStanzaId","protocolMsgId","quoteExpirationTs","quoteExternalId","revokedExternalId","rowId","serverTs","sortOrderMs","threadJid","unsendMsgContentDeleteTs"],s=["author","chat","externalId","rowId"],u={appData:k,appMeta:I,chunk:T,deletedMessages:_,deviceChangeAlerts:c,dualSendMedia:d,dyiBatch:P,ebMessageRestoreTasks:d,ebMsgRanges:N,ebRestoreQueue:d,ebUploadQueue:d,editMsgHistory:w,encryptionMetaV3:d,ephemeralSettings:d,existingUsers:d,ftsBackloggedMessages:d,ftsEncryptionMeta:d,ftsIndexV3:d,ftsPurgeBacklog:d,ftsPurgeThreadBacklog:d,groupInfo:g,groupInvites:R,historySyncQRCodeData:d,historySyncQRCodeSecretKey:d,igMessageAuxiliaryInfo:d,isDualSend:d,media:x,mediaBackup:D,mediaKeys:d,messages:p,participants:S,pendingMessageStanzaQueue:d,pendingReceipts:b,pendingStanzas:d,personalSenderKeyStatuses:E,poll:F,reactions:$,receipts:C,receiverFetchInfo:A,sentBytesCache:d,staleQueue:d,tasks:L,threads:v,unrenderedMessages:f,xma:M};function c(e){var t={action:e.action,deviceJid:e.deviceJid,identity:e.identity,isArchived:e.isArchived,latitude:e.latitude,location:e.location,loggedOut:e.loggedOut,longitude:e.longitude,model:e.model,platform:e.platform,ts:e.ts};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,t).readByteArrayView()}}function d(e){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for encryption")}function m(e,t){var n=null;if(Object.prototype.hasOwnProperty.call(u,t))n=u[t](e);else throw r("FBLogger")("messenger_web").mustfixThrow("not a valid table name");return n}function p(t){var n=t.ack,r=t.altIndex,a=t.collapsibleId,i=t.externalId,l=t.messageDeleteTs,s=t.messageExpirationTs,u=t.msgId,c=t.pollStanzaId,d=t.protocolMsgId,m=t.quoteExpirationTs,p=t.quoteExternalId,_=t.revokedExternalId,f=t.rowId,g=t.serverTs,h=t.sortOrderMs,y=t.threadJid,C=t.unsendMsgContentDeleteTs,b=babelHelpers.objectWithoutPropertiesLoose(t,e),v=b,S;if(v.quote==null)S=v.quote;else{var R,L={author:v.quote.content.author,expirationTs:v.quote.content.expirationTs,externalId:(R=v.quote)==null?void 0:R.content.externalId,mediaId:v.quote.content.mediaId,msgContent:v.quote.content.msgContent,msgId:v.quote.content.msgId,plaintextHash:v.quote.content.plaintextHash,sourceId:v.quote.content.sourceId,specialTextSize:v.quote.content.specialTextSize,ts:v.quote.content.ts,type:v.quote.content.type,xmaMessageType:v.quote.content.xmaMessageType},E={content:L,remoteJid:v.quote.remoteJid};S=E}var k=v.msgContent;v.type===o("MAWMsgType").MSG_TYPE.FUTUREPROOF&&(k={protobuf:v.msgContent.protobuf,subtype:v.msgContent.subtype});var I=v.ravenEphemeralType,T=v.ravenEphemeralMediaState,D=I!=null?I:null,x=T!=null?T:null,$={applicationErrorCode:v.applicationErrorCode,author:v.author,editCount:v.editCount,ephemeralCounterStarted:v.ephemeralCounterStarted,ephemeralMsgDisappeared:v.ephemeralMsgDisappeared,ephemeralSetting:v.ephemeralSetting,forwardingScore:v.forwardingScore,groupId:v.groupId,groupIndex:v.groupIndex,groupSize:v.groupSize,hdType:v.hdType,isCollapsed:v.isCollapsed,isExpiredXmaMsg:v.isExpiredXmaMsg,isForwarded:v.isForwarded,mediaId:v.mediaId,msgContent:k,originalTs:v.originalTs,quote:S,ravenEphemeralMediaState:x,ravenEphemeralType:D,receiverFetchId:v.receiverFetchId,reportingMeta:v.reportingMeta,resendCount:v.resendCount,source:v.source,specialTextSize:v.specialTextSize,ts:v.ts,type:v.type,xmaMessageType:v.xmaMessageType};return{encodedFields:$,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,$).readByteArrayView()}}function _(e){var t=e.author,n=e.chat,r=e.externalId,a=e.rowId,i=babelHelpers.objectWithoutPropertiesLoose(e,s),l={reason:String(i.reason)};return{encodedFields:l,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,l).readByteArrayView()}}function f(e){var t;if(e.quote==null)t=e.quote;else{var n,r={author:e.quote.content.author,expirationTs:e.quote.content.expirationTs,externalId:(n=e.quote)==null?void 0:n.content.externalId,mediaId:e.quote.content.mediaId,msgContent:e.quote.content.msgContent,msgId:e.quote.content.msgId,plaintextHash:e.quote.content.plaintextHash,sourceId:e.quote.content.sourceId,ts:e.quote.content.ts,type:e.quote.content.type,xmaMessageType:e.quote.content.xmaMessageType},a={content:r,remoteJid:e.quote.remoteJid};t=a}var i={ack:e.ack,author:e.author,ephemeralSetting:e.ephemeralSetting,groupName:e.groupName,invitedParticipantUserJid:e.invitedParticipantUserJid,mediaId:e.mediaId,msgContent:e.msgContent,quote:t,reportingMeta:e.reportingMeta,resendCount:e.resendCount,ts:e.ts,type:e.type,xmaMessageType:e.xmaMessageType};return{encodedFields:i,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,i).readByteArrayView()}}function g(e){var t={creationTs:e.creationTs,creator:e.creator,inviter:e.inviter,memberAddMode:e.memberAddMode,msgExpiration:e.msgExpiration,name:e.name,nameOwner:e.nameOwner,nameTs:e.nameTs,participantVersion:e.participantVersion};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,t).readByteArrayView()}}function h(e){return e==null?e:Array.from(e,function(e){var t=e[0],n=e[1];return{baseKey:n.baseKey,deviceJid:t,serializedPubKey:n.pubKey}})}function y(e){return e==null?null:Array.from(e,function(e){var t=e[0],n=e[1];return{count:n,deviceJid:t}})}function C(e){var t=Array.from(e.recipientDevices),n={permittedIdentitiesPerDevice:h(e.permittedIdentitiesPerDevice),recipientDevices:t,retryCountsPerDevice:y(e.retryCountsPerDevice)};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,n).readByteArrayView()}}function b(e){var t={author:e.author,deliveryReceipts:e.deliveryReceipts,externalId:e.externalId,readReceipts:e.readReceipts,thread:e.thread};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,t).readByteArrayView()}}function v(e){var t={archived:e.archived,cannotReplyReason:e.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:e.didInsertDualThreadCutoverAdminMsg,folder:e.folder,isMigratedLocally:e.isMigratedLocally,lastReadMsg:e.lastReadMsg,lastReadMsgReceiptSent:e.lastReadMsgReceiptSent,newestMsgTs:e.newestMsgTs,oldestMsg:e.oldestMsg,optimisticThreadKey:e.optimisticThreadKey,snippetMsg:e.snippetMsg,snippetMsgTs:e.snippetMsgTs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,t).readByteArrayView()}}function S(e){var t={addressable:e.addressable,deliveredWatermarkTs:e.deliveredWatermarkTs,lastReadActionTs:e.lastReadActionTs,lastReadWatermarkTs:e.lastReadWatermarkTs,type:e.type};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,t).readByteArrayView()}}function R(e){var t={caption:e.caption,inviteCode:e.inviteCode,inviteExpirationTs:e.inviteExpirationTs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,t).readByteArrayView()}}function L(e){var t={scheduledTime:e.scheduledTime};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,t).readByteArrayView()}}function E(e){var t=Array.from(e.hasSenderKey),n={hasSenderKey:t,rotateSenderKey:e.rotateSenderKey,senderKeyId:e.senderKeyId,senderKeyTs:e.senderKeyTs};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,n).readByteArrayView()}}function k(e){var t;switch(e.contents.type){case"meta_sync":{var n=[];for(var a of e.contents.actions)a.chatAction?n.push({chatAction:a.chatAction}):a.messageAction&&n.push({messageAction:a.messageAction});t={actions:n,type:"meta_sync"};break}case"backups_secrets":{t={encryptedBackupsSecrets:e.contents.encryptedBackupsSecrets,type:"backups_secrets"};break}case"sync_key_share":{var i;t={syncKeyShare:{keys:e.contents.syncKeyShare.keys,orphanKeys:(i=e.contents.syncKeyShare)==null||(i=i.orphanKeys)==null?void 0:i.map(o("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_share"};break}case"sync_key_request":{t={syncKeyRequest:{keyIds:e.contents.syncKeyRequest.keyIds.map(o("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_request"};break}default:throw e.contents.type,r("FBLogger")("messenger_web").mustfixThrow("Unknown appdata type: "+e.contents.type)}var l={ack:e.ack,contents:t,permittedIdentitiesPerDevice:h(e.permittedIdentitiesPerDevice),recipientDevices:Array.from(e.recipientDevices),sendPartial:e.sendPartial,ts:e.ts};return{encodedFields:l,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,l).readByteArrayView()}}function I(e){var t={value:e.value};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,t).readByteArrayView()}}function T(e){var t={blobData:e.blobData,mimetype:e.mimetype,plaintextHash:e.plaintextHash};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,t).readByteArrayView()}}function D(e){var t={fbid:e.fbid};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,t).readByteArrayView()}}function x(e){var t=Array.from(e.mediaEntries,function(e){var t=e[0],n=e[1];return{mediaEntryData:n,msgId:t}}),n={accessibilitySummaryText:e.accessibilitySummaryText,isVideoGif:e.isVideoGif,mediaEntries:t,mediaType:e.mediaType,plaintextHash:e.plaintextHash,size:e.size,ts:e.ts,validatedAudioInfo:e.validatedAudioInfo,validatedDocumentFileInfo:e.validatedDocumentFileInfo,validatedImageInfo:e.validatedImageInfo,validatedResult:e.validatedResult,validatedVideoInfo:e.validatedVideoInfo};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,n).readByteArrayView()}}function $(e){var t={ack:e.ack,author:e.author,groupingKey:e.groupingKey,reaction:e.reaction,reactToAuthor:e.reactToAuthor,senderTimestampMs:e.senderTimestampMs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,t).readByteArrayView()}}function P(e){var t={isThread:e.isThread,numMessages:e.numMessages,numMessagesRestored:e.numMessagesRestored,numThreadsRestored:e.numThreadsRestored,oldestTs:e.oldestTs,qplFlowDescriptor:e.qplFlowDescriptor,qplInstanceKeyE2E:e.qplInstanceKeyE2E,qplInstanceKeyForThread:e.qplInstanceKeyForThread,threadId:e.threadId};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,t).readByteArrayView()}}function N(e){var t={creationTime:e.creationTime,maxMsgExternalId:e.maxMsgExternalId,maxMsgSortOrderMs:e.maxMsgSortOrderMs,minMsgExternalId:e.minMsgExternalId,minMsgSortOrderMs:e.minMsgSortOrderMs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,t).readByteArrayView()}}function M(e){var t=e.ctas==null?[]:e.ctas.map(function(e){return o("MAWXMACTAUtil").toMAWCTAEncode(e)}),n={author:e.author,ctas:t,defaultCTA:e.defaultCTA==null?e.defaultCTA:o("MAWXMACTAUtil").toMAWCTAEncode(e.defaultCTA),defaultPreviewMediaPlaintextHash:e.defaultPreviewMediaPlaintextHash,faviconPlaintextHash:e.faviconPlaintextHash,headerMediaPlaintextHash:e.headerMediaPlaintextHash,headerTitle:e.headerTitle,isTombstoned:e.isTombstoned,maxSubtitleNumOfLines:e.maxSubtitleNumOfLines,maxTitleNumOfLines:e.maxTitleNumOfLines,msgId:e.msgId,overlayDescription:e.overlayDescription,overlayIconGlyph:e.overlayIconGlyph,overlayTitle:e.overlayTitle,previewMediaIds:e.previewMediaIds,subtitleText:e.subtitleText,targetId:e.targetId,targetType:e.targetType,targetUsername:e.targetUsername,threadJid:e.threadJid,titleText:e.titleText,xmaLayoutType:e.xmaLayoutType};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,n).readByteArrayView()}}function w(e){var t={author:e.author,editExternalId:e.editExternalId,editTs:e.editTs,msgContent:e.msgContent,sendStatus:e.sendStatus,specialTextSize:e.specialTextSize};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,t).readByteArrayView()}}function A(e){var t={accessibilitySummaryText:e.accessibilitySummaryText,mimetype:e.mimetype,previewHeight:e.previewHeight,previewUrl:e.previewUrl,previewUrlExpirationTimestampMs:e.previewUrlExpirationTimestampMs,previewWidth:e.previewWidth,type:e.type};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiverFetchInfoTableSchema.pb").ReceiverFetchInfoTableSchemaProtoSpec,t).readByteArrayView()}}function F(e){var t=Array.from(e.pollOptions,function(e){var t=e[0],n=e[1];return{pollOption:{optionText:n.optionText,voteAuthors:Array.from(n.voteAuthors)},pollOptionHash:t}}),n=Array.from(e.latestSenderTimestampsMs,function(e){var t=e[0],n=e[1];return{author:t,latestSenderTimestampMs:n}}),r={encKey:e.encKey,latestSenderTimestampsMs:n,pollAuthor:e.pollAuthor,pollOptions:t,pollParticipantCount:e.pollParticipantCount,pollState:e.pollState,selectableOptionsCount:e.selectableOptionsCount,title:e.title};return{encodedFields:r,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloPollTableSchema.pb").PollTableSchemaProtoSpec,r).readByteArrayView()}}l.encodeDbObj=m,l.encodeDbPollForEncryption=F}),98);
__d("MAWMpsMigrationRunningState",[],(function(t,n,r,o,a,i){"use strict";var e=!1;function l(){return e}function s(t){e=t}i.isMawMpsMigrationRunning=l,i.setIsMawMpsMigrationRunning=s}),66);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e,t=o("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),n=(yield(e=o("MAWKeychainCrypto")).getAccountKeys(t))[0],a=e.genBrowserEncryptionKeyString(),i=e.genDatabaseEncryptionSeed(),l=yield e.encryptDataToStringBuffer(n,i),s=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+o("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:yield e.generateHashString(o("MAWWebInitDataHelpers").getAccountKeysString(t)[0]),appIdOrigin:r("MessengerWebInitData").appId,expiration:s,formatVersion:t,key:a,seed:l,userKeyBaseString:yield e.generateHashString(r("MessengerWebInitData").userKeyBase)}}catch(e){var u=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(u).mustfixThrow("Failed to generateNewKey")}}),s.apply(this,arguments)}l.default=e}),98);
__d("MAWEARKeychainDecryptionError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWEARKeychainDecryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("MAWWorkerSetupArgs",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}function u(){e=null}i.setWorkerSetupArgs=l,i.getWorkerSetupArgs=s,i.resetWorkerSetupArgs=u}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","Promise","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,r,o,a,i){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,u,c,d){l===void 0&&(l=1);try{var m=yield o("MAWKeychainCrypto").getAccountKeys(l),p=yield(s||(s=n("Promise"))).all([o("MAWKeychainCrypto").importBrowserEncryptionKey(t),s.all(m.map(function(e){return o("MAWKeychainCrypto").decryptDataToArrayBuffer(e,a).catch(function(){return null})}))]),_=p[0],f=p[1],g=yield s.all(f.filter(Boolean).map(function(e){return o("MAWKeychainCrypto").genDatabaseEncryptionKey(_,e).catch(function(){return null})})),h=g.filter(Boolean);if(h.length===0)throw new(r("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:h,version:i}}catch(t){var y=null,C=null,b=o("MAWWorkerSetupArgs").getWorkerSetupArgs();(e||(e=r("ExecutionEnvironment"))).isInWorker&&b!=null&&(y=b.userKeyBase===r("MessengerWebInitData").userKeyBase,C=b.fbId===o("MAWCurrentUser").getID());var v=o("MAWWebInitDataHelpers").getAccountKeysString(l),S=v&&v[0]!=null?yield o("MAWKeychainCrypto").generateHashString(v[0]):null;throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",u!=null,v!=null,u===S,c!=null,r("MessengerWebInitData").userKeyBase!=null,c===(yield o("MAWKeychainCrypto").generateHashString(r("MessengerWebInitData").userKeyBase)),d,r("MessengerWebInitData").appId,o("MAWCurrentUser").getID()===String(r("MessengerWebInitData").userId),(e||(e=r("ExecutionEnvironment"))).isInWorker,y,C,l),t}}),c.apply(this,arguments)}l.default=u}),98);
__d("MWEARKeychainV3Errors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="EARKeychainNotFoundError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.EARKeychainNotFoundError=e}),66);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof window!="undefined"?window:self;function s(e){var t=o("MAWLocalStorage").getStorage(),n=function(r){o("MAWLocalStorage").setItemGuarded(t,e,JSON.stringify(r))},r=function(r){window.removeEventListener("storage",r),o("MAWLocalStorage").removeItemGuarded(t,e)},a=function(t){window.addEventListener("storage",t)},i=function(n){return n!=null&&n.key===e&&typeof n.newValue=="string"?JSON.parse(n.newValue):null};return{getMessage:i,onRequestReceived:function(t){var e=function(n){var e=i(n);e!=null&&t(e)};return a(e),{release:function(){r(e)}}},sendMessage:n,stopWaitingForReply:r,waitForReply:a}}function u(t){var n=new e.BroadcastChannel(t),r=new Set;n.addEventListener("message",function(e){r.forEach(function(t){t(e)})});var o=function(t){r.add(t)},a=function(t){r.delete(t)},i=function(t){n.postMessage(JSON.stringify(t))},l=function(t){return t!=null&&typeof t.data=="string"?JSON.parse(t.data):null};return{getMessage:l,onRequestReceived:function(t){var e=function(n){var e=l(n);e!=null&&t(e)};return o(e),{release:function(){a(e)}}},sendMessage:i,stopWaitingForReply:a,waitForReply:o}}function c(t){return e.BroadcastChannel!=null?u(t):s(t)}l.getChannel=c}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){var n=this;this.$2=null,this.$5=function(e){var t=n.$4.getMessage(e);t!=null&&t.a==="sb"&&t.t!==n.tabID()&&t.r===n.tabID()&&t.k!=null&&(n.$2&&n.$2(t.k),n.$4.stopWaitingForReply(n.$5),n.$2=null)},this.$1=e,this.$3=t!=null?t:500,this.$4=o("MWTabCommunicationChannel").getChannel(e)}var a=t.prototype;return a.tabID=function(){return r("pageID")},a.$6=function(){var e={a:"r",t:this.tabID()};this.$4.sendMessage(e)},a.listenToRequest=function(r){return this.listenToRequestAsync(function(){return(e||(e=n("Promise"))).resolve(r())})},a.listenToRequestAsync=function(t){var e=this,n=function(o){o.a==="r"&&o.t!==e.tabID()&&r("promiseDone")(t().then(function(t){var n={a:"sb",k:t,r:o.t,t:e.tabID()};e.$4.sendMessage(n)}))};return this.$4.onRequestReceived(n)},a.$7=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.$2=e,t.$4.waitForReply(t.$5),t.$6()})},a.request=function(o,a){var t=this,i,l=function(){i!=null&&r("clearTimeout")(i)};return(e||(e=n("Promise"))).race([this.$7().then(function(e){return t.$4.stopWaitingForReply(t.$5),o(e)}),new e(function(e){i=r("setTimeout")(function(){e(a()),t.$4.stopWaitingForReply(t.$5)},t.$3)})]).then(function(e){return l(),e})},t})();l.MWTabCommunication=s}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","Promise","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(){return{accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION}},c={global_ear:u(),maw_ear:u()},d=null,m=(function(){var e=Object.keys(c).reduce(function(e,t){return e[t]="none",e},{});return{get:function(n){return e[n]},is:function(n,r){return e[n]===r},set:function(n,r){var t;e[n]=r,(t=d)==null||t.updateState()}}})();function p(e){c[e]=u(),m.set(e,"none")}function _(e,t){m.set(e,t)}function f(e){for(var t=o("Random").uint32();e.some(function(e){return e.randomisedVersion===t});)t=o("Random").uint32();return t}var g={global_ear:function(){return null},maw_ear:function(){return null}},h=function(t){return g[t]()},y=function(t,n){g[t]=function(){return n}},C=function(t,n){y(t,n),k(t).dbReady.resolve()},b={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},v=r("memoizeOneWithArgs")(function(e,t){return new(o("MWTabCommunication")).MWTabCommunication("ear_keys_"+t+"_"+e)});function S(e,t,n){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a;if(n===void 0&&(n=U),r("gkx")("9396")&&r("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",e),d=B(e),m.is(e,"success")&&k(e).databaseEncryptionKeys.size!==0)return o("WAResultOrError").makeResult(E(e));var i=o("MAWCurrentUser").getID(),l=r("ReStoreTabNotifier")("channel-ear-keychain-v3-"+i);l.onEventReceive("notifyEarKeychainV2",w);var u=(s||(s=r("ExecutionEnvironment"))).isInWorker?"Worker":"UI";n(e+"_ear_init_start",{string:(a={},a["initFlow_"+e+"_"+u]=t,a)});try{var c,p=yield W(l,e,void 0,n);n(e+"_ear_import_end");for(var _ of p)k(e).databaseEncryptionKeys.set(_.result.version,{dbEntry:_.entry,keys:_.result.keys});return M(e),v(e,i).listenToRequest(function(){return JSON.stringify(Array.from(k(e).databaseEncryptionKeys.entries()).map(function(e){var t=e[0],n=e[1],r=n.dbEntry,a=n.keys;return[t,{dbEntry:r,keys:a.map(function(e){return o("WAArrayBufferUtils").arrayBufferToString(e)})}]}))}),n(e+"_ear_init_end",{string_array:(c={},c[e+"_randomisedVersionKeys"+u]=L(e).map(function(e){var t=e[0],n=e[1].dbEntry;return String(n.randomisedVersion)}),c)}),m.set(e,"success"),o("WAResultOrError").makeResult(E(e))}catch(t){return m.set(e,"failure"),n(e+"_ear_init_error"),r("gkx")("9396")&&r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",e),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",r("getErrorSafe")(t))}}),R.apply(this,arguments)}function L(e){return Array.from(k(e).databaseEncryptionKeys.entries())}function E(e){return k(e).latestVersion}function k(e){return c[e]}function I(e,t){var n=t!=null?t:E(e),a=k(e).databaseEncryptionKeys.get(n);if(a==null){r("promiseDone")($(e).then(function(e){var t=e.map(function(e){return e.version}).includes(n);r("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",t,n,e.length)}));var i=E(e),l=Array.from(k(e).databaseEncryptionKeys.keys());throw r("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",n,i,k(e).databaseEncryptionKeys.get(i)==null,k(e).databaseEncryptionKeys.size,Math.max.apply(Math,l),m.get(e),(s||(s=r("ExecutionEnvironment"))).isInWorker),new(o("MWEARKeychainV3Errors")).EARKeychainNotFoundError("EAR Key "+n+" was null.")}return{dbEntry:a.dbEntry,keys:a.keys,randomisedVersion:a.dbEntry.randomisedVersion,version:n}}function T(e){return r("MAWGenKeychainCryptoKeyWithVersion")(e.key,e.seed,e.version,e.formatVersion,e.accountKeyString,e.userKeyBaseString,e.appIdOrigin)}var D=n("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function x(e){if(e.length===0)return{reason:D.NO_KEY,result:!0};var t=e[e.length-1];return o("WATimeUtils").isInFuture(t.expiration)?{result:!1}:{reason:D.EXPIRED_KEY,result:!0}}function $(t){var r=N(t,"readonly");return new(e||(e=n("Promise")))(function(e,n){r.onabort=function(){return n(r.error)},r.onerror=function(){return n(r.error)};var o=r.objectStore(b[t]).getAll();o.onsuccess=function(){return e(o.result)},o.onerror=function(){return n(o.error)}}).then(P)}function P(e){var t=e.find(function(e){return e.version==null});t!=null&&r("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",t.id==null,t.key==null,t.seed==null,t.formatVersion==null,t.accountKeyString==null,t.userKeyBaseString==null);var n=e.filter(function(e){return e.version!=null});return n.sort(function(e,t){return e.version-t.version})}function N(e,t){var n=h(e);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",e);return n.transaction(b[e],t,{durability:"strict"})}var M=function(t){var e=Array.from(k(t).databaseEncryptionKeys.keys());e.length>0?k(t).latestVersion=Math.max.apply(Math,e):r("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},w=function(t){var e=t.namespace,o=t.version;r("promiseDone")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{r("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",e),yield k(e).dbReady.getPromise();var t=(yield $(e)).find(function(e){return e.version===o});if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var n=yield T(t);k(e).databaseEncryptionKeys.set(n.version,{dbEntry:t,keys:n.keys}),M(e),r("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",e)}catch(t){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(s||(s=r("ExecutionEnvironment"))).isInWorker,e)}})())};function A(e){return m.get(e)!=="none"}function F(e){return m.get(e)}function O(e){return m.is(e,"success")?(k(e).databaseEncryptionKeys.size===0&&r("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present"),!0):!1}function B(e){return o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:O(e).toString(),latestVersion:E(e).toString()},reason:m.get(e),state:(function(){switch(m.get(e)){case"none":return o("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return o("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return o("MAWReliabilityMonitor").HealthReportState.ERROR;default:return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN}})()}})}function W(e,t,n,r){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,o,a,i){var l=yield r("MAWEARGenNewKeychainCryptoKey")();i(o+"_ear_raw_key_generated");var u=yield new(e||(e=n("Promise")))(function(e,n){var u=N(o,"readwrite");u.onerror=function(){return n(u.error)},u.onabort=function(){return n(u.error)};var c=u.objectStore(b[o]).getAll();c.onerror=function(){return n(c.error)},c.onsuccess=function(){var d;i(o+"_ear_keys_fetched");var m=P(c.result),p=x(m),_=p.reason,g=p.result;if((a==null?void 0:a.forceKeyRotation)!==!0&&!g)return e(m);var h=(a==null?void 0:a.forceKeyRotation)===!0?D.FORCE_KEY_ROTATION:_!=null?_:D.UNKNOWN,y=m.map(function(e){return e.version}),C=(d=y[y.length-1])!=null?d:0;r("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",y.toString(),C,o,(s||(s=r("ExecutionEnvironment"))).isInWorker);var v=babelHelpers.extends({},l,{randomisedVersion:f(m),source:h,version:C+1});i(o+"_ear_adding_new_key"),u.oncomplete=function(){m.push(babelHelpers.extends({},v,{id:v.version})),t.postMessage("notifyEarKeychainV2",{namespace:o,version:v.version}),i(o+"_ear_gen_key_end"),e(m)};var S=u.objectStore(b[o]).add(v);S.onerror=function(){return n(r("FBLogger")("messenger_web").catching(S.error).mustfixThrow("Failed to rotate EAR key"))}}});i(o+"_ear_import_start");var c=yield e.allSettled(u.map(function(e){return T(e).then(function(t){return{entry:e,result:t}})})),d=c[c.length-1];if(d.status==="rejected"){var m,p=(m=a==null?void 0:a.corruptedEARRetryCount)!=null?m:0;if(p>=1)throw d.reason;return W(t,o,{corruptedEARRetryCount:p+1,forceKeyRotation:!0},i)}return c.map(function(e){if(e.status==="fulfilled")return e.value}).filter(Boolean)}),q.apply(this,arguments)}var U=function(t,n){o("LSPlatformLsInitLog").addPoint(t,n),V(t,n)},V=function(t,n){var e=r("qpl")._(25310776,"6155");(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(e,"backend_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(e,"ui_"+t),n!=null&&r("QPLUserFlow").addAnnotations(e,n))},H=function(t,n){return v(t,n).request(function(e){var n=JSON.parse(e);return n.forEach(function(e){var n=e[0],r=e[1],a=r.keys.map(o("WAArrayBufferUtils").stringToArrayBuffer);k(t).databaseEncryptionKeys.set(n,{dbEntry:r.dbEntry,keys:a})}),M(t),m.set(t,"success"),!0},function(){return!1})};l.InitStatus=m,l.resetKeychain__TEST_ONLY_DO_NOT_USE=p,l.setInitStatus__TEST_ONLY_DO_NOT_USE=_,l.generateNewRandomisedVersionNumber=f,l.setNamespaceSourceDbWithoutMarkingDbReady=y,l.setNamespaceSourceDbAndMarkAsReady=C,l.getEncryptionKeysTabCommunication=v,l.init=S,l.getLatestVersion=E,l.getKeychain=k,l.getDbEncryptionKey=I,l.isKeychainSettled=A,l.getKeychainInitStatus=F,l.isKeychainInitialised=O,l.logMawInitPoint=V,l.importKeysFromOtherTab=H}),98);
__d("MAWDbObjEncryption",["ExecutionEnvironment","FBLogger","MAWBridge","MAWCryptoConsts","MAWDbEncryptObjContent","MAWDbObjDecode","MAWDbObjEncode","MAWDexieTable","MAWIndexedDb","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWKeychainUtil","MAWMpsMigrationRunningState","MAWQplProxy","MAWUnrecoverableDbErrors","MWEARKeychainV3","MWEARKeychainV3Errors","ODS","WABase64","WATimeUtils","getErrorSafe","gkx","isEncryptionAtRestEnabled","justknobx","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="_encryptedContent",c=new Set(["threads","messages","participants"]);function d(e,t,n){if(!(r("isEncryptionAtRestEnabled")()||r("gkx")("23910")===!0)||!o("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(t))return e;var a=o("MAWQplProxy").startQplUserFlow(r("qpl")._(25300256,"115"),{bool:{isWorker:(s||(s=r("ExecutionEnvironment"))).isInWorker,useMawEar:o("MWEARKeychainV3").isKeychainSettled("maw_ear")},string:{pageID:r("pageID"),tableName:t}});try{var i=babelHelpers.extends({},e),l=n(o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear"),d=l.keys,m=d[0],p=l.version,_=l.randomisedVersion;o("MWEARKeychainV3").isKeychainSettled("maw_ear")===!1&&r("FBLogger")("messenger_web").mustfix("[EAR] Encrypting %s data with global ear. Transactor: %s",t,o("MAWDexieTable").getDexiePSDItem("transactorName")),a.addAnnotations({int:{keyVersion:p,randomisedVersion:_}});var f=o("MAWKeychainUtil").makeAAD(p,o("MAWCryptoConsts").CIPHER_ID),g=o("MAWDbObjEncode").encodeDbObj(e,t),h=g.encodedFields,y=g.proto;Object.keys(h).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&delete i[t]});var C=o("MAWDbEncryptObjContent").encryptContent(m,y,f);return i[u]=C,c.has(t)&&(i.updatedAt_S456130=Date.now(),i.randomisedVersion_S456130=_,i.encryptedWith_S456130=o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear",i.keyVersion_S456130=p),a==null||a.endSuccess(),i}catch(e){var b=r("getErrorSafe")(e);throw a==null||a.endFail("ear_encrypt_fail"),r("FBLogger")("messenger_web").catching(b).mustfixThrow("[%s] %s - Encrypted dexie was unable to encrypt an entity for table %s",b.name,b.message,t)}}function m(t,n,a){if(!o("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(n)||!Object.prototype.hasOwnProperty.call(t,u))return t;var i=(s||(s=r("ExecutionEnvironment"))).isInMainThread&&r("justknobx")._("3378")?null:o("MAWQplProxy").startQplUserFlow(r("qpl")._(25313004,"118"));i==null||i.addAnnotations({bool:{isWorker:(s||(s=r("ExecutionEnvironment"))).isInWorker,useMawEar:o("MWEARKeychainV3").isKeychainSettled("maw_ear")},string:{pageID:r("pageID"),tableName:n}});var l;try{var d=t[u],m=babelHelpers.extends({},t);(e||(e=o("ODS"))).bumpEntityKey(3185,"maw_db_ear_decryption","encrypted_content_type."+n+"."+(d instanceof ArrayBuffer?"ArrayBuffer":"string"));var f=d instanceof ArrayBuffer?d:o("WABase64").decodeB64(d),g=o("MAWKeychainCrypto").getKeyVersionFromCipherDataString(f),h=g.aadLengthInBytes,y=g.keyVersion,C=a(o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear",y);l=C;var b=C.dbEntry,v=C.keys,S=C.randomisedVersion;i==null||i.addAnnotations({int:{contentVersion:t==null?void 0:t.keyVersion_S456130,keyVersion:y,randomisedVersion:S},string:{encryptedWith:t==null?void 0:t.encryptedWith_S456130,randomisedVersionEncryption:t==null?void 0:t.randomisedVersion_S456130}});var R={},L,E;for(var k of v)try{L=o("MAWKeychainNaClCrypto").decryptArrayBuffer(k,f,y,b.formatVersion,h);break}catch(e){E=e}if(L==null)throw r("getErrorSafe")(E);var I=o("MAWDbObjDecode").decodeDbObj(L,n);Object.keys(I).forEach(function(e){R[e]=I[e]}),delete m[u];var T=babelHelpers.extends({},m,R);return i==null||i.endSuccess(),T}catch(e){var D,x,$;if(c.has(n)){var P;i==null||i.addAnnotations({int:{updatedAt:(P=t==null?void 0:t.updatedAt_S456130)!=null?P:-1}})}if((e instanceof o("MAWKeychainNaClCrypto").EARDecryptionError||e instanceof o("MWEARKeychainV3Errors").EARKeychainNotFoundError)&&o("MAWMpsMigrationRunningState").isMawMpsMigrationRunning()){i==null||i.addAnnotations({bool:{earDecryptionErrorSuppressed:!0}}),r("FBLogger")("messenger_web").mustfix("[EAR] Ignoring EAR decryption error during MAW->MPS migration. Table: %s.",n);return}(s||(s=r("ExecutionEnvironment"))).isInWorker&&(e instanceof o("MAWKeychainNaClCrypto").EARDecryptionError||e instanceof o("MWEARKeychainV3Errors").EARKeychainNotFoundError)&&(r("FBLogger")("messenger_web").mustfix("[EAR] Encountered EAR Error - submitting unrecoverableDbError. Table: %s.",n),i==null||i.addAnnotations({bool:{unrecoverableDbError:!0}}),o("MAWBridge").getBridge().fireAndForget("event","unrecoverableDbError",{error:new(o("MAWUnrecoverableDbErrors")).EarRuntimeError}));var N=r("getErrorSafe")(e);throw i==null||i.markError("ear_decrypt_exception",null,N),i==null||i.endFail("ear_decrypt_fail"),r("FBLogger")("messenger_web").catching(N).mustfixThrow("[%s] %s - (v2) Encrypted dexie was unable to decrypt an entity for table %s. UpdatedAt: %s. KeyStatus: %s. Signature matches: %s. Key source: %s. Using MAW EAR: %s. Worker: %s. Encrypted With: %s. PageID: %s. Source: %s",N.name,N.message,n,p(t==null?void 0:t.updatedAt_S456130),_(t,l),(t==null?void 0:t.randomisedVersion_S456130)!=null&&((D=l)==null?void 0:D.randomisedVersion)!=null?t.randomisedVersion_S456130===l.randomisedVersion:null,(x=($=l)==null?void 0:$.dbEntry.source)!=null?x:"-1",o("MWEARKeychainV3").isKeychainSettled("maw_ear"),(s||(s=r("ExecutionEnvironment"))).isInWorker,t==null?void 0:t.encryptedWith_S456130,r("pageID"),o("MAWDexieTable").getDexiePSDItem("transactorName"))}}function p(e){if(e==null)return"unknown";var t=Date.now()-e,n=Math.floor(t/(1e3*60*60*24));return n<1?"0-1 days":n<7?"1-7 days":n<14?"7-14 days":n<30?"14-30 days":"30+ days"}function _(e,t){if((e==null?void 0:e.updatedAt_S456130)==null||t==null)return null;var n=o("WATimeUtils").castToUnixTime(e.updatedAt_S456130/1e3),r=t.dbEntry.expiration-o("MAWCryptoConsts").ENC_KEY_TTL;return n===r?"same":n>r?"key_older":"key_newer"}l.ENCRYPTED_COLUMN_NAME=u,l.encryptDbObj=d,l.decryptDbObj=m}),98);
__d("MAWHMACKey",["MAWCryptoConsts","MAWDbMsgTypeVersionTxns","MAWIndexedDb","MAWKeychainUtil","MAWSubtleCrypto","MAWTransactionMode","WABase64","tweetnacl-auth"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWKeychainUtil").getBufferWithRandomValuesFromLength(o("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES);return c(e).then(function(e){return o("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",e)})}function s(e,t){var n=new TextEncoder().encode(e),a=new Uint8Array(t),i=r("tweetnacl-auth")(n,a);return o("WABase64").encodeB64UrlSafe(i)}function u(){return e().then(function(e){return o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READWRITE},"generateAndInsertHMACKey",function(t){return function(){return o("MAWDbMsgTypeVersionTxns").getHMACKey(t).then(function(n){return n!=null?n:o("MAWDbMsgTypeVersionTxns").addHMACKey(t,e).then(function(){return e})})}})()})}function c(e){return o("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",e,{hash:"SHA-256",name:"HMAC"},!0,["sign"])}l.genHMACKey=e,l.hmacTweetNaCl=s,l.generateAndInsertHMACKey=u}),98);
__d("WAMsgIdToMessageKey",["WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.externalId,r=e.chat,a=o("WAJids").isAuthorMe(t),i=o("WAJids").interpretAsGroupJid(r),l=a?o("WAGlobals").getMyUserJid():t,s=r,u=i!=null?l:void 0;return{fromMe:a,id:n,remoteJid:s,participant:u}}l.msgIdToMessageKey=e}),98);
__d("WAAsConsumerApplication",["WAAssertUnreachable","WAConsumerApplication.pb","WAMsgIdToMessageKey","WAMsgType","err"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="video/mp4",u="audio/wav",c="image/gif",d="image/webp";function m(e){switch(e.type){case o("WAMsgType").MSG_TYPE.TEXT:return p(e);case o("WAMsgType").MSG_TYPE.REACTION:return _(e);case o("WAMsgType").MSG_TYPE.REVOKED:return f(e);default:return r("WAAssertUnreachable")(e.type)}}function p(e){var t={payload:{content:{messageText:{mentionedJid:[],text:e.msgContent.content}}}};if(e.specialTextSize!=null){var n=e.specialTextSize===1?o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.SMALL:e.specialTextSize===2?o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.MEDIUM:o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.LARGE;t.metadata={specialTextSize:n}}return t}function _(e){if(e.reactToMsgId==null)throw r("err")("cannot send reaction that reacts to no message");var t=o("WAMsgIdToMessageKey").msgIdToMessageKey(e.reactToMsgId),n={groupingKey:e.groupingKey==null?void 0:e.groupingKey,key:t,senderTimestampMs:e.ts,text:e.reaction==null?void 0:e.reaction};return{payload:{content:{reactionMessage:n}}}}function f(e){var t={remoteJid:e.id.chat,fromMe:!0,id:e.revokedExternalId};return{payload:{applicationData:{revoke:{key:t}}}}}l.IMAGE_MIME_TYPE=e,l.VIDEO_MIME_TYPE=s,l.AUDIO_MIME_TYPE=u,l.GIF_MIME_TYPE=c,l.STICKER_MIME_TYPE=d,l.asConsumerApplication=m,l.encodeTextMessage=p,l.encodeReactionMessage=_}),98);
__d("MAWMediaUtils",["FBLogger","MAWDbMedia","MAWDexieTable","MAWHMACKey","MAWImageUtils","MAWMsgType","WAAsConsumerApplication","WABlobToArrayBuffer","WAGlobals","WAHashUtils","WAMsgType","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t===void 0&&(t="media"),e){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:return t==="xma-media"?"xma-image":"image";case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return"video";case o("MAWDbMedia").MEDIA_TYPE.PTT:return"ptt";case o("MAWDbMedia").MEDIA_TYPE.GIF:return"gif";case o("MAWDbMedia").MEDIA_TYPE.STICKER:return"sticker";case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return"document";default:throw r("FBLogger")("messenger_web").mustfixThrow("get a wrong media file with type %s",e)}}function s(e){try{return o("WABlobToArrayBuffer").blobToArrayBuffer(e).then(u)}catch(e){var t=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("Got %s when convert the blob to Uint8Array",t.message)}}function u(e){return self.crypto.subtle.digest("SHA-256",e).then(function(e){return new Uint8Array(e)})}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield s(e),n=o("WAHashUtils").toPlaintextHash(t),r=_(n);return[n,r]}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield u(e),n=o("WAHashUtils").toPlaintextHash(t);return n}),p.apply(this,arguments)}function _(e){var t=o("WAGlobals").getHMACKey();return o("WAHashUtils").toHashedPlaintextHash(o("MAWHMACKey").hmacTweetNaCl(e,t))}function f(e){if(e==null)return null;var t="preview-"+o("WATimeUtils").unixTime().toString()+".jpeg";return g(e,t,"image/jpeg")}function g(e,t,n){return new File([new Blob([new Uint8Array(e)],{type:n})],t,{type:n})}function h(e,t,n){var r=function(){return n!=null?o("MAWDexieTable").dexieResolve(n.filter(function(e){return e.type!==o("WAMsgType").REVOKED&&t.msgIds.includes(e.msgId)})):e.messages.where("msgId").anyOf(t.msgIds).filter(function(e){return e.type!==o("WAMsgType").REVOKED}).toArray()};return r().then(function(e){return C(t,e)})}function y(e){return e.reduce(function(e,t){var n=t.hdType;return n!=null&&(e[t.msgId]=n),e},{})}function C(e,t){var n=t.filter(function(t){return t.type!==o("WAMsgType").REVOKED&&e.msgIds.includes(t.msgId)}),a=n.map(function(e){return e.msgId}),i=babelHelpers.extends({},e,{msgIds:a}),l=n.reduce(function(e,t){return e[t.msgId]=o("WATimeUtils").castToMillisTime(t.sortOrderMs!=null?t.sortOrderMs:t.ts*1e3),e},{});if(i=babelHelpers.extends({},i,{messagesSortOrderMs:l}),n.every(function(e){return e.type===o("WAMsgType").STICKER})){var s=o("MAWImageUtils").boundHeightWidth(i.previewHeight,i.previewWidth,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),u=s.height,c=s.width;i=babelHelpers.extends({},i,{mediaType:o("MAWDbMedia").MEDIA_TYPE.STICKER,previewHeight:u,previewHeightLarge:u,previewWidth:c,previewWidthLarge:c})}var d=new Set(n.map(function(e){return e.type}));return d.forEach(function(t){t!==o("MAWMsgType").MSG_TYPE.RAVEN&&e.mediaType!==b(t)&&r("FBLogger")("messenger_web").mustfix("Message and media type mismatch: message with type %s is associated with media with type %s",t,e.mediaType)}),i}function b(e){switch(e){case o("MAWMsgType").MSG_TYPE.IMAGE:return o("MAWDbMedia").MEDIA_TYPE.IMAGE;case o("MAWMsgType").MSG_TYPE.VIDEO:return o("MAWDbMedia").MEDIA_TYPE.VIDEO;case o("MAWMsgType").MSG_TYPE.PTT:return o("MAWDbMedia").MEDIA_TYPE.PTT;case o("MAWMsgType").MSG_TYPE.GIF:return o("MAWDbMedia").MEDIA_TYPE.GIF;case o("MAWMsgType").MSG_TYPE.STICKER:return o("MAWDbMedia").MEDIA_TYPE.STICKER;case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE}}function v(e){var t,n,a=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0,i=((n=e.integral)==null||(n=n.transport)==null||(n=n.ancillary)==null?void 0:n.mimetype)===o("WAAsConsumerApplication").GIF_MIME_TYPE,l=!r("gkx")("5398");return a&&(l||i)}l.getServerMediaTypeFromMediaType=e,l.hashBlob=s,l.hashArrayBuffer=u,l.genBlobHashes=c,l.genHashFromArrayBuffer=m,l.genHMACPlaintextHash=_,l.convertJpegThumbnailArrayBufferToFile=f,l.getBridgeMediaAnnotatedForDisplay=h,l.createHdTypesForBridgeMedia=y,l.annotateBridgeMediaForDisplay=C,l.getMediaTypeFromMsgType=b,l.isTransportLegacyGif=v}),98);
__d("mergeMaps",[],(function(t,n,r,o,a,i){"use strict";function e(){for(var e=new Map,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++)for(var a=n[o].keys(),i=void 0;!(i=a.next()).done;)e.set(i.value,n[o].get(i.value));return e}i.default=e}),66);
__d("MpsPreprocessor",["Promise","WAGetSafeQPLError","mergeMaps"],(function(t,n,r,o,a,i,l){"use strict";var e=["errors"],s;function u(t,a){return function(r){r.ctx.messageToQpl.all().addPoint(a+"_start");var o=r.errors,l=babelHelpers.objectWithoutPropertiesLoose(r,e),u=t(l);return u instanceof(s||(s=n("Promise")))?u.then(function(e){return i(e,o!=null?o:new Map)}):i(u,o!=null?o:new Map)};function i(e,t){return e.ctx.messageToQpl.all().addPoint(a+"_end"),e.errors.entries().forEach(function(t){var n=t[0],r=t[1];e.ctx.messageToQpl.endFail(n,a.toLowerCase()+"-error",o("WAGetSafeQPLError").getSafeQPLErrorMessage(r))}),babelHelpers.extends({},e,{errors:r("mergeMaps")(t,e.errors)})}}l.preprocessor=u}),98);
__d("MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor",["MAWDbMsgTypeVersionTxns","MAWProtobufDeserializers","MpsPreprocessor","WAGlobals","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(t){e=t}var u=o("MpsPreprocessor").preprocessor((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.ctx,r=t.payloadList,a=new Map,i=[];for(var l of r){var s,u,c=l.directive,d=l.insertionSource,m=l.message,p=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(m.payload),_=(s=p.payload().proto)==null||(s=s.event)==null?void 0:s.deviceChange;if(_==null){i.push({directive:c,insertionSource:d,message:m});continue}((u=p.proto.metadata)==null?void 0:u.senderId)!==o("WAGlobals").getMyUserJid()&&(e===null&&(e=yield o("MAWDbMsgTypeVersionTxns").getSecuritySettingForContactTxn()),e===!0&&i.push({directive:c,insertionSource:d,message:m}))}return{ctx:n,errors:a,payloadList:i}});return function(e){return t.apply(this,arguments)}})(),"maybe_drop_security_alerts");l.setCachedShouldSaveSecurityAlert=s,l.MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor=u}),98);
__d("MAWEBCombinedSwitch",["MAWEBEnabledStateManager","MAWEBLSInWorkerSwitch","MAWEBSwitch","MAWODSProxy","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.$MAWCombinedStateManager$p_1=t,r.$MAWCombinedStateManager$p_2=n,r.$MAWCombinedStateManager$p_3=null,r.$MAWCombinedStateManager$p_4=!1,r.$MAWCombinedStateManager$p_1.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_2.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_5(),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isEnabled=function(){var t=e.prototype.isEnabled.call(this);return this.$MAWCombinedStateManager$p_6(),t},n.$MAWCombinedStateManager$p_6=function(){var e=this.$MAWCombinedStateManager$p_1.isEnabled(),t=this.$MAWCombinedStateManager$p_2.isEnabled(),n=e!==t,r=e?"enabled":"disabled",a=t?"enabled":"disabled",i=n?"mismatch":"match";if(n&&!this.$MAWCombinedStateManager$p_4)this.$MAWCombinedStateManager$p_3=Date.now(),this.$MAWCombinedStateManager$p_4=!0;else if(this.$MAWCombinedStateManager$p_4&&this.$MAWCombinedStateManager$p_3!=null){var l=this.$MAWCombinedStateManager$p_3,s=Date.now()-l;this.$MAWCombinedStateManager$p_4=n,this.$MAWCombinedStateManager$p_3=n?Date.now():null;var u=this.$MAWCombinedStateManager$p_7(s);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.duration_bucket."+u});var c=n?"failed":"success";o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.result."+c})}o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch."+i+"."+r+"."+a})},n.$MAWCombinedStateManager$p_7=function(t){return t<100?"under_100ms":t<500?"100_to_500ms":t<1e3?"500ms_to_1s":t<5e3?"1s_to_5s":t<1e4?"5s_to_10s":"over_10s"},n.$MAWCombinedStateManager$p_5=function(){this.set(this.$MAWCombinedStateManager$p_1.isEnabled()&&this.$MAWCombinedStateManager$p_2.isEnabled()),this.$MAWCombinedStateManager$p_6()},t})(o("MAWEBEnabledStateManager").MAWEBEnabledStateManager),s=new e(r("MAWEBSwitch"),r("MAWEBLSInWorkerSwitch"));l.MAWCombinedStateManager=e,l.MAWEBCombinedSwitch=s}),98);
__d("WADbDeviceRegistration",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=25,s=6,u=s,c="https://reg-e2ee.facebook.com",d=r("gkx")("13108")?"https://reg-e2ee.messenger.com":c,m="https://v.whatsapp.net",p="https://reg-e2ee.instagram.com",_="/v2/fb_icdc_fetch",f="/v2/fb_register_v2",g="Device has already been registered to WA servers",h="Device registration finished successfully",y="Device registration retries failed "+s+" times. No longer attempting registration.",C="Device registration response was null",b="Current user id is zero",v="CryptoAuthToken is empty",S="CryptoAuthToken is expired",R={failed:"failed",finished:"finished"};l.MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE=e,l.MAX_DEVICE_REGISTRATION_RETRIES=s,l.MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES=u,l.REG_FB_DOMAIN=c,l.REG_MSGR_DOMAIN=d,l.REG_WA_DOMAIN=m,l.REG_IGD_DOMAIN=p,l.ICDC_ENDPOINT=_,l.REGISTRATION_ENDPOINT=f,l.DEVICE_ALREADY_REGISTERED=g,l.DEVICE_SUCCESSFULLY_REGISTERED=h,l.FAILED_REGISTRATION_RETRIES=y,l.NULL_RESPONSE_FROM_SERVER=C,l.DEVICE_REGISTER_ERROR_ZERO_AS_USER_ID=b,l.DEVICE_REGISTER_ERROR_EMPTY_CAT_TOKEN=v,l.DEVICE_REGISTER_ERROR_EXPIRED_CAT_TOKEN=S,l.RegistrationStatesEnum=R}),98);
__d("WAGetPlatformFromStanzaId",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{var n=31,r=BigInt(n<<17),a=BigInt(0),i=BigInt(1<<17),l=BigInt(t)&r;return l===a?"web":l===i?"mobile":"unknown"}catch(n){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""])),t,n),"error"}}l.getPlatformFromStanzaId=s}),98);
__d("WASmaxInPreKeysRotateSignedResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysRequestErrors").parseRequestErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRequestErrors:i.value})):i}l.parseRotateSignedResponseRequestError=e}),98);
__d("WASmaxInPreKeysRotateSignedResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysServerErrors").parseServerErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorServerErrors:i.value})):i}l.parseRotateSignedResponseServerError=e}),98);
__d("WASmaxInPreKeysRotateSignedResponseSuccess",["WASmaxInPreKeysIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(e,t);return r.success,r}l.parseRotateSignedResponseSuccess=e}),98);
__d("WASmaxInPreKeysRotateSignedResponseValidationError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxParseUtils").attrString(r.value,"text");if(!a.success)return a;var i=o("WASmaxParseUtils").attrIntRange(r.value,"code",400,499);if(!i.success)return i;var l=o("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(r.value);if(!l.success)return l;var s=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return s.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorText:a.value,errorCode:i.value,errorIdentityKeyMixin:l.value},s.value)):s}l.parseRotateSignedResponseValidationError=e}),98);
__d("WASmaxOutPreKeysRotateSignedRequest",["WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WASmaxOutPreKeysSignedPreKeyMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=e.signedPreKeyMixinArgs,n=o("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(o("WASmaxJsx").smax("iq",{type:"set"},o("WASmaxOutPreKeysSignedPreKeyMixin").mergeSignedPreKeyMixin(o("WASmaxJsx").smax("rotate",null),t)));return n}l.makeRotateSignedRequest=e}),98);
__d("WASmaxPreKeysRotateSignedRPC",["WAComms","WASmaxInPreKeysRotateSignedResponseRequestError","WASmaxInPreKeysRotateSignedResponseServerError","WASmaxInPreKeysRotateSignedResponseSuccess","WASmaxInPreKeysRotateSignedResponseValidationError","WASmaxOutPreKeysRotateSignedRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutPreKeysRotateSignedRequest").makeRotateSignedRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInPreKeysRotateSignedResponseSuccess").parseRotateSignedResponseSuccess(r,n);if(a.success)return{name:"RotateSignedResponseSuccess",value:a.value};var i=o("WASmaxInPreKeysRotateSignedResponseValidationError").parseRotateSignedResponseValidationError(r,n);if(i.success)return{name:"RotateSignedResponseValidationError",value:i.value};var l=o("WASmaxInPreKeysRotateSignedResponseRequestError").parseRotateSignedResponseRequestError(r,n);if(l.success)return{name:"RotateSignedResponseRequestError",value:l.value};var s=o("WASmaxInPreKeysRotateSignedResponseServerError").parseRotateSignedResponseServerError(r,n);if(s.success)return{name:"RotateSignedResponseServerError",value:s.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("RotateSigned",{Success:a,ValidationError:i,RequestError:l,ServerError:s}))}),s.apply(this,arguments)}l.sendRotateSignedRPC=e}),98);
__d("WARotateSignedPreKeyProtocol",["WACryptoManager","WAErrorMessage","WAGlobals","WAHandleFailureUtils","WAMakeSignedPreKeyMixin","WAResultOrError","WASmaxPreKeysRotateSignedRPC","WATagsLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p=o("WATagsLogger").TAGS(["rotateSignedPreKeyProtocol"]);function _(){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){p.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start generating skey..."])));try{var t=yield o("WAGlobals").getWaOneQueue().enqueue(function(e){var t=e.cryptoManager;return o("WACryptoManager").generateSignedPreKey(t)},{operationType:"generate_signed_prekey",flush:!0,afterInit:!0});p.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["generated skey. Start rotating skey..."])));var n=yield o("WASmaxPreKeysRotateSignedRPC").sendRotateSignedRPC({signedPreKeyMixinArgs:o("WAMakeSignedPreKeyMixin").makeSignedPreKeyMixin(t)});switch(n.name){case"RotateSignedResponseValidationError":{var r=n.value,a=r.errorCode,i=r.errorText,l=r.errorIdentityKeyMixin;return p.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["ValidationError: "," ",""])),a,i),o("WAResultOrError").makeError({type:"validation-error",identity:l.elementValue})}case"RotateSignedResponseRequestError":{var _=n.value.errorRequestErrors.value.code,f=n.value.errorRequestErrors.name;return p.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["RequestError: "," ",""])),_,f),o("WAResultOrError").makeError({type:"request-error"})}case"RotateSignedResponseServerError":{var g=n.value.errorServerErrors.value.code,h=n.value.errorServerErrors.name;return p.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["ServerError: "," ",""])),g,h),o("WAResultOrError").makeError({type:"server-error"})}default:return n.name,p.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["successfully rotated new skey"]))),o("WAResultOrError").makeResult()}}catch(e){var y=o("WAErrorMessage").maybeGetMessageFromError(e);if(y.includes("No lastSignedPrekeyId and registration"))return yield o("WAHandleFailureUtils").reregisterPhone(),o("WAResultOrError").makeError({type:"no-prekey-reregistered"});throw e}}),f.apply(this,arguments)}l.rotateSignedPreKeyProtocol=_}),98);
__d("WARotateSignedPreKey",["Promise","WAGenerateAndUploadPreKeys","WALoggerTag","WARotateSignedPreKeyProtocol","WATagsLogger","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WATagsLogger").TAGS([r("WALoggerTag").SignedPrekeyRotation,r("WALoggerTag").SignedPrekey]);function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("WARotateSignedPreKeyProtocol").rotateSignedPreKeyProtocol();if(!(a.success||a.error.type==="no-prekey-reregistered")){if(a.error.type==="validation-error")return d.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Signed prekey failed server validation. need to upload all keys."]))),o("WAGenerateAndUploadPreKeys").generateAndUploadPreKeys(null,{reason:"signed prekey failed server validation"}).catch(function(e){d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error while generating and uploading prekeys: ",""])),e)}),(c||(c=n("Promise"))).resolve();throw d.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["rotateSignedPreKey failed."]))),r("err")("rotateSignedPreKey RPC failed: "+a.error.type)}}),p.apply(this,arguments)}l.rotateSignedPreKey=m}),98);
__d("memoizeWithArgsLFUCache",["LFUCache"],(function(t,n,r,o,a,i,l){function e(e,t,n,o){var a;function i(){return a||(a=new(r("LFUCache"))(n)),a}function l(e){if(e===void 0)a=null;else{var t;(t=a)==null||t.delete(e)}}o&&o(l);var s=function(){var n=i(),r=t.apply(void 0,arguments);n.has(r)||n.set(r,e.apply(void 0,arguments));var o=n.get(r);return o};return s}l.default=e}),98);